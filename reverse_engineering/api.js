"use strict";var tOe=Object.create;var Ky=Object.defineProperty;var rOe=Object.getOwnPropertyDescriptor;var nOe=Object.getOwnPropertyNames;var iOe=Object.getPrototypeOf,sOe=Object.prototype.hasOwnProperty;var s=(e,t)=>Ky(e,"name",{value:t,configurable:!0});var De=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),bf=(e,t)=>{for(var r in t)Ky(e,r,{get:t[r],enumerable:!0})},cH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nOe(t))!sOe.call(e,i)&&i!==r&&Ky(e,i,{get:()=>t[i],enumerable:!(n=rOe(t,i))||n.enumerable});return e};var _r=(e,t,r)=>(r=e!=null?tOe(iOe(e)):{},cH(t||!e||!e.__esModule?Ky(r,"default",{value:e,enumerable:!0}):r,e)),mt=e=>cH(Ky({},"__esModule",{value:!0}),e);var dH=w((mw,lH)=>{(function(e,t){typeof mw=="object"&&typeof lH<"u"?t(mw):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.async={}))})(mw,function(e){"use strict";function t(I,...b){return(...R)=>I(...b,...R)}s(t,"apply");function r(I){return function(...b){var R=b.pop();return I.call(this,b,R)}}s(r,"initialParams");var n=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,o=typeof process=="object"&&typeof process.nextTick=="function";function a(I){setTimeout(I,0)}s(a,"fallback");function u(I){return(b,...R)=>I(()=>b(...R))}s(u,"wrap");var l;n?l=queueMicrotask:i?l=setImmediate:o?l=process.nextTick:l=a;var f=u(l);function h(I){return _(I)?function(...b){let R=b.pop(),M=I.apply(this,b);return p(M,R)}:r(function(b,R){var M;try{M=I.apply(this,b)}catch(k){return R(k)}if(M&&typeof M.then=="function")return p(M,R);R(null,M)})}s(h,"asyncify");function p(I,b){return I.then(R=>{g(b,null,R)},R=>{g(b,R&&(R instanceof Error||R.message)?R:new Error(R))})}s(p,"handlePromise");function g(I,b,R){try{I(b,R)}catch(M){f(k=>{throw k},M)}}s(g,"invokeCallback");function _(I){return I[Symbol.toStringTag]==="AsyncFunction"}s(_,"isAsync");function C(I){return I[Symbol.toStringTag]==="AsyncGenerator"}s(C,"isAsyncGenerator");function D(I){return typeof I[Symbol.asyncIterator]=="function"}s(D,"isAsyncIterable");function O(I){if(typeof I!="function")throw new Error("expected a function");return _(I)?h(I):I}s(O,"wrapAsync");function N(I,b){if(b||(b=I.length),!b)throw new Error("arity is undefined");function R(...M){return typeof M[b-1]=="function"?I.apply(this,M):new Promise((k,W)=>{M[b-1]=(V,...J)=>{if(V)return W(V);k(J.length>1?J:J[0])},I.apply(this,M)})}return s(R,"awaitable"),R}s(N,"awaitify");function F(I){return s(function(R,...M){return N(function(W){var V=this;return I(R,(J,ie)=>{O(J).apply(V,M.concat(ie))},W)})},"applyEach")}s(F,"applyEach$1");function x(I,b,R,M){b=b||[];var k=[],W=0,V=O(R);return I(b,(J,ie,de)=>{var at=W++;V(J,(Rt,Nt)=>{k[at]=Nt,de(Rt)})},J=>{M(J,k)})}s(x,"_asyncMap");function P(I){return I&&typeof I.length=="number"&&I.length>=0&&I.length%1===0}s(P,"isArrayLike");let X={};function G(I){function b(...R){if(I!==null){var M=I;I=null,M.apply(this,R)}}return s(b,"wrapper"),Object.assign(b,I),b}s(G,"once");function ue(I){return I[Symbol.iterator]&&I[Symbol.iterator]()}s(ue,"getIterator");function be(I){var b=-1,R=I.length;return s(function(){return++b<R?{value:I[b],key:b}:null},"next")}s(be,"createArrayIterator");function Q(I){var b=-1;return s(function(){var M=I.next();return M.done?null:(b++,{value:M.value,key:b})},"next")}s(Q,"createES2015Iterator");function Se(I){var b=I?Object.keys(I):[],R=-1,M=b.length;return s(function k(){var W=b[++R];return W==="__proto__"?k():R<M?{value:I[W],key:W}:null},"next")}s(Se,"createObjectIterator");function Ce(I){if(P(I))return be(I);var b=ue(I);return b?Q(b):Se(I)}s(Ce,"createIterator");function le(I){return function(...b){if(I===null)throw new Error("Callback was already called.");var R=I;I=null,R.apply(this,b)}}s(le,"onlyOnce");function ce(I,b,R,M){let k=!1,W=!1,V=!1,J=0,ie=0;function de(){J>=b||V||k||(V=!0,I.next().then(({value:Nt,done:Jn})=>{if(!(W||k)){if(V=!1,Jn){k=!0,J<=0&&M(null);return}J++,R(Nt,ie,at),ie++,de()}}).catch(Rt))}s(de,"replenish");function at(Nt,Jn){if(J-=1,!W){if(Nt)return Rt(Nt);if(Nt===!1){k=!0,W=!0;return}if(Jn===X||k&&J<=0)return k=!0,M(null);de()}}s(at,"iterateeCallback");function Rt(Nt){W||(V=!1,k=!0,M(Nt))}s(Rt,"handleError"),de()}s(ce,"asyncEachOfLimit");var ve=s(I=>(b,R,M)=>{if(M=G(M),I<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!b)return M(null);if(C(b))return ce(b,I,R,M);if(D(b))return ce(b[Symbol.asyncIterator](),I,R,M);var k=Ce(b),W=!1,V=!1,J=0,ie=!1;function de(Rt,Nt){if(!V)if(J-=1,Rt)W=!0,M(Rt);else if(Rt===!1)W=!0,V=!0;else{if(Nt===X||W&&J<=0)return W=!0,M(null);ie||at()}}s(de,"iterateeCallback");function at(){for(ie=!0;J<I&&!W;){var Rt=k();if(Rt===null){W=!0,J<=0&&M(null);return}J+=1,R(Rt.value,Rt.key,le(de))}ie=!1}s(at,"replenish"),at()},"eachOfLimit$2");function Pe(I,b,R,M){return ve(b)(I,O(R),M)}s(Pe,"eachOfLimit");var Ee=N(Pe,4);function Oe(I,b,R){R=G(R);var M=0,k=0,{length:W}=I,V=!1;W===0&&R(null);function J(ie,de){ie===!1&&(V=!0),V!==!0&&(ie?R(ie):(++k===W||de===X)&&R(null))}for(s(J,"iteratorCallback");M<W;M++)b(I[M],M,le(J))}s(Oe,"eachOfArrayLike");function dt(I,b,R){return Ee(I,1/0,b,R)}s(dt,"eachOfGeneric");function Fe(I,b,R){var M=P(I)?Oe:dt;return M(I,O(b),R)}s(Fe,"eachOf");var rt=N(Fe,3);function Kn(I,b,R){return x(rt,I,b,R)}s(Kn,"map");var Cr=N(Kn,3),Lr=F(Cr);function yn(I,b,R){return Ee(I,1,b,R)}s(yn,"eachOfSeries");var or=N(yn,3);function Li(I,b,R){return x(or,I,b,R)}s(Li,"mapSeries");var fn=N(Li,3),Mo=F(fn);let vn=Symbol("promiseCallback");function $t(){let I,b;function R(M,...k){if(M)return b(M);I(k.length>1?k:k[0])}return s(R,"callback"),R[vn]=new Promise((M,k)=>{I=M,b=k}),R}s($t,"promiseCallback");function Ui(I,b,R){typeof b!="number"&&(R=b,b=null),R=G(R||$t());var M=Object.keys(I).length;if(!M)return R(null);b||(b=M);var k={},W=0,V=!1,J=!1,ie=Object.create(null),de=[],at=[],Rt={};Object.keys(I).forEach(we=>{var Ke=I[we];if(!Array.isArray(Ke)){Nt(we,[Ke]),at.push(we);return}var At=Ke.slice(0,Ke.length-1),ur=At.length;if(ur===0){Nt(we,Ke),at.push(we);return}Rt[we]=ur,At.forEach(Ur=>{if(!I[Ur])throw new Error("async.auto task `"+we+"` has a non-existent dependency `"+Ur+"` in "+At.join(", "));zu(Ur,()=>{ur--,ur===0&&Nt(we,Ke)})})}),Mt(),Jn();function Nt(we,Ke){de.push(()=>Ol(we,Ke))}s(Nt,"enqueueTask");function Jn(){if(!V){if(de.length===0&&W===0)return R(null,k);for(;de.length&&W<b;){var we=de.shift();we()}}}s(Jn,"processQueue");function zu(we,Ke){var At=ie[we];At||(At=ie[we]=[]),At.push(Ke)}s(zu,"addListener");function Ea(we){var Ke=ie[we]||[];Ke.forEach(At=>At()),Jn()}s(Ea,"taskComplete");function Ol(we,Ke){if(!J){var At=le((Ur,...Qn)=>{if(W--,Ur===!1){V=!0;return}if(Qn.length<2&&([Qn]=Qn),Ur){var Ca={};if(Object.keys(k).forEach(wa=>{Ca[wa]=k[wa]}),Ca[we]=Qn,J=!0,ie=Object.create(null),V)return;R(Ur,Ca)}else k[we]=Qn,Ea(we)});W++;var ur=O(Ke[Ke.length-1]);Ke.length>1?ur(k,At):ur(At)}}s(Ol,"runTask");function Mt(){for(var we,Ke=0;at.length;)we=at.pop(),Ke++,qe(we).forEach(At=>{--Rt[At]===0&&at.push(At)});if(Ke!==M)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}s(Mt,"checkForDeadlocks");function qe(we){var Ke=[];return Object.keys(I).forEach(At=>{let ur=I[At];Array.isArray(ur)&&ur.indexOf(we)>=0&&Ke.push(At)}),Ke}return s(qe,"getDependents"),R[vn]}s(Ui,"auto");var Pr=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,Cs=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,hl=/,/,Pn=/(=.+)?(\s*)$/;function ma(I){let b="",R=0,M=I.indexOf("*/");for(;R<I.length;)if(I[R]==="/"&&I[R+1]==="/"){let k=I.indexOf(`
`,R);R=k===-1?I.length:k}else if(M!==-1&&I[R]==="/"&&I[R+1]==="*"){let k=I.indexOf("*/",R);k!==-1?(R=k+2,M=I.indexOf("*/",R)):(b+=I[R],R++)}else b+=I[R],R++;return b}s(ma,"stripComments");function kd(I){let b=ma(I.toString()),R=b.match(Pr);if(R||(R=b.match(Cs)),!R)throw new Error(`could not parse args in autoInject
Source:
`+b);let[,M]=R;return M.replace(/\s/g,"").split(hl).map(k=>k.replace(Pn,"").trim())}s(kd,"parseParams");function Xn(I,b){var R={};return Object.keys(I).forEach(M=>{var k=I[M],W,V=_(k),J=!V&&k.length===1||V&&k.length===0;if(Array.isArray(k))W=[...k],k=W.pop(),R[M]=W.concat(W.length>0?ie:k);else if(J)R[M]=k;else{if(W=kd(k),k.length===0&&!V&&W.length===0)throw new Error("autoInject task functions require explicit parameters.");V||W.pop(),R[M]=W.concat(ie)}function ie(de,at){var Rt=W.map(Nt=>de[Nt]);Rt.push(at),O(k)(...Rt)}s(ie,"newTask")}),Ui(R,b)}s(Xn,"autoInject");let df=class df{constructor(){this.head=this.tail=null,this.length=0}removeLink(b){return b.prev?b.prev.next=b.next:this.head=b.next,b.next?b.next.prev=b.prev:this.tail=b.prev,b.prev=b.next=null,this.length-=1,b}empty(){for(;this.head;)this.shift();return this}insertAfter(b,R){R.prev=b,R.next=b.next,b.next?b.next.prev=R:this.tail=R,b.next=R,this.length+=1}insertBefore(b,R){R.prev=b.prev,R.next=b,b.prev?b.prev.next=R:this.head=R,b.prev=R,this.length+=1}unshift(b){this.head?this.insertBefore(this.head,b):co(this,b)}push(b){this.tail?this.insertAfter(this.tail,b):co(this,b)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var b=this.head;b;)yield b.data,b=b.next}remove(b){for(var R=this.head;R;){var{next:M}=R;b(R)&&this.removeLink(R),R=M}return this}};s(df,"DLL");let hn=df;function co(I,b){I.length=1,I.head=I.tail=b}s(co,"setInitial");function Fo(I,b,R){if(b==null)b=1;else if(b===0)throw new RangeError("Concurrency must not be zero");var M=O(I),k=0,W=[];let V={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function J(qe,we){V[qe].push(we)}s(J,"on");function ie(qe,we){let Ke=s((...At)=>{de(qe,Ke),we(...At)},"handleAndRemove");V[qe].push(Ke)}s(ie,"once");function de(qe,we){if(!qe)return Object.keys(V).forEach(Ke=>V[Ke]=[]);if(!we)return V[qe]=[];V[qe]=V[qe].filter(Ke=>Ke!==we)}s(de,"off");function at(qe,...we){V[qe].forEach(Ke=>Ke(...we))}s(at,"trigger");var Rt=!1;function Nt(qe,we,Ke,At){if(At!=null&&typeof At!="function")throw new Error("task callback must be a function");Mt.started=!0;var ur,Ur;function Qn(wa,...ba){if(wa)return Ke?Ur(wa):ur();if(ba.length<=1)return ur(ba[0]);ur(ba)}s(Qn,"promiseCallback");var Ca=Mt._createTaskItem(qe,Ke?Qn:At||Qn);if(we?Mt._tasks.unshift(Ca):Mt._tasks.push(Ca),Rt||(Rt=!0,f(()=>{Rt=!1,Mt.process()})),Ke||!At)return new Promise((wa,ba)=>{ur=wa,Ur=ba})}s(Nt,"_insert");function Jn(qe){return function(we,...Ke){k-=1;for(var At=0,ur=qe.length;At<ur;At++){var Ur=qe[At],Qn=W.indexOf(Ur);Qn===0?W.shift():Qn>0&&W.splice(Qn,1),Ur.callback(we,...Ke),we!=null&&at("error",we,Ur.data)}k<=Mt.concurrency-Mt.buffer&&at("unsaturated"),Mt.idle()&&at("drain"),Mt.process()}}s(Jn,"_createCB");function zu(qe){return qe.length===0&&Mt.idle()?(f(()=>at("drain")),!0):!1}s(zu,"_maybeDrain");let Ea=s(qe=>we=>{if(!we)return new Promise((Ke,At)=>{ie(qe,(ur,Ur)=>{if(ur)return At(ur);Ke(Ur)})});de(qe),J(qe,we)},"eventMethod");var Ol=!1,Mt={_tasks:new hn,_createTaskItem(qe,we){return{data:qe,callback:we}},*[Symbol.iterator](){yield*Mt._tasks[Symbol.iterator]()},concurrency:b,payload:R,buffer:b/4,started:!1,paused:!1,push(qe,we){return Array.isArray(qe)?zu(qe)?void 0:qe.map(Ke=>Nt(Ke,!1,!1,we)):Nt(qe,!1,!1,we)},pushAsync(qe,we){return Array.isArray(qe)?zu(qe)?void 0:qe.map(Ke=>Nt(Ke,!1,!0,we)):Nt(qe,!1,!0,we)},kill(){de(),Mt._tasks.empty()},unshift(qe,we){return Array.isArray(qe)?zu(qe)?void 0:qe.map(Ke=>Nt(Ke,!0,!1,we)):Nt(qe,!0,!1,we)},unshiftAsync(qe,we){return Array.isArray(qe)?zu(qe)?void 0:qe.map(Ke=>Nt(Ke,!0,!0,we)):Nt(qe,!0,!0,we)},remove(qe){Mt._tasks.remove(qe)},process(){if(!Ol){for(Ol=!0;!Mt.paused&&k<Mt.concurrency&&Mt._tasks.length;){var qe=[],we=[],Ke=Mt._tasks.length;Mt.payload&&(Ke=Math.min(Ke,Mt.payload));for(var At=0;At<Ke;At++){var ur=Mt._tasks.shift();qe.push(ur),W.push(ur),we.push(ur.data)}k+=1,Mt._tasks.length===0&&at("empty"),k===Mt.concurrency&&at("saturated");var Ur=le(Jn(qe));M(we,Ur)}Ol=!1}},length(){return Mt._tasks.length},running(){return k},workersList(){return W},idle(){return Mt._tasks.length+k===0},pause(){Mt.paused=!0},resume(){Mt.paused!==!1&&(Mt.paused=!1,f(Mt.process))}};return Object.defineProperties(Mt,{saturated:{writable:!1,value:Ea("saturated")},unsaturated:{writable:!1,value:Ea("unsaturated")},empty:{writable:!1,value:Ea("empty")},drain:{writable:!1,value:Ea("drain")},error:{writable:!1,value:Ea("error")}}),Mt}s(Fo,"queue$1");function pl(I,b){return Fo(I,1,b)}s(pl,"cargo$1");function is(I,b,R){return Fo(I,b,R)}s(is,"cargo");function ml(I,b,R,M){M=G(M);var k=O(R);return or(I,(W,V,J)=>{k(b,W,(ie,de)=>{b=de,J(ie)})},W=>M(W,b))}s(ml,"reduce");var ji=N(ml,4);function qo(...I){var b=I.map(O);return function(...R){var M=this,k=R[R.length-1];return typeof k=="function"?R.pop():k=$t(),ji(b,R,(W,V,J)=>{V.apply(M,W.concat((ie,...de)=>{J(ie,de)}))},(W,V)=>k(W,...V)),k[vn]}}s(qo,"seq");function Gd(...I){return qo(...I.reverse())}s(Gd,"compose");function gy(I,b,R,M){return x(ve(b),I,R,M)}s(gy,"mapLimit");var ga=N(gy,4);function yy(I,b,R,M){var k=O(R);return ga(I,b,(W,V)=>{k(W,(J,...ie)=>J?V(J):V(J,ie))},(W,V)=>{for(var J=[],ie=0;ie<V.length;ie++)V[ie]&&(J=J.concat(...V[ie]));return M(W,J)})}s(yy,"concatLimit");var Lo=N(yy,4);function vy(I,b,R){return Lo(I,1/0,b,R)}s(vy,"concat");var $u=N(vy,3);function _y(I,b,R){return Lo(I,1,b,R)}s(_y,"concatSeries");var ku=N(_y,3);function uC(...I){return function(...b){var R=b.pop();return R(null,...I)}}s(uC,"constant$1");function lo(I,b){return(R,M,k,W)=>{var V=!1,J;let ie=O(k);R(M,(de,at,Rt)=>{ie(de,(Nt,Jn)=>{if(Nt||Nt===!1)return Rt(Nt);if(I(Jn)&&!J)return V=!0,J=b(!0,de),Rt(null,X);Rt()})},de=>{if(de)return W(de);W(null,V?J:b(!1))})}}s(lo,"_createTester");function AR(I,b,R){return lo(M=>M,(M,k)=>k)(rt,I,b,R)}s(AR,"detect");var gl=N(AR,3);function cC(I,b,R,M){return lo(k=>k,(k,W)=>W)(ve(b),I,R,M)}s(cC,"detectLimit");var Wd=N(cC,4);function IR(I,b,R){return lo(M=>M,(M,k)=>k)(ve(1),I,b,R)}s(IR,"detectSeries");var zd=N(IR,3);function lC(I){return(b,...R)=>O(b)(...R,(M,...k)=>{typeof console=="object"&&(M?console.error&&console.error(M):console[I]&&k.forEach(W=>console[I](W)))})}s(lC,"consoleFunc");var Sy=lC("dir");function DR(I,b,R){R=le(R);var M=O(I),k=O(b),W;function V(ie,...de){if(ie)return R(ie);ie!==!1&&(W=de,k(...de,J))}s(V,"next");function J(ie,de){if(ie)return R(ie);if(ie!==!1){if(!de)return R(null,...W);M(V)}}return s(J,"check"),J(null,!0)}s(DR,"doWhilst");var yl=N(DR,3);function dC(I,b,R){let M=O(b);return yl(I,(...k)=>{let W=k.pop();M(...k,(V,J)=>W(V,!J))},R)}s(dC,"doUntil");function Hd(I){return(b,R,M)=>I(b,M)}s(Hd,"_withoutIndex");function RR(I,b,R){return rt(I,Hd(O(b)),R)}s(RR,"eachLimit$2");var Gu=N(RR,3);function NR(I,b,R,M){return ve(b)(I,Hd(O(R)),M)}s(NR,"eachLimit");var vl=N(NR,4);function xR(I,b,R){return vl(I,1,b,R)}s(xR,"eachSeries");var _l=N(xR,3);function Ey(I){return _(I)?I:function(...b){var R=b.pop(),M=!0;b.push((...k)=>{M?f(()=>R(...k)):R(...k)}),I.apply(this,b),M=!1}}s(Ey,"ensureAsync");function PR(I,b,R){return lo(M=>!M,M=>!M)(rt,I,b,R)}s(PR,"every");var Vd=N(PR,3);function BR(I,b,R,M){return lo(k=>!k,k=>!k)(ve(b),I,R,M)}s(BR,"everyLimit");var Sl=N(BR,4);function MR(I,b,R){return lo(M=>!M,M=>!M)(or,I,b,R)}s(MR,"everySeries");var Yd=N(MR,3);function FR(I,b,R,M){var k=new Array(b.length);I(b,(W,V,J)=>{R(W,(ie,de)=>{k[V]=!!de,J(ie)})},W=>{if(W)return M(W);for(var V=[],J=0;J<b.length;J++)k[J]&&V.push(b[J]);M(null,V)})}s(FR,"filterArray");function qR(I,b,R,M){var k=[];I(b,(W,V,J)=>{R(W,(ie,de)=>{if(ie)return J(ie);de&&k.push({index:V,value:W}),J(ie)})},W=>{if(W)return M(W);M(null,k.sort((V,J)=>V.index-J.index).map(V=>V.value))})}s(qR,"filterGeneric");function Kd(I,b,R,M){var k=P(b)?FR:qR;return k(I,b,O(R),M)}s(Kd,"_filter");function LR(I,b,R){return Kd(rt,I,b,R)}s(LR,"filter");var ya=N(LR,3);function UR(I,b,R,M){return Kd(ve(b),I,R,M)}s(UR,"filterLimit");var va=N(UR,4);function jR(I,b,R){return Kd(or,I,b,R)}s(jR,"filterSeries");var Xd=N(jR,3);function $R(I,b){var R=le(b),M=O(Ey(I));function k(W){if(W)return R(W);W!==!1&&M(k)}return s(k,"next"),k()}s($R,"forever");var Cy=N($R,2);function fC(I,b,R,M){var k=O(R);return ga(I,b,(W,V)=>{k(W,(J,ie)=>J?V(J):V(J,{key:ie,val:W}))},(W,V)=>{for(var J={},{hasOwnProperty:ie}=Object.prototype,de=0;de<V.length;de++)if(V[de]){var{key:at}=V[de],{val:Rt}=V[de];ie.call(J,at)?J[at].push(Rt):J[at]=[Rt]}return M(W,J)})}s(fC,"groupByLimit");var El=N(fC,4);function hC(I,b,R){return El(I,1/0,b,R)}s(hC,"groupBy");function pC(I,b,R){return El(I,1,b,R)}s(pC,"groupBySeries");var mC=lC("log");function kR(I,b,R,M){M=G(M);var k={},W=O(R);return ve(b)(I,(V,J,ie)=>{W(V,J,(de,at)=>{if(de)return ie(de);k[J]=at,ie(de)})},V=>M(V,k))}s(kR,"mapValuesLimit");var Cl=N(kR,4);function wy(I,b,R){return Cl(I,1/0,b,R)}s(wy,"mapValues");function by(I,b,R){return Cl(I,1,b,R)}s(by,"mapValuesSeries");function Jd(I,b=R=>R){var R=Object.create(null),M=Object.create(null),k=O(I),W=r((V,J)=>{var ie=b(...V);ie in R?f(()=>J(null,...R[ie])):ie in M?M[ie].push(J):(M[ie]=[J],k(...V,(de,...at)=>{de||(R[ie]=at);var Rt=M[ie];delete M[ie];for(var Nt=0,Jn=Rt.length;Nt<Jn;Nt++)Rt[Nt](de,...at)}))});return W.memo=R,W.unmemoized=I,W}s(Jd,"memoize");var Qd;o?Qd=process.nextTick:i?Qd=setImmediate:Qd=a;var Oy=u(Qd),Wu=N((I,b,R)=>{var M=P(b)?[]:{};I(b,(k,W,V)=>{O(k)((J,...ie)=>{ie.length<2&&([ie]=ie),M[W]=ie,V(J)})},k=>R(k,M))},3);function Ty(I,b){return Wu(rt,I,b)}s(Ty,"parallel");function gC(I,b,R){return Wu(ve(b),I,R)}s(gC,"parallelLimit");function Zd(I,b){var R=O(I);return Fo((M,k)=>{R(M[0],k)},b,1)}s(Zd,"queue");let ff=class ff{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(b){let R;for(;b>0&&tf(this.heap[b],this.heap[R=yC(b)]);){let M=this.heap[b];this.heap[b]=this.heap[R],this.heap[R]=M,b=R}}percDown(b){let R;for(;(R=Ay(b))<this.heap.length&&(R+1<this.heap.length&&tf(this.heap[R+1],this.heap[R])&&(R=R+1),!tf(this.heap[b],this.heap[R]));){let M=this.heap[b];this.heap[b]=this.heap[R],this.heap[R]=M,b=R}}push(b){b.pushCount=++this.pushCount,this.heap.push(b),this.percUp(this.heap.length-1)}unshift(b){return this.heap.push(b)}shift(){let[b]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),b}toArray(){return[...this]}*[Symbol.iterator](){for(let b=0;b<this.heap.length;b++)yield this.heap[b].data}remove(b){let R=0;for(let M=0;M<this.heap.length;M++)b(this.heap[M])||(this.heap[R]=this.heap[M],R++);this.heap.splice(R);for(let M=yC(this.heap.length-1);M>=0;M--)this.percDown(M);return this}};s(ff,"Heap");let ef=ff;function Ay(I){return(I<<1)+1}s(Ay,"leftChi");function yC(I){return(I+1>>1)-1}s(yC,"parent");function tf(I,b){return I.priority!==b.priority?I.priority<b.priority:I.pushCount<b.pushCount}s(tf,"smaller");function rf(I,b){var R=Zd(I,b),{push:M,pushAsync:k}=R;R._tasks=new ef,R._createTaskItem=({data:V,priority:J},ie)=>({data:V,priority:J,callback:ie});function W(V,J){return Array.isArray(V)?V.map(ie=>({data:ie,priority:J})):{data:V,priority:J}}return s(W,"createDataItems"),R.push=function(V,J=0,ie){return M(W(V,J),ie)},R.pushAsync=function(V,J=0,ie){return k(W(V,J),ie)},delete R.unshift,delete R.unshiftAsync,R}s(rf,"priorityQueue");function Iy(I,b){if(b=G(b),!Array.isArray(I))return b(new TypeError("First argument to race must be an array of functions"));if(!I.length)return b();for(var R=0,M=I.length;R<M;R++)O(I[R])(b)}s(Iy,"race");var _a=N(Iy,2);function wl(I,b,R,M){var k=[...I].reverse();return ji(k,b,R,M)}s(wl,"reduceRight");function bl(I){var b=O(I);return r(s(function(M,k){return M.push((W,...V)=>{let J={};if(W&&(J.error=W),V.length>0){var ie=V;V.length<=1&&([ie]=V),J.value=ie}k(null,J)}),b.apply(this,M)},"reflectOn"))}s(bl,"reflect");function vC(I){var b;return Array.isArray(I)?b=I.map(bl):(b={},Object.keys(I).forEach(R=>{b[R]=bl.call(this,I[R])})),b}s(vC,"reflectAll");function nf(I,b,R,M){let k=O(R);return Kd(I,b,(W,V)=>{k(W,(J,ie)=>{V(J,!ie)})},M)}s(nf,"reject$2");function _C(I,b,R){return nf(rt,I,b,R)}s(_C,"reject");var Dy=N(_C,3);function SC(I,b,R,M){return nf(ve(b),I,R,M)}s(SC,"rejectLimit");var EC=N(SC,4);function GR(I,b,R){return nf(or,I,b,R)}s(GR,"rejectSeries");var CC=N(GR,3);function Ry(I){return function(){return I}}s(Ry,"constant");let Ny=5,wC=0;function sf(I,b,R){var M={times:Ny,intervalFunc:Ry(wC)};if(arguments.length<3&&typeof I=="function"?(R=b||$t(),b=I):(WR(M,I),R=R||$t()),typeof b!="function")throw new Error("Invalid arguments for async.retry");var k=O(b),W=1;function V(){k((J,...ie)=>{J!==!1&&(J&&W++<M.times&&(typeof M.errorFilter!="function"||M.errorFilter(J))?setTimeout(V,M.intervalFunc(W-1)):R(J,...ie))})}return s(V,"retryAttempt"),V(),R[vn]}s(sf,"retry");function WR(I,b){if(typeof b=="object")I.times=+b.times||Ny,I.intervalFunc=typeof b.interval=="function"?b.interval:Ry(+b.interval||wC),I.errorFilter=b.errorFilter;else if(typeof b=="number"||typeof b=="string")I.times=+b||Ny;else throw new Error("Invalid arguments for async.retry")}s(WR,"parseTimes");function of(I,b){b||(b=I,I=null);let R=I&&I.arity||b.length;_(b)&&(R+=1);var M=O(b);return r((k,W)=>{(k.length<R-1||W==null)&&(k.push(W),W=$t());function V(J){M(...k,J)}return s(V,"taskFn"),I?sf(I,V,W):sf(V,W),W[vn]})}s(of,"retryable");function bC(I,b){return Wu(or,I,b)}s(bC,"series");function zR(I,b,R){return lo(Boolean,M=>M)(rt,I,b,R)}s(zR,"some");var af=N(zR,3);function HR(I,b,R,M){return lo(Boolean,k=>k)(ve(b),I,R,M)}s(HR,"someLimit");var uf=N(HR,4);function ar(I,b,R){return lo(Boolean,M=>M)(or,I,b,R)}s(ar,"someSeries");var Yt=N(ar,3);function VR(I,b,R){var M=O(b);return Cr(I,(W,V)=>{M(W,(J,ie)=>{if(J)return V(J);V(J,{value:W,criteria:ie})})},(W,V)=>{if(W)return R(W);R(null,V.sort(k).map(J=>J.value))});function k(W,V){var J=W.criteria,ie=V.criteria;return J<ie?-1:J>ie?1:0}}s(VR,"sortBy");var OC=N(VR,3);function TC(I,b,R){var M=O(I);return r((k,W)=>{var V=!1,J;function ie(){var de=I.name||"anonymous",at=new Error('Callback function "'+de+'" timed out.');at.code="ETIMEDOUT",R&&(at.info=R),V=!0,W(at)}s(ie,"timeoutCallback"),k.push((...de)=>{V||(W(...de),clearTimeout(J))}),J=setTimeout(ie,b),M(...k)})}s(TC,"timeout");function YR(I){for(var b=Array(I);I--;)b[I]=I;return b}s(YR,"range");function cf(I,b,R,M){var k=O(R);return ga(YR(I),b,k,M)}s(cf,"timesLimit");function AC(I,b,R){return cf(I,1/0,b,R)}s(AC,"times");function xy(I,b,R){return cf(I,1,b,R)}s(xy,"timesSeries");function IC(I,b,R,M){arguments.length<=3&&typeof b=="function"&&(M=R,R=b,b=Array.isArray(I)?[]:{}),M=G(M||$t());var k=O(R);return rt(I,(W,V,J)=>{k(b,W,V,J)},W=>M(W,b)),M[vn]}s(IC,"transform");function sn(I,b){var R=null,M;return _l(I,(k,W)=>{O(k)((V,...J)=>{if(V===!1)return W(V);J.length<2?[M]=J:M=J,R=V,W(V?null:{})})},()=>b(R,M))}s(sn,"tryEach");var lf=N(sn);function Uo(I){return(...b)=>(I.unmemoized||I)(...b)}s(Uo,"unmemoize");function DC(I,b,R){R=le(R);var M=O(b),k=O(I),W=[];function V(ie,...de){if(ie)return R(ie);W=de,ie!==!1&&k(J)}s(V,"next");function J(ie,de){if(ie)return R(ie);if(ie!==!1){if(!de)return R(null,...W);M(V)}}return s(J,"check"),k(J)}s(DC,"whilst");var Sa=N(DC,3);function yi(I,b,R){let M=O(I);return Sa(k=>M((W,V)=>k(W,!V)),b,R)}s(yi,"until");function RC(I,b){if(b=G(b),!Array.isArray(I))return b(new Error("First argument to waterfall must be an array of functions"));if(!I.length)return b();var R=0;function M(W){var V=O(I[R++]);V(...W,le(k))}s(M,"nextTask");function k(W,...V){if(W!==!1){if(W||R===I.length)return b(W,...V);M(V)}}s(k,"next"),M([])}s(RC,"waterfall");var Py=N(RC),NC={apply:t,applyEach:Lr,applyEachSeries:Mo,asyncify:h,auto:Ui,autoInject:Xn,cargo:pl,cargoQueue:is,compose:Gd,concat:$u,concatLimit:Lo,concatSeries:ku,constant:uC,detect:gl,detectLimit:Wd,detectSeries:zd,dir:Sy,doUntil:dC,doWhilst:yl,each:Gu,eachLimit:vl,eachOf:rt,eachOfLimit:Ee,eachOfSeries:or,eachSeries:_l,ensureAsync:Ey,every:Vd,everyLimit:Sl,everySeries:Yd,filter:ya,filterLimit:va,filterSeries:Xd,forever:Cy,groupBy:hC,groupByLimit:El,groupBySeries:pC,log:mC,map:Cr,mapLimit:ga,mapSeries:fn,mapValues:wy,mapValuesLimit:Cl,mapValuesSeries:by,memoize:Jd,nextTick:Oy,parallel:Ty,parallelLimit:gC,priorityQueue:rf,queue:Zd,race:_a,reduce:ji,reduceRight:wl,reflect:bl,reflectAll:vC,reject:Dy,rejectLimit:EC,rejectSeries:CC,retry:sf,retryable:of,seq:qo,series:bC,setImmediate:f,some:af,someLimit:uf,someSeries:Yt,sortBy:OC,timeout:TC,times:AC,timesLimit:cf,timesSeries:xy,transform:IC,tryEach:lf,unmemoize:Uo,until:yi,waterfall:Py,whilst:Sa,all:Vd,allLimit:Sl,allSeries:Yd,any:af,anyLimit:uf,anySeries:Yt,find:gl,findLimit:Wd,findSeries:zd,flatMap:$u,flatMapLimit:Lo,flatMapSeries:ku,forEach:Gu,forEachSeries:_l,forEachLimit:vl,forEachOf:rt,forEachOfSeries:or,forEachOfLimit:Ee,inject:ji,foldl:ji,foldr:wl,select:ya,selectLimit:va,selectSeries:Xd,wrapSync:h,during:Sa,doDuring:yl};e.all=Vd,e.allLimit=Sl,e.allSeries=Yd,e.any=af,e.anyLimit=uf,e.anySeries=Yt,e.apply=t,e.applyEach=Lr,e.applyEachSeries=Mo,e.asyncify=h,e.auto=Ui,e.autoInject=Xn,e.cargo=pl,e.cargoQueue=is,e.compose=Gd,e.concat=$u,e.concatLimit=Lo,e.concatSeries=ku,e.constant=uC,e.default=NC,e.detect=gl,e.detectLimit=Wd,e.detectSeries=zd,e.dir=Sy,e.doDuring=yl,e.doUntil=dC,e.doWhilst=yl,e.during=Sa,e.each=Gu,e.eachLimit=vl,e.eachOf=rt,e.eachOfLimit=Ee,e.eachOfSeries=or,e.eachSeries=_l,e.ensureAsync=Ey,e.every=Vd,e.everyLimit=Sl,e.everySeries=Yd,e.filter=ya,e.filterLimit=va,e.filterSeries=Xd,e.find=gl,e.findLimit=Wd,e.findSeries=zd,e.flatMap=$u,e.flatMapLimit=Lo,e.flatMapSeries=ku,e.foldl=ji,e.foldr=wl,e.forEach=Gu,e.forEachLimit=vl,e.forEachOf=rt,e.forEachOfLimit=Ee,e.forEachOfSeries=or,e.forEachSeries=_l,e.forever=Cy,e.groupBy=hC,e.groupByLimit=El,e.groupBySeries=pC,e.inject=ji,e.log=mC,e.map=Cr,e.mapLimit=ga,e.mapSeries=fn,e.mapValues=wy,e.mapValuesLimit=Cl,e.mapValuesSeries=by,e.memoize=Jd,e.nextTick=Oy,e.parallel=Ty,e.parallelLimit=gC,e.priorityQueue=rf,e.queue=Zd,e.race=_a,e.reduce=ji,e.reduceRight=wl,e.reflect=bl,e.reflectAll=vC,e.reject=Dy,e.rejectLimit=EC,e.rejectSeries=CC,e.retry=sf,e.retryable=of,e.select=ya,e.selectLimit=va,e.selectSeries=Xd,e.seq=qo,e.series=bC,e.setImmediate=f,e.some=af,e.someLimit=uf,e.someSeries=Yt,e.sortBy=OC,e.timeout=TC,e.times=AC,e.timesLimit=cf,e.timesSeries=xy,e.transform=IC,e.tryEach=lf,e.unmemoize=Uo,e.until=yi,e.waterfall=Py,e.whilst=Sa,e.wrapSync=h,Object.defineProperty(e,"__esModule",{value:!0})})});var gw=w((wSt,Xy)=>{"use strict";typeof global.Map<"u"?(Xy.exports=global.Map,Xy.exports.Map=global.Map):(ls=s(function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(e[t]!=null){var r=e[t],n=r[0],i=r[1];this._keys.push(n),this._values[n]={v:i,i:this._keys.length-1}}},"Map"),ls.prototype.clear=function(){this._keys=[],this._values={}},ls.prototype.delete=function(e){var t=this._values[e];return t==null?!1:(delete this._values[e],this._keys.splice(t.i,1),!0)},ls.prototype.entries=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?[r,e._values[r].v]:void 0,done:r===void 0}}}},ls.prototype.forEach=function(e,t){t=t||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];e.call(t,this._values[n].v,n,t)}},ls.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},ls.prototype.has=function(e){return this._values[e]!=null},ls.prototype.keys=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?r:void 0,done:r===void 0}}}},ls.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},ls.prototype.values=function(){var e=this,t=0;return{next:function(){var r=e._keys[t++];return{value:r!==void 0?e._values[r].v:void 0,done:r===void 0}}}},Object.defineProperty(ls.prototype,"size",{enumerable:!0,get:function(){return this._keys.length}}),Xy.exports=ls,Xy.exports.Map=ls);var ls});var Bl=w((OSt,HN)=>{function Y(e,t){if(!(this instanceof Y))return new Y(e,t);this._bsontype="Long",this.low_=e|0,this.high_=t|0}s(Y,"Long");Y.prototype.toInt=function(){return this.low_};Y.prototype.toNumber=function(){return this.high_*Y.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};Y.prototype.toBigInt=function(){return BigInt(this.toString())};Y.prototype.toJSON=function(){return this.toString()};Y.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative())if(this.equals(Y.MIN_VALUE)){var r=Y.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=Y.fromNumber(Math.pow(t,6));i=this;for(var a="";!i.isZero();){var u=i.div(o),l=i.subtract(u.multiply(o)).toInt(),f=l.toString(t);if(i=u,i.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};Y.prototype.getHighBits=function(){return this.high_};Y.prototype.getLowBits=function(){return this.low_};Y.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:Y.TWO_PWR_32_DBL_+this.low_};Y.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Y.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=this.high_!==0?this.high_:this.low_,t=31;t>0&&!(e&1<<t);t--);return this.high_!==0?t+33:t+1};Y.prototype.isZero=function(){return this.high_===0&&this.low_===0};Y.prototype.isNegative=function(){return this.high_<0};Y.prototype.isOdd=function(){return(this.low_&1)===1};Y.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_};Y.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_};Y.prototype.lessThan=function(e){return this.compare(e)<0};Y.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0};Y.prototype.greaterThan=function(e){return this.compare(e)>0};Y.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0};Y.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1};Y.prototype.negate=function(){return this.equals(Y.MIN_VALUE)?Y.MIN_VALUE:this.not().add(Y.ONE)};Y.prototype.add=function(e){var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,o=e.high_>>>16,a=e.high_&65535,u=e.low_>>>16,l=e.low_&65535,f=0,h=0,p=0,g=0;return g+=i+l,p+=g>>>16,g&=65535,p+=n+u,h+=p>>>16,p&=65535,h+=r+a,f+=h>>>16,h&=65535,f+=t+o,f&=65535,Y.fromBits(p<<16|g,f<<16|h)};Y.prototype.subtract=function(e){return this.add(e.negate())};Y.prototype.multiply=function(e){if(this.isZero())return Y.ZERO;if(e.isZero())return Y.ZERO;if(this.equals(Y.MIN_VALUE))return e.isOdd()?Y.MIN_VALUE:Y.ZERO;if(e.equals(Y.MIN_VALUE))return this.isOdd()?Y.MIN_VALUE:Y.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(Y.TWO_PWR_24_)&&e.lessThan(Y.TWO_PWR_24_))return Y.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,o=e.high_>>>16,a=e.high_&65535,u=e.low_>>>16,l=e.low_&65535,f=0,h=0,p=0,g=0;return g+=i*l,p+=g>>>16,g&=65535,p+=n*l,h+=p>>>16,p&=65535,p+=i*u,h+=p>>>16,p&=65535,h+=r*l,f+=h>>>16,h&=65535,h+=n*u,f+=h>>>16,h&=65535,h+=i*a,f+=h>>>16,h&=65535,f+=t*l+r*u+n*a+i*o,f&=65535,Y.fromBits(p<<16|g,f<<16|h)};Y.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return Y.ZERO;if(this.equals(Y.MIN_VALUE)){if(e.equals(Y.ONE)||e.equals(Y.NEG_ONE))return Y.MIN_VALUE;if(e.equals(Y.MIN_VALUE))return Y.ONE;var t=this.shiftRight(1),r=t.div(e).shiftLeft(1);if(r.equals(Y.ZERO))return e.isNegative()?Y.ONE:Y.NEG_ONE;var n=this.subtract(e.multiply(r)),i=r.add(n.div(e));return i}else if(e.equals(Y.MIN_VALUE))return Y.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var o=Y.ZERO;for(n=this;n.greaterThanOrEqual(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Math.pow(2,a-48),l=Y.fromNumber(r),f=l.multiply(e);f.isNegative()||f.greaterThan(n);)r-=u,l=Y.fromNumber(r),f=l.multiply(e);l.isZero()&&(l=Y.ONE),o=o.add(l),n=n.subtract(f)}return o};Y.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))};Y.prototype.not=function(){return Y.fromBits(~this.low_,~this.high_)};Y.prototype.and=function(e){return Y.fromBits(this.low_&e.low_,this.high_&e.high_)};Y.prototype.or=function(e){return Y.fromBits(this.low_|e.low_,this.high_|e.high_)};Y.prototype.xor=function(e){return Y.fromBits(this.low_^e.low_,this.high_^e.high_)};Y.prototype.shiftLeft=function(e){if(e&=63,e===0)return this;var t=this.low_;if(e<32){var r=this.high_;return Y.fromBits(t<<e,r<<e|t>>>32-e)}else return Y.fromBits(0,t<<e-32)};Y.prototype.shiftRight=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return Y.fromBits(r>>>e|t<<32-e,t>>e)}else return Y.fromBits(t>>e-32,t>=0?0:-1)};Y.prototype.shiftRightUnsigned=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return Y.fromBits(r>>>e|t<<32-e,t>>>e)}else return e===32?Y.fromBits(t,0):Y.fromBits(t>>>e-32,0)};Y.fromInt=function(e){if(-128<=e&&e<128){var t=Y.INT_CACHE_[e];if(t)return t}var r=new Y(e|0,e<0?-1:0);return-128<=e&&e<128&&(Y.INT_CACHE_[e]=r),r};Y.fromNumber=function(e){return isNaN(e)||!isFinite(e)?Y.ZERO:e<=-Y.TWO_PWR_63_DBL_?Y.MIN_VALUE:e+1>=Y.TWO_PWR_63_DBL_?Y.MAX_VALUE:e<0?Y.fromNumber(-e).negate():new Y(e%Y.TWO_PWR_32_DBL_|0,e/Y.TWO_PWR_32_DBL_|0)};Y.fromBigInt=function(e){return Y.fromString(e.toString(10),10)};Y.fromBits=function(e,t){return new Y(e,t)};Y.fromString=function(e,t){if(e.length===0)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if(e.charAt(0)==="-")return Y.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=Y.fromNumber(Math.pow(r,8)),i=Y.ZERO,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+a),r);if(a<8){var l=Y.fromNumber(Math.pow(r,a));i=i.multiply(l).add(Y.fromNumber(u))}else i=i.multiply(n),i=i.add(Y.fromNumber(u))}return i};Y.INT_CACHE_={};Y.TWO_PWR_16_DBL_=65536;Y.TWO_PWR_24_DBL_=1<<24;Y.TWO_PWR_32_DBL_=Y.TWO_PWR_16_DBL_*Y.TWO_PWR_16_DBL_;Y.TWO_PWR_31_DBL_=Y.TWO_PWR_32_DBL_/2;Y.TWO_PWR_48_DBL_=Y.TWO_PWR_32_DBL_*Y.TWO_PWR_16_DBL_;Y.TWO_PWR_64_DBL_=Y.TWO_PWR_32_DBL_*Y.TWO_PWR_32_DBL_;Y.TWO_PWR_63_DBL_=Y.TWO_PWR_64_DBL_/2;Y.ZERO=Y.fromInt(0);Y.ONE=Y.fromInt(1);Y.NEG_ONE=Y.fromInt(-1);Y.MAX_VALUE=Y.fromBits(-1,2147483647);Y.MIN_VALUE=Y.fromBits(0,-2147483648);Y.TWO_PWR_24_=Y.fromInt(1<<24);HN.exports=Y;HN.exports.Long=Y});var Jy=w((ASt,VN)=>{function Of(e){if(!(this instanceof Of))return new Of(e);this._bsontype="Double",this.value=e}s(Of,"Double");Of.prototype.valueOf=function(){return this.value};Of.prototype.toJSON=function(){return this.value};VN.exports=Of;VN.exports.Double=Of});var Qy=w((DSt,YN)=>{function K(e,t){if(!(this instanceof K))return new K(e,t);this._bsontype="Timestamp",this.low_=e|0,this.high_=t|0}s(K,"Timestamp");K.prototype.toInt=function(){return this.low_};K.prototype.toNumber=function(){return this.high_*K.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};K.prototype.toJSON=function(){return this.toString()};K.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative())if(this.equals(K.MIN_VALUE)){var r=K.fromNumber(t),n=this.div(r),i=n.multiply(r).subtract(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.negate().toString(t);var o=K.fromNumber(Math.pow(t,6));i=this;for(var a="";!i.isZero();){var u=i.div(o),l=i.subtract(u.multiply(o)).toInt(),f=l.toString(t);if(i=u,i.isZero())return f+a;for(;f.length<6;)f="0"+f;a=""+f+a}};K.prototype.getHighBits=function(){return this.high_};K.prototype.getLowBits=function(){return this.low_};K.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:K.TWO_PWR_32_DBL_+this.low_};K.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(K.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=this.high_!==0?this.high_:this.low_,t=31;t>0&&!(e&1<<t);t--);return this.high_!==0?t+33:t+1};K.prototype.isZero=function(){return this.high_===0&&this.low_===0};K.prototype.isNegative=function(){return this.high_<0};K.prototype.isOdd=function(){return(this.low_&1)===1};K.prototype.equals=function(e){return this.high_===e.high_&&this.low_===e.low_};K.prototype.notEquals=function(e){return this.high_!==e.high_||this.low_!==e.low_};K.prototype.lessThan=function(e){return this.compare(e)<0};K.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0};K.prototype.greaterThan=function(e){return this.compare(e)>0};K.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0};K.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1};K.prototype.negate=function(){return this.equals(K.MIN_VALUE)?K.MIN_VALUE:this.not().add(K.ONE)};K.prototype.add=function(e){var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,o=e.high_>>>16,a=e.high_&65535,u=e.low_>>>16,l=e.low_&65535,f=0,h=0,p=0,g=0;return g+=i+l,p+=g>>>16,g&=65535,p+=n+u,h+=p>>>16,p&=65535,h+=r+a,f+=h>>>16,h&=65535,f+=t+o,f&=65535,K.fromBits(p<<16|g,f<<16|h)};K.prototype.subtract=function(e){return this.add(e.negate())};K.prototype.multiply=function(e){if(this.isZero())return K.ZERO;if(e.isZero())return K.ZERO;if(this.equals(K.MIN_VALUE))return e.isOdd()?K.MIN_VALUE:K.ZERO;if(e.equals(K.MIN_VALUE))return this.isOdd()?K.MIN_VALUE:K.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(K.TWO_PWR_24_)&&e.lessThan(K.TWO_PWR_24_))return K.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=this.high_&65535,n=this.low_>>>16,i=this.low_&65535,o=e.high_>>>16,a=e.high_&65535,u=e.low_>>>16,l=e.low_&65535,f=0,h=0,p=0,g=0;return g+=i*l,p+=g>>>16,g&=65535,p+=n*l,h+=p>>>16,p&=65535,p+=i*u,h+=p>>>16,p&=65535,h+=r*l,f+=h>>>16,h&=65535,h+=n*u,f+=h>>>16,h&=65535,h+=i*a,f+=h>>>16,h&=65535,f+=t*l+r*u+n*a+i*o,f&=65535,K.fromBits(p<<16|g,f<<16|h)};K.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return K.ZERO;if(this.equals(K.MIN_VALUE)){if(e.equals(K.ONE)||e.equals(K.NEG_ONE))return K.MIN_VALUE;if(e.equals(K.MIN_VALUE))return K.ONE;var t=this.shiftRight(1),r=t.div(e).shiftLeft(1);if(r.equals(K.ZERO))return e.isNegative()?K.ONE:K.NEG_ONE;var n=this.subtract(e.multiply(r)),i=r.add(n.div(e));return i}else if(e.equals(K.MIN_VALUE))return K.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var o=K.ZERO;for(n=this;n.greaterThanOrEqual(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),u=a<=48?1:Math.pow(2,a-48),l=K.fromNumber(r),f=l.multiply(e);f.isNegative()||f.greaterThan(n);)r-=u,l=K.fromNumber(r),f=l.multiply(e);l.isZero()&&(l=K.ONE),o=o.add(l),n=n.subtract(f)}return o};K.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))};K.prototype.not=function(){return K.fromBits(~this.low_,~this.high_)};K.prototype.and=function(e){return K.fromBits(this.low_&e.low_,this.high_&e.high_)};K.prototype.or=function(e){return K.fromBits(this.low_|e.low_,this.high_|e.high_)};K.prototype.xor=function(e){return K.fromBits(this.low_^e.low_,this.high_^e.high_)};K.prototype.shiftLeft=function(e){if(e&=63,e===0)return this;var t=this.low_;if(e<32){var r=this.high_;return K.fromBits(t<<e,r<<e|t>>>32-e)}else return K.fromBits(0,t<<e-32)};K.prototype.shiftRight=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return K.fromBits(r>>>e|t<<32-e,t>>e)}else return K.fromBits(t>>e-32,t>=0?0:-1)};K.prototype.shiftRightUnsigned=function(e){if(e&=63,e===0)return this;var t=this.high_;if(e<32){var r=this.low_;return K.fromBits(r>>>e|t<<32-e,t>>>e)}else return e===32?K.fromBits(t,0):K.fromBits(t>>>e-32,0)};K.fromInt=function(e){if(-128<=e&&e<128){var t=K.INT_CACHE_[e];if(t)return t}var r=new K(e|0,e<0?-1:0);return-128<=e&&e<128&&(K.INT_CACHE_[e]=r),r};K.fromNumber=function(e){return isNaN(e)||!isFinite(e)?K.ZERO:e<=-K.TWO_PWR_63_DBL_?K.MIN_VALUE:e+1>=K.TWO_PWR_63_DBL_?K.MAX_VALUE:e<0?K.fromNumber(-e).negate():new K(e%K.TWO_PWR_32_DBL_|0,e/K.TWO_PWR_32_DBL_|0)};K.fromBits=function(e,t){return new K(e,t)};K.fromString=function(e,t){if(e.length===0)throw Error("number format error: empty string");var r=t||10;if(r<2||36<r)throw Error("radix out of range: "+r);if(e.charAt(0)==="-")return K.fromString(e.substring(1),r).negate();if(e.indexOf("-")>=0)throw Error('number format error: interior "-" character: '+e);for(var n=K.fromNumber(Math.pow(r,8)),i=K.ZERO,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),u=parseInt(e.substring(o,o+a),r);if(a<8){var l=K.fromNumber(Math.pow(r,a));i=i.multiply(l).add(K.fromNumber(u))}else i=i.multiply(n),i=i.add(K.fromNumber(u))}return i};K.INT_CACHE_={};K.TWO_PWR_16_DBL_=65536;K.TWO_PWR_24_DBL_=1<<24;K.TWO_PWR_32_DBL_=K.TWO_PWR_16_DBL_*K.TWO_PWR_16_DBL_;K.TWO_PWR_31_DBL_=K.TWO_PWR_32_DBL_/2;K.TWO_PWR_48_DBL_=K.TWO_PWR_32_DBL_*K.TWO_PWR_16_DBL_;K.TWO_PWR_64_DBL_=K.TWO_PWR_32_DBL_*K.TWO_PWR_32_DBL_;K.TWO_PWR_63_DBL_=K.TWO_PWR_64_DBL_/2;K.ZERO=K.fromInt(0);K.ONE=K.fromInt(1);K.NEG_ONE=K.fromInt(-1);K.MAX_VALUE=K.fromBits(-1,2147483647);K.MIN_VALUE=K.fromBits(0,-2147483648);K.TWO_PWR_24_=K.fromInt(1<<24);YN.exports=K;YN.exports.Timestamp=K});var ec=w((NSt,hH)=>{"use strict";function oOe(e){return e.toString().replace(/function *\(/,"function (")}s(oOe,"normalizedFunctionString");function fH(e,t){return new Buffer(e,t)}s(fH,"newBuffer");function aOe(){return Buffer.alloc.apply(Buffer,arguments)}s(aOe,"allocBuffer");function uOe(){return Buffer.from.apply(Buffer,arguments)}s(uOe,"toBuffer");hH.exports={normalizedFunctionString:oOe,allocBuffer:typeof Buffer.alloc=="function"?aOe:fH,toBuffer:typeof Buffer.from=="function"?uOe:fH}});var tv=w((PSt,_w)=>{var mH="inspect",vw=ec(),KN=parseInt(Math.random()*16777215,10),pH=new RegExp("^[0-9a-fA-F]{24}$");try{Buffer&&Buffer.from&&(yw=!0,mH=require("util").inspect.custom||"inspect")}catch{yw=!1}var yw,Lt=s(function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype="ObjectID",t==null||typeof t=="number"){this.id=this.generate(t),e.cacheHexString&&(this.__id=this.toString("hex"));return}var r=e.isValid(t);if(!r&&t!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(r&&typeof t=="string"&&t.length===24&&yw)return new e(vw.toBuffer(t,"hex"));if(r&&typeof t=="string"&&t.length===24)return e.createFromHexString(t);if(t!=null&&t.length===12)this.id=t;else{if(t!=null&&typeof t.toHexString=="function")return t;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}e.cacheHexString&&(this.__id=this.toString("hex"))},"ObjectID"),gH=[];for(zi=0;zi<256;zi++)gH[zi]=(zi<=15?"0":"")+zi.toString(16);var zi;Lt.prototype.toHexString=function(){if(Lt.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof ev)return e=cOe(this.id),Lt.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=gH[this.id.charCodeAt(t)];return Lt.cacheHexString&&(this.__id=e),e};Lt.prototype.get_inc=function(){return Lt.index=(Lt.index+1)%16777215};Lt.prototype.getInc=function(){return this.get_inc()};Lt.prototype.generate=function(e){typeof e!="number"&&(e=~~(Date.now()/1e3));var t=(typeof process>"u"||process.pid===1?Math.floor(Math.random()*1e5):process.pid)%65535,r=this.get_inc(),n=vw.allocBuffer(12);return n[3]=e&255,n[2]=e>>8&255,n[1]=e>>16&255,n[0]=e>>24&255,n[6]=KN&255,n[5]=KN>>8&255,n[4]=KN>>16&255,n[8]=t&255,n[7]=t>>8&255,n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n};Lt.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString(typeof e=="string"?e:"hex"):this.toHexString()};Lt.prototype[mH]=Lt.prototype.toString;Lt.prototype.toJSON=function(){return this.toHexString()};Lt.prototype.equals=s(function(t){return t instanceof Lt?this.toString()===t.toString():typeof t=="string"&&Lt.isValid(t)&&t.length===12&&this.id instanceof ev?t===this.id.toString("binary"):typeof t=="string"&&Lt.isValid(t)&&t.length===24?t.toLowerCase()===this.toHexString():typeof t=="string"&&Lt.isValid(t)&&t.length===12?t===this.id:t!=null&&(t instanceof Lt||t.toHexString)?t.toHexString()===this.toHexString():!1},"equals");Lt.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(Math.floor(t)*1e3),e};Lt.index=~~(Math.random()*16777215);Lt.createPk=s(function(){return new Lt},"createPk");Lt.createFromTime=s(function(t){var r=vw.toBuffer([0,0,0,0,0,0,0,0,0,0,0,0]);return r[3]=t&255,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,new Lt(r)},"createFromTime");var Zy=[];zi=0;for(;zi<10;)Zy[48+zi]=zi++;for(;zi<16;)Zy[55+zi]=Zy[87+zi]=zi++;var ev=Buffer,cOe=s(function(e){return e.toString("hex")},"convertToHex");Lt.createFromHexString=s(function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(yw)return new Lt(vw.toBuffer(t,"hex"));for(var r=new ev(12),n=0,i=0;i<24;)r[n++]=Zy[t.charCodeAt(i++)]<<4|Zy[t.charCodeAt(i++)];return new Lt(r)},"createFromHexString");Lt.isValid=s(function(t){return t==null?!1:typeof t=="number"?!0:typeof t=="string"?t.length===12||t.length===24&&pH.test(t):t instanceof Lt||t instanceof ev?!0:typeof t.toHexString=="function"&&(t.id instanceof ev||typeof t.id=="string")?t.id.length===12||t.id.length===24&&pH.test(t.id):!1},"isValid");Object.defineProperty(Lt.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=e&255,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}});_w.exports=Lt;_w.exports.ObjectID=Lt;_w.exports.ObjectId=Lt});var rv=w((MSt,XN)=>{function Sw(e,t){if(!(this instanceof Sw))return new Sw;this._bsontype="BSONRegExp",this.pattern=e||"",this.options=t||"";for(var r=0;r<this.options.length;r++)if(!(this.options[r]==="i"||this.options[r]==="m"||this.options[r]==="x"||this.options[r]==="l"||this.options[r]==="s"||this.options[r]==="u"))throw new Error("the regular expression options ["+this.options[r]+"] is not supported")}s(Sw,"BSONRegExp");XN.exports=Sw;XN.exports.BSONRegExp=Sw});var nv=w((qSt,JN)=>{var lOe=Buffer&&require("util").inspect.custom||"inspect";function tc(e){if(!(this instanceof tc))return new tc(e);this._bsontype="Symbol",this.value=e}s(tc,"Symbol");tc.prototype.valueOf=function(){return this.value};tc.prototype.toString=function(){return this.value};tc.prototype[lOe]=function(){return this.value};tc.prototype.toJSON=function(){return this.value};JN.exports=tc;JN.exports.Symbol=tc});var Ew=w((USt,QN)=>{var Tf=s(function(e){if(!(this instanceof Tf))return new Tf(e);this._bsontype="Int32",this.value=e},"Int32");Tf.prototype.valueOf=function(){return this.value};Tf.prototype.toJSON=function(){return this.value};QN.exports=Tf;QN.exports.Int32=Tf});var iv=w(($St,ex)=>{var ZN=s(function e(t,r){if(!(this instanceof e))return new e(t,r);this._bsontype="Code",this.code=t,this.scope=r},"Code");ZN.prototype.toJSON=function(){return{scope:this.scope,code:this.code}};ex.exports=ZN;ex.exports.Code=ZN});var ov=w((GSt,rx)=>{"use strict";var Ct=Bl(),dOe=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,fOe=/^(\+|-)?(Infinity|inf)$/i,hOe=/^(\+|-)?NaN$/i,sv=6111,Cw=-6176,tx=6176,pOe=34,ww=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),bw=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ow=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),mOe=/^([-+])?(\d+)?$/,Ba=ec(),yH=s(function(e){return!isNaN(parseInt(e,10))},"isDigit"),gOe=s(function(e){var t=Ct.fromNumber(1e9),r=Ct.fromNumber(0),n=0;if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new Ct(e.parts[n],0)),e.parts[n]=r.div(t).low_,r=r.modulo(t);return{quotient:e,rem:r}},"divideu128"),yOe=s(function(e,t){if(!e&&!t)return{high:Ct.fromNumber(0),low:Ct.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new Ct(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new Ct(t.getLowBits(),0),a=r.multiply(i),u=r.multiply(o),l=n.multiply(i),f=n.multiply(o);return a=a.add(u.shiftRightUnsigned(32)),u=new Ct(u.getLowBits(),0).add(l).add(f.shiftRightUnsigned(32)),a=a.add(u.shiftRightUnsigned(32)),f=u.shiftLeft(32).add(new Ct(f.getLowBits(),0)),{high:a,low:f}},"multiply64x2"),vOe=s(function(e,t){var r=e.high_>>>0,n=t.high_>>>0;if(r<n)return!0;if(r===n){var i=e.low_>>>0,o=t.low_>>>0;if(i<o)return!0}return!1},"lessThan"),Hi=s(function(e){this._bsontype="Decimal128",this.bytes=e},"Decimal128");Hi.fromString=function(e){var t=!1,r=!1,n=!1,i=0,o=0,a=0,u=0,l=0,f=[0],h=0,p=0,g=0,_=0,C=0,D=0,O=[0,0],N=[0,0],F=0,x=0;if(e=e.trim(),e.length>=7e3)throw new Error(""+e+" not a valid Decimal128 string");var P=e.match(dOe),X=e.match(fOe),G=e.match(hOe);if(!P&&!X&&!G||e.length===0)throw new Error(""+e+" not a valid Decimal128 string");if(P&&P[4]&&P[2]===void 0)throw new Error(""+e+" not a valid Decimal128 string");if((e[x]==="+"||e[x]==="-")&&(t=e[x++]==="-"),!yH(e[x])&&e[x]!=="."){if(e[x]==="i"||e[x]==="I")return new Hi(Ba.toBuffer(t?bw:Ow));if(e[x]==="N")return new Hi(Ba.toBuffer(ww))}for(;yH(e[x])||e[x]===".";){if(e[x]==="."){if(r)return new Hi(Ba.toBuffer(ww));r=!0,x=x+1;continue}h<34&&(e[x]!=="0"||n)&&(n||(l=o),n=!0,f[p++]=parseInt(e[x],10),h=h+1),n&&(a=a+1),r&&(u=u+1),o=o+1,x=x+1}if(r&&!o)throw new Error(""+e+" not a valid Decimal128 string");if(e[x]==="e"||e[x]==="E"){var ue=e.substr(++x).match(mOe);if(!ue||!ue[2])return new Hi(Ba.toBuffer(ww));C=parseInt(ue[0],10),x=x+ue[0].length}if(e[x])return new Hi(Ba.toBuffer(ww));if(g=0,!h)g=0,_=0,f[0]=0,a=1,h=1,i=0;else if(_=h-1,i=a,C!==0&&i!==1)for(;e[l+i-1]==="0";)i=i-1;for(C<=u&&u-C>16384?C=Cw:C=C-u;C>sv;){if(_=_+1,_-g>pOe){var be=f.join("");if(be.match(/^0+$/)){C=sv;break}else return new Hi(Ba.toBuffer(t?bw:Ow))}C=C-1}for(;C<Cw||h<a;){if(_===0){C=Cw,i=0;break}if(h<a?a=a-1:_=_-1,C<sv)C=C+1;else if(be=f.join(""),be.match(/^0+$/)){C=sv;break}else return new Hi(Ba.toBuffer(t?bw:Ow))}if(_-g+1<i&&e[i]!=="0"){var Q=o;r&&C===Cw&&(l=l+1,Q=Q+1);var Se=parseInt(e[l+_+1],10),Ce=0;if(Se>=5&&(Ce=1,Se===5)){for(Ce=f[_]%2===1,D=l+_+2;D<Q;D++)if(parseInt(e[D],10)){Ce=1;break}}if(Ce){for(var le=_;le>=0&&++f[le]>9;le--)if(f[le]=0,le===0)if(C<sv)C=C+1,f[le]=1;else return new Hi(Ba.toBuffer(t?bw:Ow))}}if(O=Ct.fromNumber(0),N=Ct.fromNumber(0),i===0)O=Ct.fromNumber(0),N=Ct.fromNumber(0);else if(_-g<17)for(le=g,N=Ct.fromNumber(f[le++]),O=new Ct(0,0);le<=_;le++)N=N.multiply(Ct.fromNumber(10)),N=N.add(Ct.fromNumber(f[le]));else{for(le=g,O=Ct.fromNumber(f[le++]);le<=_-17;le++)O=O.multiply(Ct.fromNumber(10)),O=O.add(Ct.fromNumber(f[le]));for(N=Ct.fromNumber(f[le++]);le<=_;le++)N=N.multiply(Ct.fromNumber(10)),N=N.add(Ct.fromNumber(f[le]))}var ce=yOe(O,Ct.fromString("100000000000000000"));ce.low=ce.low.add(N),vOe(ce.low,N)&&(ce.high=ce.high.add(Ct.fromNumber(1))),F=C+tx;var ve={low:Ct.fromNumber(0),high:Ct.fromNumber(0)};ce.high.shiftRightUnsigned(49).and(Ct.fromNumber(1)).equals(Ct.fromNumber)?(ve.high=ve.high.or(Ct.fromNumber(3).shiftLeft(61)),ve.high=ve.high.or(Ct.fromNumber(F).and(Ct.fromNumber(16383).shiftLeft(47))),ve.high=ve.high.or(ce.high.and(Ct.fromNumber(0x7fffffffffff)))):(ve.high=ve.high.or(Ct.fromNumber(F&16383).shiftLeft(49)),ve.high=ve.high.or(ce.high.and(Ct.fromNumber(562949953421311)))),ve.low=ce.low,t&&(ve.high=ve.high.or(Ct.fromString("9223372036854775808")));var Pe=Ba.allocBuffer(16);return x=0,Pe[x++]=ve.low.low_&255,Pe[x++]=ve.low.low_>>8&255,Pe[x++]=ve.low.low_>>16&255,Pe[x++]=ve.low.low_>>24&255,Pe[x++]=ve.low.high_&255,Pe[x++]=ve.low.high_>>8&255,Pe[x++]=ve.low.high_>>16&255,Pe[x++]=ve.low.high_>>24&255,Pe[x++]=ve.high.low_&255,Pe[x++]=ve.high.low_>>8&255,Pe[x++]=ve.high.low_>>16&255,Pe[x++]=ve.high.low_>>24&255,Pe[x++]=ve.high.high_&255,Pe[x++]=ve.high.high_>>8&255,Pe[x++]=ve.high.high_>>16&255,Pe[x++]=ve.high.high_>>24&255,new Hi(Pe)};var _Oe=31,vH=16383,SOe=30,EOe=31;tx=6176;Hi.prototype.toString=function(){for(var e,t,r,n,i,o,a=0,u=new Array(36),l=0;l<u.length;l++)u[l]=0;var f=0,h,p,g=!1,_,C={parts:new Array(4)},D,O,N=[];f=0;var F=this.bytes;n=F[f++]|F[f++]<<8|F[f++]<<16|F[f++]<<24,r=F[f++]|F[f++]<<8|F[f++]<<16|F[f++]<<24,t=F[f++]|F[f++]<<8|F[f++]<<16|F[f++]<<24,e=F[f++]|F[f++]<<8|F[f++]<<16|F[f++]<<24,f=0;var x={low:new Ct(n,r),high:new Ct(t,e)};if(x.high.lessThan(Ct.ZERO)&&N.push("-"),i=e>>26&_Oe,i>>3===3){if(i===SOe)return N.join("")+"Infinity";if(i===EOe)return"NaN";o=e>>15&vH,_=8+(e>>14&1)}else _=e>>14&7,o=e>>17&vH;if(h=o-tx,C.parts[0]=(e&16383)+((_&15)<<14),C.parts[1]=t,C.parts[2]=r,C.parts[3]=n,C.parts[0]===0&&C.parts[1]===0&&C.parts[2]===0&&C.parts[3]===0)g=!0;else for(O=3;O>=0;O--){var P=0,X=gOe(C);if(C=X.quotient,P=X.rem.low_,!!P)for(D=8;D>=0;D--)u[O*9+D]=P%10,P=Math.floor(P/10)}if(g)a=1,u[f]=0;else for(a=36,l=0;!u[f];)l++,a=a-1,f=f+1;if(p=a-1+h,p>=34||p<=-7||h>0){for(N.push(u[f++]),a=a-1,a&&N.push("."),l=0;l<a;l++)N.push(u[f++]);N.push("E"),p>0?N.push("+"+p):N.push(p)}else if(h>=0)for(l=0;l<a;l++)N.push(u[f++]);else{var G=a+h;if(G>0)for(l=0;l<G;l++)N.push(u[f++]);else N.push("0");for(N.push(".");G++<0;)N.push("0");for(l=0;l<a-Math.max(G-1,0);l++)N.push(u[f++])}return N.join("")};Hi.prototype.toJSON=function(){return{$numberDecimal:this.toString()}};rx.exports=Hi;rx.exports.Decimal128=Hi});var av=w((zSt,nx)=>{function Tw(){if(!(this instanceof Tw))return new Tw;this._bsontype="MinKey"}s(Tw,"MinKey");nx.exports=Tw;nx.exports.MinKey=Tw});var uv=w((VSt,ix)=>{function Aw(){if(!(this instanceof Aw))return new Aw;this._bsontype="MaxKey"}s(Aw,"MaxKey");ix.exports=Aw;ix.exports.MaxKey=Aw});var lv=w((KSt,sx)=>{function cv(e,t,r){if(!(this instanceof cv))return new cv(e,t,r);this._bsontype="DBRef",this.namespace=e,this.oid=t,this.db=r}s(cv,"DBRef");cv.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:this.db==null?"":this.db}};sx.exports=cv;sx.exports.DBRef=cv});var Af=w((JSt,ox)=>{typeof global<"u"&&(Mn=require("buffer").Buffer);var Mn,Iw=ec();function Sr(e,t){if(!(this instanceof Sr))return new Sr(e,t);if(e!=null&&typeof e!="string"&&!Mn.isBuffer(e)&&!(e instanceof Uint8Array)&&!Array.isArray(e))throw new Error("only String, Buffer, Uint8Array or Array accepted");if(this._bsontype="Binary",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=t??COe,this.position=0),e!=null&&!(e instanceof Number)){if(typeof e=="string")if(typeof Mn<"u")this.buffer=Iw.toBuffer(e);else if(typeof Uint8Array<"u"||Object.prototype.toString.call(e)==="[object Array]")this.buffer=wOe(e);else throw new Error("only String, Buffer, Uint8Array or Array accepted");else this.buffer=e;this.position=e.length}else typeof Mn<"u"?this.buffer=Iw.allocBuffer(Sr.BUFFER_SIZE):typeof Uint8Array<"u"?this.buffer=new Uint8Array(new ArrayBuffer(Sr.BUFFER_SIZE)):this.buffer=new Array(Sr.BUFFER_SIZE),this.position=0}s(Sr,"Binary");Sr.prototype.put=s(function(t){if(t.length!=null&&typeof t!="number"&&t.length!==1)throw new Error("only accepts single character String, Uint8Array or Array");if(typeof t!="number"&&t<0||t>255)throw new Error("only accepts number in a valid unsigned byte range 0-255");var r=null;if(typeof t=="string"?r=t.charCodeAt(0):t.length!=null?r=t[0]:r=t,this.buffer.length>this.position)this.buffer[this.position++]=r;else if(typeof Mn<"u"&&Mn.isBuffer(this.buffer)){var n=Iw.allocBuffer(Sr.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}else{n=null,Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"?n=new Uint8Array(new ArrayBuffer(Sr.BUFFER_SIZE+this.buffer.length)):n=new Array(Sr.BUFFER_SIZE+this.buffer.length);for(var i=0;i<this.buffer.length;i++)n[i]=this.buffer[i];this.buffer=n,this.buffer[this.position++]=r}},"put");Sr.prototype.write=s(function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var n=null;if(typeof Mn<"u"&&Mn.isBuffer(this.buffer))n=Iw.allocBuffer(this.buffer.length+t.length),this.buffer.copy(n,0,0,this.buffer.length);else if(Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"){n=new Uint8Array(new ArrayBuffer(this.buffer.length+t.length));for(var i=0;i<this.position;i++)n[i]=this.buffer[i]}this.buffer=n}if(typeof Mn<"u"&&Mn.isBuffer(t)&&Mn.isBuffer(this.buffer))t.copy(this.buffer,r,0,t.length),this.position=r+t.length>this.position?r+t.length:this.position;else if(typeof Mn<"u"&&typeof t=="string"&&Mn.isBuffer(this.buffer))this.buffer.write(t,r,"binary"),this.position=r+t.length>this.position?r+t.length:this.position;else if(Object.prototype.toString.call(t)==="[object Uint8Array]"||Object.prototype.toString.call(t)==="[object Array]"&&typeof t!="string"){for(i=0;i<t.length;i++)this.buffer[r++]=t[i];this.position=r>this.position?r:this.position}else if(typeof t=="string"){for(i=0;i<t.length;i++)this.buffer[r++]=t.charCodeAt(i);this.position=r>this.position?r:this.position}},"write");Sr.prototype.read=s(function(t,r){if(r=r&&r>0?r:this.position,this.buffer.slice)return this.buffer.slice(t,t+r);for(var n=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(r)):new Array(r),i=0;i<r;i++)n[i]=this.buffer[t++];return n},"read");Sr.prototype.value=s(function(t){if(t=t??!1,t&&typeof Mn<"u"&&Mn.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(typeof Mn<"u"&&Mn.isBuffer(this.buffer))return t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(t){if(this.buffer.slice!=null)return this.buffer.slice(0,this.position);for(var r=Object.prototype.toString.call(this.buffer)==="[object Uint8Array]"?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)r[n]=this.buffer[n];return r}else return bOe(this.buffer,0,this.position)},"value");Sr.prototype.length=s(function(){return this.position},"length");Sr.prototype.toJSON=function(){return this.buffer!=null?this.buffer.toString("base64"):""};Sr.prototype.toString=function(e){return this.buffer!=null?this.buffer.slice(0,this.position).toString(e):""};var COe=0,wOe=s(function(e){for(var t=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},"writeStringToArray"),bOe=s(function(e,t,r){for(var n="",i=t;i<r;i++)n=n+String.fromCharCode(e[i]);return n},"convertArraytoUtf8BinaryString");Sr.BUFFER_SIZE=256;Sr.SUBTYPE_DEFAULT=0;Sr.SUBTYPE_FUNCTION=1;Sr.SUBTYPE_BYTE_ARRAY=2;Sr.SUBTYPE_UUID_OLD=3;Sr.SUBTYPE_UUID=4;Sr.SUBTYPE_MD5=5;Sr.SUBTYPE_USER_DEFINED=128;ox.exports=Sr;ox.exports.Binary=Sr});var _H=w((exports,module)=>{"use strict";var Long=Bl().Long,Double=Jy().Double,Timestamp=Qy().Timestamp,ObjectID=tv().ObjectID,Symbol=nv().Symbol,Code=iv().Code,MinKey=av().MinKey,MaxKey=uv().MaxKey,Decimal128=ov(),Int32=Ew(),DBRef=lv().DBRef,BSONRegExp=rv().BSONRegExp,Binary=Af().Binary,utils=ec(),deserialize=s(function(e,t,r){t=t??{};var n=t&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5||e.length<i||i+n>e.length)throw new Error("corrupt bson message");if(e[n+i-1]!==0)throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,n,t,r)},"deserialize"),deserializeObject=s(function(e,t,r,n){var i=r.evalFunctions==null?!1:r.evalFunctions,o=r.cacheFunctions==null?!1:r.cacheFunctions,a=r.cacheFunctionsCrc32==null?!1:r.cacheFunctionsCrc32;if(!a)var u=null;var l=r.fieldsAsRaw==null?null:r.fieldsAsRaw,f=r.raw==null?!1:r.raw,h=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,p=r.promoteBuffers==null?!1:r.promoteBuffers,g=r.promoteLongs==null?!0:r.promoteLongs,_=r.promoteValues==null?!0:r.promoteValues,C=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var D=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(D<5||D>e.length)throw new Error("corrupt bson message");for(var O=n?[]:{},N=0,F=!1;!F;){var x=e[t++];if(x===0)break;for(var P=t;e[P]!==0&&P<e.length;)P++;if(P>=e.length)throw new Error("Bad BSON Document: illegal CString");var X=n?N++:e.toString("utf8",t,P);if(t=P+1,x===BSON.BSON_DATA_STRING){var G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(G<=0||G>e.length-t||e[t+G-1]!==0)throw new Error("bad string length in bson");O[X]=e.toString("utf8",t,t+G-1),t=t+G}else if(x===BSON.BSON_DATA_OID){var ue=utils.allocBuffer(12);e.copy(ue,0,t,t+12),O[X]=new ObjectID(ue),t=t+12}else if(x===BSON.BSON_DATA_INT&&_===!1)O[X]=new Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(x===BSON.BSON_DATA_INT)O[X]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(x===BSON.BSON_DATA_NUMBER&&_===!1)O[X]=new Double(e.readDoubleLE(t)),t=t+8;else if(x===BSON.BSON_DATA_NUMBER)O[X]=e.readDoubleLE(t),t=t+8;else if(x===BSON.BSON_DATA_DATE){var be=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;O[X]=new Date(new Long(be,Q).toNumber())}else if(x===BSON.BSON_DATA_BOOLEAN){if(e[t]!==0&&e[t]!==1)throw new Error("illegal boolean type value");O[X]=e[t++]===1}else if(x===BSON.BSON_DATA_OBJECT){var Se=t,Ce=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(Ce<=0||Ce>e.length-t)throw new Error("bad embedded document length in bson");f?O[X]=e.slice(t,t+Ce):O[X]=deserializeObject(e,Se,r,!1),t=t+Ce}else if(x===BSON.BSON_DATA_ARRAY){Se=t,Ce=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var le=r,ce=t+Ce;if(l&&l[X]){le={};for(var ve in r)le[ve]=r[ve];le.raw=!0}if(O[X]=deserializeObject(e,Se,le,!0),t=t+Ce,e[t-1]!==0)throw new Error("invalid array terminator byte");if(t!==ce)throw new Error("corrupted array bson")}else if(x===BSON.BSON_DATA_UNDEFINED)O[X]=void 0;else if(x===BSON.BSON_DATA_NULL)O[X]=null;else if(x===BSON.BSON_DATA_LONG){be=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var Pe=new Long(be,Q);g&&_===!0?O[X]=Pe.lessThanOrEqual(JS_INT_MAX_LONG)&&Pe.greaterThanOrEqual(JS_INT_MIN_LONG)?Pe.toNumber():Pe:O[X]=Pe}else if(x===BSON.BSON_DATA_DECIMAL128){var Ee=utils.allocBuffer(16);e.copy(Ee,0,t,t+16),t=t+16;var Oe=new Decimal128(Ee);O[X]=Oe.toObject?Oe.toObject():Oe}else if(x===BSON.BSON_DATA_BINARY){var dt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,Fe=dt,rt=e[t++];if(dt<0)throw new Error("Negative binary type element size found");if(dt>e.length)throw new Error("Binary type size larger than document size");if(e.slice!=null){if(rt===Binary.SUBTYPE_BYTE_ARRAY){if(dt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,dt<0)throw new Error("Negative binary type element size found for subtype 0x02");if(dt>Fe-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(dt<Fe-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}p&&_?O[X]=e.slice(t,t+dt):O[X]=new Binary(e.slice(t,t+dt),rt)}else{var Kn=typeof Uint8Array<"u"?new Uint8Array(new ArrayBuffer(dt)):new Array(dt);if(rt===Binary.SUBTYPE_BYTE_ARRAY){if(dt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,dt<0)throw new Error("Negative binary type element size found for subtype 0x02");if(dt>Fe-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(dt<Fe-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(P=0;P<dt;P++)Kn[P]=e[t+P];p&&_?O[X]=Kn:O[X]=new Binary(Kn,rt)}t=t+dt}else if(x===BSON.BSON_DATA_REGEXP&&h===!1){for(P=t;e[P]!==0&&P<e.length;)P++;if(P>=e.length)throw new Error("Bad BSON Document: illegal CString");var Cr=e.toString("utf8",t,P);for(t=P+1,P=t;e[P]!==0&&P<e.length;)P++;if(P>=e.length)throw new Error("Bad BSON Document: illegal CString");var Lr=e.toString("utf8",t,P);t=P+1;var yn=new Array(Lr.length);for(P=0;P<Lr.length;P++)switch(Lr[P]){case"m":yn[P]="m";break;case"s":yn[P]="g";break;case"i":yn[P]="i";break}O[X]=new RegExp(Cr,yn.join(""))}else if(x===BSON.BSON_DATA_REGEXP&&h===!0){for(P=t;e[P]!==0&&P<e.length;)P++;if(P>=e.length)throw new Error("Bad BSON Document: illegal CString");for(Cr=e.toString("utf8",t,P),t=P+1,P=t;e[P]!==0&&P<e.length;)P++;if(P>=e.length)throw new Error("Bad BSON Document: illegal CString");Lr=e.toString("utf8",t,P),t=P+1,O[X]=new BSONRegExp(Cr,Lr)}else if(x===BSON.BSON_DATA_SYMBOL){if(G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,G<=0||G>e.length-t||e[t+G-1]!==0)throw new Error("bad string length in bson");O[X]=new Symbol(e.toString("utf8",t,t+G-1)),t=t+G}else if(x===BSON.BSON_DATA_TIMESTAMP)be=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,O[X]=new Timestamp(be,Q);else if(x===BSON.BSON_DATA_MIN_KEY)O[X]=new MinKey;else if(x===BSON.BSON_DATA_MAX_KEY)O[X]=new MaxKey;else if(x===BSON.BSON_DATA_CODE){if(G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,G<=0||G>e.length-t||e[t+G-1]!==0)throw new Error("bad string length in bson");var or=e.toString("utf8",t,t+G-1);if(i)if(o){var Li=a?u(or):or;O[X]=isolateEvalWithHash(functionCache,Li,or,O)}else O[X]=isolateEval(or);else O[X]=new Code(or);t=t+G}else if(x===BSON.BSON_DATA_CODE_W_SCOPE){var fn=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(fn<13)throw new Error("code_w_scope total size shorter minimum expected length");if(G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,G<=0||G>e.length-t||e[t+G-1]!==0)throw new Error("bad string length in bson");or=e.toString("utf8",t,t+G-1),t=t+G,Se=t,Ce=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;var Mo=deserializeObject(e,Se,r,!1);if(t=t+Ce,fn<8+Ce+G)throw new Error("code_w_scope total size is to short, truncating scope");if(fn>8+Ce+G)throw new Error("code_w_scope total size is to long, clips outer document");i?(o?(Li=a?u(or):or,O[X]=isolateEvalWithHash(functionCache,Li,or,O)):O[X]=isolateEval(or),O[X].scope=Mo):O[X]=new Code(or,Mo)}else if(x===BSON.BSON_DATA_DBPOINTER){if(G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,G<=0||G>e.length-t||e[t+G-1]!==0)throw new Error("bad string length in bson");var vn=e.toString("utf8",t,t+G-1);t=t+G;var $t=utils.allocBuffer(12);e.copy($t,0,t,t+12),ue=new ObjectID($t),t=t+12;var Ui=vn.split("."),Pr=Ui.shift(),Cs=Ui.join(".");O[X]=new DBRef(Cs,ue,Pr)}else throw new Error("Detected unknown BSON type "+x.toString(16)+' for fieldname "'+X+'", are you using the latest BSON parser')}if(D!==t-C)throw n?new Error("corrupt array bson"):new Error("corrupt object bson");return O.$id!=null&&(O=new DBRef(O.$ref,O.$id,O.$db)),O},"deserializeObject"),isolateEvalWithHash=s(function(functionCache,hash,functionString,object){var value=null;return functionCache[hash]==null&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},"isolateEvalWithHash"),isolateEval=s(function(functionString){var value=null;return eval("value = "+functionString),value},"isolateEval"),BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1;BSON.BSON_DATA_STRING=2;BSON.BSON_DATA_OBJECT=3;BSON.BSON_DATA_ARRAY=4;BSON.BSON_DATA_BINARY=5;BSON.BSON_DATA_UNDEFINED=6;BSON.BSON_DATA_OID=7;BSON.BSON_DATA_BOOLEAN=8;BSON.BSON_DATA_DATE=9;BSON.BSON_DATA_NULL=10;BSON.BSON_DATA_REGEXP=11;BSON.BSON_DATA_DBPOINTER=12;BSON.BSON_DATA_CODE=13;BSON.BSON_DATA_SYMBOL=14;BSON.BSON_DATA_CODE_W_SCOPE=15;BSON.BSON_DATA_INT=16;BSON.BSON_DATA_TIMESTAMP=17;BSON.BSON_DATA_LONG=18;BSON.BSON_DATA_DECIMAL128=19;BSON.BSON_DATA_MIN_KEY=255;BSON.BSON_DATA_MAX_KEY=127;BSON.BSON_BINARY_SUBTYPE_DEFAULT=0;BSON.BSON_BINARY_SUBTYPE_FUNCTION=1;BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;BSON.BSON_BINARY_SUBTYPE_UUID=3;BSON.BSON_BINARY_SUBTYPE_MD5=4;BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128;BSON.BSON_INT32_MAX=2147483647;BSON.BSON_INT32_MIN=-2147483648;BSON.BSON_INT64_MAX=Math.pow(2,63)-1;BSON.BSON_INT64_MIN=-Math.pow(2,63);BSON.JS_INT_MAX=9007199254740992;BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);module.exports=deserialize});var SH=w(ax=>{var OOe=s(function(e,t,r,n,i){var o,a,u=r==="big",l=i*8-n-1,f=(1<<l)-1,h=f>>1,p=-7,g=u?0:i-1,_=u?1:-1,C=e[t+g];for(g+=_,o=C&(1<<-p)-1,C>>=-p,p+=l;p>0;o=o*256+e[t+g],g+=_,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=n;p>0;a=a*256+e[t+g],g+=_,p-=8);if(o===0)o=1-h;else{if(o===f)return a?NaN:(C?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-h}return(C?-1:1)*a*Math.pow(2,o-n)},"readIEEE754"),TOe=s(function(e,t,r,n,i,o){var a,u,l,f=n==="big",h=o*8-i-1,p=(1<<h)-1,g=p>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=f?o-1:0,D=f?-1:1,O=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+g>=1?t+=_/l:t+=_*Math.pow(2,1-g),t*l>=2&&(a++,l/=2),a+g>=p?(u=0,a=p):a+g>=1?(u=(t*l-1)*Math.pow(2,i),a=a+g):(u=t*Math.pow(2,g-1)*Math.pow(2,i),a=0));i>=8;e[r+C]=u&255,C+=D,u/=256,i-=8);for(a=a<<i|u,h+=i;h>0;e[r+C]=a&255,C+=D,a/=256,h-=8);e[r+C-D]|=O*128},"writeIEEE754");ax.readIEEE754=OOe;ax.writeIEEE754=TOe});var OH=w((r0t,bH)=>{"use strict";var Dx=SH().writeIEEE754,wH=Bl().Long,AOe=gw(),EH=Af().Binary,IOe=ec().normalizedFunctionString,Dw=/\x00/,CH=["$db","$ref","$id","$clusterTime"],ux=s(function(t){return typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"},"isDate"),cx=s(function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},"isRegExp"),lx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_STRING;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o+1,e[n-1]=0;var a=e.write(r,n+4,"utf8");return e[n+3]=a+1>>24&255,e[n+2]=a+1>>16&255,e[n+1]=a+1>>8&255,e[n]=a+1&255,n=n+4+a,e[n++]=0,n},"serializeString"),dx=s(function(e,t,r,n,i){if(Math.floor(r)===r&&r>=Ae.JS_INT_MIN&&r<=Ae.JS_INT_MAX)if(r>=Ae.BSON_INT32_MIN&&r<=Ae.BSON_INT32_MAX){e[n++]=Ae.BSON_DATA_INT;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else if(r>=Ae.JS_INT_MIN&&r<=Ae.JS_INT_MAX)e[n++]=Ae.BSON_DATA_NUMBER,o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+o,e[n++]=0,Dx(e,r,n,"little",52,8),n=n+8;else{e[n++]=Ae.BSON_DATA_LONG,o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+o,e[n++]=0;var a=wH.fromNumber(r),u=a.getLowBits(),l=a.getHighBits();e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=l&255,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255}else e[n++]=Ae.BSON_DATA_NUMBER,o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+o,e[n++]=0,Dx(e,r,n,"little",52,8),n=n+8;return n},"serializeNumber"),dv=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_NULL;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,n},"serializeNull"),fx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_BOOLEAN;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,e[n++]=r?1:0,n},"serializeBoolean"),hx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_DATE;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0;var a=wH.fromNumber(r.getTime()),u=a.getLowBits(),l=a.getHighBits();return e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=l&255,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255,n},"serializeDate"),px=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_REGEXP;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+o,e[n++]=0,r.source&&r.source.match(Dw)!=null)throw Error("value "+r.source+" must not contain null bytes");return n=n+e.write(r.source,n,"utf8"),e[n++]=0,r.global&&(e[n++]=115),r.ignoreCase&&(e[n++]=105),r.multiline&&(e[n++]=109),e[n++]=0,n},"serializeRegExp"),mx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_REGEXP;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+o,e[n++]=0,r.pattern.match(Dw)!=null)throw Error("pattern "+r.pattern+" must not contain null bytes");return n=n+e.write(r.pattern,n,"utf8"),e[n++]=0,n=n+e.write(r.options.split("").sort().join(""),n,"utf8"),e[n++]=0,n},"serializeBSONRegExp"),gx=s(function(e,t,r,n,i){r===null?e[n++]=Ae.BSON_DATA_NULL:r._bsontype==="MinKey"?e[n++]=Ae.BSON_DATA_MIN_KEY:e[n++]=Ae.BSON_DATA_MAX_KEY;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,n},"serializeMinMax"),yx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_OID;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");if(n=n+o,e[n++]=0,typeof r.id=="string")e.write(r.id,n,"binary");else if(r.id&&r.id.copy)r.id.copy(e,n,0,12);else throw new Error("object ["+JSON.stringify(r)+"] is not a valid ObjectId");return n+12},"serializeObjectId"),vx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_BINARY;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0;var a=r.length;return e[n++]=a&255,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,e[n++]=Ae.BSON_BINARY_SUBTYPE_DEFAULT,r.copy(e,n,0,a),n=n+a,n},"serializeBuffer"),_x=s(function(e,t,r,n,i,o,a,u,l,f){for(var h=0;h<f.length;h++)if(f[h]===r)throw new Error("cyclic dependency detected");f.push(r),e[n++]=Array.isArray(r)?Ae.BSON_DATA_ARRAY:Ae.BSON_DATA_OBJECT;var p=l?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+p,e[n++]=0;var g=fv(e,r,i,n,o+1,a,u,f);return f.pop(),g},"serializeObject"),Sx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_DECIMAL128;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,r.bytes.copy(e,n,0,16),n+16},"serializeDecimal128"),Ex=s(function(e,t,r,n,i){e[n++]=r._bsontype==="Long"?Ae.BSON_DATA_LONG:Ae.BSON_DATA_TIMESTAMP;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0;var a=r.getLowBits(),u=r.getHighBits();return e[n++]=a&255,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n},"serializeLong"),Cx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_INT;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n},"serializeInt32"),wx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_NUMBER;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");return n=n+o,e[n++]=0,Dx(e,r,n,"little",52,8),n=n+8,n},"serializeDouble"),bx=s(function(e,t,r,n,i,o,a){e[n++]=Ae.BSON_DATA_CODE;var u=a?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+u,e[n++]=0;var l=IOe(r),f=e.write(l,n+4,"utf8")+1;return e[n]=f&255,e[n+1]=f>>8&255,e[n+2]=f>>16&255,e[n+3]=f>>24&255,n=n+4+f-1,e[n++]=0,n},"serializeFunction"),Ox=s(function(e,t,r,n,i,o,a,u,l){if(r.scope&&typeof r.scope=="object"){e[n++]=Ae.BSON_DATA_CODE_W_SCOPE;var f=l?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+f,e[n++]=0;var h=n,p=typeof r.code=="string"?r.code:r.code.toString();n=n+4;var g=e.write(p,n+4,"utf8")+1;e[n]=g&255,e[n+1]=g>>8&255,e[n+2]=g>>16&255,e[n+3]=g>>24&255,e[n+4+g-1]=0,n=n+g+4;var _=fv(e,r.scope,i,n,o+1,a,u);n=_-1;var C=_-h;e[h++]=C&255,e[h++]=C>>8&255,e[h++]=C>>16&255,e[h++]=C>>24&255,e[n++]=0}else{e[n++]=Ae.BSON_DATA_CODE,f=l?e.write(t,n,"ascii"):e.write(t,n,"utf8"),n=n+f,e[n++]=0,p=r.code.toString();var D=e.write(p,n+4,"utf8")+1;e[n]=D&255,e[n+1]=D>>8&255,e[n+2]=D>>16&255,e[n+3]=D>>24&255,n=n+4+D-1,e[n++]=0}return n},"serializeCode"),Tx=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_BINARY;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0;var a=r.value(!0),u=r.position;return r.sub_type===EH.SUBTYPE_BYTE_ARRAY&&(u=u+4),e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=r.sub_type,r.sub_type===EH.SUBTYPE_BYTE_ARRAY&&(u=u-4,e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255),a.copy(e,n,0,r.position),n=n+r.position,n},"serializeBinary"),Ax=s(function(e,t,r,n,i){e[n++]=Ae.BSON_DATA_SYMBOL;var o=i?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+o,e[n++]=0;var a=e.write(r.value,n+4,"utf8")+1;return e[n]=a&255,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n},"serializeSymbol"),Ix=s(function(e,t,r,n,i,o,a){e[n++]=Ae.BSON_DATA_OBJECT;var u=a?e.write(t,n,"ascii"):e.write(t,n,"utf8");n=n+u,e[n++]=0;var l=n,f;r.db!=null?f=fv(e,{$ref:r.namespace,$id:r.oid,$db:r.db},!1,n,i+1,o):f=fv(e,{$ref:r.namespace,$id:r.oid},!1,n,i+1,o);var h=f-l;return e[l++]=h&255,e[l++]=h>>8&255,e[l++]=h>>16&255,e[l++]=h>>24&255,f},"serializeDBRef"),fv=s(function(t,r,n,i,o,a,u,l){i=i||0,l=l||[],l.push(r);var f=i+4;if(Array.isArray(r))for(var h=0;h<r.length;h++){var p=""+h,g=r[h];if(g&&g.toBSON){if(typeof g.toBSON!="function")throw new Error("toBSON is not a function");g=g.toBSON()}var _=typeof g;if(_==="string")f=lx(t,p,g,f,!0);else if(_==="number")f=dx(t,p,g,f,!0);else{if(_==="bigint")throw new TypeError("Unsupported type BigInt, please use Decimal128");if(_==="boolean")f=fx(t,p,g,f,!0);else if(g instanceof Date||ux(g))f=hx(t,p,g,f,!0);else if(g===void 0)f=dv(t,p,g,f,!0);else if(g===null)f=dv(t,p,g,f,!0);else if(g._bsontype==="ObjectID"||g._bsontype==="ObjectId")f=yx(t,p,g,f,!0);else if(Buffer.isBuffer(g))f=vx(t,p,g,f,!0);else if(g instanceof RegExp||cx(g))f=px(t,p,g,f,!0);else if(_==="object"&&g._bsontype==null)f=_x(t,p,g,f,n,o,a,u,!0,l);else if(_==="object"&&g._bsontype==="Decimal128")f=Sx(t,p,g,f,!0);else if(g._bsontype==="Long"||g._bsontype==="Timestamp")f=Ex(t,p,g,f,!0);else if(g._bsontype==="Double")f=wx(t,p,g,f,!0);else if(typeof g=="function"&&a)f=bx(t,p,g,f,n,o,a,!0);else if(g._bsontype==="Code")f=Ox(t,p,g,f,n,o,a,u,!0);else if(g._bsontype==="Binary")f=Tx(t,p,g,f,!0);else if(g._bsontype==="Symbol")f=Ax(t,p,g,f,!0);else if(g._bsontype==="DBRef")f=Ix(t,p,g,f,o,a,!0);else if(g._bsontype==="BSONRegExp")f=mx(t,p,g,f,!0);else if(g._bsontype==="Int32")f=Cx(t,p,g,f,!0);else if(g._bsontype==="MinKey"||g._bsontype==="MaxKey")f=gx(t,p,g,f,!0);else if(typeof g._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+g._bsontype)}}else if(r instanceof AOe)for(var C=r.entries(),D=!1;!D;){var O=C.next();if(D=O.done,!D){if(p=O.value[0],g=O.value[1],_=typeof g,typeof p=="string"&&CH.indexOf(p)===-1){if(p.match(Dw)!=null)throw Error("key "+p+" must not contain null bytes");if(n){if(p[0]==="$")throw Error("key "+p+" must not start with '$'");if(~p.indexOf("."))throw Error("key "+p+" must not contain '.'")}}if(_==="string")f=lx(t,p,g,f);else if(_==="number")f=dx(t,p,g,f);else{if(_==="bigint")throw new TypeError("Unsupported type BigInt, please use Decimal128");if(_==="boolean")f=fx(t,p,g,f);else if(g instanceof Date||ux(g))f=hx(t,p,g,f);else if(g===null||g===void 0&&u===!1)f=dv(t,p,g,f);else if(g._bsontype==="ObjectID"||g._bsontype==="ObjectId")f=yx(t,p,g,f);else if(Buffer.isBuffer(g))f=vx(t,p,g,f);else if(g instanceof RegExp||cx(g))f=px(t,p,g,f);else if(_==="object"&&g._bsontype==null)f=_x(t,p,g,f,n,o,a,u,!1,l);else if(_==="object"&&g._bsontype==="Decimal128")f=Sx(t,p,g,f);else if(g._bsontype==="Long"||g._bsontype==="Timestamp")f=Ex(t,p,g,f);else if(g._bsontype==="Double")f=wx(t,p,g,f);else if(g._bsontype==="Code")f=Ox(t,p,g,f,n,o,a,u);else if(typeof g=="function"&&a)f=bx(t,p,g,f,n,o,a);else if(g._bsontype==="Binary")f=Tx(t,p,g,f);else if(g._bsontype==="Symbol")f=Ax(t,p,g,f);else if(g._bsontype==="DBRef")f=Ix(t,p,g,f,o,a);else if(g._bsontype==="BSONRegExp")f=mx(t,p,g,f);else if(g._bsontype==="Int32")f=Cx(t,p,g,f);else if(g._bsontype==="MinKey"||g._bsontype==="MaxKey")f=gx(t,p,g,f);else if(typeof g._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+g._bsontype)}}}else{if(r.toBSON){if(typeof r.toBSON!="function")throw new Error("toBSON is not a function");if(r=r.toBSON(),r!=null&&typeof r!="object")throw new Error("toBSON function did not return an object")}for(p in r){if(g=r[p],g&&g.toBSON){if(typeof g.toBSON!="function")throw new Error("toBSON is not a function");g=g.toBSON()}if(_=typeof g,typeof p=="string"&&CH.indexOf(p)===-1){if(p.match(Dw)!=null)throw Error("key "+p+" must not contain null bytes");if(n){if(p[0]==="$")throw Error("key "+p+" must not start with '$'");if(~p.indexOf("."))throw Error("key "+p+" must not contain '.'")}}if(_==="string")f=lx(t,p,g,f);else if(_==="number")f=dx(t,p,g,f);else{if(_==="bigint")throw new TypeError("Unsupported type BigInt, please use Decimal128");if(_==="boolean")f=fx(t,p,g,f);else if(g instanceof Date||ux(g))f=hx(t,p,g,f);else if(g===void 0)u===!1&&(f=dv(t,p,g,f));else if(g===null)f=dv(t,p,g,f);else if(g._bsontype==="ObjectID"||g._bsontype==="ObjectId")f=yx(t,p,g,f);else if(Buffer.isBuffer(g))f=vx(t,p,g,f);else if(g instanceof RegExp||cx(g))f=px(t,p,g,f);else if(_==="object"&&g._bsontype==null)f=_x(t,p,g,f,n,o,a,u,!1,l);else if(_==="object"&&g._bsontype==="Decimal128")f=Sx(t,p,g,f);else if(g._bsontype==="Long"||g._bsontype==="Timestamp")f=Ex(t,p,g,f);else if(g._bsontype==="Double")f=wx(t,p,g,f);else if(g._bsontype==="Code")f=Ox(t,p,g,f,n,o,a,u);else if(typeof g=="function"&&a)f=bx(t,p,g,f,n,o,a);else if(g._bsontype==="Binary")f=Tx(t,p,g,f);else if(g._bsontype==="Symbol")f=Ax(t,p,g,f);else if(g._bsontype==="DBRef")f=Ix(t,p,g,f,o,a);else if(g._bsontype==="BSONRegExp")f=mx(t,p,g,f);else if(g._bsontype==="Int32")f=Cx(t,p,g,f);else if(g._bsontype==="MinKey"||g._bsontype==="MaxKey")f=gx(t,p,g,f);else if(typeof g._bsontype<"u")throw new TypeError("Unrecognized or invalid _bsontype: "+g._bsontype)}}}l.pop(),t[f++]=0;var N=f-i;return t[i++]=N&255,t[i++]=N>>8&255,t[i++]=N>>16&255,t[i++]=N>>24&255,f},"serializeInto"),Ae={};Ae.BSON_DATA_NUMBER=1;Ae.BSON_DATA_STRING=2;Ae.BSON_DATA_OBJECT=3;Ae.BSON_DATA_ARRAY=4;Ae.BSON_DATA_BINARY=5;Ae.BSON_DATA_UNDEFINED=6;Ae.BSON_DATA_OID=7;Ae.BSON_DATA_BOOLEAN=8;Ae.BSON_DATA_DATE=9;Ae.BSON_DATA_NULL=10;Ae.BSON_DATA_REGEXP=11;Ae.BSON_DATA_CODE=13;Ae.BSON_DATA_SYMBOL=14;Ae.BSON_DATA_CODE_W_SCOPE=15;Ae.BSON_DATA_INT=16;Ae.BSON_DATA_TIMESTAMP=17;Ae.BSON_DATA_LONG=18;Ae.BSON_DATA_DECIMAL128=19;Ae.BSON_DATA_MIN_KEY=255;Ae.BSON_DATA_MAX_KEY=127;Ae.BSON_BINARY_SUBTYPE_DEFAULT=0;Ae.BSON_BINARY_SUBTYPE_FUNCTION=1;Ae.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;Ae.BSON_BINARY_SUBTYPE_UUID=3;Ae.BSON_BINARY_SUBTYPE_MD5=4;Ae.BSON_BINARY_SUBTYPE_USER_DEFINED=128;Ae.BSON_INT32_MAX=2147483647;Ae.BSON_INT32_MIN=-2147483648;Ae.BSON_INT64_MAX=Math.pow(2,63)-1;Ae.BSON_INT64_MIN=-Math.pow(2,63);Ae.JS_INT_MAX=9007199254740992;Ae.JS_INT_MIN=-9007199254740992;bH.exports=fv});var RH=w((i0t,DH)=>{"use strict";var DOe=Bl().Long,ROe=Jy().Double,NOe=Qy().Timestamp,xOe=tv().ObjectID,POe=nv().Symbol,BOe=rv().BSONRegExp,MOe=iv().Code,FOe=ov(),qOe=av().MinKey,LOe=uv().MaxKey,UOe=lv().DBRef,TH=Af().Binary,AH=ec().normalizedFunctionString,jOe=s(function(t){return typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"},"isDate"),hv=s(function(t,r,n){var i=5;if(Array.isArray(t))for(var o=0;o<t.length;o++)i+=IH(o.toString(),t[o],r,!0,n);else{t.toBSON&&(t=t.toBSON());for(var a in t)i+=IH(a,t[a],r,!1,n)}return i},"calculateObjectSize");function IH(e,t,r,n,i){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case"string":return 1+Buffer.byteLength(e,"utf8")+1+4+Buffer.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=rc.JS_INT_MIN&&t<=rc.JS_INT_MAX&&t>=rc.BSON_INT32_MIN&&t<=rc.BSON_INT32_MAX?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+5:(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;case"undefined":return n||!i?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+2;case"object":if(t==null||t instanceof qOe||t instanceof LOe||t._bsontype==="MinKey"||t._bsontype==="MaxKey")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1;if(t instanceof xOe||t._bsontype==="ObjectID"||t._bsontype==="ObjectId")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||jOe(t))return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;if(typeof Buffer<"u"&&Buffer.isBuffer(t))return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+6+t.length;if(t instanceof DOe||t instanceof ROe||t instanceof NOe||t._bsontype==="Long"||t._bsontype==="Double"||t._bsontype==="Timestamp")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+9;if(t instanceof FOe||t._bsontype==="Decimal128")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+17;if(t instanceof MOe||t._bsontype==="Code")return t.scope!=null&&Object.keys(t.scope).length>0?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Buffer.byteLength(t.code.toString(),"utf8")+1+hv(t.scope,r,i):(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+Buffer.byteLength(t.code.toString(),"utf8")+1;if(t instanceof TH||t._bsontype==="Binary")return t.sub_type===TH.SUBTYPE_BYTE_ARRAY?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(e!=null?Buffer.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if(t instanceof POe||t._bsontype==="Symbol")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+Buffer.byteLength(t.value,"utf8")+4+1+1;if(t instanceof UOe||t._bsontype==="DBRef"){var o={$ref:t.namespace,$id:t.oid};return t.db!=null&&(o.$db=t.db),(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+hv(o,r,i)}else return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof BOe||t._bsontype==="BSONRegExp"?(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.pattern,"utf8")+1+Buffer.byteLength(t.options,"utf8")+1:(e!=null?Buffer.byteLength(e,"utf8")+1:0)+hv(t,r,i)+1;case"function":if(t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"||String.call(t)==="[object RegExp]")return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&t.scope!=null&&Object.keys(t.scope).length>0)return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Buffer.byteLength(AH(t),"utf8")+1+hv(t.scope,r,i);if(r)return(e!=null?Buffer.byteLength(e,"utf8")+1:0)+1+4+Buffer.byteLength(AH(t),"utf8")+1}return 0}s(IH,"calculateElement");var rc={};rc.BSON_INT32_MAX=2147483647;rc.BSON_INT32_MIN=-2147483648;rc.JS_INT_MAX=9007199254740992;rc.JS_INT_MIN=-9007199254740992;DH.exports=hv});var PH=w((o0t,Fn)=>{"use strict";var $Oe=gw(),kOe=Bl(),GOe=Jy(),WOe=Qy(),zOe=tv(),HOe=rv(),VOe=nv(),YOe=Ew(),KOe=iv(),XOe=ov(),JOe=av(),QOe=uv(),ZOe=lv(),eTe=Af(),tTe=_H(),NH=OH(),rTe=RH(),Rx=ec(),xH=1024*1024*17,Rw=Rx.allocBuffer(xH),Dt=s(function(){},"BSON");Dt.prototype.serialize=s(function(t,r){r=r||{};var n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,o=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,a=typeof r.minInternalBufferSize=="number"?r.minInternalBufferSize:xH;Rw.length<a&&(Rw=Rx.allocBuffer(a));var u=NH(Rw,t,n,0,0,i,o,[]),l=Rx.allocBuffer(u);return Rw.copy(l,0,0,l.length),l},"serialize");Dt.prototype.serializeWithBufferAndIndex=function(e,t,r){r=r||{};var n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,o=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,a=typeof r.index=="number"?r.index:0,u=NH(t,e,n,a||0,0,i,o);return u-1};Dt.prototype.deserialize=function(e,t){return tTe(e,t)};Dt.prototype.calculateObjectSize=function(e,t){t=t||{};var r=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,n=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0;return rTe(e,r,n)};Dt.prototype.deserializeStream=function(e,t,r,n,i,o){o=o??{};for(var a=t,u=0;u<r;u++){var l=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;o.index=a,n[i+u]=this.deserialize(e,o),a=a+l}return a};Dt.BSON_INT32_MAX=2147483647;Dt.BSON_INT32_MIN=-2147483648;Dt.BSON_INT64_MAX=Math.pow(2,63)-1;Dt.BSON_INT64_MIN=-Math.pow(2,63);Dt.JS_INT_MAX=9007199254740992;Dt.JS_INT_MIN=-9007199254740992;Dt.BSON_DATA_NUMBER=1;Dt.BSON_DATA_STRING=2;Dt.BSON_DATA_OBJECT=3;Dt.BSON_DATA_ARRAY=4;Dt.BSON_DATA_BINARY=5;Dt.BSON_DATA_OID=7;Dt.BSON_DATA_BOOLEAN=8;Dt.BSON_DATA_DATE=9;Dt.BSON_DATA_NULL=10;Dt.BSON_DATA_REGEXP=11;Dt.BSON_DATA_CODE=13;Dt.BSON_DATA_SYMBOL=14;Dt.BSON_DATA_CODE_W_SCOPE=15;Dt.BSON_DATA_INT=16;Dt.BSON_DATA_TIMESTAMP=17;Dt.BSON_DATA_LONG=18;Dt.BSON_DATA_MIN_KEY=255;Dt.BSON_DATA_MAX_KEY=127;Dt.BSON_BINARY_SUBTYPE_DEFAULT=0;Dt.BSON_BINARY_SUBTYPE_FUNCTION=1;Dt.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;Dt.BSON_BINARY_SUBTYPE_UUID=3;Dt.BSON_BINARY_SUBTYPE_MD5=4;Dt.BSON_BINARY_SUBTYPE_USER_DEFINED=128;Fn.exports=Dt;Fn.exports.Code=KOe;Fn.exports.Map=$Oe;Fn.exports.Symbol=VOe;Fn.exports.BSON=Dt;Fn.exports.DBRef=ZOe;Fn.exports.Binary=eTe;Fn.exports.ObjectID=zOe;Fn.exports.Long=kOe;Fn.exports.Timestamp=WOe;Fn.exports.Double=GOe;Fn.exports.Int32=YOe;Fn.exports.MinKey=JOe;Fn.exports.MaxKey=QOe;Fn.exports.BSONRegExp=HOe;Fn.exports.Decimal128=XOe});var Nw=w((u0t,MH)=>{var $r=PH(),nTe=Af(),iTe=iv(),sTe=lv(),oTe=ov(),aTe=Jy(),uTe=Ew(),cTe=Bl(),lTe=gw(),dTe=uv(),fTe=av(),BH=tv(),hTe=rv(),pTe=nv(),mTe=Qy();$r.BSON_INT32_MAX=2147483647;$r.BSON_INT32_MIN=-2147483648;$r.BSON_INT64_MAX=Math.pow(2,63)-1;$r.BSON_INT64_MIN=-Math.pow(2,63);$r.JS_INT_MAX=9007199254740992;$r.JS_INT_MIN=-9007199254740992;$r.Binary=nTe;$r.Code=iTe;$r.DBRef=sTe;$r.Decimal128=oTe;$r.Double=aTe;$r.Int32=uTe;$r.Long=cTe;$r.Map=lTe;$r.MaxKey=dTe;$r.MinKey=fTe;$r.ObjectId=BH;$r.ObjectID=BH;$r.BSONRegExp=hTe;$r.Symbol=pTe;$r.Timestamp=mTe;MH.exports=$r});var FH=w((exports,module)=>{"use strict";var Module=require("module"),xrequire=eval("require"),createRequireFromPath=Module.createRequire||Module.createRequireFromPath||((e,t)=>{let r=new Module(e);r.filename=e,r.paths=Module._nodeModulePaths(t);function n(a){return xrequire(i(a))}s(n,"_require");function i(a,u){return Module._resolveFilename(a,r,!1,u)}s(i,"resolve"),n.resolve=i;function o(a){return Module._resolveLookupPaths(a,r,!0)}return s(o,"paths"),i.paths=o,n.main=process.mainModule,n.extensions=Module._extensions,n.cache=Module._cache,n});module.exports=createRequireFromPath});var LH=w((l0t,qH)=>{"use strict";var Nx=require("path"),gTe=require("fs"),yTe=FH(),vTe=new Map;function If(e,t){let r=s((n,i)=>{let o=If.cache&&If.cache.get(n);if(!o){let a;try{a=gTe.statSync(n)}catch(u){throw new Error(`require-at: stat '${n}' failed: ${u.message}`)}if(!a||!a.isDirectory()){if(i)throw new Error(`require-at: not a directory: '${e}'`);return r(Nx.dirname(n),!0)}o=yTe(Nx.join(n,"._require-at_"),n),If.cache&&If.cache.set(n,o)}return t?o(t):o},"makeIt");return r(Nx.resolve(e),!1)}s(If,"requireAt");If.cache=vTe;qH.exports=If});var UH=w((exports,module)=>{"use strict";var __assign=exports&&exports.__assign||function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__assign.apply(this,arguments)},__importDefault=exports&&exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});exports.optionalRequireCwd=exports.optionalRequire=exports.makeOptionalRequire=exports.tryResolve=exports.tryRequire=exports.setDefaultLog=void 0;var assert_1=__importDefault(require("assert")),require_at_1=__importDefault(LH()),xrequire=eval("require"),pnpDependencyNameRegExp=/^(?![a-zA-Z]:[\\/]|\\\\|\.{0,2}(?:\/|$))((?:node:)?(?:@[^/]+\/)?[^/]+)\/*(.*|)$/;function getPnpDependencyName(e){var t=e.match(pnpDependencyNameRegExp);return t?t[1]:null}s(getPnpDependencyName,"getPnpDependencyName");function findModuleNotFound(e,t){var r=e.message.split(`
`)[0];if(!r)return!1;if(r.includes("'"+t+"'"))return!0;var n=getPnpDependencyName(t);return n?r.includes(" "+n+" ")||r.includes(" "+n+". ")||r.includes(" "+n+", "):!1}s(findModuleNotFound,"findModuleNotFound");function defaultLog(e,t){console.log("Just FYI: "+e+'; Path "'+t+'"')}s(defaultLog,"defaultLog");var __defaultLog=defaultLog;function setDefaultLog(e){__defaultLog=e}s(setDefaultLog,"setDefaultLog");exports.setDefaultLog=setDefaultLog;function _getOptions(e,t,r){if(t===void 0&&(t=xrequire),typeof e=="object"){var n=__assign({require:t,log:r},e);return(0,assert_1.default)(!(n.hasOwnProperty("notFound")&&n.hasOwnProperty("default")),"optionalRequire: options set with both `notFound` and `default`"),n}else return{require:t,log:r,message:e}}s(_getOptions,"_getOptions");function _optionalRequire(e,t){try{return t.resolve?t.require.resolve(e):t.require(e)}catch(i){if(i.code!=="MODULE_NOT_FOUND"||!findModuleNotFound(i,e)){if(typeof t.fail=="function")return t.fail(i);throw i}if(t.message){var r=t.message===!0?"":t.message+" - ",n=t.resolve?"resolved":"found";t.log(r+"optional module not "+n,e)}return typeof t.notFound=="function"?t.notFound(i):t.default}}s(_optionalRequire,"_optionalRequire");function tryRequire(e,t,r){var n=_getOptions(r,e,__defaultLog);return n.resolve=!1,_optionalRequire(t,n)}s(tryRequire,"tryRequire");exports.tryRequire=tryRequire;function tryResolve(e,t,r){var n=_getOptions(r,e,__defaultLog);return n.resolve=!0,_optionalRequire(t,n)}s(tryResolve,"tryResolve");exports.tryResolve=tryResolve;function makeOptionalRequire(e,t){var r=s(function(n,i){var o=_getOptions(i,e,r.log);return _optionalRequire(n,o)},"x");return r.resolve=function(n,i){var o=_getOptions(i,e,r.log);return o.resolve=!0,_optionalRequire(n,o)},r.log=t||__defaultLog,r}s(makeOptionalRequire,"makeOptionalRequire");exports.makeOptionalRequire=makeOptionalRequire;exports.optionalRequire=makeOptionalRequire(xrequire);exports.optionalRequireCwd=makeOptionalRequire((0,require_at_1.default)(process.cwd()))});var xw=w((h0t,yo)=>{"use strict";var go=UH();yo.exports=function(){return go.makeOptionalRequire.apply(go,arguments)};yo.exports.tryRequire=go.tryRequire;yo.exports.tryResolve=go.tryResolve;yo.exports.try=go.tryRequire;yo.exports.resolve=go.tryResolve;yo.exports.makeOptionalRequire=go.makeOptionalRequire;yo.exports.optionalRequire=go.optionalRequire;yo.exports.optionalRequireCwd=go.optionalRequireCwd;yo.exports.optionalRequireTop=go.optionalRequireTop;var jH;Object.defineProperty(yo.exports,"log",{set(e){jH=e,go.setDefaultLog(e)},get(){return jH}})});var $H=w((p0t,_Te)=>{_Te.exports={name:"mongodb",version:"3.7.3",description:"The official MongoDB driver for Node.js",main:"index.js",files:["index.js","lib"],repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},peerDependenciesMeta:{kerberos:{optional:!0},"mongodb-client-encryption":{optional:!0},"mongodb-extjson":{optional:!0},snappy:{optional:!0},"bson-ext":{optional:!0},aws4:{optional:!0}},dependencies:{bl:"^2.2.1",bson:"^1.1.4",denque:"^1.4.1","optional-require":"^1.1.8","safe-buffer":"^5.1.2"},devDependencies:{"@types/chai":"^4.2.16","@types/mocha":"^8.2.2","@types/node":"^14.14.37","array-includes":"^3.1.3",chai:"^4.1.1","chai-subset":"^1.6.0",chalk:"^2.4.2",co:"4.6.0",eslint:"^7.10.0","eslint-config-prettier":"^6.11.0","eslint-plugin-es":"^3.0.1","eslint-plugin-prettier":"^3.1.3",jsdoc:"^3.5.5","lodash.camelcase":"^4.3.0",mocha:"5.2.0","mocha-sinon":"^2.1.0","mongodb-extjson":"^2.1.1","mongodb-mock-server":"^1.0.1",nyc:"^15.1.0","object.entries":"^1.1.3",prettier:"^1.19.1",semver:"^5.5.0",sinon:"^4.3.0","sinon-chai":"^3.2.0",snappy:"^6.3.4","spec-xunit-file":"0.0.1-3","standard-version":"^9.2.0",tslib:"^2.2.0",typescript:"^4.2.4","util.promisify":"^1.0.1","worker-farm":"^1.5.0",wtfnode:"^0.8.0",yargs:"^14.2.0"},license:"Apache-2.0",engines:{node:">=4"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:unified":"tsc -p test/functional/unified-spec-runner/tsconfig.unified.json","check:atlas":"mocha --opts '{}' ./test/manual/atlas_connectivity.test.js","check:bench":"node test/benchmarks/driverBench/","check:coverage":"nyc npm run check:test","check:kerberos":"mocha --opts '{}' -t 60000 test/manual/kerberos.test.js","check:ldap":"mocha --opts '{}' test/manual/ldap.test.js","check:lint":"eslint -v && eslint lib test","check:test":"mocha --recursive test/functional test/unit","check:tls":"mocha --opts '{}' test/manual/tls_support.test.js",format:"npm run check:lint -- --fix",release:"standard-version -i HISTORY.md",test:"npm run check:lint && mocha --recursive test/functional test/unit"},homepage:"https://github.com/mongodb/node-mongodb-native",optionalDependencies:{saslprep:"^1.0.0"}}});var Le=w((m0t,WH)=>{"use strict";var xx=require("os"),STe=require("crypto"),kH=xw()(require),ETe=s(()=>{let e=STe.randomBytes(16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},"uuidV4");function CTe(e,t,r){r.forEach(n=>e.on(n,i=>t.emit(n,i)))}s(CTe,"relayEvents");function wTe(){let e;try{e=kH("kerberos")}catch(t){throw t.code==="MODULE_NOT_FOUND"?new Error("The `kerberos` module was not found. Please install it and try again."):t}return e}s(wTe,"retrieveKerberos");var Df=s(function(){throw new Error("The `mongodb-extjson` module was not found. Please install it and try again.")},"noEJSONError");function bTe(){let e=kH("mongodb-extjson");return e||(e={parse:Df,deserialize:Df,serialize:Df,stringify:Df,setBSONModule:Df,BSON:Df}),e}s(bTe,"retrieveEJSON");function GH(e){if(e){if(e.ismaster)return e.ismaster.maxWireVersion;if(typeof e.lastIsMaster=="function"){let t=e.lastIsMaster();if(t)return t.maxWireVersion}if(e.description)return e.description.maxWireVersion}return 0}s(GH,"maxWireVersion");function OTe(e,t){return t&&t.collation&&GH(e)<5}s(OTe,"collationNotSupported");function TTe(e){return e&&typeof e.then=="function"}s(TTe,"isPromiseLike");function ATe(e,t,r){e=e||[];let n=0,i=0;for(n=0;n<e.length;++n)i++,t(e[n],o);if(i===0){r();return}function o(a){if(i--,a){r(a);return}n===e.length&&i<=0&&r()}s(o,"eachCallback")}s(ATe,"eachAsync");function ITe(e,t,r){e=e||[];let n=0,i=e.length;if(i===0){r();return}function o(a){if(n++,i--,a){r(a);return}if(n===e.length&&i<=0){r();return}t(e[n],o)}s(o,"eachCallback"),t(e[n],o)}s(ITe,"eachAsyncSeries");function DTe(e){return e.description!=null}s(DTe,"isUnifiedTopology");function RTe(e,t){return!Array.isArray(e)||!Array.isArray(t)?!1:e.length===t.length&&e.every((r,n)=>r===t[n])}s(RTe,"arrayStrictEqual");function NTe(e,t){let r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(i=>t[i]===e[i])}s(NTe,"tagsStrictEqual");function xTe(e,t){return e===t?!0:!(e==null&&t!=null||e!=null&&t==null||e.constructor.name!==t.constructor.name||e.message!==t.message)}s(xTe,"errorStrictEqual");function PTe(e){return s(function(r,n){let i=e[r.s.state];if(i&&i.indexOf(n)<0)throw new TypeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n},"stateTransition")}s(PTe,"makeStateMachine");function BTe(e){e=e||{};let t={driver:{name:"nodejs",version:$H().version},os:{type:xx.type(),name:process.platform,architecture:process.arch,version:xx.release()},platform:`'Node.js ${process.version}, ${xx.endianness} (${e.useUnifiedTopology?"unified":"legacy"})`};if(e.driverInfo&&(e.driverInfo.name&&(t.driver.name=`${t.driver.name}|${e.driverInfo.name}`),e.driverInfo.version&&(t.version=`${t.driver.version}|${e.driverInfo.version}`),e.driverInfo.platform&&(t.platform=`${t.platform}|${e.driverInfo.platform}`)),e.appname){let r=Buffer.from(e.appname);t.application={name:r.length>128?r.slice(0,128).toString("utf8"):e.appname}}return t}s(BTe,"makeClientMetadata");var MTe=s(()=>{},"noop");WH.exports={uuidV4:ETe,relayEvents:CTe,collationNotSupported:OTe,retrieveEJSON:bTe,retrieveKerberos:wTe,maxWireVersion:GH,isPromiseLike:TTe,eachAsync:ATe,eachAsyncSeries:ITe,isUnifiedTopology:DTe,arrayStrictEqual:RTe,tagsStrictEqual:NTe,errorStrictEqual:xTe,makeStateMachine:PTe,makeClientMetadata:BTe,noop:MTe}});var Ml=w((y0t,zH)=>{"use strict";var FTe=Object.freeze({HostUnreachable:6,HostNotFound:7,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotMaster:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotMasterNoSlaveOk:13435,NotMasterOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,DuplicateKey:11e3,CannotCreateIndex:67,IndexOptionsConflict:85,IndexKeySpecsConflict:86,InvalidIndexSpecificationOption:197});zH.exports=Object.freeze({MONGODB_ERROR_CODES:FTe})});var ye=w((v0t,YH)=>{"use strict";var kt=Ml().MONGODB_ERROR_CODES,Ma=Symbol("errorLabels"),Fw=class Fw extends Error{constructor(t){if(t instanceof Error)super(t.message),this.stack=t.stack;else{if(typeof t=="string")super(t);else{super(t.message||t.errmsg||t.$err||"n/a"),t.errorLabels&&(this[Ma]=new Set(t.errorLabels));for(var r in t)r==="errorLabels"||r==="errmsg"||(this[r]=t[r])}Error.captureStackTrace(this,this.constructor)}this.name="MongoError"}get errmsg(){return this.message}static create(t){return new Fw(t)}hasErrorLabel(t){return this[Ma]==null?!1:this[Ma].has(t)}addErrorLabel(t){this[Ma]==null&&(this[Ma]=new Set),this[Ma].add(t)}get errorLabels(){return this[Ma]?Array.from(this[Ma]):[]}};s(Fw,"MongoError");var Fl=Fw,HH=Symbol("beforeHandshake");function qTe(e){return e[HH]===!0}s(qTe,"isNetworkErrorBeforeHandshake");var Fx=class Fx extends Fl{constructor(t,r){super(t),this.name="MongoNetworkError",r&&typeof r.beforeHandshake=="boolean"&&(this[HH]=r.beforeHandshake)}};s(Fx,"MongoNetworkError");var pv=Fx,qx=class qx extends pv{constructor(t,r){super(t,r),this.name="MongoNetworkTimeoutError"}};s(qx,"MongoNetworkTimeoutError");var Bx=qx,Lx=class Lx extends Fl{constructor(t){super(t),this.name="MongoParseError"}};s(Lx,"MongoParseError");var Pw=Lx,Ux=class Ux extends Fl{constructor(t,r){r&&r.error?super(r.error.message||r.error):super(t),this.name="MongoTimeoutError",r&&(this.reason=r)}};s(Ux,"MongoTimeoutError");var Bw=Ux,jx=class jx extends Bw{constructor(t,r){super(t,r),this.name="MongoServerSelectionError"}};s(jx,"MongoServerSelectionError");var Mx=jx;function LTe(e){let t=Object.assign({},e);return t.ok===0&&(t.ok=1,delete t.errmsg,delete t.code,delete t.codeName),t}s(LTe,"makeWriteConcernResultObject");var $x=class $x extends Fl{constructor(t,r){super(t),this.name="MongoWriteConcernError",r&&Array.isArray(r.errorLabels)&&(this[Ma]=new Set(r.errorLabels)),r!=null&&(this.result=LTe(r))}};s($x,"MongoWriteConcernError");var Mw=$x,UTe=new Set([kt.HostUnreachable,kt.HostNotFound,kt.NetworkTimeout,kt.ShutdownInProgress,kt.PrimarySteppedDown,kt.SocketException,kt.NotMaster,kt.InterruptedAtShutdown,kt.InterruptedDueToReplStateChange,kt.NotMasterNoSlaveOk,kt.NotMasterOrSecondary]),Px=new Set([kt.InterruptedAtShutdown,kt.InterruptedDueToReplStateChange,kt.NotMaster,kt.NotMasterNoSlaveOk,kt.NotMasterOrSecondary,kt.PrimarySteppedDown,kt.ShutdownInProgress,kt.HostNotFound,kt.HostUnreachable,kt.NetworkTimeout,kt.SocketException,kt.ExceededTimeLimit]);function jTe(e){return e instanceof Mw?Px.has(e.code)||Px.has(e.result.code):Px.has(e.code)}s(jTe,"isRetryableWriteError");function $Te(e){return UTe.has(e.code)||e instanceof pv||e.message.match(/not master/)||e.message.match(/node is recovering/)}s($Te,"isRetryableError");var kTe=new Set([kt.ShutdownInProgress,kt.PrimarySteppedDown,kt.InterruptedAtShutdown,kt.InterruptedDueToReplStateChange,kt.NotMasterOrSecondary]),GTe=new Set([kt.NotMaster,kt.NotMasterNoSlaveOk,kt.LegacyNotPrimary]),WTe=new Set([kt.InterruptedAtShutdown,kt.ShutdownInProgress]);function VH(e){return typeof e.code=="number"?kTe.has(e.code):/not master or secondary/.test(e.message)||/node is recovering/.test(e.message)}s(VH,"isRecoveringError");function zTe(e){return typeof e.code=="number"?GTe.has(e.code):VH(e)?!1:/not master/.test(e.message)}s(zTe,"isNotMasterError");function HTe(e){return e.code&&WTe.has(e.code)}s(HTe,"isNodeShuttingDownError");function VTe(e){return e instanceof Pw||e==null?!0:VH(e)||zTe(e)}s(VTe,"isSDAMUnrecoverableError");YH.exports={MongoError:Fl,MongoNetworkError:pv,MongoNetworkTimeoutError:Bx,MongoParseError:Pw,MongoTimeoutError:Bw,MongoServerSelectionError:Mx,MongoWriteConcernError:Mw,isRetryableError:$Te,isSDAMUnrecoverableError:VTe,isNodeShuttingDownError:HTe,isRetryableWriteError:jTe,isNetworkErrorBeforeHandshake:qTe}});var Fa=w((S0t,KH)=>{"use strict";var YTe=new Set(["w","wtimeout","j","journal","fsync"]),kx,Rf=class Rf{constructor(t,r,n,i){t!=null&&(this.w=t),r!=null&&(this.wtimeout=r),n!=null&&(this.j=n),i!=null&&(this.fsync=i)}static fromOptions(t){if(!(t==null||t.writeConcern==null&&t.w==null&&t.wtimeout==null&&t.j==null&&t.journal==null&&t.fsync==null))return t.writeConcern?typeof t.writeConcern=="string"?new Rf(t.writeConcern):Object.keys(t.writeConcern).some(r=>YTe.has(r))?new Rf(t.writeConcern.w,t.writeConcern.wtimeout,t.writeConcern.j||t.writeConcern.journal,t.writeConcern.fsync):void 0:(kx||(kx=$()),kx.emitWarningOnce("Top-level use of w, wtimeout, j, and fsync is deprecated. Use writeConcern instead."),new Rf(t.w,t.wtimeout,t.j||t.journal,t.fsync))}};s(Rf,"WriteConcern");var Gx=Rf;KH.exports=Gx});var Wx=w(XH=>{"use strict";function KTe(){let e=this;return{next:function(){return Promise.resolve().then(()=>e.next()).then(t=>t?{value:t,done:!1}:e.close().then(()=>({value:t,done:!0})))}}}s(KTe,"asyncIterator");XH.asyncIterator=KTe});var $=w((Lw,n6)=>{"use strict";var nc=ye().MongoError,XTe=Fa(),JTe=s(function(e){var t={};for(var r in e)t[r]=e[r];return t},"shallowClone"),QTe=s(function(e,t,r){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r}})},"getSingleProperty"),ZTe=Lw.formatSortValue=function(e){var t=(""+e).toLowerCase();switch(t){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]")}},eAe=Lw.formattedOrderClause=function(e){var t=new Map;if(e==null)return null;if(Array.isArray(e)){if(e.length===0)return null;for(var r=0;r<e.length;r++)e[r].constructor===String?t.set(`${e[r]}`,1):t.set(`${e[r][0]}`,ZTe(e[r][1]))}else if(e!=null&&typeof e=="object")if(e instanceof Map)t=e;else{var n=Object.keys(e);for(var i of n)t.set(i,e[i])}else if(typeof e=="string")t.set(`${e}`,1);else throw new Error("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");return t},tAe=s(function(t){if(typeof t!="string")throw new nc("collection name must be a String");if(!t||t.indexOf("..")!==-1)throw new nc("collection names cannot be empty");if(t.indexOf("$")!==-1&&t.match(/((^\$cmd)|(oplog\.\$main))/)==null)throw new nc("collection names must not contain '$'");if(t.match(/^\.|\.$/)!=null)throw new nc("collection names must not start or end with '.'");if(t.indexOf("\0")!==-1)throw new nc("collection names cannot contain a null character")},"checkCollectionName"),rAe=s(function(e,t,r,n){try{if(e==null)return;if(e)return n?e(t,r,n):e(t,r)}catch(i){return process.nextTick(function(){throw i}),!1}return!0},"handleCallback"),nAe=s(function(e){if(e instanceof Error)return e;for(var t=e.err||e.errmsg||e.errMessage||e,r=nc.create({message:t,driver:!0}),n=typeof e=="object"?Object.keys(e):[],i=0;i<n.length;i++)try{r[n[i]]=e[n[i]]}catch{}return r},"toError"),iAe=s(function(t){var r=null;if(typeof t=="string")r=t;else if(Array.isArray(t))r={},t.forEach(function(i){r[i]=1});else if(t!=null&&typeof t=="object"){r={};for(var n in t)r[n]=t[n]}return r},"normalizeHintField"),sAe=s(function(e){var t={},r=[],n;return typeof e=="string"?(r.push(e+"_1"),t[e]=1):Array.isArray(e)?e.forEach(function(i){typeof i=="string"?(r.push(i+"_1"),t[i]=1):Array.isArray(i)?(r.push(i[0]+"_"+(i[1]||1)),t[i[0]]=i[1]||1):qw(i)&&(n=Object.keys(i),n.forEach(function(o){r.push(o+"_"+i[o]),t[o]=i[o]}))}):qw(e)&&(n=Object.keys(e),n.forEach(function(i){r.push(i+"_"+e[i]),t[i]=e[i]})),{name:r.join("_"),keys:n,fieldHash:t}},"parseIndexOptions"),qw=Lw.isObject=function(e){return Object.prototype.toString.call(e)==="[object Object]"},oAe=s(function(e,t){var r={};return e.forEach(function(n){r[n]=t[n]}),r},"debugOptions"),aAe=s(function(e,t,r){for(var n in t)r.indexOf(n)===-1&&(e[n]=t[n]);return e},"decorateCommand"),uAe=s(function(e,t){for(var r in t)e[r]=t[r];return e},"mergeOptions"),cAe=s(function(e,t){var r={sslCA:"ca",sslCRL:"crl",sslValidate:"rejectUnauthorized",sslKey:"key",sslCert:"cert",sslPass:"passphrase",socketTimeoutMS:"socketTimeout",connectTimeoutMS:"connectionTimeout",replicaSet:"setName",rs_name:"setName",secondaryAcceptableLatencyMS:"acceptableLatency",connectWithNoPrimary:"secondaryOnlyConnectionAllowed",acceptableLatencyMS:"localThresholdMS"};for(var n in t)r[n]?e[r[n]]=t[n]:e[n]=t[n];return e},"translateOptions"),lAe=s(function(e,t){var r={};for(var n in e)t.indexOf(n)!==-1&&(r[n]=e[n]);return r},"filterOptions"),JH=["w","j","wtimeout","fsync","writeConcern"];function dAe(e,t){let r=!1;for(let n of JH)if(n in e){r=!0;break}if(!r)for(let n of JH)t[n]&&("writeConcern"in e||(e.writeConcern={}),e.writeConcern[n]=t[n]);return e}s(dAe,"conditionallyMergeWriteConcern");var fAe=s((e,t,r,n)=>{if(e==null)throw new TypeError("This method requires a valid topology instance");if(!Array.isArray(r))throw new TypeError("This method requires an array of arguments to apply");n=n||{};let i=e.s.promiseLibrary,o=r[r.length-1],a,u,l;if(!n.skipSessions&&e.hasSessionSupport()){if(u=r[r.length-2],u==null||u.session==null){l=Symbol(),a=e.startSession({owner:l});let h=r.length-2;r[h]=Object.assign({},r[h],{session:a})}else if(u.session&&u.session.hasEnded)throw new nc("Use of expired sessions is not permitted")}let f=s((h,p)=>s(function(_,C){if(a&&a.owner===l&&!n.returnsCursor)a.endSession(()=>{if(delete u.session,_)return p(_);h(C)});else{if(_)return p(_);h(C)}},"executeCallback"),"makeExecuteCallback");if(typeof o=="function"){o=r.pop();let h=f(p=>o(null,p),p=>o(p,null));r.push(h);try{return t.apply(null,r)}catch(p){throw h(p),p}}if(r[r.length-1]!=null)throw new TypeError("final argument to `executeLegacyOperation` must be a callback");return new i(function(h,p){let g=f(h,p);r[r.length-1]=g;try{return t.apply(null,r)}catch(_){g(_)}})},"executeLegacyOperation");function hAe(e,t){return t&&t.s.options.retryWrites&&(e.retryWrites=!0),e}s(hAe,"applyRetryableWrites");function pAe(e,t,r){r=r||{};let n=t.db,i=t.collection;if(r.session&&r.session.inTransaction())return e.writeConcern&&delete e.writeConcern,e;let o=XTe.fromOptions(r);return o?Object.assign(e,{writeConcern:o}):i&&i.writeConcern?Object.assign(e,{writeConcern:Object.assign({},i.writeConcern)}):n&&n.writeConcern?Object.assign(e,{writeConcern:Object.assign({},n.writeConcern)}):e}s(pAe,"applyWriteConcern");function mAe(e){return e&&typeof e.then=="function"}s(mAe,"isPromiseLike");function gAe(e,t,r){let n=t.s&&t.s.topology||t.topology;if(!n)throw new TypeError('parameter "target" is missing a topology');let i=n.capabilities();if(r.collation&&typeof r.collation=="object")if(i&&i.commandsTakeCollation)e.collation=r.collation;else throw new nc("Current topology does not support collation")}s(gAe,"decorateWithCollation");function yAe(e,t,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},e.readConcern||{});t.s.readConcern&&Object.assign(n,t.s.readConcern),Object.keys(n).length>0&&Object.assign(e,{readConcern:n})}s(yAe,"decorateWithReadConcern");function vAe(e,t){return e.explain?e:{explain:e,verbosity:t.verbosity}}s(vAe,"decorateWithExplain");var ZH=+process.version.split(".")[0].substring(1),_Ae=s(e=>ZH<=6?process.emitWarning(e,"DeprecationWarning",Nf):process.emitWarning(e,{type:"DeprecationWarning",code:Nf}),"emitProcessWarning"),SAe=s(e=>console.error(e),"emitConsoleWarning"),e6=process.emitWarning?_Ae:SAe;function EAe(e,t){return`${e} option [${t}] is deprecated and will be removed in a later version.`}s(EAe,"defaultMsgHandler");function CAe(e,t){if(process.noDeprecation===!0)return t;let r=e.msgHandler?e.msgHandler:EAe,n=new Set;function i(){let o=arguments[e.optionsIndex];return!qw(o)||Object.keys(o).length===0?t.apply(this,arguments):(e.deprecatedOptions.forEach(a=>{if(Object.prototype.hasOwnProperty.call(o,a)&&!n.has(a)){n.add(a);let u=r(e.name,a);if(e6(u),this&&this.getLogger){let l=this.getLogger();l&&l.warn(u)}}}),t.apply(this,arguments))}return s(i,"deprecated"),Object.setPrototypeOf(i,t),t.prototype&&(i.prototype=t.prototype),i}s(CAe,"deprecateOptions");var zx={};try{Wx(),zx.ASYNC_ITERATOR=!0}catch{zx.ASYNC_ITERATOR=!1}var mv=class mv{constructor(t,r){this.db=t,this.collection=r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(t){return new mv(this.db,t)}static fromString(t){if(!t)throw new Error(`Cannot parse namespace from "${t}"`);let r=t.indexOf(".");return new mv(t.substring(0,r),t.substring(r+1))}};s(mv,"MongoDBNamespace");var Hx=mv;function*wAe(e){let t=e||0;for(;;){let r=t;t+=1,yield r}}s(wAe,"makeCounter");function bAe(e,t,r){let n=e&&e.s&&e.s.promiseLibrary||Promise,i;return typeof t!="function"&&(i=new n((o,a)=>{t=s((u,l)=>{if(u)return a(u);o(l)},"callback")})),r(function(o,a){if(o!=null){try{t(o)}catch(u){return process.nextTick(()=>{throw u})}return}t(o,a)}),i}s(bAe,"maybePromise");function Yx(){let e=process.hrtime();return Math.floor(e[0]*1e3+e[1]/1e6)}s(Yx,"now");function OAe(e){if(typeof e!="number")throw TypeError("numeric value required to calculate duration");let t=Yx()-e;return t<0?0:t}s(OAe,"calculateDurationInMs");function TAe(e,t){let r,n,i,o=!1;t=t||{};let a=t.interval||1e3,u=t.minInterval||500,l=typeof t.immediate=="boolean"?t.immediate:!1,f=typeof t.clock=="function"?t.clock:Yx;function h(){let C=f(),D=C-i,O=C-n,N=a-O;i=C,!(D<u)&&(N>u&&g(u),N<0&&_())}s(h,"wake");function p(){o=!0,r&&(clearTimeout(r),r=null),n=0,i=0}s(p,"stop");function g(C){o||(clearTimeout(r),r=setTimeout(_,C||a))}s(g,"reschedule");function _(){i=0,n=f(),e(C=>{if(C)throw C;g(a)})}return s(_,"executeAndReschedule"),l?_():(n=f(),g()),{wake:h,stop:p}}s(TAe,"makeInterruptableAsyncInterval");function t6(e){return Array.isArray(e)?e.reduce((t,r)=>t||t6(r),null):Object.keys(typeof e.toBSON!="function"?e:e.toBSON()).map(t=>t[0]).indexOf("$")>=0}s(t6,"hasAtomicOperators");var Nf="MONGODB DRIVER";function r6(e){return process.emitWarning?ZH<=6?process.emitWarning(e,void 0,Nf):process.emitWarning(e,{code:Nf}):console.error(`[${Nf}] Warning:`,e)}s(r6,"emitWarning");var QH=new Set;function AAe(e){if(!QH.has(e))return QH.add(e),r6(e)}s(AAe,"emitWarningOnce");function IAe(e,t){e=Array.isArray(e)?new Set(e):e,t=Array.isArray(t)?new Set(t):t;for(let r of t)if(!e.has(r))return!1;return!0}s(IAe,"isSuperset");function DAe(e,t){let r=Object.prototype.toString,n=Object.prototype.hasOwnProperty,i=s(a=>r.call(a)==="[object Object]","isObject");if(!i(e))return!1;let o=e.constructor;if(o&&o.prototype&&(!i(o.prototype)||!n.call(o.prototype,"isPrototypeOf")))return!1;if(t){let a=Object.keys(e);return IAe(a,t)}return!0}s(DAe,"isRecord");function Vx(e){if(e==null)return e;if(Array.isArray(e))return e.map(r=>Vx(r));if(DAe(e)){let r={};for(let n in e)r[n]=Vx(e[n]);return r}let t=e.constructor;if(t)switch(t.name.toLowerCase()){case"date":return new t(Number(e));case"map":return new Map(e);case"set":return new Set(e);case"buffer":return Buffer.from(e)}return e}s(Vx,"deepCopy");function RAe(e){let t=e.version.split(".").map(r=>Number.parseInt(r,10));return{major:t[0],minor:t[1],patch:t[2]}}s(RAe,"parsePackageVersion");n6.exports={filterOptions:lAe,mergeOptions:uAe,translateOptions:cAe,shallowClone:JTe,getSingleProperty:QTe,checkCollectionName:tAe,toError:nAe,formattedOrderClause:eAe,parseIndexOptions:sAe,normalizeHintField:iAe,handleCallback:rAe,decorateCommand:aAe,isObject:qw,debugOptions:oAe,MAX_JS_INT:Number.MAX_SAFE_INTEGER+1,conditionallyMergeWriteConcern:dAe,executeLegacyOperation:fAe,applyRetryableWrites:hAe,applyWriteConcern:pAe,isPromiseLike:mAe,decorateWithCollation:gAe,decorateWithReadConcern:yAe,decorateWithExplain:vAe,deprecateOptions:CAe,SUPPORTS:zx,MongoDBNamespace:Hx,emitDeprecationWarning:e6,makeCounter:wAe,maybePromise:bAe,now:Yx,calculateDurationInMs:OAe,makeInterruptableAsyncInterval:TAe,hasAtomicOperators:t6,MONGODB_WARNING_CODE:Nf,emitWarning:r6,emitWarningOnce:AAe,deepCopy:Vx,parsePackageVersion:RAe}});var Sn=w((O0t,o6)=>{"use strict";var i6=$().parsePackageVersion,NAe=ye().MongoError,jw=xw()(require);function xAe(e,t){let r={};return e.forEach(function(n){r[n]=t[n]}),r}s(xAe,"debugOptions");function PAe(){let e=Nw();e.native=!1;let t=jw("bson-ext"),r=i6(jw("bson-ext/package.json")||{version:"0.0.0"});if(t){if(r.major>=4)throw new NAe("bson-ext version 4 and above does not work with the 3.x version of the mongodb driver");return t.native=!0,t}return e}s(PAe,"retrieveBSON");function Uw(){throw new Error("Attempted to use Snappy compression, but Snappy is not installed. Install or disable Snappy compression and try again.")}s(Uw,"noSnappyWarning");var s6=Symbol("kPkgVersion");function BAe(){let e=jw("snappy");if(!e)return{compress:Uw,uncompress:Uw,compressSync:Uw,uncompressSync:Uw};let t=jw("snappy/package.json")||{version:"0.0.0"},r=i6(t);if(e[s6]=r,r.major>=7){let n=e.compress,i=e.uncompress;e.compress=(o,a)=>{n(o).then(u=>a(void 0,u)).catch(u=>a(u))},e.uncompress=(o,a)=>{i(o).then(u=>a(void 0,u)).catch(u=>a(u))}}return e}s(BAe,"retrieveSnappy");o6.exports={PKG_VERSION:s6,debugOptions:xAe,retrieveBSON:PAe,retrieveSnappy:BAe}});var qn=w((A0t,a6)=>{"use strict";var MAe=$().emitWarningOnce,lt=s(function(e,t,r){if(!lt.isValid(e))throw new TypeError(`Invalid read preference mode ${e}`);if(t&&!Array.isArray(t)){MAe("ReadPreference tags must be an array, this will change in the next major version");let n=typeof t.maxStalenessSeconds<"u",i=typeof t.hedge<"u";n||i?(r=t,t=void 0):t=[t]}if(this.mode=e,this.tags=t,this.hedge=r&&r.hedge,r=r||{},r.maxStalenessSeconds!=null){if(r.maxStalenessSeconds<=0)throw new TypeError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=r.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===lt.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new TypeError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new TypeError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new TypeError("Primary read preference cannot be combined with hedge")}},"ReadPreference");Object.defineProperty(lt.prototype,"preference",{enumerable:!0,get:function(){return this.mode}});lt.PRIMARY="primary";lt.PRIMARY_PREFERRED="primaryPreferred";lt.SECONDARY="secondary";lt.SECONDARY_PREFERRED="secondaryPreferred";lt.NEAREST="nearest";var FAe=[lt.PRIMARY,lt.PRIMARY_PREFERRED,lt.SECONDARY,lt.SECONDARY_PREFERRED,lt.NEAREST,null];lt.fromOptions=function(e){if(!e)return null;let t=e.readPreference;if(!t)return null;let r=e.readPreferenceTags,n=e.maxStalenessSeconds;if(typeof t=="string")return new lt(t,r);if(!(t instanceof lt)&&typeof t=="object"){let i=t.mode||t.preference;if(i&&typeof i=="string")return new lt(i,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds||n,hedge:t.hedge})}return t};lt.resolve=function(e,t){t=t||{};let r=t.session,n=e&&e.readPreference,i;return t.readPreference?i=lt.fromOptions(t):r&&r.inTransaction()&&r.transaction.options.readPreference?i=r.transaction.options.readPreference:n!=null?i=n:i=lt.primary,typeof i=="string"?new lt(i):i};lt.translate=function(e){if(e.readPreference==null)return e;let t=e.readPreference;if(typeof t=="string")e.readPreference=new lt(t);else if(t&&!(t instanceof lt)&&typeof t=="object"){let r=t.mode||t.preference;r&&typeof r=="string"&&(e.readPreference=new lt(r,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds}))}else if(!(t instanceof lt))throw new TypeError("Invalid read preference: "+t);return e};lt.isValid=function(e){return FAe.indexOf(e)!==-1};lt.prototype.isValid=function(e){return lt.isValid(typeof e=="string"?e:this.mode)};var qAe=["primaryPreferred","secondary","secondaryPreferred","nearest"];lt.prototype.slaveOk=function(){return qAe.indexOf(this.mode)!==-1};lt.prototype.equals=function(e){return e.mode===this.mode};lt.prototype.toJSON=function(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e};lt.primary=new lt("primary");lt.primaryPreferred=new lt("primaryPreferred");lt.secondary=new lt("secondary");lt.secondaryPreferred=new lt("secondaryPreferred");lt.nearest=new lt("nearest");a6.exports=lt});var ti=w((D0t,c6)=>{"use strict";var LAe="closing",UAe="closed",jAe="connecting",$Ae="connected",u6={Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown"},kAe={Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown"};function GAe(e){let t=e.s.description||e.s.serverDescription;return t.topologyType===u6.Single?t.servers[0].type:t.type}s(GAe,"serverType");var WAe={useUnifiedTopology:!0,localThresholdMS:15,serverSelectionTimeoutMS:3e4,heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:500};function zAe(e){e.forEach(clearTimeout),e.clear()}s(zAe,"drainTimerQueue");function HAe(e,t){return clearTimeout(e),t.delete(e)}s(HAe,"clearAndRemoveTimerFrom");c6.exports={STATE_CLOSING:LAe,STATE_CLOSED:UAe,STATE_CONNECTING:jAe,STATE_CONNECTED:$Ae,TOPOLOGY_DEFAULTS:WAe,TopologyType:u6,ServerType:kAe,serverType:GAe,drainTimerQueue:zAe,clearAndRemoveTimerFrom:HAe}});var ql=w((N0t,f6)=>{"use strict";var VAe=Le().arrayStrictEqual,YAe=Le().tagsStrictEqual,KAe=Le().errorStrictEqual,Ln=ti().ServerType,XAe=$().now,JAe=new Set([Ln.RSPrimary,Ln.Standalone,Ln.Mongos]),QAe=new Set([Ln.RSPrimary,Ln.RSSecondary,Ln.Mongos,Ln.Standalone]),ZAe=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","compression","me","hosts","passives","arbiters","tags","setName","setVersion","electionId","primary","logicalSessionTimeoutMinutes","saslSupportedMechs","__nodejs_mock_server__","$clusterTime"],Xx=class Xx{constructor(t,r,n){n=n||{},r=Object.assign({minWireVersion:0,maxWireVersion:0,hosts:[],passives:[],arbiters:[],tags:[]},r),r.isWritablePrimary!=null&&(r.ismaster=r.isWritablePrimary),this.address=t,this.error=n.error,this.roundTripTime=n.roundTripTime||-1,this.lastUpdateTime=XAe(),this.lastWriteDate=r.lastWrite?r.lastWrite.lastWriteDate:null,this.opTime=r.lastWrite?r.lastWrite.opTime:null,this.type=l6(r),this.topologyVersion=n.topologyVersion||r.topologyVersion,ZAe.forEach(i=>{typeof r[i]<"u"&&(this[i]=r[i])}),this.me&&(this.me=this.me.toLowerCase()),this.hosts=this.hosts.map(i=>i.toLowerCase()),this.passives=this.passives.map(i=>i.toLowerCase()),this.arbiters=this.arbiters.map(i=>i.toLowerCase())}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Ln.RSSecondary||this.isWritable}get isDataBearing(){return QAe.has(this.type)}get isWritable(){return JAe.has(this.type)}get host(){let t=`:${this.port}`.length;return this.address.slice(0,-t)}get port(){let t=this.address.split(":").pop();return t&&Number.parseInt(t,10)}equals(t){let r=this.topologyVersion===t.topologyVersion||d6(this.topologyVersion,t.topologyVersion)===0;return t!=null&&KAe(this.error,t.error)&&this.type===t.type&&this.minWireVersion===t.minWireVersion&&this.me===t.me&&VAe(this.hosts,t.hosts)&&YAe(this.tags,t.tags)&&this.setName===t.setName&&this.setVersion===t.setVersion&&(this.electionId?t.electionId&&this.electionId.equals(t.electionId):this.electionId===t.electionId)&&this.primary===t.primary&&this.logicalSessionTimeoutMinutes===t.logicalSessionTimeoutMinutes&&r}};s(Xx,"ServerDescription");var Kx=Xx;function l6(e){return!e||!e.ok?Ln.Unknown:e.isreplicaset?Ln.RSGhost:e.msg&&e.msg==="isdbgrid"?Ln.Mongos:e.setName?e.hidden?Ln.RSOther:e.ismaster?Ln.RSPrimary:e.secondary?Ln.RSSecondary:e.arbiterOnly?Ln.RSArbiter:Ln.RSOther:Ln.Standalone}s(l6,"parseServerType");function d6(e,t){return e==null||t==null?-1:e.processId.equals(t.processId)?e.counter===t.counter?0:e.counter<t.counter?-1:1:-1}s(d6,"compareTopologyVersion");f6.exports={ServerDescription:Kx,parseServerType:l6,compareTopologyVersion:d6}});var Jx=w((P0t,h6)=>{"use strict";var eIe="2.6",tIe="5.0";h6.exports={MIN_SUPPORTED_SERVER_VERSION:eIe,MAX_SUPPORTED_SERVER_VERSION:tIe,MIN_SUPPORTED_WIRE_VERSION:2,MAX_SUPPORTED_WIRE_VERSION:13}});var Zx=w((B0t,y6)=>{"use strict";var wr=ti().ServerType,Pf=ql().ServerDescription,$w=Jx(),Ei=ti().TopologyType,rIe=$w.MIN_SUPPORTED_SERVER_VERSION,nIe=$w.MAX_SUPPORTED_SERVER_VERSION,p6=$w.MIN_SUPPORTED_WIRE_VERSION,m6=$w.MAX_SUPPORTED_WIRE_VERSION,xf=class xf{constructor(t,r,n,i,o,a,u){u=u||{},this.type=t||Ei.Unknown,this.setName=n||null,this.maxSetVersion=i||null,this.maxElectionId=o||null,this.servers=r||new Map,this.stale=!1,this.compatible=!0,this.compatibilityError=null,this.logicalSessionTimeoutMinutes=null,this.heartbeatFrequencyMS=u.heartbeatFrequencyMS||0,this.localThresholdMS=u.localThresholdMS||0,this.commonWireVersion=a||null,Object.defineProperty(this,"options",{value:u,enumberable:!1});for(let l of this.servers.values())if(l.type!==wr.Unknown&&(l.minWireVersion>m6&&(this.compatible=!1,this.compatibilityError=`Server at ${l.address} requires wire version ${l.minWireVersion}, but this version of the driver only supports up to ${m6} (MongoDB ${nIe})`),l.maxWireVersion<p6)){this.compatible=!1,this.compatibilityError=`Server at ${l.address} reports wire version ${l.maxWireVersion}, but this version of the driver requires at least ${p6} (MongoDB ${rIe}).`;break}this.logicalSessionTimeoutMinutes=null;for(let l of this.servers){let f=l[1];if(f.isReadable){if(f.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=f.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,f.logicalSessionTimeoutMinutes)}}}updateFromSrvPollingEvent(t){let r=t.addresses(),n=new Map(this.servers);for(let i of this.servers)r.has(i[0])?r.delete(i[0]):n.delete(i[0]);if(n.size===this.servers.size&&r.size===0)return this;for(let i of r)n.set(i,new Pf(i));return new xf(this.type,n,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,this.options,null)}update(t){let r=t.address,n=this.type,i=this.setName,o=this.maxSetVersion,a=this.maxElectionId,u=this.commonWireVersion;t.setName&&i&&t.setName!==i&&(t=new Pf(r,null));let l=t.type,f=new Map(this.servers);if(t.maxWireVersion!==0&&(u==null?u=t.maxWireVersion:u=Math.min(u,t.maxWireVersion)),f.set(r,t),n===Ei.Single)return new xf(Ei.Single,f,i,o,a,u,this.options);if(n===Ei.Unknown&&(l===wr.Standalone&&this.servers.size!==1?f.delete(r):n=iIe(l)),n===Ei.Sharded&&[wr.Mongos,wr.Unknown].indexOf(l)===-1&&f.delete(r),n===Ei.ReplicaSetNoPrimary){if([wr.Standalone,wr.Mongos].indexOf(l)>=0&&f.delete(r),l===wr.RSPrimary){let h=g6(f,i,t,o,a);n=h[0],i=h[1],o=h[2],a=h[3]}else if([wr.RSSecondary,wr.RSArbiter,wr.RSOther].indexOf(l)>=0){let h=aIe(f,i,t);n=h[0],i=h[1]}}if(n===Ei.ReplicaSetWithPrimary)if([wr.Standalone,wr.Mongos].indexOf(l)>=0)f.delete(r),n=Bf(f);else if(l===wr.RSPrimary){let h=g6(f,i,t,o,a);n=h[0],i=h[1],o=h[2],a=h[3]}else[wr.RSSecondary,wr.RSArbiter,wr.RSOther].indexOf(l)>=0?n=oIe(f,i,t):n=Bf(f);return new xf(n,f,i,o,a,u,this.options)}get error(){let t=Array.from(this.servers.values()).filter(r=>r.error);if(t.length>0)return t[0].error}get hasKnownServers(){return Array.from(this.servers.values()).some(t=>t.type!==wr.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(t=>t.isDataBearing)}hasServer(t){return this.servers.has(t)}};s(xf,"TopologyDescription");var Qx=xf;function iIe(e){return e===wr.Standalone?Ei.Single:e===wr.Mongos?Ei.Sharded:e===wr.RSPrimary?Ei.ReplicaSetWithPrimary:e===wr.RSGhost||e===wr.Unknown?Ei.Unknown:Ei.ReplicaSetNoPrimary}s(iIe,"topologyTypeForServerType");function sIe(e,t){if(e==null)return-1;if(t==null)return 1;if(e.id instanceof Buffer&&t.id instanceof Buffer){let i=e.id,o=t.id;return i.compare(o)}let r=e.toString(),n=t.toString();return r.localeCompare(n)}s(sIe,"compareObjectId");function g6(e,t,r,n,i){if(t=t||r.setName,t!==r.setName)return e.delete(r.address),[Bf(e),t,n,i];let o=r.electionId?r.electionId:null;if(r.setVersion&&o){if(n&&i&&(n>r.setVersion||sIe(i,o)>0))return e.set(r.address,new Pf(r.address)),[Bf(e),t,n,i];i=r.electionId}r.setVersion!=null&&(n==null||r.setVersion>n)&&(n=r.setVersion);for(let l of e.keys()){let f=e.get(l);if(f.type===wr.RSPrimary&&f.address!==r.address){e.set(l,new Pf(f.address));break}}r.allHosts.forEach(l=>{e.has(l)||e.set(l,new Pf(l))});let a=Array.from(e.keys()),u=r.allHosts;return a.filter(l=>u.indexOf(l)===-1).forEach(l=>{e.delete(l)}),[Bf(e),t,n,i]}s(g6,"updateRsFromPrimary");function oIe(e,t,r){if(t==null)throw new TypeError("setName is required");return(t!==r.setName||r.me&&r.address!==r.me)&&e.delete(r.address),Bf(e)}s(oIe,"updateRsWithPrimaryFromMember");function aIe(e,t,r){let n=Ei.ReplicaSetNoPrimary;return t=t||r.setName,t!==r.setName?(e.delete(r.address),[n,t]):(r.allHosts.forEach(i=>{e.has(i)||e.set(i,new Pf(i))}),r.me&&r.address!==r.me&&e.delete(r.address),[n,t])}s(aIe,"updateRsNoPrimaryFromMember");function Bf(e){for(let t of e.keys())if(e.get(t).type===wr.RSPrimary)return Ei.ReplicaSetWithPrimary;return Ei.ReplicaSetNoPrimary}s(Bf,"checkHasPrimary");y6.exports={TopologyDescription:Qx}});var nr=w((F0t,_6)=>{"use strict";var eP=qn(),uIe=ye().MongoError,v6=ti().ServerType,cIe=Zx().TopologyDescription,lIe=16,dIe=9,fIe={OP_REPLY:1,OP_UPDATE:2001,OP_INSERT:2002,OP_QUERY:2004,OP_GETMORE:2005,OP_DELETE:2006,OP_KILL_CURSORS:2007,OP_COMPRESSED:2012,OP_MSG:2013},hIe=s(function(e,t){var r=e.readPreference||new eP("primary");if(t.readPreference&&(r=t.readPreference),typeof r=="string"&&(r=new eP(r)),!(r instanceof eP))throw new uIe("read preference must be a ReadPreference instance");return r},"getReadPreference"),pIe=s(function(e){return{length:e.readInt32LE(0),requestId:e.readInt32LE(4),responseTo:e.readInt32LE(8),opCode:e.readInt32LE(12)}},"parseHeader");function mIe(e,t){return Object.assign(e,{raw:typeof t.raw=="boolean"?t.raw:!1,promoteLongs:typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,promoteValues:typeof t.promoteValues=="boolean"?t.promoteValues:!0,promoteBuffers:typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,bsonRegExp:typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,monitoring:typeof t.monitoring=="boolean"?t.monitoring:!1,fullResult:typeof t.fullResult=="boolean"?t.fullResult:!1}),typeof t.socketTimeout=="number"&&(e.socketTimeout=t.socketTimeout),t.session&&(e.session=t.session),typeof t.documentsReturnedIn=="string"&&(e.documentsReturnedIn=t.documentsReturnedIn),e}s(mIe,"applyCommonQueryOptions");function gIe(e){return e.type==="mongos"||e.description&&e.description.type===v6.Mongos?!0:e.description&&e.description instanceof cIe?Array.from(e.description.servers.values()).some(r=>r.type===v6.Mongos):!1}s(gIe,"isSharded");function yIe(e){return e.split(".")[0]}s(yIe,"databaseNamespace");function vIe(e){return e.split(".").slice(1).join(".")}s(vIe,"collectionNamespace");_6.exports={getReadPreference:hIe,MESSAGE_HEADER_SIZE:lIe,COMPRESSION_DETAILS_SIZE:dIe,opcodes:fIe,parseHeader:pIe,applyCommonQueryOptions:mIe,isSharded:gIe,databaseNamespace:yIe,collectionNamespace:vIe}});var qa=w((L0t,C6)=>{"use strict";var S6=Sn().retrieveSnappy(),E6=require("zlib"),kw={snappy:1,zlib:2},_Ie=new Set(["ismaster","saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);function SIe(e,t,r){switch(e.options.agreedCompressor){case"snappy":S6.compress(t,r);break;case"zlib":var n={};e.options.zlibCompressionLevel&&(n.level=e.options.zlibCompressionLevel),E6.deflate(t,n,r);break;default:throw new Error('Attempt to compress message using unknown compressor "'+e.options.agreedCompressor+'".')}}s(SIe,"compress");function EIe(e,t,r){if(e<0||e>kw.length)throw new Error("Server sent message compressed using an unsupported compressor. (Received compressor ID "+e+")");switch(e){case kw.snappy:S6.uncompress(t,r);break;case kw.zlib:E6.inflate(t,r);break;default:r(null,t)}}s(EIe,"decompress");C6.exports={compressorIDs:kw,uncompressibleCommands:_Ie,compress:SIe,decompress:EIe}});var Ci=w((tP,b6)=>{var Gw=require("buffer"),La=Gw.Buffer;function w6(e,t){for(var r in e)t[r]=e[r]}s(w6,"copyProps");La.from&&La.alloc&&La.allocUnsafe&&La.allocUnsafeSlow?b6.exports=Gw:(w6(Gw,tP),tP.Buffer=Mf);function Mf(e,t,r){return La(e,t,r)}s(Mf,"SafeBuffer");w6(La,Mf);Mf.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return La(e,t,r)};Mf.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=La(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Mf.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return La(e)};Mf.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Gw.SlowBuffer(e)}});var ds=w(($0t,A6)=>{"use strict";var CIe=Sn().retrieveBSON,wIe=CIe(),bIe=wIe.Long,gv=Ci().Buffer,yv=0,Ds=nr().opcodes,OIe=2,TIe=4,AIe=8,IIe=16,DIe=32,RIe=64,NIe=128,xIe=1,PIe=2,BIe=4,MIe=8,Ff=s(function(e,t,r,n){var i=this;if(t==null)throw new Error("ns must be specified for query");if(r==null)throw new Error("query must be specified for query");if(t.indexOf("\0")!==-1)throw new Error("namespace cannot contain a null character");this.bson=e,this.ns=t,this.query=r,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||null,this.requestId=Ff.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!0,this.batchSize=i.numberToReturn,this.tailable=!1,this.slaveOk=typeof n.slaveOk=="boolean"?n.slaveOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1},"Query");Ff.prototype.incRequestId=function(){this.requestId=yv++};Ff.nextRequestId=function(){return yv+1};Ff.prototype.toBin=function(){var e=this,t=[],r=null,n=0;this.tailable&&(n|=OIe),this.slaveOk&&(n|=TIe),this.oplogReplay&&(n|=AIe),this.noCursorTimeout&&(n|=IIe),this.awaitData&&(n|=DIe),this.exhaust&&(n|=RIe),this.partial&&(n|=NIe),e.batchSize!==e.numberToReturn&&(e.numberToReturn=e.batchSize);var i=gv.alloc(4*4+4+gv.byteLength(e.ns)+1+4+4);t.push(i);var o=e.bson.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});t.push(o),e.returnFieldSelector&&Object.keys(e.returnFieldSelector).length>0&&(r=e.bson.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),t.push(r));var a=i.length+o.length+(r?r.length:0),u=4;return i[3]=a>>24&255,i[2]=a>>16&255,i[1]=a>>8&255,i[0]=a&255,i[u+3]=this.requestId>>24&255,i[u+2]=this.requestId>>16&255,i[u+1]=this.requestId>>8&255,i[u]=this.requestId&255,u=u+4,i[u+3]=0,i[u+2]=0,i[u+1]=0,i[u]=0,u=u+4,i[u+3]=Ds.OP_QUERY>>24&255,i[u+2]=Ds.OP_QUERY>>16&255,i[u+1]=Ds.OP_QUERY>>8&255,i[u]=Ds.OP_QUERY&255,u=u+4,i[u+3]=n>>24&255,i[u+2]=n>>16&255,i[u+1]=n>>8&255,i[u]=n&255,u=u+4,u=u+i.write(this.ns,u,"utf8")+1,i[u-1]=0,i[u+3]=this.numberToSkip>>24&255,i[u+2]=this.numberToSkip>>16&255,i[u+1]=this.numberToSkip>>8&255,i[u]=this.numberToSkip&255,u=u+4,i[u+3]=this.numberToReturn>>24&255,i[u+2]=this.numberToReturn>>16&255,i[u+1]=this.numberToReturn>>8&255,i[u]=this.numberToReturn&255,u=u+4,t};Ff.getRequestId=function(){return++yv};var O6=s(function(e,t,r,n){n=n||{},this.numberToReturn=n.numberToReturn||0,this.requestId=yv++,this.bson=e,this.ns=t,this.cursorId=r},"GetMore");O6.prototype.toBin=function(){var e=4+gv.byteLength(this.ns)+1+4+8+16,t=0,r=gv.alloc(e);return r[t+3]=e>>24&255,r[t+2]=e>>16&255,r[t+1]=e>>8&255,r[t]=e&255,t=t+4,r[t+3]=this.requestId>>24&255,r[t+2]=this.requestId>>16&255,r[t+1]=this.requestId>>8&255,r[t]=this.requestId&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=Ds.OP_GETMORE>>24&255,r[t+2]=Ds.OP_GETMORE>>16&255,r[t+1]=Ds.OP_GETMORE>>8&255,r[t]=Ds.OP_GETMORE&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,t=t+r.write(this.ns,t,"utf8")+1,r[t-1]=0,r[t+3]=this.numberToReturn>>24&255,r[t+2]=this.numberToReturn>>16&255,r[t+1]=this.numberToReturn>>8&255,r[t]=this.numberToReturn&255,t=t+4,r[t+3]=this.cursorId.getLowBits()>>24&255,r[t+2]=this.cursorId.getLowBits()>>16&255,r[t+1]=this.cursorId.getLowBits()>>8&255,r[t]=this.cursorId.getLowBits()&255,t=t+4,r[t+3]=this.cursorId.getHighBits()>>24&255,r[t+2]=this.cursorId.getHighBits()>>16&255,r[t+1]=this.cursorId.getHighBits()>>8&255,r[t]=this.cursorId.getHighBits()&255,t=t+4,r};var T6=s(function(e,t,r){this.ns=t,this.requestId=yv++,this.cursorIds=r},"KillCursor");T6.prototype.toBin=function(){var e=24+this.cursorIds.length*8,t=0,r=gv.alloc(e);r[t+3]=e>>24&255,r[t+2]=e>>16&255,r[t+1]=e>>8&255,r[t]=e&255,t=t+4,r[t+3]=this.requestId>>24&255,r[t+2]=this.requestId>>16&255,r[t+1]=this.requestId>>8&255,r[t]=this.requestId&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=Ds.OP_KILL_CURSORS>>24&255,r[t+2]=Ds.OP_KILL_CURSORS>>16&255,r[t+1]=Ds.OP_KILL_CURSORS>>8&255,r[t]=Ds.OP_KILL_CURSORS&255,t=t+4,r[t+3]=0,r[t+2]=0,r[t+1]=0,r[t]=0,t=t+4,r[t+3]=this.cursorIds.length>>24&255,r[t+2]=this.cursorIds.length>>16&255,r[t+1]=this.cursorIds.length>>8&255,r[t]=this.cursorIds.length&255,t=t+4;for(var n=0;n<this.cursorIds.length;n++)r[t+3]=this.cursorIds[n].getLowBits()>>24&255,r[t+2]=this.cursorIds[n].getLowBits()>>16&255,r[t+1]=this.cursorIds[n].getLowBits()>>8&255,r[t]=this.cursorIds[n].getLowBits()&255,t=t+4,r[t+3]=this.cursorIds[n].getHighBits()>>24&255,r[t+2]=this.cursorIds[n].getHighBits()>>16&255,r[t+1]=this.cursorIds[n].getHighBits()>>8&255,r[t]=this.cursorIds[n].getHighBits()&255,t=t+4;return r};var rP=s(function(e,t,r,n,i){i=i||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.parsed=!1,this.raw=t,this.data=n,this.bson=e,this.opts=i,this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.cursorId=new bIe(n.readInt32LE(4),n.readInt32LE(8)),this.startingFrom=n.readInt32LE(12),this.numberReturned=n.readInt32LE(16),this.documents=new Array(this.numberReturned),this.cursorNotFound=(this.responseFlags&xIe)!==0,this.queryFailure=(this.responseFlags&PIe)!==0,this.shardConfigStale=(this.responseFlags&BIe)!==0,this.awaitCapable=(this.responseFlags&MIe)!==0,this.promoteLongs=typeof i.promoteLongs=="boolean"?i.promoteLongs:!0,this.promoteValues=typeof i.promoteValues=="boolean"?i.promoteValues:!0,this.promoteBuffers=typeof i.promoteBuffers=="boolean"?i.promoteBuffers:!1,this.bsonRegExp=typeof i.bsonRegExp=="boolean"?i.bsonRegExp:!1},"Response");rP.prototype.isParsed=function(){return this.parsed};rP.prototype.parse=function(e){if(!this.parsed){e=e||{};var t=e.raw||!1,r=e.documentsReturnedIn||null,n=typeof e.promoteLongs=="boolean"?e.promoteLongs:this.opts.promoteLongs,i=typeof e.promoteValues=="boolean"?e.promoteValues:this.opts.promoteValues,o=typeof e.promoteBuffers=="boolean"?e.promoteBuffers:this.opts.promoteBuffers,a=typeof e.bsonRegExp=="boolean"?e.bsonRegExp:this.opts.bsonRegExp,u,l;l={promoteLongs:n,promoteValues:i,promoteBuffers:o,bsonRegExp:a},this.index=20;for(var f=0;f<this.numberReturned;f++)u=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,t?this.documents[f]=this.data.slice(this.index,this.index+u):this.documents[f]=this.bson.deserialize(this.data.slice(this.index,this.index+u),l),this.index=this.index+u;if(this.documents.length===1&&r!=null&&t){let h={};h[r]=!0,l.fieldsAsRaw=h;let p=this.bson.deserialize(this.documents[0],l);this.documents=[p]}this.parsed=!0}};A6.exports={Query:Ff,GetMore:O6,Response:rP,KillCursor:T6}});var Ll=w((G0t,x6)=>{"use strict";var I6=Ci().Buffer,FIe=nr().opcodes,qIe=nr().databaseNamespace,LIe=qn(),UIe=ye().MongoError,nP=0,D6=1,R6=2,N6=65536,zw=class zw{constructor(t,r,n,i){if(n==null)throw new Error("query must be specified for query");this.bson=t,this.ns=r,this.command=n,this.command.$db=qIe(r),i.readPreference&&i.readPreference.mode!==LIe.PRIMARY&&(this.command.$readPreference=i.readPreference.toJSON()),this.options=i||{},this.requestId=i.requestId?i.requestId:zw.getRequestId(),this.serializeFunctions=typeof i.serializeFunctions=="boolean"?i.serializeFunctions:!1,this.ignoreUndefined=typeof i.ignoreUndefined=="boolean"?i.ignoreUndefined:!1,this.checkKeys=typeof i.checkKeys=="boolean"?i.checkKeys:!1,this.maxBsonSize=i.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=i.moreToCome||!1,this.exhaustAllowed=typeof i.exhaustAllowed=="boolean"?i.exhaustAllowed:!1}toBin(){let t=[],r=0;this.checksumPresent&&(r|=D6),this.moreToCome&&(r|=R6),this.exhaustAllowed&&(r|=N6);let n=I6.alloc(4*4+4);t.push(n);let i=n.length,o=this.command;return i+=this.makeDocumentSegment(t,o),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(FIe.OP_MSG,12),n.writeUInt32LE(r,16),t}makeDocumentSegment(t,r){let n=I6.alloc(1);n[0]=0;let i=this.serializeBson(r);return t.push(n),t.push(i),n.length+i.length}serializeBson(t){return this.bson.serialize(t,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}};s(zw,"Msg");var Ww=zw;Ww.getRequestId=function(){return nP=nP+1&2147483647,nP};var sP=class sP{constructor(t,r,n,i,o){o=o||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.parsed=!1,this.raw=r,this.data=i,this.bson=t,this.opts=o,this.length=n.length,this.requestId=n.requestId,this.responseTo=n.responseTo,this.opCode=n.opCode,this.fromCompressed=n.fromCompressed,this.responseFlags=i.readInt32LE(0),this.checksumPresent=(this.responseFlags&D6)!==0,this.moreToCome=(this.responseFlags&R6)!==0,this.exhaustAllowed=(this.responseFlags&N6)!==0,this.promoteLongs=typeof o.promoteLongs=="boolean"?o.promoteLongs:!0,this.promoteValues=typeof o.promoteValues=="boolean"?o.promoteValues:!0,this.promoteBuffers=typeof o.promoteBuffers=="boolean"?o.promoteBuffers:!1,this.bsonRegExp=typeof o.bsonRegExp=="boolean"?o.bsonRegExp:!1,this.documents=[]}isParsed(){return this.parsed}parse(t){if(this.parsed)return;t=t||{},this.index=4;let r=t.raw||!1,n=t.documentsReturnedIn||null,i=typeof t.promoteLongs=="boolean"?t.promoteLongs:this.opts.promoteLongs,o=typeof t.promoteValues=="boolean"?t.promoteValues:this.opts.promoteValues,a=typeof t.promoteBuffers=="boolean"?t.promoteBuffers:this.opts.promoteBuffers,u=typeof t.bsonRegExp=="boolean"?t.bsonRegExp:this.opts.bsonRegExp,l={promoteLongs:i,promoteValues:o,promoteBuffers:a,bsonRegExp:u};for(;this.index<this.data.length;){let f=this.data.readUInt8(this.index++);if(f===1)throw new UIe("OP_MSG Payload Type 1 detected unsupported protocol");if(f===0){let h=this.data.readUInt32LE(this.index),p=this.data.slice(this.index,this.index+h);this.documents.push(r?p:this.bson.deserialize(p,l)),this.index+=h}}if(this.documents.length===1&&n!=null&&r){let f={};f[n]=!0,l.fieldsAsRaw=f;let h=this.bson.deserialize(this.documents[0],l);this.documents=[h]}this.parsed=!0}};s(sP,"BinMsg");var iP=sP;x6.exports={Msg:Ww,BinMsg:iP}});var Rs=w((z0t,P6)=>{"use strict";var vv=require("util").format,jIe=ye().MongoError,_v={},ri={},fs=null,ic=process.pid,Ua=null,ni=s(function(e,t){if(!(this instanceof ni))return new ni(e,t);t=t||{},this.className=e,t.logger?Ua=t.logger:Ua==null&&(Ua=console.log),t.loggerLevel&&(fs=t.loggerLevel||"error"),ri[this.className]==null&&(_v[this.className]=!0)},"Logger");ni.prototype.debug=function(e,t){if(this.isDebug()&&(Object.keys(ri).length>0&&ri[this.className]||Object.keys(ri).length===0&&_v[this.className])){var r=new Date().getTime(),n=vv("[%s-%s:%s] %s %s","DEBUG",this.className,ic,r,e),i={type:"debug",message:e,className:this.className,pid:ic,date:r};t&&(i.meta=t),Ua(n,i)}};ni.prototype.warn=function(e,t){if(this.isWarn()&&(Object.keys(ri).length>0&&ri[this.className]||Object.keys(ri).length===0&&_v[this.className])){var r=new Date().getTime(),n=vv("[%s-%s:%s] %s %s","WARN",this.className,ic,r,e),i={type:"warn",message:e,className:this.className,pid:ic,date:r};t&&(i.meta=t),Ua(n,i)}},ni.prototype.info=function(e,t){if(this.isInfo()&&(Object.keys(ri).length>0&&ri[this.className]||Object.keys(ri).length===0&&_v[this.className])){var r=new Date().getTime(),n=vv("[%s-%s:%s] %s %s","INFO",this.className,ic,r,e),i={type:"info",message:e,className:this.className,pid:ic,date:r};t&&(i.meta=t),Ua(n,i)}},ni.prototype.error=function(e,t){if(this.isError()&&(Object.keys(ri).length>0&&ri[this.className]||Object.keys(ri).length===0&&_v[this.className])){var r=new Date().getTime(),n=vv("[%s-%s:%s] %s %s","ERROR",this.className,ic,r,e),i={type:"error",message:e,className:this.className,pid:ic,date:r};t&&(i.meta=t),Ua(n,i)}},ni.prototype.isInfo=function(){return fs==="info"||fs==="debug"},ni.prototype.isError=function(){return fs==="error"||fs==="info"||fs==="debug"},ni.prototype.isWarn=function(){return fs==="error"||fs==="warn"||fs==="info"||fs==="debug"},ni.prototype.isDebug=function(){return fs==="debug"};ni.reset=function(){fs="error",ri={}};ni.currentLogger=function(){return Ua};ni.setCurrentLogger=function(e){if(typeof e!="function")throw new jIe("current logger must be a function");Ua=e};ni.filter=function(e,t){e==="class"&&Array.isArray(t)&&(ri={},t.forEach(function(r){ri[r]=!0}))};ni.setLevel=function(e){if(e!=="info"&&e!=="error"&&e!=="debug"&&e!=="warn")throw new Error(vv("%s is an illegal logging level",e));fs=e};P6.exports=ni});var Hw=w((V0t,B6)=>{"use strict";var oP=s(function(e,t,r){this.result=e,this.connection=t,this.message=r},"CommandResult");oP.prototype.toJSON=function(){let e=Object.assign({},this,this.result);return delete e.message,e};oP.prototype.toString=function(){return JSON.stringify(this.toJSON())};B6.exports=oP});var fP=w((K0t,j6)=>{"use strict";var $Ie=require("events").EventEmitter,kIe=require("crypto"),GIe=Sn().debugOptions,WIe=nr().parseHeader,zIe=qa().decompress,M6=ds().Response,F6=Ll().BinMsg,U6=ye().MongoNetworkError,HIe=ye().MongoNetworkTimeoutError,cP=ye().MongoError,VIe=Rs(),YIe=nr().opcodes.OP_COMPRESSED,q6=nr().opcodes.OP_MSG,L6=nr().MESSAGE_HEADER_SIZE,Go=Ci().Buffer,KIe=ds().Query,XIe=Hw(),JIe=0,QIe=1024*1024*16*4,ZIe=["host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","socketTimeout","ssl","ca","crl","cert","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","checkServerIdentity"],qf,Ul=!1,Vw={},dP=class dP extends $Ie{constructor(t,r){if(super(),r=r||{},!r.bson)throw new TypeError("must pass in valid bson parser");this.id=JIe++,this.options=r,this.logger=VIe("Connection",r),this.bson=r.bson,this.tag=r.tag,this.maxBsonMessageSize=r.maxBsonMessageSize||QIe,this.helloOk=void 0,this.port=r.port||27017,this.host=r.host||"localhost",this.socketTimeout=typeof r.socketTimeout=="number"?r.socketTimeout:0,this.keepAlive=typeof r.keepAlive=="boolean"?r.keepAlive:!0,this.keepAliveInitialDelay=typeof r.keepAliveInitialDelay=="number"?r.keepAliveInitialDelay:12e4,this.connectionTimeout=typeof r.connectionTimeout=="number"?r.connectionTimeout:3e4,this.keepAliveInitialDelay>this.socketTimeout&&(this.keepAliveInitialDelay=Math.round(this.socketTimeout/2)),this.logger.isDebug()&&this.logger.debug(`creating connection ${this.id} with options [${JSON.stringify(GIe(ZIe,r))}]`),this.responseOptions={promoteLongs:typeof r.promoteLongs=="boolean"?r.promoteLongs:!0,promoteValues:typeof r.promoteValues=="boolean"?r.promoteValues:!0,promoteBuffers:typeof r.promoteBuffers=="boolean"?r.promoteBuffers:!1,bsonRegExp:typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1},this.flushing=!1,this.queue=[],this.writeStream=null,this.destroyed=!1,this.timedOut=!1;let n=kIe.createHash("sha1");n.update(this.address),this.hashedName=n.digest("hex"),this.workItems=[],this.socket=t,this.socket.once("error",tDe(this)),this.socket.once("timeout",rDe(this)),this.socket.once("close",nDe(this)),this.socket.on("data",iDe(this)),Ul&&eDe(this.id,this)}setSocketTimeout(t){this.socket&&this.socket.setTimeout(t)}resetSocketTimeout(){this.socket&&this.socket.setTimeout(this.socketTimeout)}static enableConnectionAccounting(t){t&&(qf=t),Ul=!0,Vw={}}static disableConnectionAccounting(){Ul=!1,qf=void 0}static connections(){return Vw}get address(){return`${this.host}:${this.port}`}unref(){if(this.socket==null){this.once("connect",()=>this.socket.unref());return}this.socket.unref()}flush(t){for(;this.workItems.length>0;){let r=this.workItems.shift();r.cb&&r.cb(t)}}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({force:!1},t),Ul&&Yw(this.id),this.socket==null){this.destroyed=!0;return}if(t.force||this.timedOut){this.socket.destroy(),this.destroyed=!0,typeof r=="function"&&r(null,null);return}this.socket.end(n=>{this.destroyed=!0,typeof r=="function"&&r(n,null)})}write(t){if(this.logger.isDebug())if(!Array.isArray(t))this.logger.debug(`writing buffer [ ${t.length} ] to ${this.address}`);else for(let r=0;r<t.length;r++)this.logger.debug(`writing buffer [ ${t[r].length} ] to ${this.address}`);if(this.socket.destroyed===!1){if(!Array.isArray(t))return this.socket.write(t,"binary"),!0;for(let r=0;r<t.length;r++)this.socket.write(t[r],"binary");return!0}return!1}toString(){return""+this.id}toJSON(){return{id:this.id,host:this.host,port:this.port}}isConnected(){return this.destroyed?!1:!this.socket.destroyed&&this.socket.writable}command(t,r,n,i){typeof n=="function"&&(i=n,n={});let o=this,a=typeof n.socketTimeout=="number"?n.socketTimeout:0,u=o.options.bson,l=new KIe(u,t,r,{numberToSkip:0,numberToReturn:1}),f=s(()=>{},"noop");function h(_,C){i(_,C),i=f}s(h,"_callback");function p(_){o.resetSocketTimeout(),aP.forEach(C=>o.removeListener(C,p)),o.removeListener("message",g),_==null&&(_=new cP(`runCommand failed for connection to '${o.address}'`)),o.on("error",f),h(_)}s(p,"errorHandler");function g(_){if(_.responseTo!==l.requestId)return;o.resetSocketTimeout(),aP.forEach(D=>o.removeListener(D,p)),o.removeListener("message",g),_.parse({promoteValues:!0});let C=_.documents[0];if(C.ok===0||C.$err||C.errmsg||C.code){h(new cP(C));return}h(void 0,new XIe(C,this,_))}s(g,"messageHandler"),o.setSocketTimeout(a),aP.forEach(_=>o.once(_,p)),o.on("message",g),o.write(l.toBin())}};s(dP,"Connection");var lP=dP,aP=["error","close","timeout","parseError"];function Yw(e){delete Vw[e],qf&&qf.deleteConnection(e)}s(Yw,"deleteConnection");function eDe(e,t){Vw[e]=t,qf&&qf.addConnection(e,t)}s(eDe,"addConnection");function tDe(e){return function(t){Ul&&Yw(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] errored out with [${JSON.stringify(t)}]`),e.emit("error",new U6(t),e)}}s(tDe,"errorHandler");function rDe(e){return function(){Ul&&Yw(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} for [${e.address}] timed out`),e.timedOut=!0,e.emit("timeout",new HIe(`connection ${e.id} to ${e.address} timed out`,{beforeHandshake:e.ismaster==null}),e)}}s(rDe,"timeoutHandler");function nDe(e){return function(t){Ul&&Yw(e.id),e.logger.isDebug()&&e.logger.debug(`connection ${e.id} with for [${e.address}] closed`),t||e.emit("close",new U6(`connection ${e.id} to ${e.address} closed`),e)}}s(nDe,"closeHandler");function uP(e,t){let r=WIe(t);if(r.opCode!==YIe){let o=r.opCode===q6?F6:M6;e.emit("message",new o(e.bson,t,r,t.slice(L6),e.responseOptions),e);return}r.fromCompressed=!0;let n=L6;r.opCode=t.readInt32LE(n),n+=4,r.length=t.readInt32LE(n),n+=4;let i=t[n];n++,zIe(i,t.slice(n),(o,a)=>{if(o){e.emit("error",o);return}if(a.length!==r.length){e.emit("error",new cP("Decompressing a compressed message from the server failed. The message is corrupt."));return}let u=r.opCode===q6?F6:M6;e.emit("message",new u(e.bson,t,r,a,e.responseOptions),e)})}s(uP,"processMessage");function iDe(e){return function(t){for(;t.length>0;)if(e.bytesRead>0&&e.sizeOfMessage>0){let r=e.sizeOfMessage-e.bytesRead;if(r>t.length)t.copy(e.buffer,e.bytesRead),e.bytesRead=e.bytesRead+t.length,t=Go.alloc(0);else{t.copy(e.buffer,e.bytesRead,0,r),t=t.slice(r);let n=e.buffer;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,uP(e,n)}}else if(e.stubBuffer!=null&&e.stubBuffer.length>0)if(e.stubBuffer.length+t.length>4){let r=Go.alloc(e.stubBuffer.length+t.length);e.stubBuffer.copy(r,0),t.copy(r,e.stubBuffer.length),t=r,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null}else{let r=Go.alloc(e.stubBuffer.length+t.length);e.stubBuffer.copy(r,0),t.copy(r,e.stubBuffer.length),t=Go.alloc(0)}else if(t.length>4){let r=t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(r<0||r>e.maxBsonMessageSize){let n={err:"socketHandler",trace:"",bin:e.buffer,parseState:{sizeOfMessage:r,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}};e.emit("parseError",n,e);return}if(r>4&&r<e.maxBsonMessageSize&&r>t.length)e.buffer=Go.alloc(r),t.copy(e.buffer,0),e.bytesRead=t.length,e.sizeOfMessage=r,e.stubBuffer=null,t=Go.alloc(0);else if(r>4&&r<e.maxBsonMessageSize&&r===t.length){let n=t;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=Go.alloc(0),uP(e,n)}else if(r<=4||r>e.maxBsonMessageSize){let n={err:"socketHandler",trace:null,bin:t,parseState:{sizeOfMessage:r,bytesRead:0,buffer:null,stubBuffer:null}};e.emit("parseError",n,e),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=Go.alloc(0)}else{let n=t.slice(0,r);e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=t.slice(r),uP(e,n)}}else e.stubBuffer=Go.alloc(t.length),t.copy(e.stubBuffer,0),t=Go.alloc(0)}}s(iDe,"dataHandler");j6.exports=lP});var jl=w((J0t,G6)=>{"use strict";var sDe=Ll().Msg,oDe=ds().KillCursor,aDe=ds().GetMore,Lf=$().deepCopy,uDe=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]),cDe=new Set(["hello","ismaster","isMaster"]),$6={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},k6={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldsSelector:"projection"},lDe=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"],hP=s(e=>e.ns.split(".")[1],"collectionName"),dDe=s((e,t)=>uDe.has(e)||cDe.has(e)&&!!t.speculativeAuthenticate,"shouldRedactCommand"),fDe=s(e=>{let t;if(e instanceof aDe)t={getMore:Lf(e.cursorId),collection:hP(e),batchSize:e.numberToReturn};else if(e instanceof oDe)t={killCursors:hP(e),cursors:Lf(e.cursorIds)};else if(e instanceof sDe)t=Lf(e.command);else if(e.query&&e.query.$query){let n;e.ns==="admin.$cmd"?n=Object.assign({},e.query.$query):(n={find:hP(e)},Object.keys($6).forEach(i=>{typeof e.query[i]<"u"&&(n[$6[i]]=Lf(e.query[i]))})),Object.keys(k6).forEach(i=>{typeof e[i]<"u"&&(n[k6[i]]=Lf(e[i]))}),lDe.forEach(i=>{e[i]&&(n[i]=e[i])}),typeof e.pre32Limit<"u"&&(n.limit=e.pre32Limit),e.query.$explain?t={explain:n}:t=n}else t=Lf(e.query||e);let r=Object.keys(t)[0];return{cmd:t,name:r,shouldRedact:dDe(r,t)}},"extractCommand");G6.exports={extractCommand:fDe}});var CP=w((Z0t,H6)=>{"use strict";var hDe=ds().KillCursor,pDe=ds().GetMore,z6=$().calculateDurationInMs,yP=jl().extractCommand,W6=s(e=>e.ns,"namespace"),mDe=s(e=>e.ns.split(".")[0],"databaseName"),gDe=s(e=>e.options?`${e.options.host}:${e.options.port}`:e.address,"generateConnectionId"),yDe=s(e=>e.s&&e.queue,"isLegacyPool"),vDe=s((e,t)=>e instanceof pDe?{ok:1,cursor:{id:t.message.cursorId,ns:W6(e),nextBatch:t.message.documents}}:e instanceof hDe?{ok:1,cursorsUnknown:e.cursorIds}:e.query&&typeof e.query.$query<"u"?{ok:1,cursor:{id:t.message.cursorId,ns:W6(e),firstBatch:t.message.documents}}:t&&t.result?t.result:t,"extractReply"),vP=s(e=>{if(yDe(e))return{connectionId:gDe(e)};let t=e;return{address:t.address,connectionId:t.id}},"extractConnectionDetails"),_P=class _P{constructor(t,r){let n=yP(r),i=n.name,o=vP(t);Object.assign(this,o,{requestId:r.requestId,databaseName:mDe(r),commandName:i,command:n.shouldRedact?{}:n.cmd})}};s(_P,"CommandStartedEvent");var pP=_P,SP=class SP{constructor(t,r,n,i){let o=yP(r),a=o.name,u=vP(t);Object.assign(this,u,{requestId:r.requestId,commandName:a,duration:z6(i),reply:o.shouldRedact?{}:vDe(r,n)})}};s(SP,"CommandSucceededEvent");var mP=SP,EP=class EP{constructor(t,r,n,i){let o=yP(r),a=o.name,u=vP(t);Object.assign(this,u,{requestId:r.requestId,commandName:a,duration:z6(i),failure:o.shouldRedact?{}:n})}};s(EP,"CommandFailedEvent");var gP=EP;H6.exports={CommandStartedEvent:pP,CommandSucceededEvent:mP,CommandFailedEvent:gP}});var sc=w((tEt,V6)=>{"use strict";var OP=class OP{constructor(t,r,n){this.connection=t,this.credentials=r,this.options=n}};s(OP,"AuthContext");var wP=OP,TP=class TP{constructor(t){this.bson=t}prepare(t,r,n){n(void 0,t)}auth(t,r){r(new TypeError("`auth` method must be overridden by subclass"))}};s(TP,"AuthProvider");var bP=TP;V6.exports={AuthContext:wP,AuthProvider:bP}});var DP=w((nEt,K6)=>{"use strict";var Y6=require("crypto"),_De=sc().AuthProvider,IP=class IP extends _De{auth(t,r){let n=t.connection,i=t.credentials,o=i.username,a=i.password,u=i.source;n.command(`${u}.$cmd`,{getnonce:1},(l,f)=>{let h=null,p=null;if(l==null){h=f.result.nonce;let C=Y6.createHash("md5");C.update(o+":mongo:"+a,"utf8");let D=C.digest("hex");C=Y6.createHash("md5"),C.update(h+o+D,"utf8"),p=C.digest("hex")}let g={authenticate:1,user:o,nonce:h,key:p};n.command(`${u}.$cmd`,g,r)})}};s(IP,"MongoCR");var AP=IP;K6.exports=AP});var xP=w((sEt,J6)=>{"use strict";var SDe=sc().AuthProvider,NP=class NP extends SDe{prepare(t,r,n){let i=r.credentials;Object.assign(t,{speculativeAuthenticate:X6(i)}),n(void 0,t)}auth(t,r){let n=t.connection,i=t.credentials;if(t.response.speculativeAuthenticate)return r();n.command("$external.$cmd",X6(i),r)}};s(NP,"X509");var RP=NP;function X6(e){let t={authenticate:1,mechanism:"MONGODB-X509"};return e.username&&Object.assign(t,{user:e.username}),t}s(X6,"x509AuthenticateCommand");J6.exports=RP});var MP=w((aEt,Q6)=>{"use strict";var EDe=Sn().retrieveBSON,CDe=sc().AuthProvider,wDe=EDe(),bDe=wDe.Binary,BP=class BP extends CDe{auth(t,r){let n=t.connection,i=t.credentials,o=i.username,a=i.password,l={saslStart:1,mechanism:"PLAIN",payload:new bDe(`\0${o}\0${a}`),autoAuthorize:1};n.command("$external.$cmd",l,r)}};s(BP,"Plain");var PP=BP;Q6.exports=PP});var UP=w((cEt,eV)=>{"use strict";var ODe=require("dns"),TDe=sc().AuthProvider,ADe=Le().retrieveKerberos,Kw=ye().MongoError,FP,LP=class LP extends TDe{auth(t,r){let n=t.connection,i=t.credentials;if(i==null)return r(new Kw("credentials required"));let o=i.username;function a(u,l){return n.command("$external.$cmd",u,l)}s(a,"externalCommand"),IDe(t,(u,l)=>{if(u)return r(u);if(l==null)return r(new Kw("gssapi client missing"));l.step("",(f,h)=>{if(f)return r(f);a(DDe(h),(p,g)=>{if(p)return r(p);let _=g.result;Z6(l,10,_.payload,(C,D)=>{if(C)return r(C);a(RDe(D,_.conversationId),(O,N)=>{if(O)return r(O);let F=N.result;NDe(l,o,F.payload,(x,P)=>{if(x)return r(x);a({saslContinue:1,conversationId:F.conversationId,payload:P},(X,G)=>{if(X)return r(X);r(void 0,G)})})})})})})})}};s(LP,"GSSAPI");var qP=LP;eV.exports=qP;function IDe(e,t){let r=e.options.host,n=e.options.port,i=e.credentials;if(!r||!n||!i)return t(new Kw(`Connection must specify: ${r?"host":""}, ${n?"port":""}, ${i?"host":"credentials"}.`));if(FP==null)try{FP=ADe()}catch(f){return t(f)}let o=i.username,a=i.password,u=i.mechanismProperties,l=u.gssapiservicename||u.gssapiServiceName||"mongodb";xDe(r,u,(f,h)=>{if(f)return t(f);let p={};a!=null&&Object.assign(p,{user:o,password:a}),FP.initializeClient(`${l}${process.platform==="win32"?"/":"@"}${h}`,p,(g,_)=>{if(g)return t(new Kw(g));t(null,_)})})}s(IDe,"makeKerberosClient");function DDe(e){return{saslStart:1,mechanism:"GSSAPI",payload:e,autoAuthorize:1}}s(DDe,"saslStart");function RDe(e,t){return{saslContinue:1,conversationId:t,payload:e}}s(RDe,"saslContinue");function Z6(e,t,r,n){e.step(r,(i,o)=>{if(i&&t===0)return n(i);if(i)return Z6(e,t-1,r,n);n(void 0,o||"")})}s(Z6,"negotiate");function NDe(e,t,r,n){e.unwrap(r,(i,o)=>{if(i)return n(i);e.wrap(o||"",{user:t},(a,u)=>{if(a)return n(a);n(void 0,u)})})}s(NDe,"finalize");function xDe(e,t,r){if(!(typeof t.gssapiCanonicalizeHostName=="boolean"?t.gssapiCanonicalizeHostName:!1))return r(void 0,e);ODe.resolveCname(e,(i,o)=>{if(i)return r(i);if(Array.isArray(o)&&o.length>0)return r(void 0,o[0]);r(void 0,e)})}s(xDe,"performGssapiCanonicalizeHostName")});var nV=w((dEt,rV)=>{rV.exports=ja;function ja(e,t){if(!(this instanceof ja))return new ja(e,t);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=e||1024,this.deduplicate=t?t.deduplicate:null,this.zeros=this.deduplicate?Xw(this.deduplicate.length):null}s(ja,"Pager");ja.prototype.updated=function(e){for(;this.deduplicate&&e.buffer[e.deduplicate]===this.deduplicate[e.deduplicate];)if(e.deduplicate++,e.deduplicate===this.deduplicate.length){e.deduplicate=0,e.buffer.equals&&e.buffer.equals(this.deduplicate)&&(e.buffer=this.deduplicate);break}e.updated||!this.updates||(e.updated=!0,this.updates.push(e))};ja.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var e=this.updates.pop();return e.updated=!1,e};ja.prototype._array=function(e,t){if(e>=this.maxPages){if(t)return;PDe(this,e)}FDe(e,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],o=r[i];if(!o){if(t)return;o=r[i]=new Array(32768)}r=o}return r};ja.prototype.get=function(e,t){var r=this._array(e,t),n=this.path[0],i=r&&r[n];return!i&&!t&&(i=r[n]=new tV(e,Xw(this.pageSize)),e>=this.length&&(this.length=e+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!t&&(i.buffer=MDe(i.buffer),i.deduplicate=0),i};ja.prototype.set=function(e,t){var r=this._array(e,!1),n=this.path[0];if(e>=this.length&&(this.length=e+1),!t||this.zeros&&t.equals&&t.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&t.equals&&t.equals(this.deduplicate)&&(t=this.deduplicate);var i=r[n],o=BDe(t,this.pageSize);i?i.buffer=o:r[n]=new tV(e,o)};ja.prototype.toBuffer=function(){for(var e=new Array(this.length),t=Xw(this.pageSize),r=0;r<e.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<e.length;i++)e[r++]=n&&n[i]?n[i].buffer:t;return Buffer.concat(e)};function PDe(e,t){for(;e.maxPages<t;){var r=e.pages;e.pages=new Array(32768),e.pages[0]=r,e.level++,e.maxPages*=32768}}s(PDe,"grow");function BDe(e,t){if(e.length===t)return e;if(e.length>t)return e.slice(0,t);var r=Xw(t);return e.copy(r),r}s(BDe,"truncate");function Xw(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}s(Xw,"alloc");function MDe(e){var t=Buffer.allocUnsafe?Buffer.allocUnsafe(e.length):new Buffer(e.length);return e.copy(t),t}s(MDe,"copy");function tV(e,t){this.offset=e*t.length,this.buffer=t,this.updated=!1,this.deduplicate=0}s(tV,"Page");function FDe(e,t){e=(e-(t[0]=e&32767))/32768,e=(e-(t[1]=e&32767))/32768,t[3]=(e-(t[2]=e&32767))/32768&32767}s(FDe,"factor")});var sV=w((hEt,iV)=>{var qDe=nV();iV.exports=oc;function oc(e){if(!(this instanceof oc))return new oc(e);if(e||(e={}),Buffer.isBuffer(e)&&(e={buffer:e}),this.pageOffset=e.pageOffset||0,this.pageSize=e.pageSize||1024,this.pages=e.pages||qDe(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!UDe(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!e.trackUpdates,this._pageMask=this.pageSize-1,e.buffer){for(var t=0;t<e.buffer.length;t+=this.pageSize)this.pages.set(t/this.pageSize,e.buffer.slice(t,t+this.pageSize));this.byteLength=e.buffer.length,this.length=8*this.byteLength}}s(oc,"Bitfield");oc.prototype.get=function(e){var t=e&7,r=(e-t)/8;return!!(this.getByte(r)&128>>t)};oc.prototype.getByte=function(e){var t=e&this._pageMask,r=(e-t)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[t+this.pageOffset]:0};oc.prototype.set=function(e,t){var r=e&7,n=(e-r)/8,i=this.getByte(n);return this.setByte(n,t?i|128>>r:i&(255^128>>r))};oc.prototype.toBuffer=function(){for(var e=LDe(this.pages.length*this.pageSize),t=0;t<this.pages.length;t++){var r=this.pages.get(t,!0),n=t*this.pageSize;r&&r.buffer.copy(e,n,this.pageOffset,this.pageOffset+this.pageSize)}return e};oc.prototype.setByte=function(e,t){var r=e&this._pageMask,n=(e-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===t?!1:(i.buffer[r]=t,e>=this.byteLength&&(this.byteLength=e+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function LDe(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t}s(LDe,"alloc");function UDe(e){return!(e&e-1)}s(UDe,"powerOfTwo")});var uV=w((mEt,aV)=>{"use strict";var jDe=require("fs"),$De=require("path"),kDe=sV(),oV=jDe.readFileSync($De.resolve(__dirname,"../code-points.mem")),Sv=0;function Uf(){let e=oV.readUInt32BE(Sv);Sv+=4;let t=oV.slice(Sv,Sv+e);return Sv+=e,kDe({buffer:t})}s(Uf,"read");var GDe=Uf(),WDe=Uf(),zDe=Uf(),HDe=Uf(),VDe=Uf(),YDe=Uf();aV.exports={unassigned_code_points:GDe,commonly_mapped_to_nothing:WDe,non_ASCII_space_characters:zDe,prohibited_characters:HDe,bidirectional_r_al:VDe,bidirectional_l:YDe}});var fV=w((yEt,dV)=>{"use strict";var{unassigned_code_points:KDe,commonly_mapped_to_nothing:XDe,non_ASCII_space_characters:JDe,prohibited_characters:QDe,bidirectional_r_al:jP,bidirectional_l:ZDe}=uV();dV.exports=iRe;var eRe=JDe,tRe=XDe,cV=s(e=>e.codePointAt(0),"getCodePoint"),rRe=s(e=>e[0],"first"),nRe=s(e=>e[e.length-1],"last");function lV(e){let t=[],r=e.length;for(let n=0;n<r;n+=1){let i=e.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let o=e.charCodeAt(n+1);if(o>=56320&&o<=57343){t.push((i-55296)*1024+o-56320+65536),n+=1;continue}}t.push(i)}return t}s(lV,"toCodePoints");function iRe(e,t={}){if(typeof e!="string")throw new TypeError("Expected string.");if(e.length===0)return"";let r=lV(e).map(h=>eRe.get(h)?32:h).filter(h=>!tRe.get(h)),n=String.fromCodePoint.apply(null,r).normalize("NFKC"),i=lV(n);if(i.some(h=>QDe.get(h)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(t.allowUnassigned!==!0&&i.some(p=>KDe.get(p)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let a=i.some(h=>jP.get(h)),u=i.some(h=>ZDe.get(h));if(a&&u)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let l=jP.get(cV(rRe(n))),f=jP.get(cV(nRe(n)));if(a&&!(l&&f))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return n}s(iRe,"saslprep")});var Ev=w((_Et,_V)=>{"use strict";var kl=require("crypto"),Un=Ci().Buffer,sRe=Sn().retrieveBSON,$l=ye().MongoError,oRe=sc().AuthProvider,aRe=$().emitWarning,uRe=sRe(),$P=uRe.Binary,Zw;try{Zw=fV()}catch{}var zP=class zP extends oRe{constructor(t,r){super(t),this.cryptoMethod=r||"sha1"}prepare(t,r,n){let i=this.cryptoMethod;i==="sha256"&&Zw==null&&aRe("Warning: no saslprep library specified. Passwords will not be sanitized"),kl.randomBytes(24,(o,a)=>{if(o)return n(o);Object.assign(r,{nonce:a});let u=r.credentials,l=Object.assign({},t,{speculativeAuthenticate:Object.assign(gV(i,u,a),{db:u.source})});n(void 0,l)})}auth(t,r){let n=t.response;if(n&&n.speculativeAuthenticate){yV(this.cryptoMethod,n.speculativeAuthenticate,t,r);return}cRe(this.cryptoMethod,t,r)}};s(zP,"ScramSHA");var eb=zP;function pV(e){return e.replace("=","=3D").replace(",","=2C")}s(pV,"cleanUsername");function mV(e,t){return Un.concat([Un.from("n=","utf8"),Un.from(e,"utf8"),Un.from(",r=","utf8"),Un.from(t.toString("base64"),"utf8")])}s(mV,"clientFirstMessageBare");function gV(e,t,r){let n=pV(t.username);return{saslStart:1,mechanism:e==="sha1"?"SCRAM-SHA-1":"SCRAM-SHA-256",payload:new $P(Un.concat([Un.from("n,,","utf8"),mV(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}s(gV,"makeFirstMessage");function cRe(e,t,r){let n=t.connection,i=t.credentials,o=t.nonce,a=i.source,u=gV(e,i,o);n.command(`${a}.$cmd`,u,(l,f)=>{let h=vV(l,f);if(h)return r(h);yV(e,f.result,t,r)})}s(cRe,"executeScram");function yV(e,t,r,n){let i=r.connection,o=r.credentials,a=r.nonce,u=o.source,l=pV(o.username),f=o.password,h;if(e==="sha256")h=Zw?Zw(f):f;else try{h=lRe(l,f)}catch(Ce){return n(Ce)}let p=Un.isBuffer(t.payload)?new $P(t.payload):t.payload,g=hV(p.value()),_=parseInt(g.i,10);if(_&&_<4096){n(new $l(`Server returned an invalid iteration count ${_}`),!1);return}let C=g.s,D=g.r;if(D.startsWith("nonce")){n(new $l(`Server returned an invalid nonce: ${D}`),!1);return}let O=`c=biws,r=${D}`,N=mRe(h,Un.from(C,"base64"),_,e),F=Jw(e,N,"Client Key"),x=Jw(e,N,"Server Key"),P=fRe(e,F),X=[mV(l,a),p.value().toString("base64"),O].join(","),G=Jw(e,P,X),ue=`p=${dRe(F,G)}`,be=[O,ue].join(","),Q=Jw(e,x,X),Se={saslContinue:1,conversationId:t.conversationId,payload:new $P(Un.from(be))};i.command(`${u}.$cmd`,Se,(Ce,le)=>{let ce=vV(Ce,le);if(ce)return n(ce);let ve=le.result,Pe=hV(ve.payload.value());if(!gRe(Un.from(Pe.v,"base64"),Q)){n(new $l("Server returned an invalid signature"));return}if(!ve||ve.done!==!1)return n(ce,ve);let Ee={saslContinue:1,conversationId:ve.conversationId,payload:Un.alloc(0)};i.command(`${u}.$cmd`,Ee,n)})}s(yV,"continueScramConversation");function hV(e){let t={},r=e.split(",");for(let n=0;n<r.length;n++){let i=r[n].split("=");t[i[0]]=i[1]}return t}s(hV,"parsePayload");function lRe(e,t){if(typeof e!="string")throw new $l("username must be a string");if(typeof t!="string")throw new $l("password must be a string");if(t.length===0)throw new $l("password cannot be empty");let r=kl.createHash("md5");return r.update(`${e}:mongo:${t}`,"utf8"),r.digest("hex")}s(lRe,"passwordDigest");function dRe(e,t){Un.isBuffer(e)||(e=Un.from(e)),Un.isBuffer(t)||(t=Un.from(t));let r=Math.max(e.length,t.length),n=[];for(let i=0;i<r;i+=1)n.push(e[i]^t[i]);return Un.from(n).toString("base64")}s(dRe,"xor");function fRe(e,t){return kl.createHash(e).update(t).digest()}s(fRe,"H");function Jw(e,t,r){return kl.createHmac(e,t).update(r).digest()}s(Jw,"HMAC");var Qw={},kP=0;function hRe(){Qw={},kP=0}s(hRe,"_hiCachePurge");var pRe={sha256:32,sha1:20};function mRe(e,t,r,n){let i=[e,t.toString("base64"),r].join("_");if(Qw[i]!==void 0)return Qw[i];let o=kl.pbkdf2Sync(e,t,r,pRe[n],n);return kP>=200&&hRe(),Qw[i]=o,kP+=1,o}s(mRe,"HI");function gRe(e,t){if(e.length!==t.length)return!1;if(typeof kl.timingSafeEqual=="function")return kl.timingSafeEqual(e,t);let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}s(gRe,"compareDigest");function vV(e,t){if(e)return e;let r=t.result;if(r.$err||r.errmsg)return new $l(r)}s(vV,"resolveError");var HP=class HP extends eb{constructor(t){super(t,"sha1")}};s(HP,"ScramSHA1");var GP=HP,VP=class VP extends eb{constructor(t){super(t,"sha256")}};s(VP,"ScramSHA256");var WP=VP;_V.exports={ScramSHA1:GP,ScramSHA256:WP}});var KP=w((EEt,SV)=>{"use strict";function yRe(e){if(e){if(Array.isArray(e.saslSupportedMechs))return e.saslSupportedMechs.indexOf("SCRAM-SHA-256")>=0?"scram-sha-256":"scram-sha-1";if(e.maxWireVersion>=3)return"scram-sha-1"}return"mongocr"}s(yRe,"getDefaultAuthMechanism");var tb=class tb{constructor(t){t=t||{},this.username=t.username,this.password=t.password,this.source=t.source||t.db,this.mechanism=t.mechanism||"default",this.mechanismProperties=t.mechanismProperties||{},/MONGODB-AWS/i.test(this.mechanism)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties.AWS_SESSION_TOKEN=process.env.AWS_SESSION_TOKEN)),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(t){return this.mechanism===t.mechanism&&this.username===t.username&&this.password===t.password&&this.source===t.source}resolveAuthMechanism(t){return/DEFAULT/i.test(this.mechanism)?new tb({username:this.username,password:this.password,source:this.source,mechanism:yRe(t),mechanismProperties:this.mechanismProperties}):this}};s(tb,"MongoCredentials");var YP=tb;SV.exports={MongoCredentials:YP}});var wV=w((wEt,CV)=>{"use strict";var vRe=sc().AuthProvider,_Re=KP().MongoCredentials,Gl=ye().MongoError,SRe=require("crypto"),ERe=require("http"),CRe=Le().maxWireVersion,wRe=require("url"),JP;try{JP=require("aws4")}catch{}var bRe=110,ORe="http://169.254.170.2",XP="http://169.254.169.254",EV="/latest/meta-data/iam/security-credentials",ZP=class ZP extends vRe{auth(t,r){let n=t.connection,i=t.credentials;if(CRe(n)<9){r(new Gl("MONGODB-AWS authentication requires MongoDB version 4.4 or later"));return}if(JP==null){r(new Gl("MONGODB-AWS authentication requires the `aws4` module, please install it as a dependency of your project"));return}if(i.username==null){TRe(i,(p,g)=>{if(p)return r(p);t.credentials=g,this.auth(t,r)});return}let o=i.source,a=this.bson,u=i.username,l=i.password,f=i.mechanismProperties.AWS_SESSION_TOKEN,h=u&&l&&f?{accessKeyId:u,secretAccessKey:l,sessionToken:f}:u&&l?{accessKeyId:u,secretAccessKey:l}:void 0;SRe.randomBytes(32,(p,g)=>{if(p){r(p);return}let _={saslStart:1,mechanism:"MONGODB-AWS",payload:a.serialize({r:g,p:bRe})};n.command(`${o}.$cmd`,_,(C,D)=>{if(C)return r(C);let O=D.result,N=a.deserialize(O.payload.buffer),F=N.h,x=N.s.buffer;if(x.length!==64){r(new Gl(`Invalid server nonce length ${x.length}, expected 64`));return}if(x.compare(g,0,g.length,0,g.length)!==0){r(new Gl("Server nonce does not begin with client nonce"));return}if(F.length<1||F.length>255||F.indexOf("..")!==-1){r(new Gl(`Server returned an invalid host: "${F}"`));return}let P="Action=GetCallerIdentity&Version=2011-06-15",X=JP.sign({method:"POST",host:F,region:ARe(N.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":P.length,"X-MongoDB-Server-Nonce":x.toString("base64"),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:P},h),G=X.headers.Authorization,ue=X.headers["X-Amz-Date"],be={a:G,d:ue};f&&(be.t=f);let Q={saslContinue:1,conversationId:1,payload:a.serialize(be)};n.command(`${o}.$cmd`,Q,Se=>{if(Se)return r(Se);r()})})})}};s(ZP,"MongoDBAWS");var QP=ZP;function TRe(e,t){function r(n){if(n.AccessKeyId==null||n.SecretAccessKey==null||n.Token==null){t(new Gl("Could not obtain temporary MONGODB-AWS credentials"));return}t(void 0,new _Re({username:n.AccessKeyId,password:n.SecretAccessKey,source:e.source,mechanism:"MONGODB-AWS",mechanismProperties:{AWS_SESSION_TOKEN:n.Token}}))}if(s(r,"done"),process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI){rb(`${ORe}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`,void 0,(n,i)=>{if(n)return t(n);r(i)});return}rb(`${XP}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}},(n,i)=>{if(n)return t(n);rb(`${XP}/${EV}`,{json:!1,headers:{"X-aws-ec2-metadata-token":i}},(o,a)=>{if(o)return t(o);rb(`${XP}/${EV}/${a}`,{headers:{"X-aws-ec2-metadata-token":i}},(u,l)=>{if(u)return t(u);r(l)})})})}s(TRe,"makeTempCredentials");function ARe(e){let t=e.split(".");return t.length===1||t[1]==="amazonaws"?"us-east-1":t[1]}s(ARe,"deriveRegion");function rb(e,t,r){t=Object.assign({method:"GET",timeout:1e4,json:!0},wRe.parse(e),t);let n=ERe.request(t,i=>{i.setEncoding("utf8");let o="";i.on("data",a=>o+=a),i.on("end",()=>{if(t.json===!1){r(void 0,o);return}try{let a=JSON.parse(o);r(void 0,a)}catch{r(new Gl(`Invalid JSON response: "${o}"`))}})});n.on("error",i=>r(i)),n.end()}s(rb,"request");CV.exports=QP});var eB=w((OEt,bV)=>{"use strict";var IRe=DP(),DRe=xP(),RRe=MP(),NRe=UP(),xRe=Ev().ScramSHA1,PRe=Ev().ScramSHA256,BRe=wV();function MRe(e){return{"mongodb-aws":new BRe(e),mongocr:new IRe(e),x509:new DRe(e),plain:new RRe(e),gssapi:new NRe(e),"scram-sha-1":new xRe(e),"scram-sha-256":new PRe(e)}}s(MRe,"defaultAuthProviders");bV.exports={defaultAuthProviders:MRe}});var sb=w((AEt,RV)=>{"use strict";var AV=require("net"),FRe=require("tls"),IV=fP(),Cv=ye().MongoError,nb=ye().MongoNetworkError,qRe=ye().MongoNetworkTimeoutError,LRe=eB().defaultAuthProviders,URe=sc().AuthContext,ib=Jx(),jRe=Le().makeClientMetadata,OV=ib.MAX_SUPPORTED_WIRE_VERSION,$Re=ib.MAX_SUPPORTED_SERVER_VERSION,TV=ib.MIN_SUPPORTED_WIRE_VERSION,kRe=ib.MIN_SUPPORTED_SERVER_VERSION,jf;function GRe(e,t,r){typeof t=="function"&&(r=t,t=void 0);let n=e&&e.connectionType?e.connectionType:IV;jf==null&&(jf=LRe(e.bson));let i=e.family!==void 0?e.family:0;XRe(i,e,t,(o,a)=>{if(o){r(o,a);return}HRe(new n(a,e),e,r)})}s(GRe,"connect");function WRe(e){return!(e instanceof IV)}s(WRe,"isModernConnectionType");function zRe(e,t){let r=e&&typeof e.maxWireVersion=="number"&&e.maxWireVersion>=TV,n=e&&typeof e.minWireVersion=="number"&&e.minWireVersion<=OV;if(r){if(n)return null;let o=`Server at ${t.host}:${t.port} reports minimum wire version ${e.minWireVersion}, but this version of the Node.js Driver requires at most ${OV} (MongoDB ${$Re})`;return new Cv(o)}let i=`Server at ${t.host}:${t.port} reports maximum wire version ${e.maxWireVersion||0}, but this version of the Node.js Driver requires at least ${TV} (MongoDB ${kRe})`;return new Cv(i)}s(zRe,"checkSupportedServer");function HRe(e,t,r){let n=s(function(a,u){a&&e&&e.destroy(),r(a,u)},"callback"),i=t.credentials;if(i&&!i.mechanism.match(/DEFAULT/i)&&!jf[i.mechanism]){n(new Cv(`authMechanism '${i.mechanism}' not supported`));return}let o=new URe(e,i,t);VRe(o,(a,u)=>{if(a)return n(a);let l=Object.assign({},t);(t.connectTimeoutMS||t.connectionTimeout)&&(l.socketTimeout=t.connectTimeoutMS||t.connectionTimeout),u.helloOk=!!t.useUnifiedTopology;let f=new Date().getTime();e.command("admin.$cmd",u,l,(h,p)=>{if(h){n(h);return}let g=p.result;if(g.ok===0){n(new Cv(g));return}"isWritablePrimary"in g&&(g.ismaster=g.isWritablePrimary),t.useUnifiedTopology&&g.helloOk&&(e.helloOk=!0);let _=zRe(g,t);if(_){n(_);return}if(!WRe(e)&&g.compression){let C=u.compression.filter(D=>g.compression.indexOf(D)!==-1);C.length&&(e.agreedCompressor=C[0]),t.compression&&t.compression.zlibCompressionLevel&&(e.zlibCompressionLevel=t.compression.zlibCompressionLevel)}if(e.ismaster=g,e.lastIsMasterMS=new Date().getTime()-f,!g.arbiterOnly&&i){Object.assign(o,{response:g});let C=i.resolveAuthMechanism(g);jf[C.mechanism].auth(o,O=>{if(O)return n(O);n(void 0,e)});return}n(void 0,e)})})}s(HRe,"performInitialHandshake");function VRe(e,t){let r=e.options,n=e.connection.serverApi,i=r.compression&&r.compression.compressors?r.compression.compressors:[],o={[n?"hello":"ismaster"]:!0,client:r.metadata||jRe(r),compression:i},a=e.credentials;if(a){if(a.mechanism.match(/DEFAULT/i)&&a.username){Object.assign(o,{saslSupportedMechs:`${a.source}.${a.username}`}),jf["scram-sha-256"].prepare(o,e,t);return}let u=jf[a.mechanism];if(u==null)return t(new Cv(`No AuthProvider for ${a.mechanism} defined.`));u.prepare(o,e,t);return}t(void 0,o)}s(VRe,"prepareHandshakeDocument");var YRe=["pfx","key","passphrase","cert","ca","ciphers","NPNProtocols","ALPNProtocols","servername","ecdhCurve","secureProtocol","secureContext","session","minDHSize","crl","rejectUnauthorized"];function DV(e,t){let r=typeof t.host=="string"?t.host:"localhost";return r.indexOf("/")!==-1?{path:r}:{family:e,host:r,port:typeof t.port=="number"?t.port:27017,rejectUnauthorized:!1}}s(DV,"parseConnectOptions");function KRe(e,t){let r=DV(e,t);for(let n in t)t[n]!=null&&YRe.indexOf(n)!==-1&&(r[n]=t[n]);return t.checkServerIdentity===!1?r.checkServerIdentity=function(){}:typeof t.checkServerIdentity=="function"&&(r.checkServerIdentity=t.checkServerIdentity),r.servername==null&&!AV.isIP(r.host)&&(r.servername=r.host),r}s(KRe,"parseSslOptions");var tB=new Set(["error","close","timeout","parseError"]);function XRe(e,t,r,n){let i=typeof t.ssl=="boolean"?t.ssl:!1,o=typeof t.keepAlive=="boolean"?t.keepAlive:!0,a=typeof t.keepAliveInitialDelay=="number"?t.keepAliveInitialDelay:12e4,u=typeof t.noDelay=="boolean"?t.noDelay:!0,l=typeof t.connectionTimeout=="number"?t.connectionTimeout:typeof t.connectTimeoutMS=="number"?t.connectTimeoutMS:3e4,f=typeof t.socketTimeoutMS=="number"?t.socketTimeoutMS:typeof t.socketTimeout=="number"?t.socketTimeout:0,h=typeof t.rejectUnauthorized=="boolean"?t.rejectUnauthorized:!0;a>f&&(a=Math.round(f/2));let p,g=s(function(N,F){N&&p&&p.destroy(),n(N,F)},"callback");try{i?(p=FRe.connect(KRe(e,t)),typeof p.disableRenegotiation=="function"&&p.disableRenegotiation()):p=AV.createConnection(DV(e,t))}catch(N){return g(N)}p.setKeepAlive(o,a),p.setTimeout(l),p.setNoDelay(u);let _=i?"secureConnect":"connect",C;function D(N){return F=>{tB.forEach(x=>p.removeAllListeners(x)),C&&r.removeListener("cancel",C),p.removeListener(_,O),g(JRe(N,F))}}s(D,"errorHandler");function O(){if(tB.forEach(N=>p.removeAllListeners(N)),C&&r.removeListener("cancel",C),p.authorizationError&&h)return g(p.authorizationError);p.setTimeout(f),g(null,p)}s(O,"connectHandler"),tB.forEach(N=>p.once(N,D(N))),r&&(C=D("cancel"),r.once("cancel",C)),p.once(_,O)}s(XRe,"makeConnection");function JRe(e,t){switch(e){case"error":return new nb(t);case"timeout":return new qRe("connection timed out");case"close":return new nb("connection closed");case"cancel":return new nb("connection establishment was cancelled");default:return new nb("unknown network error")}}s(JRe,"connectionFailureError");RV.exports=GRe});var Wl=w((DEt,NV)=>{"use strict";var $f=class $f{constructor(t){t!=null&&(this.level=t)}static fromOptions(t){if(t!=null){if(t.readConcern)return t.readConcern instanceof $f?t.readConcern:new $f(t.readConcern.level);if(t.level)return new $f(t.level)}}static get MAJORITY(){return"majority"}static get AVAILABLE(){return"available"}static get LINEARIZABLE(){return"linearizable"}static get SNAPSHOT(){return"snapshot"}};s($f,"ReadConcern");var rB=$f;NV.exports=rB});var kf=w((NEt,BV)=>{"use strict";var xV=ye().MongoError,QRe=qn(),ZRe=Wl(),eNe=Fa(),ac,PV;(()=>{let e="NO_TRANSACTION",t="STARTING_TRANSACTION",r="TRANSACTION_IN_PROGRESS",n="TRANSACTION_COMMITTED",i="TRANSACTION_COMMITTED_EMPTY",o="TRANSACTION_ABORTED";ac={NO_TRANSACTION:e,STARTING_TRANSACTION:t,TRANSACTION_IN_PROGRESS:r,TRANSACTION_COMMITTED:n,TRANSACTION_COMMITTED_EMPTY:i,TRANSACTION_ABORTED:o},PV={[e]:[e,t],[t]:[r,n,i,o],[r]:[r,n,o],[n]:[n,i,t,e],[o]:[t,e],[i]:[i,e]}})();var iB=class iB{constructor(t){t=t||{},this.state=ac.NO_TRANSACTION,this.options={};let r=eNe.fromOptions(t);if(r){if(r.w<=0)throw new xV("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}t.readConcern&&(this.options.readConcern=ZRe.fromOptions(t)),t.readPreference&&(this.options.readPreference=QRe.fromOptions(t)),t.maxCommitTimeMS&&(this.options.maxTimeMS=t.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isActive(){return[ac.STARTING_TRANSACTION,ac.TRANSACTION_IN_PROGRESS].indexOf(this.state)!==-1}transition(t){let r=PV[this.state];if(r&&r.indexOf(t)!==-1){this.state=t,(this.state===ac.NO_TRANSACTION||this.state===ac.STARTING_TRANSACTION||this.state===ac.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new xV(`Attempted illegal state transition from [${this.state}] to [${t}]`)}pinServer(t){this.isActive&&(this._pinnedServer=t)}unpinServer(){this._pinnedServer=void 0}};s(iB,"Transaction");var nB=iB;function tNe(e){return!!(e.commitTransaction||e.abortTransaction)}s(tNe,"isTransactionCommand");BV.exports={TxnState:ac,Transaction:nB,isTransactionCommand:tNe}});var kr=w((PEt,$V)=>{"use strict";var rNe=Ml().MONGODB_ERROR_CODES,nNe=qn(),ob=ti().TopologyType,FV=ye().MongoError,iNe=ye().isRetryableWriteError,sNe=Le().maxWireVersion,oNe=ye().MongoNetworkError,aNe=rNe.IllegalOperation;function sB(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}s(sB,"emitSDAMEvent");function uNe(e){return!e.compression||!e.compression.compressors?[]:(e.compression.compressors.forEach(function(t){if(t!=="snappy"&&t!=="zlib")throw new Error("compressors must be at least one of snappy or zlib")}),e.compression.compressors)}s(uNe,"createCompressionInfo");function cNe(e){return JSON.parse(JSON.stringify(e))}s(cNe,"clone");var lNe=s(function(e){return e.s.serverDescription||(e.s.serverDescription={address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}),e.s.serverDescription},"getPreviousDescription"),qV=s(function(e,t){e.listeners("serverDescriptionChanged").length>0&&(e.emit("serverDescriptionChanged",{topologyId:e.s.topologyId!==-1?e.s.topologyId:e.id,address:e.name,previousDescription:lNe(e),newDescription:t}),e.s.serverDescription=t)},"emitServerDescriptionChanged"),dNe=s(function(e){return e.s.topologyDescription||(e.s.topologyDescription={topologyType:"Unknown",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}]}),e.s.topologyDescription},"getPreviousTopologyDescription"),fNe=s(function(e,t){e.listeners("topologyDescriptionChanged").length>0&&(e.emit("topologyDescriptionChanged",{topologyId:e.s.topologyId!==-1?e.s.topologyId:e.id,address:e.name,previousDescription:dNe(e),newDescription:t}),e.s.serverDescription=t)},"emitTopologyDescriptionChanged"),hNe=s(function(e,t,r){var n=ab(e,t),i=ab(e,r);return i!==n},"changedIsMaster"),ab=s(function(e,t){return t||(t=e.ismaster),t?t.ismaster&&t.msg==="isdbgrid"?"Mongos":t.ismaster&&!t.hosts?"Standalone":t.ismaster?"RSPrimary":t.secondary?"RSSecondary":t.arbiterOnly?"RSArbiter":"Unknown":"Unknown"},"getTopologyType"),LV=s(function(e){return function(t){if(e.s.state!=="destroyed"){var r=new Date().getTime();sB(e,"serverHeartbeatStarted",{connectionId:e.name}),e.command("admin.$cmd",{ismaster:!0},{monitoring:!0},function(n,i){if(n)sB(e,"serverHeartbeatFailed",{durationMS:o,failure:n,connectionId:e.name});else{e.emit("ismaster",i,e);var o=new Date().getTime()-r;sB(e,"serverHeartbeatSucceeded",{durationMS:o,reply:i.result,connectionId:e.name}),hNe(e,e.s.ismaster,i.result)&&qV(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:e.s.inTopology?ab(e):"Standalone"}),e.s.ismaster=i.result,e.s.isMasterLatencyMS=o}if(typeof t=="function")return t(n,i);e.s.inquireServerStateTimeout=setTimeout(LV(e),e.s.haInterval)})}}},"inquireServerState"),pNe=s(function(e){var t={};for(var r in e)t[r]=e[r];return t},"cloneOptions");function mNe(e,t){var r=!1;this.start=function(){return this.isRunning()||(r=setInterval(e,t)),this},this.stop=function(){return clearInterval(r),r=!1,this},this.isRunning=function(){return r!==!1}}s(mNe,"Interval");function gNe(e,t){var r=!1,n=s(()=>{r&&(clearTimeout(r),r=!1,e())},"func");this.start=function(){return this.isRunning()||(r=setTimeout(n,t)),this},this.stop=function(){return clearTimeout(r),r=!1,this},this.isRunning=function(){return r!==!1}}s(gNe,"Timeout");function yNe(e,t){var r={servers:[]};e||(e={servers:[]});for(var n=0;n<e.servers.length;n++){for(var i=!1,o=0;o<t.servers.length;o++)if(t.servers[o].address.toLowerCase()===e.servers[n].address.toLowerCase()){i=!0;break}i||r.servers.push({address:e.servers[n].address,from:e.servers[n].type,to:"Unknown"})}for(o=0;o<t.servers.length;o++){for(i=!1,n=0;n<e.servers.length;n++)if(e.servers[n].address.toLowerCase()===t.servers[o].address.toLowerCase()){i=!0;break}i||r.servers.push({address:t.servers[o].address,from:"Unknown",to:t.servers[o].type})}for(n=0;n<e.servers.length;n++){var a=e.servers[n];for(o=0;o<t.servers.length;o++){var u=t.servers[o];a.address.toLowerCase()===u.address.toLowerCase()&&a.type!==u.type&&r.servers.push({address:a.address,from:a.type,to:u.type})}}return r}s(yNe,"diff");function vNe(e,t){(e.clusterTime==null||t.clusterTime.greaterThan(e.clusterTime.clusterTime))&&(e.clusterTime=t)}s(vNe,"resolveClusterTime");var _Ne={endSessions:function(e,t){Array.isArray(e)||(e=[e]),this.command("admin.$cmd",{endSessions:e},{readPreference:nNe.primaryPreferred},()=>{typeof t=="function"&&t()})}};function UV(e){return e.description?e.description.type:e.type==="mongos"?ob.Sharded:e.type==="replset"?ob.ReplicaSetWithPrimary:ob.Single}s(UV,"topologyType");var SNe=6,jV=s(function(e){return!(e.lastIsMaster().maxWireVersion<SNe||!e.logicalSessionTimeoutMinutes||UV(e)===ob.Single)},"isRetryableWritesSupported"),MV="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";function ENe(e){return e.code!==aNe||!e.errmsg.includes("Transaction numbers")?e:new FV({message:MV,errmsg:MV,originalError:e})}s(ENe,"getMMAPError");function CNe(e,t){return e instanceof FV?(jV(t)&&(e instanceof oNe||sNe(t)<9&&iNe(e))&&e.addErrorLabel("RetryableWriteError"),e.hasErrorLabel("RetryableWriteError")):!1}s(CNe,"legacyIsRetryableWriteError");$V.exports={SessionMixins:_Ne,resolveClusterTime:vNe,inquireServerState:LV,getTopologyType:ab,emitServerDescriptionChanged:qV,emitTopologyDescriptionChanged:fNe,cloneOptions:pNe,createCompressionInfo:uNe,clone:cNe,diff:yNe,Interval:mNe,Timeout:gNe,isRetryableWritesSupported:jV,getMMAPError:ENe,topologyType:UV,legacyIsRetryableWriteError:CNe}});var uc=w((MEt,e8)=>{"use strict";var wNe=Sn().retrieveBSON,bNe=require("events"),VV=wNe(),kV=VV.Binary,ONe=Le().uuidV4,vo=ye().MongoError,GV=ye().isRetryableError,TNe=ye().MongoNetworkError,ANe=ye().MongoWriteConcernError,WV=kf().Transaction,Gr=kf().TxnState,INe=Le().isPromiseLike,DNe=qn(),oB=$().maybePromise,RNe=kf().isTransactionCommand,NNe=kr().resolveClusterTime,xNe=nr().isSharded,PNe=Le().maxWireVersion,uB=$().now,YV=$().calculateDurationInMs,BNe=8;function KV(e,t){if(e.serverSession==null){let r=new vo("Cannot use a session that has ended");if(typeof t=="function")return t(r,null),!1;throw r}return!0}s(KV,"assertAlive");var wv=Symbol("serverSession"),lb=class lb extends bNe{constructor(t,r,n,i){if(super(),t==null)throw new Error("ClientSession requires a topology");if(r==null||!(r instanceof cb))throw new Error("ClientSession requires a ServerSessionPool");n=n||{},i=i||{},this.topology=t,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this[wv]=void 0,this.supports={causalConsistency:typeof n.causalConsistency<"u"?n.causalConsistency:!0},this.clusterTime=n.initialClusterTime,this.operationTime=null,this.explicit=!!n.explicit,this.owner=n.owner,this.defaultTransactionOptions=Object.assign({},n.defaultTransactionOptions),this.transaction=new WV}get id(){return this.serverSession.id}get serverSession(){return this[wv]==null&&(this[wv]=this.sessionPool.acquire()),this[wv]}endSession(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=this;return oB(this,r,i=>{if(n.hasEnded)return i();function o(){n.sessionPool.release(n.serverSession),n[wv]=void 0,n.hasEnded=!0,n.emit("ended",n),i()}if(s(o,"completeEndSession"),n.serverSession&&n.inTransaction()){n.abortTransaction(a=>{if(a)return i(a);o()});return}o()})}advanceOperationTime(t){if(this.operationTime==null){this.operationTime=t;return}t.greaterThan(this.operationTime)&&(this.operationTime=t)}equals(t){return t instanceof lb?this.id.id.buffer.equals(t.id.id.buffer):!1}incrementTransactionNumber(){this.serverSession.txnNumber++}inTransaction(){return this.transaction.isActive}startTransaction(t){if(KV(this),this.inTransaction())throw new vo("Transaction already in progress");let r=PNe(this.topology);if(xNe(this.topology)&&r!=null&&r<BNe)throw new vo("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.incrementTransactionNumber(),this.transaction=new WV(Object.assign({},this.clientOptions,t||this.defaultTransactionOptions)),this.transaction.transition(Gr.STARTING_TRANSACTION)}commitTransaction(t){return oB(this,t,r=>HV(this,"commitTransaction",r))}abortTransaction(t){return oB(this,t,r=>HV(this,"abortTransaction",r))}toBSON(){throw new Error("ClientSession cannot be serialized to BSON.")}withTransaction(t,r){let n=uB();return cB(this,n,t,r)}};s(lb,"ClientSession");var aB=lb,XV=12e4,MNe=100,FNe=79,zV=50,qNe=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function JV(e,t){return YV(e)<t}s(JV,"hasNotTimedOut");function LNe(e){return db(e)||!qNe.has(e.codeName)&&e.code!==MNe&&e.code!==FNe}s(LNe,"isUnknownTransactionCommitResult");function db(e){return e==null?!1:e.code===zV||e.writeConcernError&&e.writeConcernError.code===zV}s(db,"isMaxTimeMSExpiredError");function QV(e,t,r,n){return e.commitTransaction().catch(i=>{if(i instanceof vo&&JV(t,XV)&&!db(i)){if(i.hasErrorLabel("UnknownTransactionCommitResult"))return QV(e,t,r,n);if(i.hasErrorLabel("TransientTransactionError"))return cB(e,t,r,n)}throw i})}s(QV,"attemptTransactionCommit");var UNe=new Set([Gr.NO_TRANSACTION,Gr.TRANSACTION_COMMITTED,Gr.TRANSACTION_ABORTED]);function jNe(e){return UNe.has(e.transaction.state)}s(jNe,"userExplicitlyEndedTransaction");function cB(e,t,r,n){e.startTransaction(n);let i;try{i=r(e)}catch(o){i=Promise.reject(o)}if(!INe(i))throw e.abortTransaction(),new TypeError("Function provided to `withTransaction` must return a Promise");return i.then(()=>{if(!jNe(e))return QV(e,t,r,n)}).catch(o=>{function a(u){if(u instanceof vo&&u.hasErrorLabel("TransientTransactionError")&&JV(t,XV))return cB(e,t,r,n);throw db(u)&&u.addErrorLabel("UnknownTransactionCommitResult"),u}return s(a,"maybeRetryOrThrow"),e.transaction.isActive?e.abortTransaction().then(()=>a(o)):a(o)})}s(cB,"attemptTransaction");function HV(e,t,r){if(!KV(e,r))return;let n=e.transaction.state;if(n===Gr.NO_TRANSACTION){r(new vo("No transaction started"));return}if(t==="commitTransaction"){if(n===Gr.STARTING_TRANSACTION||n===Gr.TRANSACTION_COMMITTED_EMPTY){e.transaction.transition(Gr.TRANSACTION_COMMITTED_EMPTY),r(null,null);return}if(n===Gr.TRANSACTION_ABORTED){r(new vo("Cannot call commitTransaction after calling abortTransaction"));return}}else{if(n===Gr.STARTING_TRANSACTION){e.transaction.transition(Gr.TRANSACTION_ABORTED),r(null,null);return}if(n===Gr.TRANSACTION_ABORTED){r(new vo("Cannot call abortTransaction twice"));return}if(n===Gr.TRANSACTION_COMMITTED||n===Gr.TRANSACTION_COMMITTED_EMPTY){r(new vo("Cannot call abortTransaction after calling commitTransaction"));return}}let i={[t]:1},o;e.transaction.options.writeConcern?o=Object.assign({},e.transaction.options.writeConcern):e.clientOptions&&e.clientOptions.w&&(o={w:e.clientOptions.w}),n===Gr.TRANSACTION_COMMITTED&&(o=Object.assign({wtimeout:1e4},o,{w:"majority"})),o&&Object.assign(i,{writeConcern:o}),t==="commitTransaction"&&e.transaction.options.maxTimeMS&&Object.assign(i,{maxTimeMS:e.transaction.options.maxTimeMS});function a(l,f){t==="commitTransaction"?(e.transaction.transition(Gr.TRANSACTION_COMMITTED),l&&(l instanceof TNe||l instanceof ANe||GV(l)||db(l)?LNe(l)&&(l.addErrorLabel("UnknownTransactionCommitResult"),e.transaction.unpinServer()):l.hasErrorLabel("TransientTransactionError")&&e.transaction.unpinServer())):e.transaction.transition(Gr.TRANSACTION_ABORTED),r(l,f)}s(a,"commandHandler");function u(l){return t==="commitTransaction"?l:null}s(u,"transactionError"),e.transaction.recoveryToken&&$Ne(e)&&(i.recoveryToken=e.transaction.recoveryToken),e.topology.command("admin.$cmd",i,{session:e},(l,f)=>{if(l&&GV(l))return i.commitTransaction&&(e.transaction.unpinServer(),i.writeConcern=Object.assign({wtimeout:1e4},i.writeConcern,{w:"majority"})),e.topology.command("admin.$cmd",i,{session:e},(h,p)=>a(u(h),p));a(u(l),f)})}s(HV,"endTransaction");function $Ne(e){return!!e.topology.s.options.useRecoveryToken}s($Ne,"supportsRecoveryToken");var lB=class lB{constructor(){this.id={id:new kV(ONe(),kV.SUBTYPE_UUID)},this.lastUse=uB(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(t){return Math.round(YV(this.lastUse)%864e5%36e5/6e4)>t-1}};s(lB,"ServerSession");var ub=lB,dB=class dB{constructor(t){if(t==null)throw new Error("ServerSessionPool requires a topology");this.topology=t,this.sessions=[]}endAllPooledSessions(t){if(this.sessions.length){this.topology.endSessions(this.sessions.map(r=>r.id),()=>{this.sessions=[],typeof t=="function"&&t()});return}typeof t=="function"&&t()}acquire(){let t=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){let r=this.sessions.shift();if(!r.hasTimedOut(t))return r}return new ub}release(t){let r=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length&&this.sessions[this.sessions.length-1].hasTimedOut(r);)this.sessions.pop();if(!t.hasTimedOut(r)){if(t.isDirty)return;this.sessions.unshift(t)}}};s(dB,"ServerSessionPool");var cb=dB;function ZV(e,t){return!!(e.aggregate||e.count||e.distinct||e.find||e.parallelCollectionScan||e.geoNear||e.geoSearch||e.mapReduce&&t&&t.out&&(t.out.inline===1||t.out==="inline"))}s(ZV,"commandSupportsReadConcern");function kNe(e,t,r){if(e.hasEnded)return new vo("Cannot use a session that has ended");if(r&&r.writeConcern&&r.writeConcern.w===0)return;let n=e.serverSession;n.lastUse=uB(),t.lsid=n.id;let i=e.inTransaction()||RNe(t),o=r.willRetryWrite,a=ZV(t,r);if(n.txnNumber&&(o||i)&&(t.txnNumber=VV.Long.fromNumber(n.txnNumber)),!i){e.transaction.state!==Gr.NO_TRANSACTION&&e.transaction.transition(Gr.NO_TRANSACTION),e.supports.causalConsistency&&e.operationTime&&a&&(t.readConcern=t.readConcern||{},Object.assign(t.readConcern,{afterClusterTime:e.operationTime}));return}if(r.readPreference&&!r.readPreference.equals(DNe.primary))return new vo(`Read preference in a transaction must be primary, not: ${r.readPreference.mode}`);if(t.autocommit=!1,e.transaction.state===Gr.STARTING_TRANSACTION){e.transaction.transition(Gr.TRANSACTION_IN_PROGRESS),t.startTransaction=!0;let u=e.transaction.options.readConcern||e.clientOptions.readConcern;u&&(t.readConcern=u),e.supports.causalConsistency&&e.operationTime&&(t.readConcern=t.readConcern||{},Object.assign(t.readConcern,{afterClusterTime:e.operationTime}))}}s(kNe,"applySession");function GNe(e,t){t.$clusterTime&&NNe(e,t.$clusterTime),t.operationTime&&e&&e.supports.causalConsistency&&e.advanceOperationTime(t.operationTime),t.recoveryToken&&e&&e.inTransaction()&&(e.transaction._recoveryToken=t.recoveryToken)}s(GNe,"updateSessionFromResponse");e8.exports={ClientSession:aB,ServerSession:ub,ServerSessionPool:cb,TxnState:Gr,applySession:kNe,updateSessionFromResponse:GNe,commandSupportsReadConcern:ZV}});var d8=w((qEt,l8)=>{"use strict";var WNe=require("util").inherits,pB=require("events").EventEmitter,Ns=ye().MongoError,zNe=ye().MongoTimeoutError,HNe=ye().MongoWriteConcernError,VNe=Rs(),YNe=require("util").format,KNe=Ll().Msg,XNe=Hw(),fB=nr().MESSAGE_HEADER_SIZE,t8=nr().COMPRESSION_DETAILS_SIZE,JNe=nr().opcodes,QNe=qa().compress,ZNe=qa().compressorIDs,exe=qa().uncompressibleCommands,fb=CP(),hB=Ci().Buffer,txe=sb(),rxe=uc().updateSessionFromResponse,i8=Le().eachAsync,nxe=Le().makeStateMachine,ixe=$().now,lc="disconnected",Gf="connecting",bv="connected",cc="draining",hs="destroying",wi="destroyed",Wf=nxe({[lc]:[Gf,cc,lc],[Gf]:[Gf,bv,cc,lc],[bv]:[bv,lc,cc],[cc]:[cc,hs,wi],[hs]:[hs,wi],[wi]:[wi]}),s8=new Set(["error","close","timeout","parseError","connect","message"]),sxe=0,Kr=s(function(e,t){if(pB.call(this),this.topology=e,this.s={state:lc,cancellationToken:new pB},this.s.cancellationToken.setMaxListeners(1/0),this.options=Object.assign({host:"localhost",port:27017,size:5,minSize:0,connectionTimeout:3e4,socketTimeout:0,keepAlive:!0,keepAliveInitialDelay:12e4,noDelay:!0,ssl:!1,checkServerIdentity:!0,ca:null,crl:null,cert:null,key:null,passphrase:null,rejectUnauthorized:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1,reconnect:!0,reconnectInterval:1e3,reconnectTries:30,domainsEnabled:!1,legacyCompatMode:!0},t),this.id=sxe++,this.retriesLeft=this.options.reconnectTries,this.reconnectId=null,this.reconnectError=null,!t.bson||t.bson&&(typeof t.bson.serialize!="function"||typeof t.bson.deserialize!="function"))throw new Error("must pass in valid bson parser");this.logger=VNe("Pool",t),this.availableConnections=[],this.inUseConnections=[],this.connectingConnections=0,this.executing=!1,this.queue=[],this.numberOfConsecutiveTimeouts=0,this.connectionIndex=0;let r=this;this._messageHandler=oxe(this),this._connectionCloseHandler=function(n){hb(r,"close",n,this)},this._connectionErrorHandler=function(n){hb(r,"error",n,this)},this._connectionTimeoutHandler=function(n){hb(r,"timeout",n,this)},this._connectionParseErrorHandler=function(n){hb(r,"parseError",n,this)}},"Pool");WNe(Kr,pB);Object.defineProperty(Kr.prototype,"size",{enumerable:!0,get:function(){return this.options.size}});Object.defineProperty(Kr.prototype,"minSize",{enumerable:!0,get:function(){return this.options.minSize}});Object.defineProperty(Kr.prototype,"connectionTimeout",{enumerable:!0,get:function(){return this.options.connectionTimeout}});Object.defineProperty(Kr.prototype,"socketTimeout",{enumerable:!0,get:function(){return this.options.socketTimeout}});Object.defineProperty(Kr.prototype,"state",{enumerable:!0,get:function(){return this.s.state}});function o8(e){e.inUseConnections=[],e.availableConnections=[],e.connectingConnections=0,e.executing=!1,e.numberOfConsecutiveTimeouts=0,e.connectionIndex=0,e.retriesLeft=e.options.reconnectTries,e.reconnectId=null}s(o8,"resetPoolState");function hb(e,t,r,n){if(n){if(n._connectionFailHandled)return;n._connectionFailHandled=!0,n.destroy(),mB(e,n),n.flush(r)}if(t==="timeout"&&(e.numberOfConsecutiveTimeouts=e.numberOfConsecutiveTimeouts+1,e.numberOfConsecutiveTimeouts>e.options.reconnectTries))return e.numberOfConsecutiveTimeouts=0,e.destroy(!0),e.emit("close",e);e.socketCount()===0&&(e.state!==wi&&e.state!==hs&&e.state!==cc&&e.options.reconnect&&Wf(e,lc),t=t==="error"?"close":t,e.emit(t,r)),!e.reconnectId&&e.options.reconnect&&(e.reconnectError=r,e.reconnectId=setTimeout(a8(e),e.options.reconnectInterval)),c8(e)<e.minSize&&dc(e)}s(hb,"connectionFailureHandler");function a8(e,t){return function(){if(e.emit("attemptReconnect",e),e.state===wi||e.state===hs){typeof t=="function"&&t(new Ns("Cannot create connection when pool is destroyed"));return}if(e.retriesLeft=e.retriesLeft-1,e.retriesLeft<=0){e.destroy();let r=new zNe(`failed to reconnect after ${e.options.reconnectTries} attempts with interval ${e.options.reconnectInterval} ms`,e.reconnectError);e.emit("reconnectFailed",r),typeof t=="function"&&t(r);return}e.reconnectId=null,dc(e,(r,n)=>{r==null&&(e.reconnectId=null,e.retriesLeft=e.options.reconnectTries,e.emit("reconnect",e)),typeof t=="function"&&t(r,n)})}}s(a8,"attemptReconnect");function u8(e,t,r){var n=t.indexOf(e);n!==-1&&(t.splice(n,1),r.push(e))}s(u8,"moveConnectionBetween");function oxe(e){return function(t,r){for(var n=null,i=0;i<r.workItems.length;i++)r.workItems[i].requestId===t.responseTo&&(n=r.workItems[i],r.workItems.splice(i,1));n&&n.monitoring&&u8(r,e.inUseConnections,e.availableConnections),e.numberOfConsecutiveTimeouts=0,n&&n.socketTimeout&&r.resetSocketTimeout(),e.logger.isDebug()&&e.logger.debug(YNe("message [ %s ] received from %s:%s",t.raw.length,e.options.host,e.options.port));function o(a,u,l,f){if(!a.options.domainsEnabled)return process.nextTick(function(){return u(l,f)});u(l,f)}if(s(o,"handleOperationCallback"),e.executing||process.nextTick(function(){zf(e)()}),n&&!n.immediateRelease){try{t.parse(n)}catch(a){return o(e,n.cb,new Ns(a))}if(t.documents[0]){let a=t.documents[0],u=n.session;u&&rxe(u,a),e.topology&&a.$clusterTime&&(e.topology.clusterTime=a.$clusterTime)}if(n.command&&t.documents[0]){let a=t.documents[0];if(a.writeConcernError){let u=new HNe(a.writeConcernError,a);return o(e,n.cb,u)}if(a.ok===0||a.$err||a.errmsg||a.code)return o(e,n.cb,new Ns(a))}t.hashedName=r.hashedName,o(e,n.cb,null,new XNe(n.fullResult?t:t.documents[0],r,t))}}}s(oxe,"messageHandler");Kr.prototype.socketCount=function(){return this.availableConnections.length+this.inUseConnections.length};function c8(e){return e.availableConnections.length+e.inUseConnections.length+e.connectingConnections}s(c8,"totalConnectionCount");Kr.prototype.allConnections=function(){return this.availableConnections.concat(this.inUseConnections)};Kr.prototype.get=function(){return this.allConnections()[0]};Kr.prototype.isConnected=function(){if(this.state===wi||this.state===hs)return!1;for(var e=this.availableConnections.concat(this.inUseConnections),t=0;t<e.length;t++)if(e[t].isConnected())return!0;return!1};Kr.prototype.isDestroyed=function(){return this.state===wi||this.state===hs};Kr.prototype.isDisconnected=function(){return this.state===lc};Kr.prototype.connect=function(e){if(this.state!==lc)throw new Ns("connection in unlawful state "+this.state);Wf(this,Gf),dc(this,(t,r)=>{if(t){if(typeof e=="function"){this.destroy(),e(t);return}this.state===Gf&&this.emit("error",t),this.destroy();return}if(Wf(this,bv),this.minSize)for(let n=0;n<this.minSize;n++)dc(this);typeof e=="function"?e(null,r):this.emit("connect",this,r)})};Kr.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};Kr.prototype.logout=function(e,t){typeof t=="function"&&t(null,null)};Kr.prototype.unref=function(){var e=this.availableConnections.concat(this.inUseConnections);e.forEach(function(t){t.unref()})};function r8(e,t,r,n){Wf(e,hs),e.s.cancellationToken.emit("cancel"),i8(t,(i,o)=>{for(let a of s8)i.removeAllListeners(a);i.on("error",()=>{}),i.destroy(r,o)},i=>{if(i){typeof n=="function"&&n(i,null);return}o8(e),e.queue=[],Wf(e,wi),typeof n=="function"&&n(null,null)})}s(r8,"destroy");Kr.prototype.destroy=function(e,t){var r=this;if(typeof e=="function"&&(t=e,e=!1),this.state===wi||r.state===hs){typeof t=="function"&&t(null,null);return}if(Wf(this,cc),e){for(var n=r.availableConnections.concat(r.inUseConnections);r.queue.length>0;){var i=r.queue.shift();typeof i.cb=="function"&&i.cb(new Ns("Pool was force destroyed"))}return r8(r,n,{force:!0},t)}this.reconnectId&&clearTimeout(this.reconnectId);function o(){if(r.state===wi||r.state===hs){typeof t=="function"&&t();return}if(pb(r.queue),r.queue.length===0){for(var a=r.availableConnections.concat(r.inUseConnections),u=0;u<a.length;u++)if(a[u].workItems.length>0)return setTimeout(o,1);r8(r,a,{force:!1},t)}else zf(r)(),setTimeout(o,1)}s(o,"checkStatus"),o()};Kr.prototype.reset=function(e){if(this.s.state!==bv){typeof e=="function"&&e(new Ns("pool is not connected, reset aborted"));return}this.s.cancellationToken.emit("cancel");let t=this.availableConnections.concat(this.inUseConnections);i8(t,(r,n)=>{for(let i of s8)r.removeAllListeners(i);r.destroy({force:!0},n)},r=>{if(r&&typeof e=="function"){e(r,null);return}o8(this),dc(this,()=>{typeof e=="function"&&e(null,null)})})};function axe(e,t,r){let n=t.toBin();if(!!!e.options.agreedCompressor||!uxe(t))return r(null,n);let o=hB.concat(n),a=o.slice(fB),u=o.readInt32LE(12);QNe(e,a,function(l,f){if(l)return r(l,null);let h=hB.alloc(fB);h.writeInt32LE(fB+t8+f.length,0),h.writeInt32LE(t.requestId,4),h.writeInt32LE(0,8),h.writeInt32LE(JNe.OP_COMPRESSED,12);let p=hB.alloc(t8);return p.writeInt32LE(u,0),p.writeInt32LE(a.length,4),p.writeUInt8(ZNe[e.options.agreedCompressor],8),r(null,[h,p,f])})}s(axe,"serializeCommand");Kr.prototype.write=function(e,t,r){var n=this;if(typeof t=="function"&&(r=t),t=t||{},typeof r!="function"&&!t.noResponse)throw new Ns("write method must provide a callback");if(this.state===wi||this.state===hs){r(new Ns("pool destroyed"));return}if(this.state===cc){r(new Ns("pool is draining, new operations prohibited"));return}if(this.options.domainsEnabled&&process.domain&&typeof r=="function"){var i=r;r=process.domain.bind(function(){for(var a=new Array(arguments.length),u=0;u<arguments.length;u++)a[u]=arguments[u];process.nextTick(function(){i.apply(null,a)})})}var o={cb:r,raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1,fullResult:!1};o.promoteLongs=typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,o.promoteValues=typeof t.promoteValues=="boolean"?t.promoteValues:!0,o.promoteBuffers=typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,o.bsonRegExp=typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,o.raw=typeof t.raw=="boolean"?t.raw:!1,o.immediateRelease=typeof t.immediateRelease=="boolean"?t.immediateRelease:!1,o.documentsReturnedIn=t.documentsReturnedIn,o.command=typeof t.command=="boolean"?t.command:!1,o.fullResult=typeof t.fullResult=="boolean"?t.fullResult:!1,o.noResponse=typeof t.noResponse=="boolean"?t.noResponse:!1,o.session=t.session||null,o.socketTimeout=t.socketTimeout,o.monitoring=t.monitoring,o.requestId=e.requestId,n.options.monitorCommands&&(this.emit("commandStarted",new fb.CommandStartedEvent(this,e)),o.started=ixe(),o.cb=(a,u)=>{a?n.emit("commandFailed",new fb.CommandFailedEvent(this,e,a,o.started)):u&&u.result&&(u.result.ok===0||u.result.$err)?n.emit("commandFailed",new fb.CommandFailedEvent(this,e,u.result,o.started)):n.emit("commandSucceeded",new fb.CommandSucceededEvent(this,e,u,o.started)),typeof r=="function"&&r(a,u)}),axe(n,e,(a,u)=>{if(a)throw a;o.buffer=u,t.monitoring?n.queue.unshift(o):n.queue.push(o),n.executing||process.nextTick(function(){zf(n)()})})};function uxe(e){let t=e instanceof KNe?e.command:e.query,r=Object.keys(t)[0];return!exe.has(r)}s(uxe,"canCompress");function n8(e,t){for(var r=0;r<t.length;r++)if(t[r]===e)return t.splice(r,1),!0}s(n8,"remove");function mB(e,t){n8(t,e.availableConnections)||n8(t,e.inUseConnections)}s(mB,"removeConnection");function dc(e,t){if(e.state===wi||e.state===hs){typeof t=="function"&&t(new Ns("Cannot create connection when pool is destroyed"));return}e.connectingConnections++,txe(e.options,e.s.cancellationToken,(r,n)=>{if(e.connectingConnections--,r){if(e.logger.isDebug()&&e.logger.debug(`connection attempt failed with error [${JSON.stringify(r)}]`),!e.reconnectId&&e.options.reconnect){if(e.state===Gf&&e.options.legacyCompatMode){t(r);return}e.reconnectError=r,e.reconnectId=setTimeout(a8(e,t),e.options.reconnectInterval);return}typeof t=="function"&&t(r);return}if(e.state===wi||e.state===hs){typeof t=="function"&&t(new Ns("Pool was destroyed after connection creation")),n.destroy();return}n.on("error",e._connectionErrorHandler),n.on("close",e._connectionCloseHandler),n.on("timeout",e._connectionTimeoutHandler),n.on("parseError",e._connectionParseErrorHandler),n.on("message",e._messageHandler),e.availableConnections.push(n),typeof t=="function"&&t(null,n),zf(e)()})}s(dc,"createConnection");function pb(e){for(var t=0;t<e.length;t++)if(e[t].monitoring){var r=e[t];e.splice(t,1),r.cb(new Ns({message:"no connection available for monitoring",driver:!0}))}}s(pb,"flushMonitoringOperations");function zf(e){return function(){if(e.state!==wi&&!e.executing){if(e.executing=!0,e.connectingConnections>0){e.executing=!1;return}for(;;){let a=c8(e);if(e.availableConnections.length===0){pb(e.queue),a<e.options.size&&e.queue.length>0&&dc(e);break}if(e.queue.length===0)break;var t=null;let u=e.availableConnections.filter(l=>l.workItems.length===0);if(u.length===0?t=e.availableConnections[e.connectionIndex++%e.availableConnections.length]:t=u[e.connectionIndex++%u.length],!t.isConnected()){mB(e,t),pb(e.queue);break}var r=e.queue.shift();if(r.monitoring){var n=!1;for(let l=0;l<e.availableConnections.length;l++)if(e.availableConnections[l].isConnected()&&e.availableConnections[l].workItems.length===0){n=!0,t=e.availableConnections[l];break}if(!n){e.queue.unshift(r),a<e.options.size&&e.queue.length>0&&dc(e),setTimeout(()=>zf(e)(),10);break}}if(a<e.options.size&&t.workItems.length>0){e.queue.unshift(r),dc(e);break}var i=r.buffer;r.monitoring&&u8(t,e.availableConnections,e.inUseConnections),r.noResponse||t.workItems.push(r),!r.immediateRelease&&typeof r.socketTimeout=="number"&&t.setSocketTimeout(r.socketTimeout);var o=!0;if(Array.isArray(i))for(let l=0;l<i.length;l++)o=t.write(i[l]);else o=t.write(i);if(r.noResponse&&typeof r.cb=="function"&&r.cb(null,null),o===!1){e.queue.unshift(r),mB(e,t),pb(e.queue);break}}e.executing=!1}}}s(zf,"_execute");Kr._execute=zf;l8.exports=Kr});var Hf=w((UEt,p8)=>{"use strict";var cxe=ds().Query,lxe=Ll().Msg,gB=ye().MongoError,dxe=nr().getReadPreference,fxe=nr().isSharded,hxe=nr().databaseNamespace,pxe=kf().isTransactionCommand,mxe=uc().applySession,gxe=ye().MongoNetworkError,f8=Le().maxWireVersion;function yxe(e){return f8(e)&&e.autoEncrypter}s(yxe,"isClientEncryptionEnabled");function vxe(e,t,r,n,i){if(typeof n=="function"&&(i=n,n={}),n=n||{},r==null)return i(new gB(`command ${JSON.stringify(r)} does not return a cursor`));if(!yxe(e)){h8(e,t,r,n,i);return}let o=f8(e);if(typeof o!="number"||o<8){i(new gB("Auto-encryption requires a minimum MongoDB version of 4.2"));return}Exe(e,t,r,n,i)}s(vxe,"command");function h8(e,t,r,n,i){let o=e.s.bson,a=e.s.pool,u=dxe(r,n),l=Sxe(e),f=n.session,h=e.clusterTime,p=h,g=Object.assign({},r),_=n.serverApi;if(_&&(g.apiVersion=_.version||_,_.strict!=null&&(g.apiStrict=_.strict),_.deprecationErrors!=null&&(g.apiDeprecationErrors=_.deprecationErrors)),_xe(e)&&f){let x=f.clusterTime;h&&h.clusterTime&&x&&x.clusterTime&&x.clusterTime.greaterThan(h.clusterTime)&&(p=x),!f.transaction.isActive&&f.transaction.isPinned&&!g.startTransaction&&!g.commitTransaction&&f.transaction.unpinServer();let P=mxe(f,g,n);if(P)return i(P)}p&&(g.$clusterTime=p),fxe(e)&&!l&&u&&u.mode!=="primary"&&(g={$query:g,$readPreference:u.toJSON()});let C=Object.assign({command:!0,numberToSkip:0,numberToReturn:-1,checkKeys:!1},n);C.slaveOk=u.slaveOk();let D=`${hxe(t)}.$cmd`,O=l?new lxe(o,D,g,C):new cxe(o,D,g,C),F=f&&(f.inTransaction()||pxe(g))?function(x){return x&&x instanceof gxe&&!x.hasErrorLabel("TransientTransactionError")&&x.addErrorLabel("TransientTransactionError"),!r.commitTransaction&&x&&x instanceof gB&&x.hasErrorLabel("TransientTransactionError")&&f.transaction.unpinServer(),i.apply(null,arguments)}:i;try{a.write(O,C,F)}catch(x){F(x)}}s(h8,"_command");function _xe(e){return e==null?!1:e.description?e.description.maxWireVersion>=6:e.ismaster==null?!1:e.ismaster.maxWireVersion>=6}s(_xe,"hasSessionSupport");function Sxe(e){let t=e.ismaster?e.ismaster:e.description;return t==null?!1:t.maxWireVersion>=6&&t.__nodejs_mock_server__==null}s(Sxe,"supportsOpMsg");function Exe(e,t,r,n,i){let o=e.autoEncrypter;function a(u,l){if(u||l==null){i(u,l);return}o.decrypt(l.result,n,(f,h)=>{if(f){i(f,null);return}l.result=h,l.message.documents=[h],i(null,l)})}s(a,"commandResponseHandler"),o.encrypt(t,r,n,(u,l)=>{if(u){i(u,null);return}h8(e,t,l,n,a)})}s(Exe,"_cryptCommand");p8.exports=vxe});var Ov=w(($Et,m8)=>{"use strict";var Cxe=ye().MongoError,mb=class mb{constructor(t){typeof t=="boolean"?this.verbosity=t?"allPlansExecution":"queryPlanner":this.verbosity=t}static fromOptions(t){if(t==null||t.explain===void 0)return;let r=t.explain;if(typeof r=="boolean"||typeof r=="string")return new mb(t.explain);throw new Cxe("explain must be a string or a boolean")}};s(mb,"Explain");var yB=mb;m8.exports={Explain:yB}});var y8=w((GEt,g8)=>{"use strict";var wxe=ye().MongoError,bxe=nr().collectionNamespace,Oxe=Hf(),Txe=$().decorateWithExplain,Axe=Ov().Explain;function Ixe(e,t,r,n,i,o,a){if(i.length===0)throw new wxe(`${t} must contain at least one document`);typeof o=="function"&&(a=o,o={}),o=o||{};let u=typeof o.ordered=="boolean"?o.ordered:!0,l=o.writeConcern,f={};if(f[t]=bxe(n),f[r]=i,f.ordered=u,l&&Object.keys(l).length>0&&(f.writeConcern=l),o.collation)for(let g=0;g<f[r].length;g++)f[r][g].collation||(f[r][g].collation=o.collation);o.bypassDocumentValidation===!0&&(f.bypassDocumentValidation=o.bypassDocumentValidation);let h=Axe.fromOptions(o);h&&(f=Txe(f,h));let p=Object.assign({checkKeys:t==="insert",numberToReturn:1},o);Oxe(e,n,f,p,a)}s(Ixe,"writeCommand");g8.exports=Ixe});var _8=w((zEt,v8)=>{"use strict";var Dxe=ds().KillCursor,Rxe=ye().MongoError,Nxe=ye().MongoNetworkError,xxe=nr().collectionNamespace,Pxe=Le().maxWireVersion,Bxe=Le().emitWarning,Mxe=Hf();function Fxe(e,t,r,n,i){typeof n=="function"&&(i=n,n={}),i=typeof i=="function"?i:()=>{};let o=r.cursorId;if(Pxe(e)<4){let l=e.s.bson,f=e.s.pool,h=new Dxe(l,t,[o]),p={immediateRelease:!0,noResponse:!0};if(typeof r.session=="object"&&(p.session=r.session),f&&f.isConnected())try{f.write(h,p,i)}catch(g){typeof i=="function"?i(g,null):Bxe(g)}return}let a={killCursors:xxe(t),cursors:[o]},u=n||{};typeof r.session=="object"&&(u.session=r.session),Mxe(e,t,a,u,(l,f)=>{if(l)return i(l);let h=f.message;if(h.cursorNotFound)return i(new Nxe("cursor killed or timed out"),null);if(!Array.isArray(h.documents)||h.documents.length===0)return i(new Rxe(`invalid killCursors result returned for cursor id ${o}`));i(null,h.documents[0])})}s(Fxe,"killCursors");v8.exports=Fxe});var E8=w((VEt,S8)=>{"use strict";var qxe=ds().GetMore,Lxe=Sn().retrieveBSON,Uxe=ye().MongoError,jxe=ye().MongoNetworkError,$xe=Lxe(),gb=$xe.Long,kxe=nr().collectionNamespace,Gxe=Le().maxWireVersion,Wxe=nr().applyCommonQueryOptions,zxe=Hf();function Hxe(e,t,r,n,i,o){i=i||{};let a=Gxe(e);function u(p,g){if(p)return o(p);let _=g.message;if(_.cursorNotFound)return o(new jxe("cursor killed or timed out"),null);if(a<4){let D=typeof _.cursorId=="number"?gb.fromNumber(_.cursorId):_.cursorId;r.documents=_.documents,r.cursorId=D,o(null,null,_.connection);return}if(_.documents[0].ok===0)return o(new Uxe(_.documents[0]));let C=typeof _.documents[0].cursor.id=="number"?gb.fromNumber(_.documents[0].cursor.id):_.documents[0].cursor.id;r.documents=_.documents[0].cursor.nextBatch,r.cursorId=C,o(null,_.documents[0],_.connection)}if(s(u,"queryCallback"),a<4){let p=e.s.bson,g=new qxe(p,t,r.cursorId,{numberToReturn:n}),_=Wxe({},r);e.s.pool.write(g,_,u);return}let f={getMore:r.cursorId instanceof gb?r.cursorId:gb.fromNumber(r.cursorId),collection:kxe(t),batchSize:Math.abs(n)};r.cmd.tailable&&typeof r.cmd.maxAwaitTimeMS=="number"&&(f.maxTimeMS=r.cmd.maxAwaitTimeMS);let h=Object.assign({returnFieldSelector:null,documentsReturnedIn:"nextBatch"},i);r.session&&(h.session=r.session),zxe(e,t,f,h,u)}s(Hxe,"getMore");S8.exports=Hxe});var O8=w((KEt,b8)=>{"use strict";var Vxe=ds().Query,C8=ye().MongoError,w8=nr().getReadPreference,Yxe=nr().collectionNamespace,Kxe=nr().isSharded,Xxe=Le().maxWireVersion,Jxe=nr().applyCommonQueryOptions,Qxe=Hf(),Zxe=$().decorateWithExplain,ePe=Ov().Explain;function tPe(e,t,r,n,i,o){if(i=i||{},n.cursorId!=null)return o();if(r==null)return o(new C8(`command ${JSON.stringify(r)} does not return a cursor`));if(Xxe(e)<4){let f=nPe(e,t,r,n,i),h=Jxe({},n);typeof f.documentsReturnedIn=="string"&&(h.documentsReturnedIn=f.documentsReturnedIn),e.s.pool.write(f,h,o);return}let a=w8(r,i),u=rPe(e,t,r,n,i);try{let f=ePe.fromOptions(i);f&&(u=Zxe(u,f))}catch(f){return o(f)}r.virtual=!1;let l=Object.assign({documentsReturnedIn:"firstBatch",numberToReturn:1,slaveOk:a.slaveOk()},i);r.readPreference&&(l.readPreference=a),n.session&&(l.session=n.session),Qxe(e,t,u,l,o)}s(tPe,"query");function rPe(e,t,r,n){n.batchSize=r.batchSize||n.batchSize;let i={find:Yxe(t)};r.query&&(r.query.$query?i.filter=r.query.$query:i.filter=r.query);let o=r.sort;if(Array.isArray(o)){let a={};if(o.length>0&&!Array.isArray(o[0])){let u=o[1];u==="asc"?u=1:u==="desc"&&(u=-1),a[o[0]]=u}else for(let u=0;u<o.length;u++){let l=o[u][1];l==="asc"?l=1:l==="desc"&&(l=-1),a[o[u][0]]=l}o=a}return typeof r.allowDiskUse=="boolean"&&(i.allowDiskUse=r.allowDiskUse),r.sort&&(i.sort=o),r.fields&&(i.projection=r.fields),r.hint&&(i.hint=r.hint),r.skip&&(i.skip=r.skip),r.limit&&(i.limit=r.limit),r.limit<0&&(i.limit=Math.abs(r.limit),i.singleBatch=!0),typeof r.batchSize=="number"&&(r.batchSize<0&&(r.limit!==0&&Math.abs(r.batchSize)<Math.abs(r.limit)&&(i.limit=Math.abs(r.batchSize)),i.singleBatch=!0),i.batchSize=Math.abs(r.batchSize)),r.comment&&(i.comment=r.comment),r.maxScan&&(i.maxScan=r.maxScan),r.maxTimeMS&&(i.maxTimeMS=r.maxTimeMS),r.min&&(i.min=r.min),r.max&&(i.max=r.max),typeof r.returnKey=="boolean"&&(i.returnKey=r.returnKey),typeof r.showDiskLoc=="boolean"&&(i.showRecordId=r.showDiskLoc),r.snapshot&&(i.snapshot=r.snapshot),r.tailable&&(i.tailable=r.tailable),r.oplogReplay&&(i.oplogReplay=r.oplogReplay),r.noCursorTimeout&&(i.noCursorTimeout=r.noCursorTimeout),r.awaitData&&(i.awaitData=r.awaitData),r.awaitdata&&(i.awaitData=r.awaitdata),r.partial&&(i.partial=r.partial),r.collation&&(i.collation=r.collation),r.readConcern&&(i.readConcern=r.readConcern),i}s(rPe,"prepareFindCommand");function nPe(e,t,r,n,i){i=i||{};let o=e.s.bson,a=w8(r,i);n.batchSize=r.batchSize||n.batchSize;let u=0;n.limit<0||n.limit!==0&&n.limit<n.batchSize||n.limit>0&&n.batchSize===0?u=n.limit:u=n.batchSize;let l=n.skip||0,f={};if(Kxe(e)&&a&&(f.$readPreference=a.toJSON()),r.sort&&(f.$orderby=r.sort),r.hint&&(f.$hint=r.hint),r.snapshot&&(f.$snapshot=r.snapshot),typeof r.returnKey<"u"&&(f.$returnKey=r.returnKey),r.maxScan&&(f.$maxScan=r.maxScan),r.min&&(f.$min=r.min),r.max&&(f.$max=r.max),typeof r.showDiskLoc<"u"&&(f.$showDiskLoc=r.showDiskLoc),r.comment&&(f.$comment=r.comment),r.maxTimeMS&&(f.$maxTimeMS=r.maxTimeMS),i.explain!==void 0&&(u=-Math.abs(r.limit||0),f.$explain=!0),f.$query=r.query,r.readConcern&&r.readConcern.level!=="local")throw new C8(`server find command does not support a readConcern level of ${r.readConcern.level}`);r.readConcern&&(r=Object.assign({},r),delete r.readConcern);let h=typeof i.serializeFunctions=="boolean"?i.serializeFunctions:!1,p=typeof i.ignoreUndefined=="boolean"?i.ignoreUndefined:!1,g=new Vxe(o,t,f,{numberToSkip:l,numberToReturn:u,pre32Limit:typeof r.limit<"u"?r.limit:void 0,checkKeys:!1,returnFieldSelector:r.fields,serializeFunctions:h,ignoreUndefined:p});return typeof r.tailable=="boolean"&&(g.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(g.oplogReplay=r.oplogReplay),typeof r.noCursorTimeout=="boolean"&&(g.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(g.awaitData=r.awaitData),typeof r.partial=="boolean"&&(g.partial=r.partial),g.slaveOk=a.slaveOk(),g}s(nPe,"prepareLegacyFindQuery");b8.exports=tPe});var _B=w((JEt,T8)=>{"use strict";var vB=y8();T8.exports={insert:s(function(t,r,n,i,o){vB(t,"insert","documents",r,n,i,o)},"insert"),update:s(function(t,r,n,i,o){vB(t,"update","updates",r,n,i,o)},"update"),remove:s(function(t,r,n,i,o){vB(t,"delete","deletes",r,n,i,o)},"remove"),killCursors:_8(),getMore:E8(),query:O8(),command:Hf()}});var he=w((ZEt,I8)=>{"use strict";var iPe=Ov().Explain,sPe=ye().MongoError,A8={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXECUTE_WITH_SELECTION:Symbol("EXECUTE_WITH_SELECTION"),NO_INHERIT_OPTIONS:Symbol("NO_INHERIT_OPTIONS"),EXPLAINABLE:Symbol("EXPLAINABLE")},EB=class EB{constructor(t){if(this.options=Object.assign({},t),this.hasAspect(A8.EXPLAINABLE))this.explain=iPe.fromOptions(t);else if(this.options.explain!==void 0)throw new sPe("explain is not supported on this command")}hasAspect(t){return this.constructor.aspects==null?!1:this.constructor.aspects.has(t)}set session(t){Object.assign(this.options,{session:t})}get session(){return this.options.session}clearSession(){delete this.options.session}get canRetryRead(){return!0}execute(){throw new TypeError("`execute` must be implemented for OperationBase subclasses")}};s(EB,"OperationBase");var SB=EB;function oPe(e,t){return!Array.isArray(t)&&!(t instanceof Set)&&(t=[t]),t=new Set(t),Object.defineProperty(e,"aspects",{value:t,writable:!1}),t}s(oPe,"defineAspects");I8.exports={Aspect:A8,defineAspects:oPe,OperationBase:SB}});var Vf=w((tCt,x8)=>{"use strict";var aPe=$().maybePromise,CB=ye().MongoError,R8=he().Aspect,uPe=he().OperationBase,wB=qn(),cPe=ye().isRetryableError,lPe=Le().maxWireVersion,dPe=Le().isUnifiedTopology;function N8(e,t,r){if(e==null)throw new TypeError("This method requires a valid topology instance");if(!(t instanceof uPe))throw new TypeError("This method requires a valid operation instance");return aPe(e,r,n=>{if(dPe(e)&&e.shouldCheckForSessionSupport())return hPe(e,t,n);let i,o;if(e.hasSessionSupport()){if(t.session==null)o=Symbol(),i=e.startSession({owner:o}),t.session=i;else if(t.session.hasEnded)return n(new CB("Use of expired sessions is not permitted"))}else if(t.session)return n(new CB("Current topology does not support sessions"));function a(u,l){i&&i.owner===o&&(i.endSession(),t.session===i&&t.clearSession()),n(u,l)}s(a,"executeCallback");try{t.hasAspect(R8.EXECUTE_WITH_SELECTION)?fPe(e,t,a):t.execute(a)}catch(u){i&&i.owner===o&&(i.endSession(),t.session===i&&t.clearSession()),n(u)}})}s(N8,"executeOperation");function D8(e){return lPe(e)>=6}s(D8,"supportsRetryableReads");function fPe(e,t,r){let n=t.readPreference||wB.primary,i=t.session&&t.session.inTransaction();if(i&&!n.equals(wB.primary)){r(new CB(`Read preference in a transaction must be primary, not: ${n.mode}`));return}let o={readPreference:n,session:t.session};function a(u,l){if(u==null)return r(null,l);if(!cPe(u))return r(u);e.selectServer(o,(f,h)=>{if(f||!D8(h)){r(f,null);return}t.execute(h,r)})}s(a,"callbackWithRetry"),e.selectServer(o,(u,l)=>{if(u){r(u,null);return}let f=e.s.options.retryReads!==!1&&t.session&&!i&&D8(l)&&t.canRetryRead;if(t.hasAspect(R8.RETRYABLE)&&f){t.execute(l,a);return}t.execute(l,r)})}s(fPe,"executeWithServerSelection");function hPe(e,t,r){e.selectServer(wB.primaryPreferred,n=>{if(n)return r(n);N8(e,t,r)})}s(hPe,"selectServerForSessionSupport");x8.exports=N8});var xs=w((nCt,F8)=>{"use strict";var pPe=Rs(),mPe=Sn().retrieveBSON,$a=ye().MongoError,P8=ye().MongoNetworkError,gPe=Le().collationNotSupported,yPe=qn(),vPe=Le().isUnifiedTopology,_Pe=Vf(),SPe=require("stream").Readable,EPe=$().SUPPORTS,CPe=$().MongoDBNamespace,wPe=$().mergeOptions,bPe=he().OperationBase,OPe=mPe(),Wo=OPe.Long,B8={INIT:0,OPEN:1,CLOSED:2,GET_MORE:3};function zl(e,t,r){try{e(t,r)}catch(n){process.nextTick(function(){throw n})}}s(zl,"handleCallback");var bB=class bB extends SPe{constructor(t,r,n,i){super({objectMode:!0}),i=i||{},r instanceof bPe&&(this.operation=r,r=this.operation.ns.toString(),i=this.operation.options,n=this.operation.cmd?this.operation.cmd:{}),this.pool=null,this.server=null,this.disconnectHandler=i.disconnectHandler,this.bson=t.s.bson,this.ns=r,this.namespace=CPe.fromString(r),this.cmd=n,this.options=i,this.topology=t,this.cursorState={cursorId:null,cmd:n,documents:i.documents||[],cursorIndex:0,dead:!1,killed:!1,init:!1,notified:!1,limit:i.limit||n.limit||0,skip:i.skip||n.skip||0,batchSize:i.batchSize||n.batchSize||1e3,currentLimit:0,transforms:i.transforms,raw:i.raw||n&&n.raw},typeof i.session=="object"&&(this.cursorState.session=i.session);let o=t.s.options;typeof o.promoteLongs=="boolean"?this.cursorState.promoteLongs=o.promoteLongs:typeof i.promoteLongs=="boolean"&&(this.cursorState.promoteLongs=i.promoteLongs),typeof o.promoteValues=="boolean"?this.cursorState.promoteValues=o.promoteValues:typeof i.promoteValues=="boolean"&&(this.cursorState.promoteValues=i.promoteValues),typeof o.promoteBuffers=="boolean"?this.cursorState.promoteBuffers=o.promoteBuffers:typeof i.promoteBuffers=="boolean"&&(this.cursorState.promoteBuffers=i.promoteBuffers),typeof o.bsonRegExp=="boolean"?this.cursorState.bsonRegExp=o.bsonRegExp:typeof i.bsonRegExp=="boolean"&&(this.cursorState.bsonRegExp=i.bsonRegExp),o.reconnect&&(this.cursorState.reconnect=o.reconnect),this.logger=pPe("Cursor",o),typeof n=="number"?(this.cursorState.cursorId=Wo.fromNumber(n),this.cursorState.lastCursorId=this.cursorState.cursorId):n instanceof Wo&&(this.cursorState.cursorId=n,this.cursorState.lastCursorId=n),this.operation&&(this.operation.cursorState=this.cursorState)}setCursorBatchSize(t){this.cursorState.batchSize=t}cursorBatchSize(){return this.cursorState.batchSize}setCursorLimit(t){this.cursorState.limit=t}cursorLimit(){return this.cursorState.limit}setCursorSkip(t){this.cursorState.skip=t}cursorSkip(){return this.cursorState.skip}_next(t){yb(this,t)}clone(){let t=wPe({},this.options);return delete t.session,this.topology.cursor(this.ns,this.cmd,t)}isDead(){return this.cursorState.dead===!0}isKilled(){return this.cursorState.killed===!0}isNotified(){return this.cursorState.notified===!0}bufferedCount(){return this.cursorState.documents.length-this.cursorState.cursorIndex}readBufferedDocuments(t){let r=this.cursorState.documents.length-this.cursorState.cursorIndex,n=t<r?t:r,i=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+n);if(this.cursorState.transforms&&typeof this.cursorState.transforms.doc=="function")for(let o=0;o<i.length;o++)i[o]=this.cursorState.transforms.doc(i[o]);return this.cursorState.limit>0&&this.cursorState.currentLimit+i.length>this.cursorState.limit&&(i=i.slice(0,this.cursorState.limit-this.cursorState.currentLimit),this.kill()),this.cursorState.currentLimit=this.cursorState.currentLimit+i.length,this.cursorState.cursorIndex=this.cursorState.cursorIndex+i.length,i}kill(t){if(this.cursorState.dead=!0,this.cursorState.killed=!0,this.cursorState.documents=[],this.cursorState.cursorId==null||this.cursorState.cursorId.isZero()||this.cursorState.init===!1){t&&t(null,null);return}this.server.killCursors(this.ns,this.cursorState,t)}rewind(){this.cursorState.init&&(this.cursorState.dead||this.kill(),this.cursorState.currentLimit=0,this.cursorState.init=!1,this.cursorState.dead=!1,this.cursorState.killed=!1,this.cursorState.notified=!1,this.cursorState.documents=[],this.cursorState.cursorId=null,this.cursorState.cursorIndex=0)}_read(){if(this.s&&this.s.state===B8.CLOSED||this.isDead())return this.push(null);this._next((t,r)=>{if(t)return this.listeners("error")&&this.listeners("error").length>0&&this.emit("error",t),this.isDead()||this.close(),this.emit("end"),this.emit("finish");if(this.cursorState.streamOptions&&typeof this.cursorState.streamOptions.transform=="function"&&r!=null)return this.push(this.cursorState.streamOptions.transform(r));this.push(r),r===null&&this.isDead()&&this.once("end",()=>{this.close(),this.emit("finish")})})}_endSession(t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=this.cursorState.session;return n&&(t.force||n.owner===this)?(this.cursorState.session=void 0,this.operation&&this.operation.clearSession(),n.endSession(r),!0):(r&&r(),!1)}_getMore(t){this.logger.isDebug()&&this.logger.debug(`schedule getMore call for query [${JSON.stringify(this.query)}]`);let r=this.cursorState.batchSize;this.cursorState.limit>0&&this.cursorState.currentLimit+r>this.cursorState.limit&&(r=this.cursorState.limit-this.cursorState.currentLimit);let n=this.cursorState;this.server.getMore(this.ns,n,r,this.options,(i,o,a)=>{(i||n.cursorId&&n.cursorId.isZero())&&this._endSession(),t(i,o,a)})}_initializeCursor(t){let r=this;if(vPe(r.topology)&&r.topology.shouldCheckForSessionSupport()){r.topology.selectServer(yPe.primaryPreferred,a=>{if(a){t(a);return}this._initializeCursor(t)});return}function n(a,u){let l=r.cursorState;if((a||l.cursorId&&l.cursorId.isZero())&&r._endSession(),l.documents.length===0&&l.cursorId&&l.cursorId.isZero()&&!r.cmd.tailable&&!r.cmd.awaitData)return _b(r,t);t(a,u)}s(n,"done");let i=s((a,u)=>{if(a)return n(a);let l=u.message;if(Array.isArray(l.documents)&&l.documents.length===1){let h=l.documents[0];if(l.queryFailure)return n(new $a(h),null);if(!r.cmd.find||r.cmd.find&&r.cmd.virtual===!1){if(h.$err||h.errmsg)return n(new $a(h),null);if(h.cursor!=null&&typeof h.cursor!="string"){let p=h.cursor.id;return h.cursor.ns&&(r.ns=h.cursor.ns),r.cursorState.cursorId=typeof p=="number"?Wo.fromNumber(p):p,r.cursorState.lastCursorId=r.cursorState.cursorId,r.cursorState.operationTime=h.operationTime,Array.isArray(h.cursor.firstBatch)&&(r.cursorState.documents=h.cursor.firstBatch),n(null,l)}}}let f=l.cursorId||0;r.cursorState.cursorId=f instanceof Wo?f:Wo.fromNumber(f),r.cursorState.documents=l.documents,r.cursorState.lastCursorId=l.cursorId,r.cursorState.transforms&&typeof r.cursorState.transforms.query=="function"&&(r.cursorState.documents=r.cursorState.transforms.query(l)),n(null,l)},"queryCallback");if(r.operation){r.logger.isDebug()&&r.logger.debug(`issue initial query [${JSON.stringify(r.cmd)}] with flags [${JSON.stringify(r.query)}]`),_Pe(r.topology,r.operation,(a,u)=>{if(a){n(a);return}if(r.server=r.operation.server,r.cursorState.init=!0,r.cursorState.cursorId!=null)return n();i(a,u)});return}let o={};return r.cursorState.session&&(o.session=r.cursorState.session),r.operation?o.readPreference=r.operation.readPreference:r.options.readPreference&&(o.readPreference=r.options.readPreference),r.topology.selectServer(o,(a,u)=>{if(a){let f=r.disconnectHandler;return f!=null?f.addObjectAndMethod("cursor",r,"next",[t],t):t(a)}if(r.server=u,r.cursorState.init=!0,gPe(r.server,r.cmd))return t(new $a(`server ${r.server.name} does not support collation`));if(r.cursorState.cursorId!=null)return n();if(r.logger.isDebug()&&r.logger.debug(`issue initial query [${JSON.stringify(r.cmd)}] with flags [${JSON.stringify(r.query)}]`),r.cmd.find!=null){u.query(r.ns,r.cmd,r.cursorState,r.options,i);return}let l=Object.assign({session:r.cursorState.session},r.options);u.command(r.ns,r.cmd,l,i)})}};s(bB,"CoreCursor");var vb=bB;EPe.ASYNC_ITERATOR&&(vb.prototype[Symbol.asyncIterator]=Wx().asyncIterator);function TPe(e,t){if(e.pool&&e.pool.isDestroyed()){e.cursorState.killed=!0;let r=new P8(`connection to host ${e.pool.host}:${e.pool.port} was destroyed`);return M8(e,()=>t(r)),!0}return!1}s(TPe,"isConnectionDead");function APe(e,t){return e.cursorState.dead&&!e.cursorState.killed?(e.cursorState.killed=!0,_b(e,t),!0):!1}s(APe,"isCursorDeadButNotkilled");function IPe(e,t){return e.cursorState.dead&&e.cursorState.killed?(zl(t,new $a("cursor is dead")),!0):!1}s(IPe,"isCursorDeadAndKilled");function DPe(e,t){return e.cursorState.killed?(_b(e,t),!0):!1}s(DPe,"isCursorKilled");function Tv(e,t){e.cursorState.dead=!0,_b(e,t)}s(Tv,"setCursorDeadAndNotified");function _b(e,t){M8(e,()=>zl(t,null,null))}s(_b,"setCursorNotified");function M8(e,t){if(e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.cursorState.session){e._endSession(t);return}return t()}s(M8,"_setCursorNotifiedImpl");function yb(e,t){if(e.cursorState.notified)return t(new Error("cursor is exhausted"));if(!DPe(e,t)&&!APe(e,t)&&!IPe(e,t)){if(!e.cursorState.init){if(!e.topology.isConnected(e.options)){if(e.topology._type==="server"&&!e.topology.s.options.reconnect)return t(new $a("no connection available"));if(e.disconnectHandler!=null){if(e.topology.isDestroyed())return t(new $a("Topology was destroyed"));e.disconnectHandler.addObjectAndMethod("cursor",e,"next",[t],t);return}}e._initializeCursor((r,n)=>{if(r||n===null){t(r,n);return}yb(e,t)});return}if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)e.kill(()=>Tv(e,t));else if(e.cursorState.cursorIndex===e.cursorState.documents.length&&!Wo.ZERO.equals(e.cursorState.cursorId)){if(e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.topology.isDestroyed())return t(new P8("connection destroyed, not possible to instantiate cursor"));if(TPe(e,t))return;e._getMore(function(r,n,i){if(r)return zl(t,r);if(e.connection=i,e.cursorState.documents.length===0&&e.cmd.tailable&&Wo.ZERO.equals(e.cursorState.cursorId))return zl(t,new $a({message:"No more documents in tailed cursor",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length===0&&e.cmd.tailable&&!Wo.ZERO.equals(e.cursorState.cursorId))return yb(e,t);if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return Tv(e,t);yb(e,t)})}else{if(e.cursorState.documents.length===e.cursorState.cursorIndex&&e.cmd.tailable&&Wo.ZERO.equals(e.cursorState.cursorId))return zl(t,new $a({message:"No more documents in tailed cursor",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length===e.cursorState.cursorIndex&&Wo.ZERO.equals(e.cursorState.cursorId))Tv(e,t);else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit){e.kill(()=>Tv(e,t));return}e.cursorState.currentLimit+=1;let r=e.cursorState.documents[e.cursorState.cursorIndex++];if(!r||r.$err){e.kill(()=>Tv(e,function(){zl(t,new $a(r?r.$err:void 0))}));return}e.cursorState.transforms&&typeof e.cursorState.transforms.doc=="function"&&(r=e.cursorState.transforms.doc(r)),zl(t,null,r)}}}}s(yb,"nextFunction");F8.exports={CursorState:B8,CoreCursor:vb}});var wb=w((sCt,U8)=>{"use strict";var RPe=require("util").inherits,Vl=require("util").format,q8=require("events").EventEmitter,NPe=qn(),xPe=Rs(),PPe=Sn().debugOptions,BPe=Sn().retrieveBSON,MPe=d8(),hc=ye().MongoError,FPe=ye().MongoNetworkError,Yl=_B(),qPe=xs().CoreCursor,fc=kr(),LPe=kr().createCompressionInfo,UPe=kr().resolveClusterTime,jPe=kr().SessionMixins,$Pe=jl().extractCommand,kPe=Le().relayEvents,OB=Le().collationNotSupported,GPe=Le().makeClientMetadata,WPe=["reconnect","reconnectTries","reconnectInterval","emitError","cursorFactory","host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","checkServerIdentity","socketTimeout","ssl","ca","crl","cert","key","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","servername"],zPe=0,Av=!1,Iv={},ii=BPe();function Sb(e){return e.s.parent==null?e.id:e.s.parent.id}s(Sb,"topologyId");var Xt=s(function(e){e=e||{},q8.call(this),this.id=zPe++,this.s={options:Object.assign({metadata:GPe(e)},e),logger:xPe("Server",e),Cursor:e.cursorFactory||qPe,bson:e.bson||new ii([ii.Binary,ii.Code,ii.DBRef,ii.Decimal128,ii.Double,ii.Int32,ii.Long,ii.Map,ii.MaxKey,ii.MinKey,ii.ObjectId,ii.BSONRegExp,ii.Symbol,ii.Timestamp]),pool:null,disconnectHandler:e.disconnectHandler,monitoring:typeof e.monitoring=="boolean"?e.monitoring:!0,inTopology:!!e.parent,monitoringInterval:typeof e.monitoringInterval=="number"?e.monitoringInterval:5e3,compression:{compressors:LPe(e)},parent:e.parent},this.s.parent||(this.s.clusterTime=null),this.ismaster=null,this.lastIsMasterMS=-1,this.monitoringProcessId=null,this.initialConnect=!0,this._type="server",this.lastUpdateTime=0,this.lastWriteDate=0,this.staleness=0},"Server");RPe(Xt,q8);Object.assign(Xt.prototype,jPe);Object.defineProperty(Xt.prototype,"type",{enumerable:!0,get:function(){return this._type}});Object.defineProperty(Xt.prototype,"parserType",{enumerable:!0,get:function(){return ii.native?"c++":"js"}});Object.defineProperty(Xt.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}});Object.defineProperty(Xt.prototype,"clientMetadata",{enumerable:!0,get:function(){return this.s.options.metadata}});Object.defineProperty(Xt.prototype,"clusterTime",{enumerable:!0,set:function(e){let t=this.s.parent?this.s.parent:this.s;UPe(t,e)},get:function(){return(this.s.parent?this.s.parent:this.s).clusterTime||null}});Xt.enableServerAccounting=function(){Av=!0,Iv={}};Xt.disableServerAccounting=function(){Av=!1};Xt.servers=function(){return Iv};Object.defineProperty(Xt.prototype,"name",{enumerable:!0,get:function(){return this.s.options.host+":"+this.s.options.port}});function Eb(e,t,r,n,i,o){if(!e.s.pool.isConnected()&&e.s.options.reconnect&&e.s.disconnectHandler!=null&&!i.monitoring)return e.s.disconnectHandler.add(t,r,n,i,o),!0;if(!e.s.pool.isConnected())return o(new hc(Vl("no connection available to server %s",e.name))),!0}s(Eb,"disconnectHandler");function L8(e){return function(){if(!e.s.pool.isDestroyed()){e.emit("monitoring",e);var t=new Date().getTime();e.command("admin.$cmd",{ismaster:!0},{socketTimeout:typeof e.s.options.connectionTimeout!="number"?2e3:e.s.options.connectionTimeout,monitoring:!0},(r,n)=>{e.lastIsMasterMS=new Date().getTime()-t,!e.s.pool.isDestroyed()&&(n&&(e.ismaster=n.result),e.monitoringProcessId=setTimeout(L8(e),e.s.monitoringInterval))})}}}s(L8,"monitoringProcess");var Hl=s(function(e,t){return function(r,n){if(e.s.logger.isInfo()){var i=r instanceof hc?JSON.stringify(r):{};e.s.logger.info(Vl("server %s fired event %s out with message %s",e.name,t,i))}if(t==="connect"){if(e.initialConnect=!1,e.ismaster=n.ismaster,e.lastIsMasterMS=n.lastIsMasterMS,n.agreedCompressor&&(e.s.pool.options.agreedCompressor=n.agreedCompressor),n.zlibCompressionLevel&&(e.s.pool.options.zlibCompressionLevel=n.zlibCompressionLevel),n.ismaster.$clusterTime){let o=n.ismaster.$clusterTime;e.clusterTime=o}e.ismaster.msg==="isdbgrid"&&(e._type="mongos"),e.s.monitoring&&(e.monitoringProcessId=setTimeout(L8(e),e.s.monitoringInterval)),fc.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:fc.getTopologyType(e)}),e.s.inTopology||fc.emitTopologyDescriptionChanged(e,{topologyType:"Single",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:fc.getTopologyType(e)}]}),e.s.logger.isInfo()&&e.s.logger.info(Vl("server %s connected with ismaster [%s]",e.name,JSON.stringify(e.ismaster))),e.emit("connect",e)}else if(t==="error"||t==="parseError"||t==="close"||t==="timeout"||t==="reconnect"||t==="attemptReconnect"||t==="reconnectFailed"){if(Av&&["close","timeout","error","parseError","reconnectFailed"].indexOf(t)!==-1&&(e.s.inTopology||e.emit("topologyOpening",{topologyId:e.id}),delete Iv[e.id]),t==="close"&&fc.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:"Unknown"}),t==="reconnectFailed"){e.emit("reconnectFailed",r),e.listeners("error").length>0&&e.emit("error",r);return}if(["disconnected","connecting"].indexOf(e.s.pool.state)!==-1&&e.initialConnect&&["close","timeout","error","parseError"].indexOf(t)!==-1)return e.initialConnect=!1,e.emit("error",new FPe(Vl("failed to connect to server [%s] on first connect [%s]",e.name,r)));if(t==="reconnect")return fc.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:fc.getTopologyType(e)}),e.emit(t,e);e.emit(t,r)}}},"eventHandler");Xt.prototype.connect=function(e){var t=this;if(e=e||{},Av&&(Iv[this.id]=this),t.s.pool&&!t.s.pool.isDisconnected()&&!t.s.pool.isDestroyed())throw new hc(Vl("server instance in invalid state %s",t.s.pool.state));t.s.pool=new MPe(this,Object.assign(t.s.options,e,{bson:this.s.bson})),t.s.pool.on("close",Hl(t,"close")),t.s.pool.on("error",Hl(t,"error")),t.s.pool.on("timeout",Hl(t,"timeout")),t.s.pool.on("parseError",Hl(t,"parseError")),t.s.pool.on("connect",Hl(t,"connect")),t.s.pool.on("reconnect",Hl(t,"reconnect")),t.s.pool.on("reconnectFailed",Hl(t,"reconnectFailed")),kPe(t.s.pool,t,["commandStarted","commandSucceeded","commandFailed"]),t.s.inTopology||this.emit("topologyOpening",{topologyId:Sb(t)}),t.emit("serverOpening",{topologyId:Sb(t),address:t.name}),t.s.pool.connect()};Xt.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};Xt.prototype.getDescription=function(){var e=this.ismaster||{},t={type:fc.getTopologyType(this),address:this.name};return e.hosts&&(t.hosts=e.hosts),e.arbiters&&(t.arbiters=e.arbiters),e.passives&&(t.passives=e.passives),e.setName&&(t.setName=e.setName),t};Xt.prototype.lastIsMaster=function(){return this.ismaster};Xt.prototype.unref=function(){this.s.pool.unref()};Xt.prototype.isConnected=function(){return this.s.pool?this.s.pool.isConnected():!1};Xt.prototype.isDestroyed=function(){return this.s.pool?this.s.pool.isDestroyed():!1};function Cb(e){if(!e.s.pool)return new hc("server instance is not connected");if(e.s.pool.isDestroyed())return new hc("server instance pool was destroyed")}s(Cb,"basicWriteValidations");function HPe(e,t){if(Cb(e,t),t.readPreference&&!(t.readPreference instanceof NPe))throw new Error("readPreference must be an instance of ReadPreference")}s(HPe,"basicReadValidations");Xt.prototype.command=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var o=HPe(i,r);if(o)return n(o);if(r=Object.assign({},r,{wireProtocolCommand:!1}),i.s.logger.isDebug()){let a=$Pe(t);i.s.logger.debug(Vl("executing command [%s] against %s",JSON.stringify({ns:e,cmd:a.shouldRedact?`${a.name} details REDACTED`:t,options:PPe(WPe,r)}),i.name))}if(!Eb(i,"command",e,t,r,n)){if(OB(this,t))return n(new hc(`server ${this.name} does not support collation`));Yl.command(i,e,t,r,n)}};Xt.prototype.query=function(e,t,r,n,i){Yl.query(this,e,t,r,n,i)};Xt.prototype.getMore=function(e,t,r,n,i){Yl.getMore(this,e,t,r,n,i)};Xt.prototype.killCursors=function(e,t,r){Yl.killCursors(this,e,t,r)};Xt.prototype.insert=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var o=Cb(i,r);if(o)return n(o);if(!Eb(i,"insert",e,t,r,n))return t=Array.isArray(t)?t:[t],Yl.insert(i,e,t,r,n)};Xt.prototype.update=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var o=Cb(i,r);if(o)return n(o);if(!Eb(i,"update",e,t,r,n))return OB(this,r)?n(new hc(`server ${this.name} does not support collation`)):(t=Array.isArray(t)?t:[t],Yl.update(i,e,t,r,n))};Xt.prototype.remove=function(e,t,r,n){var i=this;typeof r=="function"&&(n=r,r={},r=r||{});var o=Cb(i,r);if(o)return n(o);if(!Eb(i,"remove",e,t,r,n))return OB(this,r)?n(new hc(`server ${this.name} does not support collation`)):(t=Array.isArray(t)?t:[t],Yl.remove(i,e,t,r,n))};Xt.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};Xt.prototype.equals=function(e){return typeof e=="string"?this.name.toLowerCase()===e.toLowerCase():e.name?this.name.toLowerCase()===e.name.toLowerCase():!1};Xt.prototype.connections=function(){return this.s.pool.allConnections()};Xt.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e,e=void 0),r(null,this)};var VPe=["close","error","timeout","parseError","connect"];Xt.prototype.destroy=function(e,t){if(this._destroyed){typeof t=="function"&&t(null,null);return}typeof e=="function"&&(t=e,e={}),e=e||{};var r=this;if(Av&&delete Iv[this.id],this.monitoringProcessId&&clearTimeout(this.monitoringProcessId),!r.s.pool||this._destroyed){this._destroyed=!0,typeof t=="function"&&t(null,null);return}this._destroyed=!0,e.emitClose&&r.emit("close",r),e.emitDestroy&&r.emit("destroy",r),VPe.forEach(function(n){r.s.pool.removeAllListeners(n)}),r.listeners("serverClosed").length>0&&r.emit("serverClosed",{topologyId:Sb(r),address:r.name}),r.listeners("topologyClosed").length>0&&!r.s.inTopology&&r.emit("topologyClosed",{topologyId:Sb(r)}),r.s.logger.isDebug()&&r.s.logger.debug(Vl("destroy called on server %s",r.name)),this.s.pool.destroy(e.force,t)};U8.exports=Xt});var z8=w((aCt,W8)=>{"use strict";var YPe=require("util").inherits,j8=require("util").format,KPe=kr().diff,k8=require("events").EventEmitter,XPe=Rs(),pc=qn(),Kl=ye().MongoError,bb=Ci().Buffer,lr={Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown"},si={Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown"},Vi=s(function(e){e=e||{},k8.call(this),this.topologyType=e.setName?lr.ReplicaSetNoPrimary:lr.Unknown,this.setName=e.setName,this.set={},this.id=e.id,this.setName=e.setName,this.logger=e.logger||XPe("ReplSet",e),this.index=0,this.acceptableLatency=e.acceptableLatency||15,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.primary=null,this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.maxElectionId=null,this.maxSetVersion=0,this.replicasetDescription={topologyType:"Unknown",servers:[]},this.logicalSessionTimeoutMinutes=void 0},"ReplSetState");YPe(Vi,k8);Vi.prototype.hasPrimaryAndSecondary=function(){return this.primary!=null&&this.secondaries.length>0};Vi.prototype.hasPrimaryOrSecondary=function(){return this.hasPrimary()||this.hasSecondary()};Vi.prototype.hasPrimary=function(){return this.primary!=null};Vi.prototype.hasSecondary=function(){return this.secondaries.length>0};Vi.prototype.get=function(e){for(var t=this.allServers(),r=0;r<t.length;r++)if(t[r].name.toLowerCase()===e.toLowerCase())return t[r];return null};Vi.prototype.allServers=function(e){e=e||{};var t=this.primary?[this.primary]:[];return t=t.concat(this.secondaries),e.ignoreArbiters||(t=t.concat(this.arbiters)),t=t.concat(this.passives),t};Vi.prototype.destroy=function(e,t){let r=this.secondaries.concat(this.arbiters).concat(this.passives).concat(this.ghosts);this.primary&&r.push(this.primary);let n=r.length,i=s(()=>{n--,!(n>0)&&(this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.primary=null,Yf(this),typeof t=="function"&&t(null,null))},"serverDestroyed");if(n===0){i();return}r.forEach(o=>o.destroy(e,i))};Vi.prototype.remove=function(e,t){t=t||{};var r=e.name.toLowerCase(),n=this.primary?[this.primary]:[];n=n.concat(this.secondaries),n=n.concat(this.arbiters),n=n.concat(this.passives);for(var i=0;i<n.length;i++)if(!t.force&&n[i].equals(e)&&n[i].isConnected&&n[i].isConnected())return;this.set[r]&&(this.set[r].type=si.Unknown,this.set[r].electionId=null,this.set[r].setName=null,this.set[r].setVersion=null);var o=null;this.primary&&this.primary.equals(e)&&(this.primary=null,this.topologyType=lr.ReplicaSetNoPrimary,o="primary"),o=bi(e,this.secondaries)?"secondary":o,o=bi(e,this.arbiters)?"arbiter":o,o=bi(e,this.passives)?"secondary":o,bi(e,this.ghosts),bi(e,this.unknownServers),this.unknownServers.push(r),o&&this.emit("left",o,e)};var $8=s(e=>e.arbiterOnly&&e.setName,"isArbiter");Vi.prototype.update=function(e){var t=this;let r=e.lastIsMaster();r&&r.isWritablePrimary&&(r.ismaster=r.isWritablePrimary);var n=e.name.toLowerCase();if(r){var i=Array.isArray(r.hosts)?r.hosts:[];i=i.concat(Array.isArray(r.arbiters)?r.arbiters:[]),i=i.concat(Array.isArray(r.passives)?r.passives:[]),i=i.map(function(D){return D.toLowerCase()});for(var o=0;o<i.length;o++)this.unknownServers.indexOf(i[o])===-1&&(!this.set[i[o]]||this.set[i[o]].type===si.Unknown)&&this.unknownServers.push(i[o].toLowerCase()),this.set[i[o]]||(this.set[i[o]]={type:si.Unknown,electionId:null,setName:null,setVersion:null})}if(!r&&!Ob(r,e,this.unknownServers))return t.set[n]={type:si.Unknown,setVersion:null,electionId:null,setName:null},t.set[n].type=si.Unknown,t.set[n].electionId=r&&r.electionId,t.set[n].setName=r&&r.setName,t.set[n].setVersion=r&&r.setVersion,t.unknownServers.indexOf(e.name)===-1&&t.unknownServers.push(n),!1;if(r.logicalSessionTimeoutMinutes!==void 0&&!$8(r)&&(t.logicalSessionTimeoutMinutes===void 0||r.logicalSessionTimeoutMinutes===null?t.logicalSessionTimeoutMinutes=r.logicalSessionTimeoutMinutes:t.logicalSessionTimeoutMinutes=Math.min(t.logicalSessionTimeoutMinutes,r.logicalSessionTimeoutMinutes)),r&&r.msg==="isdbgrid")return this.primary&&this.primary.name===n&&(this.primary=null,this.topologyType=lr.ReplicaSetNoPrimary),!1;if(r.isreplicaset)return t.set[n]={type:si.RSGhost,setVersion:null,electionId:null,setName:r.setName},this.primary&&this.primary.name===n&&(this.primary=null),this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r.setName&&r.hidden||r.setName&&!r.ismaster&&!r.secondary&&!r.arbiterOnly&&!r.passive)return t.set[n]={type:si.RSOther,setVersion:null,electionId:null,setName:r.setName},this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),!1;if(r&&r.ismaster&&!r.setName)return this.remove(e,{force:!0}),!1;if(r&&!r.ismaster&&!r.secondary&&!r.arbiterOnly)return this.remove(e,{force:!0}),!1;if(r.me&&r.me.toLowerCase()!==n)return this.logger.isWarn()&&this.logger.warn(j8("the seedlist server was removed due to its address %s not matching its ismaster.me address %s",e.name,r.me)),delete this.set[n],bi(e,t.unknownServers),e.destroy({force:!0}),this.primary&&!this.primary.equals(e)?this.topologyType=lr.ReplicaSetWithPrimary:this.topologyType=lr.ReplicaSetNoPrimary,!this.primary&&r.primary&&(this.set[r.primary.toLowerCase()]={type:si.PossiblePrimary,setName:null,electionId:null,setVersion:null}),!1;if(!this.primary&&r.ismaster&&r.setName){var a=e.lastIsMaster().electionId;if(this.setName&&this.setName!==r.setName)return this.topologyType=lr.ReplicaSetNoPrimary,new Kl(j8("setName from ismaster does not match provided connection setName [%s] != [%s]",r.setName,this.setName));if(!this.maxElectionId&&a)this.maxElectionId=a;else if(this.maxElectionId&&a){var u=DB(this.maxElectionId,a),l=e.lastIsMaster().setVersion;if(u===1)return this.topologyType=lr.ReplicaSetNoPrimary,!1;if(u===0&&l&&l<this.maxSetVersion)return this.topologyType=lr.ReplicaSetNoPrimary,!1;this.maxSetVersion=l,this.maxElectionId=a}var f=r.hosts.map(function(D){return D.toLowerCase()}),h=f.indexOf(n);return h!==-1?(t.primary=e,t.set[n]={type:si.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=lr.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),bi(e,t.unknownServers),bi(e,t.secondaries),bi(e,t.passives),t.emit("joined","primary",e)):this.topologyType=lr.ReplicaSetNoPrimary,Yf(t),!0}else if(r.ismaster&&r.setName){var p=t.set[t.primary.name.toLowerCase()].electionId,g=t.set[t.primary.name.toLowerCase()].setVersion,_=t.set[t.primary.name.toLowerCase()].setName;a=e.lastIsMaster().electionId,l=e.lastIsMaster().setVersion;var C=e.lastIsMaster().setName;if(this.primary.equals(e)&&_===C)return!1;if(_&&_!==C)return this.primary.equals(e)?this.topologyType=lr.ReplicaSetNoPrimary:this.topologyType=lr.ReplicaSetWithPrimary,!1;if(p&&a){if(u=DB(p,a),u===1)return!1;if(u===0&&g>l)return!1}else if(!p&&a&&l&&l<this.maxSetVersion)return!1;if(!this.maxElectionId&&a)this.maxElectionId=a;else if(this.maxElectionId&&a){if(u=DB(this.maxElectionId,a),u===1)return!1;if(u===0&&g&&l){if(l<this.maxSetVersion)return!1}else if(l<this.maxSetVersion)return!1;this.maxElectionId=a,this.maxSetVersion=l}else this.maxSetVersion=l;return t.set[t.primary.name.toLowerCase()]={type:si.Unknown,setVersion:null,electionId:null,setName:null},t.emit("left","primary",this.primary),t.primary.destroy({force:!0}),t.primary=e,t.set[n]={type:si.RSPrimary,setVersion:r.setVersion,electionId:r.electionId,setName:r.setName},this.topologyType=lr.ReplicaSetWithPrimary,r.setName&&(this.setName=r.setName),bi(e,t.unknownServers),bi(e,t.secondaries),bi(e,t.passives),t.emit("joined","primary",e),Yf(t),!0}return!this.primary&&r.primary&&(t.set[r.primary.toLowerCase()]={type:si.PossiblePrimary,setVersion:null,electionId:null,setName:null}),r.secondary&&r.setName&&!Ob(r,e,this.secondaries)&&this.setName&&this.setName===r.setName?(IB(t,si.RSSecondary,r,e,this.secondaries),this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),bi(e,t.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy({force:!0}),this.primary=null,t.emit("left","primary",e)),t.emit("joined","secondary",e),Yf(t),!0):$8(r)&&!Ob(r,e,this.arbiters)&&this.setName&&this.setName===r.setName?(IB(t,si.RSArbiter,r,e,this.arbiters),this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),bi(e,t.unknownServers),t.emit("joined","arbiter",e),Yf(t),!0):r.passive&&r.setName&&!Ob(r,e,this.passives)&&this.setName&&this.setName===r.setName?(IB(t,si.RSSecondary,r,e,this.passives),this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,r.setName&&(this.setName=r.setName),bi(e,t.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy({force:!0}),this.primary=null,t.emit("left","primary",e)),t.emit("joined","secondary",e),Yf(t),!0):this.set[n]&&this.set[n].type===si.RSPrimary?(t.emit("left","primary",this.primary),this.primary.destroy({force:!0}),this.primary=null,this.topologyType=lr.ReplicaSetNoPrimary,!1):(this.topologyType=this.primary?lr.ReplicaSetWithPrimary:lr.ReplicaSetNoPrimary,!1)};Vi.prototype.updateServerMaxStaleness=function(e,t){for(var r=0,n=0;n<this.secondaries.length;n++)r=Math.max(r,this.secondaries[n].lastWriteDate);e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&this.hasPrimary()?e.staleness=e.lastUpdateTime-e.lastWriteDate-(this.primary.lastUpdateTime-this.primary.lastWriteDate)+t:e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&(e.staleness=r-e.lastWriteDate+t)};Vi.prototype.updateSecondariesMaxStaleness=function(e){for(var t=0;t<this.secondaries.length;t++)this.updateServerMaxStaleness(this.secondaries[t],e)};Vi.prototype.pickServer=function(e){if(e=e||pc.primary,e.preference==="primary"&&e.maxStalenessSeconds!=null)return new Kl("primary readPreference incompatible with maxStalenessSeconds");var t=this.primary?[this.primary]:[];if(t=t.concat(this.secondaries),e.maxStalenessSeconds!=null){for(var r=0;r<t.length;r++)if(t[r].ismaster.maxWireVersion<5)return new Kl("maxStalenessSeconds not supported by at least one of the replicaset members")}if(e.preference==="nearest"&&e.maxStalenessSeconds==null)return AB(this,e);if(e.preference==="nearest"&&e.maxStalenessSeconds!=null)return TB(this,e);var n=this.secondaries;if(e.equals(pc.secondary)&&n.length===0)return new Kl("no secondary server available");if(e.equals(pc.secondaryPreferred)&&n.length===0&&this.primary==null)return new Kl("no secondary or primary server available");if(e.equals(pc.primary)&&this.primary==null)return new Kl("no primary server available");if(e.equals(pc.secondaryPreferred)||e.equals(pc.secondary)){if(n.length>0&&e.maxStalenessSeconds==null){var i=AB(this,e);if(i)return i}else if(n.length>0&&e.maxStalenessSeconds!=null&&(i=TB(this,e),i))return i;return e.equals(pc.secondaryPreferred)?this.primary:null}if(e.equals(pc.primaryPreferred)){if(i=null,this.primary)return this.primary;if(n.length>0&&e.maxStalenessSeconds==null?i=AB(this,e):n.length>0&&e.maxStalenessSeconds!=null&&(i=TB(this,e)),i)return i}return this.primary};var G8=s(function(e,t){if(e.tags==null)return t;for(var r=[],n=Array.isArray(e.tags)?e.tags:[e.tags],i=0;i<n.length;i++)for(var o=n[i],a=0;a<t.length;a++){var u=t[a].lastIsMaster().tags||{},l=!0;for(var f in o)u[f]!==o[f]&&(l=!1);l&&r.push(t[a])}return r},"filterByTags");function TB(e,t){var r=[],n=t.maxStalenessSeconds*1e3;if(n<90*1e3)return new Kl("maxStalenessSeconds must be set to at least 90 seconds");e.primary&&t.preference!=="secondary"&&t.preference!=="secondaryPreferred"&&r.push(e.primary);for(var i=0;i<e.secondaries.length;i++)r.push(e.secondaries[i]);if(e.primary&&r.length===0&&t.preference!=="secondaryPreferred"&&r.push(e.primary),r=G8(t,r),r=r.filter(function(a){return a.staleness<=n}),r.sort(function(a,u){return a.lastIsMasterMS-u.lastIsMasterMS}),r.length===0)return null;e.index=e.index%r.length;var o=r[e.index];return e.index=e.index+1,o}s(TB,"pickNearestMaxStalenessSeconds");function AB(e,t){var r=[];e.primary&&t.preference!=="secondary"&&t.preference!=="secondaryPreferred"&&r.push(e.primary);for(var n=0;n<e.secondaries.length;n++)r.push(e.secondaries[n]);r.length===0&&e.primary&&t.preference!=="secondaryPreferred"&&r.push(e.primary),r=G8(t,r),r.sort(function(a,u){return a.lastIsMasterMS-u.lastIsMasterMS});var i=r.length>0?r[0].lastIsMasterMS:0;if(r=r.filter(function(a){return a.lastIsMasterMS<=i+e.acceptableLatency}),r.length===0)return null;e.index=e.index%r.length;var o=r[e.index];return e.index=e.index+1,o}s(AB,"pickNearest");function Ob(e,t,r){for(var n=0;n<r.length;n++)if(r[n]&&r[n].name&&r[n].name.toLowerCase()===t.name.toLowerCase())return!0;return!1}s(Ob,"inList");function IB(e,t,r,n,i){var o=n.name.toLowerCase();e.set[o].type=t,e.set[o].electionId=r&&r.electionId,e.set[o].setName=r&&r.setName,e.set[o].setVersion=r&&r.setVersion,i.push(n)}s(IB,"addToList");function DB(e,t){var r=bb.from(e.toHexString(),"hex"),n=bb.from(t.toHexString(),"hex");if(r===n)return 0;if(typeof bb.compare=="function")return bb.compare(r,n);for(var i=r.length,o=n.length,a=Math.min(i,o),u=0;u<a&&r[u]===n[u];u++);return u!==a&&(i=r[u],o=n[u]),i<o?-1:o<i?1:0}s(DB,"compareObjectIds");function bi(e,t){for(var r=0;r<t.length;r++){if(t[r].equals&&t[r].equals(e))return t.splice(r,1),!0;if(typeof t[r]=="string"&&t[r].toLowerCase()===e.name.toLowerCase())return t.splice(r,1),!0}return!1}s(bi,"removeFrom");function Yf(e){if(e.listeners("topologyDescriptionChanged").length>0){var t="Unknown",r=e.setName;e.hasPrimaryAndSecondary()?t="ReplicaSetWithPrimary":!e.hasPrimary()&&e.hasSecondary()&&(t="ReplicaSetNoPrimary");var n={topologyType:t,setName:r,servers:[]};if(e.hasPrimary()){var i=e.primary.getDescription();i.type="RSPrimary",n.servers.push(i)}n.servers=n.servers.concat(e.secondaries.map(function(u){var l=u.getDescription();return l.type="RSSecondary",l})),n.servers=n.servers.concat(e.arbiters.map(function(u){var l=u.getDescription();return l.type="RSArbiter",l})),n.servers=n.servers.concat(e.passives.map(function(u){var l=u.getDescription();return l.type="RSSecondary",l}));var o=KPe(e.replicasetDescription,n),a={topologyId:e.id,previousDescription:e.replicasetDescription,newDescription:n,diff:o};e.emit("topologyDescriptionChanged",a),e.replicasetDescription=n}}s(Yf,"emitTopologyDescriptionChanged");W8.exports=Vi});var r4=w((cCt,t4)=>{"use strict";var JPe=require("util").inherits,Ga=require("util").format,Y8=require("events").EventEmitter,ka=qn(),QPe=xs().CoreCursor,ZPe=Sn().retrieveBSON,eBe=Rs(),Ps=ye().MongoError,Ib=wb(),tBe=z8(),Kf=kr().Timeout,K8=kr().Interval,rBe=kr().SessionMixins,X8=kr().isRetryableWritesSupported,J8=Le().relayEvents,oi=ZPe(),nBe=kr().getMMAPError,iBe=Le().makeClientMetadata,Q8=kr().legacyIsRetryableWriteError,Z8=$().now,sBe=$().calculateDurationInMs,Xl="disconnected",Jl="connecting",Tb="connected",Yi="unreferenced",Xr="destroyed";function gc(e,t){var r={disconnected:[Jl,Xr,Xl],connecting:[Jl,Xr,Tb,Xl],connected:[Tb,Xl,Xr,Yi],unreferenced:[Yi,Xr],destroyed:[Xr]},n=r[e.state];n&&n.indexOf(t)!==-1?e.state=t:e.s.logger.error(Ga("Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]",e.id,e.state,t,n))}s(gc,"stateTransition");var oBe=1,Ab=["connect","close","error","timeout","parseError"],Jr=s(function(e,t){var r=this;if(t=t||{},!Array.isArray(e))throw new Ps("seedlist must be an array");if(e.length===0)throw new Ps("seedlist must contain at least one entry");e.forEach(function(a){if(typeof a.host!="string"||typeof a.port!="number")throw new Ps("seedlist entry must contain a host and port")}),Y8.call(this),this.id=oBe++;var n=t.localThresholdMS||15;t.acceptableLatency&&(n=t.acceptableLatency);var i=eBe("ReplSet",t);this.s={options:Object.assign({metadata:iBe(t)},t),bson:t.bson||new oi([oi.Binary,oi.Code,oi.DBRef,oi.Decimal128,oi.Double,oi.Int32,oi.Long,oi.Map,oi.MaxKey,oi.MinKey,oi.ObjectId,oi.BSONRegExp,oi.Symbol,oi.Timestamp]),Cursor:t.cursorFactory||QPe,logger:i,seedlist:e,replicaSetState:new tBe({id:this.id,setName:t.setName,acceptableLatency:n,heartbeatFrequencyMS:t.haInterval?t.haInterval:1e4,logger:i}),connectingServers:[],haInterval:t.haInterval?t.haInterval:1e4,minHeartbeatFrequencyMS:500,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:typeof t.debug=="boolean"?t.debug:!1},this.s.replicaSetState.on("topologyDescriptionChanged",function(a){r.emit("topologyDescriptionChanged",a)}),this.s.logger.isWarn()&&this.s.options.socketTimeout!==0&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(Ga("warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts",this.s.options.socketTimeout,this.s.haInterval));var o=["joined","left"];o.forEach(function(a){r.s.replicaSetState.on(a,function(u,l){r.emit(a,u,l)})}),this.initialConnectState={connect:!1,fullsetup:!1,all:!1},this.state=Xl,this.haTimeoutId=null,this.ismaster=null,this.intervalIds=[],this.clusterTime=null},"ReplSet");JPe(Jr,Y8);Object.assign(Jr.prototype,rBe);Object.defineProperty(Jr.prototype,"type",{enumerable:!0,get:function(){return"replset"}});Object.defineProperty(Jr.prototype,"parserType",{enumerable:!0,get:function(){return oi.native?"c++":"js"}});Object.defineProperty(Jr.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.s.replicaSetState.logicalSessionTimeoutMinutes||null}});function RB(e){e.s.replicaSetState.hasPrimaryAndSecondary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute():e.s.replicaSetState.hasPrimary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute({executePrimary:!0}):e.s.replicaSetState.hasSecondary()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute({executeSecondary:!0})}s(RB,"rexecuteOperations");function H8(e,t,r){if(t.length===0)return r();var n=t.length,i=null;function o(){n=n-1,n===0&&r(i)}s(o,"done");var a=s(function(f,h){return function(p){var g=this;if(f.state===Xr||f.state===Yi)return this.destroy({force:!0}),o();if(h==="connect"){var _=f.s.replicaSetState.update(g);if(_){g.lastIsMaster()&&g.lastIsMaster().ismaster&&(f.ismaster=g.lastIsMaster());for(let C=0;C<Ab.length;C++)g.removeAllListeners(Ab[C]);g.on("error",mc(f,"error")),g.on("close",mc(f,"close")),g.on("timeout",mc(f,"timeout")),g.on("parseError",mc(f,"parseError")),NB(g.lastIsMaster().me,f,{}),RB(f)}else g.destroy({force:!0})}else h==="error"&&(i=p);RB(f),o()}},"_handleEvent");function u(f,h){setTimeout(function(){if(e.state===Xr||e.state===Yi)return;let p=e.s.connectingServers.findIndex(_=>_.name===f);if(p>=0)return e.s.connectingServers[p].destroy({force:!0}),e.s.connectingServers.splice(p,1),o();var g=new Ib(Object.assign({},e.s.options,{host:f.split(":")[0],port:parseInt(f.split(":")[1],10),reconnect:!1,monitoring:!1,parent:e}));g.once("connect",a(e,"connect")),g.once("close",a(e,"close")),g.once("timeout",a(e,"timeout")),g.once("error",a(e,"error")),g.once("parseError",a(e,"parseError")),g.on("serverOpening",_=>e.emit("serverOpening",_)),g.on("serverDescriptionChanged",_=>e.emit("serverDescriptionChanged",_)),g.on("serverClosed",_=>e.emit("serverClosed",_)),J8(g,e,["commandStarted","commandSucceeded","commandFailed"]),e.s.connectingServers.push(g),g.connect(e.s.connectOptions)},h)}s(u,"execute");for(var l=0;l<t.length;l++)u(t[l],l)}s(H8,"connectNewServers");var aBe=s(function(e,t,r){var n=new Date().getTime();Rv(e,"serverHeartbeatStarted",{connectionId:t.name}),t.command("admin.$cmd",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(i,o){if(e.state===Xr||e.state===Yi)return t.destroy({force:!0}),r(i,o);var a=new Date().getTime()-n;t.lastUpdateTime=Z8(),i?(Rv(e,"serverHeartbeatFailed",{durationMS:a,failure:i,connectionId:t.name}),e.s.replicaSetState.remove(t)):(t.ismaster=o.result,t.ismaster.lastWrite&&t.ismaster.lastWrite.lastWriteDate&&(t.lastWriteDate=t.ismaster.lastWrite.lastWriteDate.getTime()),t.lastIsMasterMS===-1?t.lastIsMasterMS=a:t.lastIsMasterMS&&(t.lastIsMasterMS=.2*a+(1-.2)*t.lastIsMasterMS),e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),Rv(e,"serverHeartbeatSucceeded",{durationMS:a,reply:o.result,connectionId:t.name})),e.s.replicaSetState.updateServerMaxStaleness(t,e.s.haInterval),r(i,o)})},"pingServer"),NB=s(function(e,t,r){if(!r.haInterval){for(var n=0;n<t.intervalIds.length;n++)if(t.intervalIds[n].__host===e)return}var i=r.haInterval?Kf:K8,o=r.haInterval?r.haInterval:t.s.haInterval,a=new i(function(){if(t.state===Xr||t.state===Yi){a.stop();return}var u=t.s.replicaSetState.get(e);if(u)return aBe(t,u,function(l){if(!l){if(t.state===Xr||t.state===Yi){a.stop();return}t.intervalIds=t.intervalIds.filter(function(f){return f.isRunning()}),i===Kf?t.state===Jl&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(gc(t,Tb),process.nextTick(function(){t.emit("connect",t)}),xB(t,{})):t.state===Xl&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(gc(t,Jl),RB(t),process.nextTick(function(){t.emit("reconnect",t)})),t.initialConnectState.connect&&!t.initialConnectState.fullsetup&&t.s.replicaSetState.hasPrimaryAndSecondary()&&(t.initialConnectState.fullsetup=!0,t.initialConnectState.all=!0,process.nextTick(function(){t.emit("fullsetup",t),t.emit("all",t)}))}})},o);a.start(),a.__host=e,t.intervalIds.push(a)},"monitorServer");function xB(e,t){if(e.state===Xr||e.state===Yi)return;t=t||{};var r=Object.keys(e.s.replicaSetState.set),n=t.haInterval?Kf:K8,i=t.haInterval?t.haInterval:e.s.haInterval;if(n===Kf)return H8(e,e.s.replicaSetState.unknownServers,function(l){if(!(e.state===Xr||e.state===Yi)){if(!e.s.replicaSetState.hasPrimary()&&!e.s.options.secondaryOnlyConnectionAllowed)return l?e.emit("error",l):(e.emit("error",new Ps("no primary found in replicaset or invalid replica set name")),e.destroy({force:!0}));if(!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed)return l?e.emit("error",l):(e.emit("error",new Ps("no secondary found in replicaset or invalid replica set name")),e.destroy({force:!0}));for(var f=0;f<r.length;f++)NB(r[f],e,t)}});for(var o=0;o<r.length;o++)NB(r[o],e,t);function a(l){return function(){l.state===Xr||l.state===Yi||H8(l,l.s.replicaSetState.unknownServers,function(){var f=l.s.replicaSetState.hasPrimary()?i:l.s.minHeartbeatFrequencyMS;l.intervalIds.push(new Kf(a(l),f).start())})}}s(a,"executeReconnect");var u=e.s.replicaSetState.hasPrimary()?i:e.s.minHeartbeatFrequencyMS;e.intervalIds.push(new Kf(a(e),u).start())}s(xB,"topologyMonitor");function e4(e,t){for(var r=0;r<e.length;r++)if(e[r].name.toLowerCase()===t.name.toLowerCase())return!0;e.push(t)}s(e4,"addServerToList");function mc(e,t){return function(){e.state===Xr||e.state===Yi||(e.s.logger.isDebug()&&e.s.logger.debug(Ga("handleEvent %s from server %s in replset with id %s",t,this.name,e.id)),e.s.replicaSetState.remove(this),!(e.state===Xr||e.state===Yi)&&(!e.s.replicaSetState.hasPrimary()&&!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed?gc(e,Xl):e.s.replicaSetState.hasPrimary()||gc(e,Xl),e4(e.s.connectingServers,this)))}}s(mc,"handleEvent");function uBe(e){let t=e.state===Jl,r=e.s.replicaSetState.hasPrimary(),n=e.s.replicaSetState.hasSecondary(),i=e.s.options.secondaryOnlyConnectionAllowed,o=e.s.connectOptions.readPreference&&e.s.connectOptions.readPreference.equals(ka.secondary);return t&&(o&&n||!o&&r)||n&&i}s(uBe,"shouldTriggerConnect");function Dv(e,t){return function(){var r=this;if(e.s.logger.isDebug()&&e.s.logger.debug(Ga("handleInitialConnectEvent %s from server %s in replset with id %s",t,this.name,e.id)),e.state===Xr||e.state===Yi)return this.destroy({force:!0});if(t==="connect"){var n=e.s.replicaSetState.update(r);if(n===!0){r.lastIsMaster()&&r.lastIsMaster().ismaster&&(e.ismaster=r.lastIsMaster()),e.s.logger.isDebug()&&e.s.logger.debug(Ga("handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]",t,r.name,e.id,JSON.stringify(e.s.replicaSetState.set)));for(let o=0;o<Ab.length;o++)r.removeAllListeners(Ab[o]);r.on("error",mc(e,"error")),r.on("close",mc(e,"close")),r.on("timeout",mc(e,"timeout")),r.on("parseError",mc(e,"parseError")),uBe(e)&&(gc(e,Tb),e.initialConnectState.connect=!0,process.nextTick(function(){e.emit("connect",e)}),xB(e,{}))}else{if(n instanceof Ps)return r.destroy({force:!0}),e.destroy({force:!0}),e.emit("error",n);r.destroy({force:!0})}}else e.emit("failed",this),e4(e.s.connectingServers,this),e.s.replicaSetState.remove(this);e.initialConnectState.connect&&!e.initialConnectState.fullsetup&&e.s.replicaSetState.hasPrimaryAndSecondary()&&(e.initialConnectState.fullsetup=!0,e.initialConnectState.all=!0,process.nextTick(function(){e.emit("fullsetup",e),e.emit("all",e)}));for(var i=0;i<e.s.connectingServers.length;i++)e.s.connectingServers[i].equals(this)&&e.s.connectingServers.splice(i,1);e.s.connectingServers.length===0&&e.state===Jl&&xB(e,{haInterval:1})}}s(Dv,"handleInitialConnectEvent");function cBe(e,t){e.s.connectingServers=e.s.connectingServers.concat(t);var r=0;function n(i,o){setTimeout(function(){e.s.replicaSetState.update(i)&&i.lastIsMaster()&&i.lastIsMaster().ismaster&&(e.ismaster=i.lastIsMaster()),i.once("close",Dv(e,"close")),i.once("timeout",Dv(e,"timeout")),i.once("parseError",Dv(e,"parseError")),i.once("error",Dv(e,"error")),i.once("connect",Dv(e,"connect")),i.on("serverOpening",a=>e.emit("serverOpening",a)),i.on("serverDescriptionChanged",a=>e.emit("serverDescriptionChanged",a)),i.on("serverClosed",a=>e.emit("serverClosed",a)),J8(i,e,["commandStarted","commandSucceeded","commandFailed"]),i.connect(e.s.connectOptions)},o)}for(s(n,"connect");t.length>0;)n(t.shift(),r++)}s(cBe,"connectServers");function Rv(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}s(Rv,"emitSDAMEvent");Jr.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},gc(this,Jl);var r=this.s.seedlist.map(function(n){return new Ib(Object.assign({},t.s.options,n,e,{reconnect:!1,monitoring:!1,parent:t}))});if(this.s.options.socketTimeout>0&&this.s.options.socketTimeout<=this.s.options.haInterval)return t.emit("error",new Ps(Ga("haInterval [%s] MS must be set to less than socketTimeout [%s] MS",this.s.options.haInterval,this.s.options.socketTimeout)));Rv(this,"topologyOpening",{topologyId:this.id}),cBe(t,r)};Jr.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};Jr.prototype.destroy=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=this.s.connectingServers.length+1,n=s(()=>{r--,!(r>0)&&(Rv(this,"topologyClosed",{topologyId:this.id}),typeof t=="function"&&t(null,null))},"serverDestroyed");if(this.state===Xr){typeof t=="function"&&t(null,null);return}gc(this,Xr),this.haTimeoutId&&clearTimeout(this.haTimeoutId);for(var i=0;i<this.intervalIds.length;i++)this.intervalIds[i].stop();if(this.intervalIds=[],r===0){n();return}this.s.replicaSetState.destroy(e,n),this.s.connectingServers.forEach(function(o){o.destroy(e,n)})};Jr.prototype.unref=function(){gc(this,Yi),this.s.replicaSetState.allServers().forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)};Jr.prototype.lastIsMaster=function(){return this.s.options.secondaryOnlyConnectionAllowed&&!this.s.replicaSetState.hasPrimary()&&this.s.replicaSetState.hasSecondary()?this.s.replicaSetState.secondaries[0].lastIsMaster():this.s.replicaSetState.primary?this.s.replicaSetState.primary.lastIsMaster():this.ismaster};Jr.prototype.connections=function(){for(var e=this.s.replicaSetState.allServers(),t=[],r=0;r<e.length;r++)t=t.concat(e[r].connections());return t};Jr.prototype.isConnected=function(e){return e=e||{},e.readPreference&&e.readPreference.equals(ka.secondary)?this.s.replicaSetState.hasSecondary():e.readPreference&&e.readPreference.equals(ka.primary)?this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(ka.primaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(ka.secondaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():this.s.options.secondaryOnlyConnectionAllowed&&this.s.replicaSetState.hasSecondary()?!0:this.s.replicaSetState.hasPrimary()};Jr.prototype.isDestroyed=function(){return this.state===Xr};var lBe=1e4,V8=1e3;Jr.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e),t=t||{};let n;e instanceof ka?n=e:n=t.readPreference||ka.primary;let i,o=Z8(),a=s(()=>{if(sBe(o)>=lBe){i!=null?r(i,null):r(new Ps("Server selection timed out"));return}let u=this.s.replicaSetState.pickServer(n);if(u==null){setTimeout(a,V8);return}if(!(u instanceof Ib)){i=u,setTimeout(a,V8);return}this.s.debug&&this.emit("pickedServer",t.readPreference,u),r(null,u)},"_selectServer");a()};Jr.prototype.getServers=function(){return this.s.replicaSetState.allServers()};function Db(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.self,i=e.op,o=e.ns,a=e.ops;if(n.state===Xr)return r(new Ps(Ga("topology was destroyed")));let u=!e.retrying&&!!t.retryWrites&&t.session&&X8(n)&&!t.session.inTransaction()&&t.explain===void 0;if(!n.s.replicaSetState.hasPrimary()){if(n.s.disconnectHandler)return n.s.disconnectHandler.add(i,o,a,t,r);if(!u)return r(new Ps("no primary server found"))}let l=s((f,h)=>{if(!f)return r(null,h);if(!Q8(f,n))return f=nBe(f),r(f);if(u){let p=Object.assign({},e,{retrying:!0});return Db(p,t,r)}return n.s.replicaSetState.primary&&(n.s.replicaSetState.primary.destroy(),n.s.replicaSetState.remove(n.s.replicaSetState.primary,{force:!0})),r(f)},"handler");r.operationId&&(l.operationId=r.operationId),u&&(t.session.incrementTransactionNumber(),t.willRetryWrite=u),n.s.replicaSetState.primary[i](o,a,t,l)}s(Db,"executeWriteOperation");Jr.prototype.insert=function(e,t,r,n){Db({self:this,op:"insert",ns:e,ops:t},r,n)};Jr.prototype.update=function(e,t,r,n){Db({self:this,op:"update",ns:e,ops:t},r,n)};Jr.prototype.remove=function(e,t,r,n){Db({self:this,op:"remove",ns:e,ops:t},r,n)};var dBe=["findAndModify","insert","update","delete"];function fBe(e){return dBe.some(t=>e[t])}s(fBe,"isWriteCommand");Jr.prototype.command=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Xr)return n(new Ps(Ga("topology was destroyed")));var i=this,o=r.readPreference?r.readPreference:ka.primary;if(o.preference==="primary"&&!this.s.replicaSetState.hasPrimary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(o.preference==="secondary"&&!this.s.replicaSetState.hasSecondary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(o.preference!=="primary"&&!this.s.replicaSetState.hasSecondary()&&!this.s.replicaSetState.hasPrimary()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);var a=this.s.replicaSetState.pickServer(o);if(!(a instanceof Ib))return n(a);if(i.s.debug&&i.emit("pickedServer",ka.primary,a),a==null)return n(new Ps(Ga("no server found that matches the provided readPreference %s",o)));let u=!r.retrying&&!!r.retryWrites&&r.session&&X8(i)&&!r.session.inTransaction()&&fBe(t),l=s((f,h)=>{if(!f)return n(null,h);if(!Q8(f,i))return n(f);if(u){let p=Object.assign({},r,{retrying:!0});return this.command(e,t,p,n)}return this.s.replicaSetState.primary&&(this.s.replicaSetState.primary.destroy(),this.s.replicaSetState.remove(this.s.replicaSetState.primary,{force:!0})),n(f)},"cb");u&&(r.session.incrementTransactionNumber(),r.willRetryWrite=u),a.command(e,t,r,l)};Jr.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};t4.exports=Jr});var d4=w((dCt,l4)=>{"use strict";var hBe=require("util").inherits,vc=require("util").format,i4=require("events").EventEmitter,pBe=xs().CoreCursor,mBe=Rs(),gBe=Sn().retrieveBSON,Fs=ye().MongoError,s4=wb(),yBe=kr().diff,vBe=kr().cloneOptions,_Be=kr().SessionMixins,o4=kr().isRetryableWritesSupported,Nb=Le().relayEvents,ai=gBe(),SBe=kr().getMMAPError,EBe=Le().makeClientMetadata,a4=kr().legacyIsRetryableWriteError,Rb="disconnected",Xf="connecting",PB="connected",Bs="unreferenced",Oi="destroying",Wr="destroyed";function Pv(e,t){var r={disconnected:[Xf,Oi,Wr,Rb],connecting:[Xf,Oi,Wr,PB,Rb],connected:[PB,Rb,Oi,Wr,Bs],unreferenced:[Bs,Oi,Wr],destroyed:[Wr]},n=r[e.state];n&&n.indexOf(t)!==-1?e.state=t:e.s.logger.error(vc("Mongos with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]",e.id,e.state,t,n))}s(Pv,"stateTransition");var CBe=1,xb=["connect","close","error","timeout","parseError"],on=s(function(e,t){t=t||{},this.id=CBe++,Array.isArray(e)&&(e=e.reduce((r,n)=>(r.find(i=>i.host===n.host&&i.port===n.port)||r.push(n),r),[])),this.s={options:Object.assign({metadata:EBe(t)},t),bson:t.bson||new ai([ai.Binary,ai.Code,ai.DBRef,ai.Decimal128,ai.Double,ai.Int32,ai.Long,ai.Map,ai.MaxKey,ai.MinKey,ai.ObjectId,ai.BSONRegExp,ai.Symbol,ai.Timestamp]),Cursor:t.cursorFactory||pBe,logger:mBe("Mongos",t),seedlist:e,haInterval:t.haInterval?t.haInterval:1e4,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:typeof t.debug=="boolean"?t.debug:!1,localThresholdMS:t.localThresholdMS||15},this.s.logger.isWarn()&&this.s.options.socketTimeout!==0&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(vc("warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts",this.s.options.socketTimeout,this.s.haInterval)),this.state=Rb,this.connectingProxies=[],this.connectedProxies=[],this.disconnectedProxies=[],this.index=0,this.haTimeoutId=null,this.ismaster=null,this.topologyDescription={topologyType:"Unknown",servers:[]},this.clusterTime=null,i4.call(this)},"Mongos");hBe(on,i4);Object.assign(on.prototype,_Be);Object.defineProperty(on.prototype,"type",{enumerable:!0,get:function(){return"mongos"}});Object.defineProperty(on.prototype,"parserType",{enumerable:!0,get:function(){return ai.native?"c++":"js"}});Object.defineProperty(on.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}});function xv(e,t,r){e.listeners(t).length>0&&e.emit(t,r)}s(xv,"emitSDAMEvent");var wBe=["serverDescriptionChanged","error","close","timeout","parseError"];function u4(e,t,r){t=t||{},wBe.forEach(n=>e.removeAllListeners(n)),e.destroy(t,r)}s(u4,"destroyServer");on.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},Pv(this,Xf);var r=this.s.seedlist.map(function(n){let i=new s4(Object.assign({},t.s.options,n,e,{reconnect:!1,monitoring:!1,parent:t}));return Nb(i,t,["serverDescriptionChanged"]),i});xv(this,"topologyOpening",{topologyId:this.id}),bBe(t,r)};on.prototype.auth=function(e,t){typeof t=="function"&&t(null,null)};function yc(e){return function(){e.state===Wr||e.state===Oi||(Ms(e.connectedProxies,e.disconnectedProxies,this),Ql(e),e.emit("left","mongos",this),e.emit("serverClosed",{topologyId:e.id,address:this.name}))}}s(yc,"handleEvent");function Nv(e,t){return function(){var r=this;if(e.state===Wr)return Ql(e),Ms(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(t==="connect")if(e.ismaster=r.lastIsMaster(),e.ismaster.msg==="isdbgrid"){for(let i=0;i<e.connectedProxies.length;i++)if(e.connectedProxies[i].name===r.name)return Ms(e.connectingProxies,e.disconnectedProxies,r),Ql(e),r.destroy(),e.emit("failed",r);for(let i=0;i<xb.length;i++)r.removeAllListeners(xb[i]);r.on("error",yc(e,"error")),r.on("close",yc(e,"close")),r.on("timeout",yc(e,"timeout")),r.on("parseError",yc(e,"parseError")),Ms(e.connectingProxies,e.connectedProxies,r),e.emit("joined","mongos",r)}else{if(e.s.logger.isWarn()){var n="expected mongos proxy, but found replicaset member mongod for server %s";e.ismaster.hosts||(n="expected mongos proxy, but found standalone mongod for server %s"),e.s.logger.warn(vc(n,r.name))}r.destroy(!0),c4(e.connectingProxies,r),e.emit("left","server",r),e.emit("failed",r)}else Ms(e.connectingProxies,e.disconnectedProxies,this),e.emit("left","mongos",this),e.emit("failed",this);if(Ql(e),e.connectingProxies.length===0){if(e.connectedProxies.length>0&&e.state===Xf)Pv(e,PB),e.emit("connect",e),e.emit("fullsetup",e),e.emit("all",e);else if(e.disconnectedProxies.length===0)return e.s.logger.isWarn()&&e.s.logger.warn(vc("no mongos proxies found in seed list, did you mean to connect to a replicaset")),e.emit("error",new Fs("no mongos proxies found in seed list"));BB(e,{firstConnect:!0})}}}s(Nv,"handleInitialConnectEvent");function bBe(e,t){e.connectingProxies=e.connectingProxies.concat(t);var r=0;function n(i,o){setTimeout(function(){e.emit("serverOpening",{topologyId:e.id,address:i.name}),Ql(e),i.once("close",Nv(e,"close")),i.once("timeout",Nv(e,"timeout")),i.once("parseError",Nv(e,"parseError")),i.once("error",Nv(e,"error")),i.once("connect",Nv(e,"connect")),Nb(i,e,["commandStarted","commandSucceeded","commandFailed"]),i.connect(e.s.connectOptions)},o)}s(n,"connect"),t.forEach(i=>n(i,r++))}s(bBe,"connectProxies");function Pb(e,t){let r=t&&t.transaction;if(r&&r.server){if(r.server.isConnected())return r.server;r.unpinServer()}for(var n=e.connectedProxies.slice(0),i=Number.MAX_VALUE,o=0;o<n.length;o++)n[o].lastIsMasterMS<i&&(i=n[o].lastIsMasterMS);n=n.filter(function(u){if(u.lastIsMasterMS<=i+e.s.localThresholdMS&&u.isConnected())return!0});let a;return n.length===0?a=e.connectedProxies[0]:(a=n[e.index%n.length],e.index=(e.index+1)%n.length),r&&r.isActive&&a&&a.isConnected()&&r.pinServer(a),a}s(Pb,"pickProxy");function Ms(e,t,r){for(var n=0;n<e.length;n++)e[n].name===r.name&&e.splice(n,1);for(n=0;n<t.length;n++)t[n].name===r.name&&t.splice(n,1);t.push(r)}s(Ms,"moveServerFrom");function c4(e,t){for(var r=0;r<e.length;r++)e[r].name===t.name&&e.splice(r,1)}s(c4,"removeProxyFrom");function n4(e,t,r){var n=t.length,i=s(function(u,l){return function(){var f=this;if(n=n-1,u.state===Wr||u.state===Oi||u.state===Bs)return Ms(u.connectingProxies,u.disconnectedProxies,f),this.destroy();if(l==="connect"){if(u.state===Wr||u.state===Oi||u.state===Bs)return Ms(u.connectingProxies,u.disconnectedProxies,f),f.destroy();for(var h=0;h<xb.length;h++)f.removeAllListeners(xb[h]);f.on("error",yc(u,"error")),f.on("close",yc(u,"close")),f.on("timeout",yc(u,"timeout")),f.on("parseError",yc(u,"parseError")),Ms(u.connectingProxies,u.connectedProxies,f),Ql(u),u.emit("joined","mongos",f)}else Ms(u.connectingProxies,u.disconnectedProxies,f),this.destroy();n===0&&r()}},"_handleEvent");if(n===0)return r();function o(u,l){setTimeout(function(){if(!(e.state===Wr||e.state===Oi||e.state===Bs)){var f=new s4(Object.assign({},e.s.options,{host:u.name.split(":")[0],port:parseInt(u.name.split(":")[1],10),reconnect:!1,monitoring:!1,parent:e}));u4(u,{force:!0}),c4(e.disconnectedProxies,u),Nb(f,e,["serverDescriptionChanged"]),e.emit("serverOpening",{topologyId:f.s.topologyId!==-1?f.s.topologyId:e.id,address:f.name}),f.once("connect",i(e,"connect")),f.once("close",i(e,"close")),f.once("timeout",i(e,"timeout")),f.once("error",i(e,"error")),f.once("parseError",i(e,"parseError")),Nb(f,e,["commandStarted","commandSucceeded","commandFailed"]),e.connectingProxies.push(f),f.connect(e.s.connectOptions)}},l)}s(o,"execute");for(var a=0;a<t.length;a++)o(t[a],a)}s(n4,"reconnectProxies");function BB(e,t){t=t||{},!(e.state===Wr||e.state===Oi||e.state===Bs)&&(e.haTimeoutId=setTimeout(function(){if(e.state===Wr||e.state===Oi||e.state===Bs)return;e.isConnected()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute();var r=e.connectedProxies.slice(0),n=r.length;function i(a,u,l){var f=new Date().getTime();xv(e,"serverHeartbeatStarted",{connectionId:u.name}),u.command("admin.$cmd",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(h,p){if(e.state===Wr||e.state===Oi||e.state===Bs)return Ms(e.connectedProxies,e.disconnectedProxies,u),u.destroy(),l(h,p);var g=new Date().getTime()-f;h?(xv(e,"serverHeartbeatFailed",{durationMS:g,failure:h,connectionId:u.name}),Ms(e.connectedProxies,e.disconnectedProxies,u)):(u.ismaster=p.result,u.lastIsMasterMS=g,xv(e,"serverHeartbeatSucceeded",{durationMS:g,reply:p.result,connectionId:u.name})),l(h,p)})}if(s(i,"pingServer"),r.length===0)return e.listeners("close").length>0&&e.state===Xf?e.emit("error",new Fs("no mongos proxy available")):e.emit("close",e),n4(e,e.disconnectedProxies,function(){e.state===Wr||e.state===Oi||e.state===Bs||(e.state===Xf&&t.firstConnect?(e.emit("connect",e),e.emit("fullsetup",e),e.emit("all",e)):e.isConnected()?e.emit("reconnect",e):!e.isConnected()&&e.listeners("close").length>0&&e.emit("close",e),BB(e))});for(var o=0;o<r.length;o++)i(e,r[o],function(){if(n=n-1,n===0){if(e.state===Wr||e.state===Oi||e.state===Bs)return;n4(e,e.disconnectedProxies,function(){e.state===Wr||e.state===Oi||e.state===Bs||BB(e)})}})},e.s.haInterval))}s(BB,"topologyMonitor");on.prototype.lastIsMaster=function(){return this.ismaster};on.prototype.unref=function(){Pv(this,Bs);var e=this.connectedProxies.concat(this.connectingProxies);e.forEach(function(t){t.unref()}),clearTimeout(this.haTimeoutId)};on.prototype.destroy=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{},Pv(this,Oi),this.haTimeoutId&&clearTimeout(this.haTimeoutId);let r=this.connectedProxies.concat(this.connectingProxies),n=r.length,i=s(()=>{n--,!(n>0)&&(Ql(this),xv(this,"topologyClosed",{topologyId:this.id}),Pv(this,Wr),typeof t=="function"&&t(null,null))},"serverDestroyed");if(n===0){i();return}r.forEach(o=>{this.emit("serverClosed",{topologyId:this.id,address:o.name}),u4(o,e,i),Ms(this.connectedProxies,this.disconnectedProxies,o)})};on.prototype.isConnected=function(){return this.connectedProxies.length>0};on.prototype.isDestroyed=function(){return this.state===Wr};function Bb(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.self,i=e.op,o=e.ns,a=e.ops,u=Pb(n,t.session);if(!u)return r(new Fs("no mongos proxy available"));let l=!e.retrying&&!!t.retryWrites&&t.session&&o4(n)&&!t.session.inTransaction()&&t.explain===void 0,f=s((h,p)=>{if(!h)return r(null,p);if(!a4(h,n)||!l)return h=SBe(h),r(h);if(u=Pb(n,t.session),!u)return r(h);let g=Object.assign({},e,{retrying:!0});return Bb(g,t,r)},"handler");r.operationId&&(f.operationId=r.operationId),l&&(t.session.incrementTransactionNumber(),t.willRetryWrite=l),u[i](o,a,t,f)}s(Bb,"executeWriteOperation");on.prototype.insert=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Wr)return n(new Fs(vc("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("insert",e,t,r,n);if(!this.isConnected())return n(new Fs("no mongos proxy available"));Bb({self:this,op:"insert",ns:e,ops:t},r,n)};on.prototype.update=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Wr)return n(new Fs(vc("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("update",e,t,r,n);if(!this.isConnected())return n(new Fs("no mongos proxy available"));Bb({self:this,op:"update",ns:e,ops:t},r,n)};on.prototype.remove=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Wr)return n(new Fs(vc("topology was destroyed")));if(!this.isConnected()&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("remove",e,t,r,n);if(!this.isConnected())return n(new Fs("no mongos proxy available"));Bb({self:this,op:"remove",ns:e,ops:t},r,n)};var OBe=["findAndModify","insert","update","delete"];function TBe(e){return OBe.some(t=>e[t])}s(TBe,"isWriteCommand");on.prototype.command=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={},r=r||{}),this.state===Wr)return n(new Fs(vc("topology was destroyed")));var i=this,o=Pb(i,r.session);if((o==null||!o.isConnected())&&this.s.disconnectHandler!=null)return this.s.disconnectHandler.add("command",e,t,r,n);if(o==null)return n(new Fs("no mongos proxy available"));var a=vBe(r);a.topology=i;let u=!r.retrying&&r.retryWrites&&r.session&&o4(i)&&!r.session.inTransaction()&&TBe(t),l=s((f,h)=>{if(!f)return n(null,h);if(!a4(f,i))return n(f);if(u){let p=Object.assign({},a,{retrying:!0});return this.command(e,t,p,n)}return n(f)},"cb");u&&(a.session.incrementTransactionNumber(),a.willRetryWrite=u),o.command(e,t,a,l)};on.prototype.cursor=function(e,t,r){r=r||{};let n=r.topology||this;var i=r.cursorFactory||this.s.Cursor;return new i(n,e,t,r)};on.prototype.selectServer=function(e,t,r){typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0,t={}),typeof t=="function"&&(r=t,t=e,e=void 0),t=t||{};let n=Pb(this,t.session);if(n==null){r(new Fs("server selection failed"));return}this.s.debug&&this.emit("pickedServer",null,n),r(null,n)};on.prototype.connections=function(){for(var e=[],t=0;t<this.connectedProxies.length;t++)e=e.concat(this.connectedProxies[t].connections());return e};function Ql(e){if(e.listeners("topologyDescriptionChanged").length>0){var t="Unknown";e.connectedProxies.length>0&&(t="Sharded");var r={topologyType:t,servers:[]},n=e.disconnectedProxies.concat(e.connectingProxies);r.servers=r.servers.concat(n.map(function(a){var u=a.getDescription();return u.type="Unknown",u})),r.servers=r.servers.concat(e.connectedProxies.map(function(a){var u=a.getDescription();return u.type="Mongos",u}));var i=yBe(e.topologyDescription,r),o={topologyId:e.id,previousDescription:e.topologyDescription,newDescription:r,diff:i};i.servers.length>0&&e.emit("topologyDescriptionChanged",o),e.topologyDescription=r}}s(Ql,"emitTopologyDescriptionChanged");l4.exports=on});var Mb=w((hCt,f4)=>{"use strict";function zr(e,r){var r=r||{};this._head=0,this._tail=0,this._capacity=r.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}s(zr,"Denque");zr.prototype.peekAt=s(function(t){var r=t;if(r===(r|0)){var n=this.size();if(!(r>=n||r<-n))return r<0&&(r+=n),r=this._head+r&this._capacityMask,this._list[r]}},"peekAt");zr.prototype.get=s(function(t){return this.peekAt(t)},"get");zr.prototype.peek=s(function(){if(this._head!==this._tail)return this._list[this._head]},"peek");zr.prototype.peekFront=s(function(){return this.peek()},"peekFront");zr.prototype.peekBack=s(function(){return this.peekAt(-1)},"peekBack");Object.defineProperty(zr.prototype,"length",{get:s(function(){return this.size()},"length")});zr.prototype.size=s(function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"size");zr.prototype.unshift=s(function(t){if(t===void 0)return this.size();var r=this._list.length;return this._head=this._head-1+r&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"unshift");zr.prototype.shift=s(function(){var t=this._head;if(t!==this._tail){var r=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),r}},"shift");zr.prototype.push=s(function(t){if(t===void 0)return this.size();var r=this._tail;return this._list[r]=t,this._tail=r+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},"push");zr.prototype.pop=s(function(){var t=this._tail;if(t!==this._head){var r=this._list.length;this._tail=t-1+r&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=r>>>2&&this._shrinkArray(),n}},"pop");zr.prototype.removeOne=s(function(t){var r=t;if(r===(r|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n||r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var o=this._list[r],a;if(t<n/2){for(a=t;a>0;a--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(a=n-1-t;a>0;a--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return o}}},"removeOne");zr.prototype.remove=s(function(t,r){var n=t,i,o=r;if(n===(n|0)&&this._head!==this._tail){var a=this.size(),u=this._list.length;if(!(n>=a||n<-a||r<1)){if(n<0&&(n+=a),r===1||!r)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+r>=a)return i=this.toArray(),this.clear(),i;n+r>a&&(r=a-n);var l;for(i=new Array(r),l=0;l<r;l++)i[l]=this._list[this._head+n+l&this._capacityMask];if(n=this._head+n&this._capacityMask,t+r===a){for(this._tail=this._tail-r+u&this._capacityMask,l=r;l>0;l--)this._list[n=n+1+u&this._capacityMask]=void 0;return i}if(t===0){for(this._head=this._head+r+u&this._capacityMask,l=r-1;l>0;l--)this._list[n=n+1+u&this._capacityMask]=void 0;return i}if(n<a/2){for(this._head=this._head+t+r+u&this._capacityMask,l=t;l>0;l--)this.unshift(this._list[n=n-1+u&this._capacityMask]);for(n=this._head-1+u&this._capacityMask;o>0;)this._list[n=n-1+u&this._capacityMask]=void 0,o--;t<0&&(this._tail=n)}else{for(this._tail=n,n=n+r+u&this._capacityMask,l=a-(r+t);l>0;l--)this.push(this._list[n++]);for(n=this._tail;o>0;)this._list[n=n+1+u&this._capacityMask]=void 0,o--}return this._head<2&&this._tail>1e4&&this._tail<=u>>>2&&this._shrinkArray(),i}}},"remove");zr.prototype.splice=s(function(t,r){var n=t;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var o,a,u,l=arguments.length,f=this._list.length,h=2;if(!i||n<i/2){for(a=new Array(n),o=0;o<n;o++)a[o]=this._list[this._head+o&this._capacityMask];for(r===0?(u=[],n>0&&(this._head=this._head+n+f&this._capacityMask)):(u=this.remove(n,r),this._head=this._head+n+f&this._capacityMask);l>h;)this.unshift(arguments[--l]);for(o=n;o>0;o--)this.unshift(a[o-1])}else{a=new Array(i-(n+r));var p=a.length;for(o=0;o<p;o++)a[o]=this._list[this._head+n+r+o&this._capacityMask];for(r===0?(u=[],n!=i&&(this._tail=this._head+n+f&this._capacityMask)):(u=this.remove(n,r),this._tail=this._tail-p+f&this._capacityMask);h<l;)this.push(arguments[h++]);for(o=0;o<p;o++)this.push(a[o])}return u}else return this.remove(n,r)}},"splice");zr.prototype.clear=s(function(){this._head=0,this._tail=0},"clear");zr.prototype.isEmpty=s(function(){return this._head===this._tail},"isEmpty");zr.prototype.toArray=s(function(){return this._copyArray(!1)},"toArray");zr.prototype._fromArray=s(function(t){for(var r=0;r<t.length;r++)this.push(t[r])},"_fromArray");zr.prototype._copyArray=s(function(t){var r=[],n=this._list,i=n.length,o;if(t||this._head>this._tail){for(o=this._head;o<i;o++)r.push(n[o]);for(o=0;o<this._tail;o++)r.push(n[o])}else for(o=this._head;o<this._tail;o++)r.push(n[o]);return r},"_copyArray");zr.prototype._growArray=s(function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},"_growArray");zr.prototype._shrinkArray=s(function(){this._list.length>>>=1,this._capacityMask>>>=1},"_shrinkArray");f4.exports=zr});var ZB=w((mCt,h4)=>{"use strict";var WB=class WB{constructor(t,r,n,i){Object.assign(this,{topologyId:t,address:r,previousDescription:n,newDescription:i})}};s(WB,"ServerDescriptionChangedEvent");var MB=WB,zB=class zB{constructor(t,r){Object.assign(this,{topologyId:t,address:r})}};s(zB,"ServerOpeningEvent");var FB=zB,HB=class HB{constructor(t,r){Object.assign(this,{topologyId:t,address:r})}};s(HB,"ServerClosedEvent");var qB=HB,VB=class VB{constructor(t,r,n){Object.assign(this,{topologyId:t,previousDescription:r,newDescription:n})}};s(VB,"TopologyDescriptionChangedEvent");var LB=VB,YB=class YB{constructor(t){Object.assign(this,{topologyId:t})}};s(YB,"TopologyOpeningEvent");var UB=YB,KB=class KB{constructor(t){Object.assign(this,{topologyId:t})}};s(KB,"TopologyClosedEvent");var jB=KB,XB=class XB{constructor(t){Object.assign(this,{connectionId:t})}};s(XB,"ServerHeartbeatStartedEvent");var $B=XB,JB=class JB{constructor(t,r,n){Object.assign(this,{connectionId:n,duration:t,reply:r})}};s(JB,"ServerHeartbeatSucceededEvent");var kB=JB,QB=class QB{constructor(t,r,n){Object.assign(this,{connectionId:n,duration:t,failure:r})}};s(QB,"ServerHeartbeatFailedEvent");var GB=QB;h4.exports={ServerDescriptionChangedEvent:MB,ServerOpeningEvent:FB,ServerClosedEvent:qB,TopologyDescriptionChangedEvent:LB,TopologyOpeningEvent:UB,TopologyClosedEvent:jB,ServerHeartbeatStartedEvent:$B,ServerHeartbeatSucceededEvent:kB,ServerHeartbeatFailedEvent:GB}});var Bv=w((yCt,e1)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?e1.exports={nextTick:ABe}:e1.exports=process;function ABe(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,a;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(s(function(){e.call(null,t)},"afterTickOne"));case 3:return process.nextTick(s(function(){e.call(null,t,r)},"afterTickTwo"));case 4:return process.nextTick(s(function(){e.call(null,t,r,n)},"afterTickThree"));default:for(o=new Array(i-1),a=0;a<o.length;)o[a++]=arguments[a];return process.nextTick(s(function(){e.apply(null,o)},"afterTick"))}}s(ABe,"nextTick")});var m4=w((_Ct,p4)=>{var IBe={}.toString;p4.exports=Array.isArray||function(e){return IBe.call(e)=="[object Array]"}});var t1=w((SCt,g4)=>{g4.exports=require("stream")});var Jf=w(ui=>{function DBe(e){return Array.isArray?Array.isArray(e):Fb(e)==="[object Array]"}s(DBe,"isArray");ui.isArray=DBe;function RBe(e){return typeof e=="boolean"}s(RBe,"isBoolean");ui.isBoolean=RBe;function NBe(e){return e===null}s(NBe,"isNull");ui.isNull=NBe;function xBe(e){return e==null}s(xBe,"isNullOrUndefined");ui.isNullOrUndefined=xBe;function PBe(e){return typeof e=="number"}s(PBe,"isNumber");ui.isNumber=PBe;function BBe(e){return typeof e=="string"}s(BBe,"isString");ui.isString=BBe;function MBe(e){return typeof e=="symbol"}s(MBe,"isSymbol");ui.isSymbol=MBe;function FBe(e){return e===void 0}s(FBe,"isUndefined");ui.isUndefined=FBe;function qBe(e){return Fb(e)==="[object RegExp]"}s(qBe,"isRegExp");ui.isRegExp=qBe;function LBe(e){return typeof e=="object"&&e!==null}s(LBe,"isObject");ui.isObject=LBe;function UBe(e){return Fb(e)==="[object Date]"}s(UBe,"isDate");ui.isDate=UBe;function jBe(e){return Fb(e)==="[object Error]"||e instanceof Error}s(jBe,"isError");ui.isError=jBe;function $Be(e){return typeof e=="function"}s($Be,"isFunction");ui.isFunction=$Be;function kBe(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}s(kBe,"isPrimitive");ui.isPrimitive=kBe;ui.isBuffer=require("buffer").Buffer.isBuffer;function Fb(e){return Object.prototype.toString.call(e)}s(Fb,"objectToString")});var y4=w((wCt,r1)=>{typeof Object.create=="function"?r1.exports=s(function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))},"inherits"):r1.exports=s(function(t,r){if(r){t.super_=r;var n=s(function(){},"TempCtor");n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}},"inherits")});var Qf=w((OCt,i1)=>{try{if(n1=require("util"),typeof n1.inherits!="function")throw"";i1.exports=n1.inherits}catch{i1.exports=y4()}var n1});var _4=w((TCt,s1)=>{"use strict";function GBe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(GBe,"_classCallCheck");var v4=Ci().Buffer,Mv=require("util");function WBe(e,t,r){e.copy(t,r)}s(WBe,"copyBuffer");s1.exports=function(){function e(){GBe(this,e),this.head=null,this.tail=null,this.length=0}return s(e,"BufferList"),e.prototype.push=s(function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},"push"),e.prototype.unshift=s(function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},"unshift"),e.prototype.shift=s(function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},"shift"),e.prototype.clear=s(function(){this.head=this.tail=null,this.length=0},"clear"),e.prototype.join=s(function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},"join"),e.prototype.concat=s(function(r){if(this.length===0)return v4.alloc(0);for(var n=v4.allocUnsafe(r>>>0),i=this.head,o=0;i;)WBe(i.data,n,o),o+=i.data.length,i=i.next;return n},"concat"),e}();Mv&&Mv.inspect&&Mv.inspect.custom&&(s1.exports.prototype[Mv.inspect.custom]=function(){var e=Mv.inspect({length:this.length});return this.constructor.name+" "+e})});var o1=w((ICt,S4)=>{"use strict";var qb=Bv();function zBe(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,qb.nextTick(Lb,this,e)):qb.nextTick(Lb,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,qb.nextTick(Lb,r,o)):qb.nextTick(Lb,r,o):t&&t(o)}),this)}s(zBe,"destroy");function HBe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}s(HBe,"undestroy");function Lb(e,t){e.emit("error",t)}s(Lb,"emitErrorNT");S4.exports={destroy:zBe,undestroy:HBe}});var C4=w((RCt,E4)=>{E4.exports=require("util").deprecate});var u1=w((NCt,R4)=>{"use strict";var Zl=Bv();R4.exports=an;function b4(e){var t=this;this.next=null,this.entry=null,this.finish=function(){l1e(t,e)}}s(b4,"CorkedRequest");var VBe=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Zl.nextTick,Zf;an.WritableState=qv;var O4=Object.create(Jf());O4.inherits=Qf();var YBe={deprecate:C4()},T4=t1(),jb=Ci().Buffer,KBe=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function XBe(e){return jb.from(e)}s(XBe,"_uint8ArrayToBuffer");function JBe(e){return jb.isBuffer(e)||e instanceof KBe}s(JBe,"_isUint8Array");var A4=o1();O4.inherits(an,T4);function QBe(){}s(QBe,"nop");function qv(e,t){Zf=Zf||ed(),e=e||{};var r=t instanceof Zf;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=e.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){s1e(t,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new b4(this)}s(qv,"WritableState");qv.prototype.getBuffer=s(function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},"getBuffer");(function(){try{Object.defineProperty(qv.prototype,"buffer",{get:YBe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Ub;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ub=Function.prototype[Symbol.hasInstance],Object.defineProperty(an,Symbol.hasInstance,{value:function(e){return Ub.call(this,e)?!0:this!==an?!1:e&&e._writableState instanceof qv}})):Ub=s(function(e){return e instanceof this},"realHasInstance");function an(e){if(Zf=Zf||ed(),!Ub.call(an,this)&&!(this instanceof Zf))return new an(e);this._writableState=new qv(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),T4.call(this)}s(an,"Writable");an.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function ZBe(e,t){var r=new Error("write after end");e.emit("error",r),Zl.nextTick(t,r)}s(ZBe,"writeAfterEnd");function e1e(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Zl.nextTick(n,o),i=!1),i}s(e1e,"validChunk");an.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&JBe(e);return o&&!jb.isBuffer(e)&&(e=XBe(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=QBe),n.ended?ZBe(this,r):(o||e1e(this,n,e,r))&&(n.pendingcb++,i=r1e(this,n,o,e,t,r)),i};an.prototype.cork=function(){var e=this._writableState;e.corked++};an.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&I4(this,e))};an.prototype.setDefaultEncoding=s(function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},"setDefaultEncoding");function t1e(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=jb.from(t,r)),t}s(t1e,"decodeChunk");Object.defineProperty(an.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function r1e(e,t,r,n,i,o){if(!r){var a=t1e(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var u=t.objectMode?1:n.length;t.length+=u;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else a1(e,t,!1,u,n,i,o);return l}s(r1e,"writeOrBuffer");function a1(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}s(a1,"doWrite");function n1e(e,t,r,n,i){--t.pendingcb,r?(Zl.nextTick(i,n),Zl.nextTick(Fv,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),Fv(e,t))}s(n1e,"onwriteError");function i1e(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}s(i1e,"onwriteStateUpdate");function s1e(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(i1e(r),t)n1e(e,r,n,t,i);else{var o=D4(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&I4(e,r),n?VBe(w4,e,r,o,i):w4(e,r,o,i)}}s(s1e,"onwrite");function w4(e,t,r,n){r||o1e(e,t),t.pendingcb--,n(),Fv(e,t)}s(w4,"afterWrite");function o1e(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}s(o1e,"onwriteDrain");function I4(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,a1(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new b4(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,f=r.encoding,h=r.callback,p=t.objectMode?1:l.length;if(a1(e,t,!1,p,l,f,h),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}s(I4,"clearBuffer");an.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};an.prototype._writev=null;an.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||c1e(this,n,r)};function D4(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}s(D4,"needFinish");function a1e(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Fv(e,t)})}s(a1e,"callFinal");function u1e(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Zl.nextTick(a1e,e,t)):(t.prefinished=!0,e.emit("prefinish")))}s(u1e,"prefinish");function Fv(e,t){var r=D4(t);return r&&(u1e(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}s(Fv,"finishMaybe");function c1e(e,t,r){t.ending=!0,Fv(e,t),r&&(t.finished?Zl.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}s(c1e,"endWritable");function l1e(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}s(l1e,"onCorkedFinish");Object.defineProperty(an.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});an.prototype.destroy=A4.destroy;an.prototype._undestroy=A4.undestroy;an.prototype._destroy=function(e,t){this.end(),t(e)}});var ed=w((PCt,B4)=>{"use strict";var N4=Bv(),d1e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};B4.exports=Wa;var x4=Object.create(Jf());x4.inherits=Qf();var P4=d1(),l1=u1();x4.inherits(Wa,P4);for(c1=d1e(l1.prototype),$b=0;$b<c1.length;$b++)kb=c1[$b],Wa.prototype[kb]||(Wa.prototype[kb]=l1.prototype[kb]);var c1,kb,$b;function Wa(e){if(!(this instanceof Wa))return new Wa(e);P4.call(this,e),l1.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f1e)}s(Wa,"Duplex");Object.defineProperty(Wa.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f1e(){this.allowHalfOpen||this._writableState.ended||N4.nextTick(h1e,this)}s(f1e,"onend");function h1e(e){e.end()}s(h1e,"onEndNT");Object.defineProperty(Wa.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});Wa.prototype._destroy=function(e,t){this.push(null),this.end(),N4.nextTick(t,e)}});var p1=w(F4=>{"use strict";var h1=Ci().Buffer,M4=h1.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p1e(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}s(p1e,"_normalizeEncoding");function m1e(e){var t=p1e(e);if(typeof t!="string"&&(h1.isEncoding===M4||!M4(e)))throw new Error("Unknown encoding: "+e);return t||e}s(m1e,"normalizeEncoding");F4.StringDecoder=Lv;function Lv(e){this.encoding=m1e(e);var t;switch(this.encoding){case"utf16le":this.text=E1e,this.end=C1e,t=4;break;case"utf8":this.fillLast=v1e,t=4;break;case"base64":this.text=w1e,this.end=b1e,t=3;break;default:this.write=O1e,this.end=T1e;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=h1.allocUnsafe(t)}s(Lv,"StringDecoder");Lv.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Lv.prototype.end=S1e;Lv.prototype.text=_1e;Lv.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function f1(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}s(f1,"utf8CheckByte");function g1e(e,t,r){var n=t.length-1;if(n<r)return 0;var i=f1(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=f1(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=f1(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}s(g1e,"utf8CheckIncomplete");function y1e(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}s(y1e,"utf8CheckExtraBytes");function v1e(e){var t=this.lastTotal-this.lastNeed,r=y1e(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}s(v1e,"utf8FillLast");function _1e(e,t){var r=g1e(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}s(_1e,"utf8Text");function S1e(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}s(S1e,"utf8End");function E1e(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}s(E1e,"utf16Text");function C1e(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}s(C1e,"utf16End");function w1e(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}s(w1e,"base64Text");function b1e(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}s(b1e,"base64End");function O1e(e){return e.toString(this.encoding)}s(O1e,"simpleWrite");function T1e(e){return e&&e.length?this.write(e):""}s(T1e,"simpleEnd")});var d1=w((LCt,Y4)=>{"use strict";var th=Bv();Y4.exports=Er;var A1e=m4(),Uv;Er.ReadableState=G4;var qCt=require("events").EventEmitter,j4=s(function(e,t){return e.listeners(t).length},"EElistenerCount"),_1=t1(),jv=Ci().Buffer,I1e=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function D1e(e){return jv.from(e)}s(D1e,"_uint8ArrayToBuffer");function R1e(e){return jv.isBuffer(e)||e instanceof I1e}s(R1e,"_isUint8Array");var $4=Object.create(Jf());$4.inherits=Qf();var m1=require("util"),Jt=void 0;m1&&m1.debuglog?Jt=m1.debuglog("stream"):Jt=s(function(){},"debug");var N1e=_4(),k4=o1(),eh;$4.inherits(Er,_1);var g1=["error","close","destroy","pause","resume"];function x1e(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):A1e(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}s(x1e,"prependListener");function G4(e,t){Uv=Uv||ed(),e=e||{};var r=t instanceof Uv;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new N1e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(eh||(eh=p1().StringDecoder),this.decoder=new eh(e.encoding),this.encoding=e.encoding)}s(G4,"ReadableState");function Er(e){if(Uv=Uv||ed(),!(this instanceof Er))return new Er(e);this._readableState=new G4(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),_1.call(this)}s(Er,"Readable");Object.defineProperty(Er.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Er.prototype.destroy=k4.destroy;Er.prototype._undestroy=k4.undestroy;Er.prototype._destroy=function(e,t){this.push(null),t(e)};Er.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=jv.from(e,t),t=""),n=!0),W4(this,e,t,!1,n)};Er.prototype.unshift=function(e){return W4(this,e,null,!0,!1)};function W4(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,F1e(e,o);else{var a;i||(a=P1e(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==jv.prototype&&(t=D1e(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):y1(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?y1(e,o,t,!1):z4(e,o)):y1(e,o,t,!1))):n||(o.reading=!1)}return B1e(o)}s(W4,"readableAddChunk");function y1(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Gb(e)),z4(e,t)}s(y1,"addChunk");function P1e(e,t){var r;return!R1e(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}s(P1e,"chunkInvalid");function B1e(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}s(B1e,"needMoreData");Er.prototype.isPaused=function(){return this._readableState.flowing===!1};Er.prototype.setEncoding=function(e){return eh||(eh=p1().StringDecoder),this._readableState.decoder=new eh(e),this._readableState.encoding=e,this};var q4=8388608;function M1e(e){return e>=q4?e=q4:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}s(M1e,"computeNewHighWaterMark");function L4(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=M1e(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}s(L4,"howMuchToRead");Er.prototype.read=function(e){Jt("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Jt("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?v1(this):Gb(this),null;if(e=L4(e,t),e===0&&t.ended)return t.length===0&&v1(this),null;var n=t.needReadable;Jt("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,Jt("length less than watermark",n)),t.ended||t.reading?(n=!1,Jt("reading or ended",n)):n&&(Jt("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=L4(r,t)));var i;return e>0?i=H4(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&v1(this)),i!==null&&this.emit("data",i),i};function F1e(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Gb(e)}}s(F1e,"onEofChunk");function Gb(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Jt("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?th.nextTick(U4,e):U4(e))}s(Gb,"emitReadable");function U4(e){Jt("emit readable"),e.emit("readable"),S1(e)}s(U4,"emitReadable_");function z4(e,t){t.readingMore||(t.readingMore=!0,th.nextTick(q1e,e,t))}s(z4,"maybeReadMore");function q1e(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Jt("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}s(q1e,"maybeReadMore_");Er.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};Er.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,Jt("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?u:O;n.endEmitted?th.nextTick(o):r.once("end",o),e.on("unpipe",a);function a(N,F){Jt("onunpipe"),N===r&&F&&F.hasUnpiped===!1&&(F.hasUnpiped=!0,h())}s(a,"onunpipe");function u(){Jt("onend"),e.end()}s(u,"onend");var l=L1e(r);e.on("drain",l);var f=!1;function h(){Jt("cleanup"),e.removeListener("close",C),e.removeListener("finish",D),e.removeListener("drain",l),e.removeListener("error",_),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",O),r.removeListener("data",g),f=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}s(h,"cleanup");var p=!1;r.on("data",g);function g(N){Jt("ondata"),p=!1;var F=e.write(N);F===!1&&!p&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&V4(n.pipes,e)!==-1)&&!f&&(Jt("false write response, pause",n.awaitDrain),n.awaitDrain++,p=!0),r.pause())}s(g,"ondata");function _(N){Jt("onerror",N),O(),e.removeListener("error",_),j4(e,"error")===0&&e.emit("error",N)}s(_,"onerror"),x1e(e,"error",_);function C(){e.removeListener("finish",D),O()}s(C,"onclose"),e.once("close",C);function D(){Jt("onfinish"),e.removeListener("close",C),O()}s(D,"onfinish"),e.once("finish",D);function O(){Jt("unpipe"),r.unpipe(e)}return s(O,"unpipe"),e.emit("pipe",r),n.flowing||(Jt("pipe resume"),r.resume()),e};function L1e(e){return function(){var t=e._readableState;Jt("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&j4(e,"data")&&(t.flowing=!0,S1(e))}}s(L1e,"pipeOnDrain");Er.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=V4(t.pipes,e);return a===-1?this:(t.pipes.splice(a,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Er.prototype.on=function(e,t){var r=_1.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Gb(this):th.nextTick(U1e,this))}return r};Er.prototype.addListener=Er.prototype.on;function U1e(e){Jt("readable nexttick read 0"),e.read(0)}s(U1e,"nReadingNextTick");Er.prototype.resume=function(){var e=this._readableState;return e.flowing||(Jt("resume"),e.flowing=!0,j1e(this,e)),this};function j1e(e,t){t.resumeScheduled||(t.resumeScheduled=!0,th.nextTick($1e,e,t))}s(j1e,"resume");function $1e(e,t){t.reading||(Jt("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S1(e),t.flowing&&!t.reading&&e.read(0)}s($1e,"resume_");Er.prototype.pause=function(){return Jt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Jt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function S1(e){var t=e._readableState;for(Jt("flow",t.flowing);t.flowing&&e.read()!==null;);}s(S1,"flow");Er.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(Jt("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&t.push(a)}t.push(null)}),e.on("data",function(a){if(Jt("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var u=t.push(a);u||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(a){return function(){return e[a].apply(e,arguments)}}(i));for(var o=0;o<g1.length;o++)e.on(g1[o],this.emit.bind(this,g1[o]));return this._read=function(a){Jt("wrapped _read",a),n&&(n=!1,e.resume())},this};Object.defineProperty(Er.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Er._fromList=H4;function H4(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=k1e(e,t.buffer,t.decoder),r}s(H4,"fromList");function k1e(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?G1e(e,t):W1e(e,t),n}s(k1e,"fromListPartial");function G1e(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),e-=a,e===0){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}s(G1e,"copyFromBufferString");function W1e(e,t){var r=jv.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),e-=a,e===0){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}s(W1e,"copyFromBuffer");function v1(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,th.nextTick(z1e,t,e))}s(v1,"endReadable");function z1e(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}s(z1e,"endReadableNT");function V4(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}s(V4,"indexOf")});var E1=w((jCt,J4)=>{"use strict";J4.exports=za;var Wb=ed(),X4=Object.create(Jf());X4.inherits=Qf();X4.inherits(za,Wb);function H1e(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}s(H1e,"afterTransform");function za(e){if(!(this instanceof za))return new za(e);Wb.call(this,e),this._transformState={afterTransform:H1e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",V1e)}s(za,"Transform");function V1e(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){K4(e,t,r)}):K4(this,null,null)}s(V1e,"prefinish");za.prototype.push=function(e,t){return this._transformState.needTransform=!1,Wb.prototype.push.call(this,e,t)};za.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};za.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};za.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};za.prototype._destroy=function(e,t){var r=this;Wb.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function K4(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}s(K4,"done")});var tY=w((kCt,eY)=>{"use strict";eY.exports=$v;var Q4=E1(),Z4=Object.create(Jf());Z4.inherits=Qf();Z4.inherits($v,Q4);function $v(e){if(!(this instanceof $v))return new $v(e);Q4.call(this,e)}s($v,"PassThrough");$v.prototype._transform=function(e,t,r){r(null,e)}});var rY=w((jn,zb)=>{var zo=require("stream");process.env.READABLE_STREAM==="disable"&&zo?(zb.exports=zo,jn=zb.exports=zo.Readable,jn.Readable=zo.Readable,jn.Writable=zo.Writable,jn.Duplex=zo.Duplex,jn.Transform=zo.Transform,jn.PassThrough=zo.PassThrough,jn.Stream=zo):(jn=zb.exports=d1(),jn.Stream=zo||jn,jn.Readable=jn,jn.Writable=u1(),jn.Duplex=ed(),jn.Transform=E1(),jn.PassThrough=tY())});var iY=w((WCt,nY)=>{"use strict";var C1=rY().Duplex,Y1e=require("util"),Ho=Ci().Buffer;function ir(e){if(!(this instanceof ir))return new ir(e);if(this._bufs=[],this.length=0,typeof e=="function"){this._callback=e;var t=s(function(n){this._callback&&(this._callback(n),this._callback=null)},"piper").bind(this);this.on("pipe",s(function(n){n.on("error",t)},"onPipe")),this.on("unpipe",s(function(n){n.removeListener("error",t)},"onUnpipe"))}else this.append(e);C1.call(this)}s(ir,"BufferList");Y1e.inherits(ir,C1);ir.prototype._offset=s(function(t){var r=0,n=0,i;if(t===0)return[0,0];for(;n<this._bufs.length;n++){if(i=r+this._bufs[n].length,t<i||n==this._bufs.length-1)return[n,t-r];r=i}},"_offset");ir.prototype._reverseOffset=function(e){for(var t=e[0],r=e[1],n=0;n<t;n++)r+=this._bufs[n].length;return r};ir.prototype.append=s(function(t){var r=0;if(Ho.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;r<t.length;r++)this.append(t[r]);else if(t instanceof ir)for(;r<t._bufs.length;r++)this.append(t._bufs[r]);else t!=null&&(typeof t=="number"&&(t=t.toString()),this._appendBuffer(Ho.from(t)));return this},"append");ir.prototype._appendBuffer=s(function(t){this._bufs.push(t),this.length+=t.length},"appendBuffer");ir.prototype._write=s(function(t,r,n){this._appendBuffer(t),typeof n=="function"&&n()},"_write");ir.prototype._read=s(function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},"_read");ir.prototype.end=s(function(t){C1.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},"end");ir.prototype.get=s(function(t){if(!(t>this.length||t<0)){var r=this._offset(t);return this._bufs[r[0]][r[1]]}},"get");ir.prototype.slice=s(function(t,r){return typeof t=="number"&&t<0&&(t+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,t,r)},"slice");ir.prototype.copy=s(function(t,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return t||Ho.alloc(0);var o=!!t,a=this._offset(n),u=i-n,l=u,f=o&&r||0,h=a[1],p,g;if(n===0&&i==this.length){if(!o)return this._bufs.length===1?this._bufs[0]:Ho.concat(this._bufs,this.length);for(g=0;g<this._bufs.length;g++)this._bufs[g].copy(t,f),f+=this._bufs[g].length;return t}if(l<=this._bufs[a[0]].length-h)return o?this._bufs[a[0]].copy(t,r,h,h+l):this._bufs[a[0]].slice(h,h+l);for(o||(t=Ho.allocUnsafe(u)),g=a[0];g<this._bufs.length;g++){if(p=this._bufs[g].length-h,l>p)this._bufs[g].copy(t,f,h),f+=p;else{this._bufs[g].copy(t,f,h,h+l),f+=p;break}l-=p,h&&(h=0)}return t.length>f?t.slice(0,f):t},"copy");ir.prototype.shallowSlice=s(function(t,r){if(t=t||0,r=typeof r!="number"?this.length:r,t<0&&(t+=this.length),r<0&&(r+=this.length),t===r)return new ir;var n=this._offset(t),i=this._offset(r),o=this._bufs.slice(n[0],i[0]+1);return i[1]==0?o.pop():o[o.length-1]=o[o.length-1].slice(0,i[1]),n[1]!=0&&(o[0]=o[0].slice(n[1])),new ir(o)},"shallowSlice");ir.prototype.toString=s(function(t,r,n){return this.slice(r,n).toString(t)},"toString");ir.prototype.consume=s(function(t){if(t=Math.trunc(t),Number.isNaN(t)||t<=0)return this;for(;this._bufs.length;)if(t>=this._bufs[0].length)t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}return this},"consume");ir.prototype.duplicate=s(function(){for(var t=0,r=new ir;t<this._bufs.length;t++)r.append(this._bufs[t]);return r},"duplicate");ir.prototype.destroy=s(function(){this._bufs.length=0,this.length=0,this.push(null)},"destroy");ir.prototype.indexOf=function(e,t,r){if(r===void 0&&typeof t=="string"&&(r=t,t=void 0),typeof e=="function"||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof e=="number"?e=Ho.from([e]):typeof e=="string"?e=Ho.from(e,r):e instanceof ir?e=e.slice():Ho.isBuffer(e)||(e=Ho.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;var n=this._offset(t),i=n[0],o=n[1];for(i;i<this._bufs.length;i++){for(var a=this._bufs[i];o<a.length;){var u=a.length-o;if(u>=e.length){var l=a.indexOf(e,o);if(l!==-1)return this._reverseOffset([i,l]);o=a.length-e.length+1}else{var f=this._reverseOffset([i,o]);if(this._match(f,e))return f;o++}}o=0}return-1};ir.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0};(function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)(function(r){e[r]===null?ir.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:ir.prototype[r]=function(n){return this.slice(n,n+e[r])[r](0)}})(t)})();nY.exports=ir});var dY=w((HCt,lY)=>{"use strict";var K1e=require("stream").Duplex,X1e=iY(),sY=ye().MongoParseError,J1e=qa().decompress,oY=ds().Response,aY=Ll().BinMsg,Q1e=ye().MongoError,Z1e=nr().opcodes.OP_COMPRESSED,uY=nr().opcodes.OP_MSG,_c=nr().MESSAGE_HEADER_SIZE,cY=nr().COMPRESSION_DETAILS_SIZE,eMe=nr().opcodes,tMe=qa().compress,rMe=qa().compressorIDs,nMe=qa().uncompressibleCommands,iMe=Ll().Msg,sMe=1024*1024*16*4,w1=Symbol("buffer"),T1=class T1 extends K1e{constructor(t){t=t||{},super(t),this.bson=t.bson,this.maxBsonMessageSize=t.maxBsonMessageSize||sMe,this[w1]=new X1e}_write(t,r,n){this[w1].append(t),O1(this,n)}_read(){}writeCommand(t,r){if(!(r&&!!r.agreedCompressor)||!oMe(t)){let u=t.toBin();this.push(Array.isArray(u)?Buffer.concat(u):u);return}let i=Buffer.concat(t.toBin()),o=i.slice(_c),a=i.readInt32LE(12);tMe({options:r},o,(u,l)=>{if(u){r.cb(u,null);return}let f=Buffer.alloc(_c);f.writeInt32LE(_c+cY+l.length,0),f.writeInt32LE(t.requestId,4),f.writeInt32LE(0,8),f.writeInt32LE(eMe.OP_COMPRESSED,12);let h=Buffer.alloc(cY);h.writeInt32LE(a,0),h.writeInt32LE(o.length,4),h.writeUInt8(rMe[r.agreedCompressor],8),this.push(Buffer.concat([f,h,l]))})}};s(T1,"MessageStream");var b1=T1;function oMe(e){let t=e instanceof iMe?e.command:e.query,r=Object.keys(t)[0];return!nMe.has(r)}s(oMe,"canCompress");function O1(e,t){let r=e[w1];if(r.length<4){t();return}let n=r.readInt32LE(0);if(n<0){t(new sY(`Invalid message size: ${n}`));return}if(n>e.maxBsonMessageSize){t(new sY(`Invalid message size: ${n}, max allowed: ${e.maxBsonMessageSize}`));return}if(n>r.length){t();return}let i=r.slice(0,n);r.consume(n);let o={length:i.readInt32LE(0),requestId:i.readInt32LE(4),responseTo:i.readInt32LE(8),opCode:i.readInt32LE(12)},a=o.opCode===uY?aY:oY,u=e.responseOptions;if(o.opCode!==Z1e){let h=i.slice(_c);e.emit("message",new a(e.bson,i,o,h,u)),r.length>=4?O1(e,t):t();return}o.fromCompressed=!0,o.opCode=i.readInt32LE(_c),o.length=i.readInt32LE(_c+4);let l=i[_c+8],f=i.slice(_c+9);a=o.opCode===uY?aY:oY,J1e(l,f,(h,p)=>{if(h){t(h);return}if(p.length!==o.length){t(new Q1e("Decompressing a compressed message from the server failed. The message is corrupt."));return}e.emit("message",new a(e.bson,i,o,p,u)),r.length>=4?O1(e,t):t()})}s(O1,"processIncomingData");lY.exports=b1});var pY=w((YCt,hY)=>{"use strict";var fY=ql().parseServerType,aMe=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","__nodejs_mock_server__"],I1=class I1{constructor(t,r){this.address=t,this.type=fY(null),this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.compressors=r&&r.compression&&Array.isArray(r.compression.compressors)?r.compression.compressors:[]}receiveResponse(t){this.type=fY(t),aMe.forEach(r=>{typeof t[r]<"u"&&(this[r]=t[r])}),t.compression&&(this.compressor=this.compressors.filter(r=>t.compression.indexOf(r)!==-1)[0])}};s(I1,"StreamDescription");var A1=I1;hY.exports={StreamDescription:A1}});var M1=w((XCt,vY)=>{"use strict";var uMe=require("events"),cMe=dY(),mY=ye().MongoError,lMe=ye().MongoNetworkError,dMe=ye().MongoNetworkTimeoutError,fMe=ye().MongoWriteConcernError,hMe=Hw(),pMe=pY().StreamDescription,td=_B(),Hb=CP(),mMe=uc().updateSessionFromResponse,gMe=Le().uuidV4,R1=$().now,yMe=$().calculateDurationInMs,Sc=Symbol("stream"),Ha=Symbol("queue"),rh=Symbol("messageStream"),gY=Symbol("generation"),D1=Symbol("lastUseTime"),P1=Symbol("clusterTime"),Ec=Symbol("description"),yY=Symbol("ismaster"),N1=Symbol("autoEncrypter"),B1=class B1 extends uMe{constructor(t,r){super(r),this.id=r.id,this.address=_Me(t),this.bson=r.bson,this.socketTimeout=typeof r.socketTimeout=="number"?r.socketTimeout:0,this.host=r.host||"localhost",this.port=r.port||27017,this.monitorCommands=typeof r.monitorCommands=="boolean"?r.monitorCommands:!1,this.serverApi=r.serverApi,this.closed=!1,this.destroyed=!1,this[Ec]=new pMe(this.address,r),this[gY]=r.generation,this[D1]=R1(),r.autoEncrypter&&(this[N1]=r.autoEncrypter),this[Ha]=new Map,this[rh]=new cMe(r),this[rh].on("message",vMe(this)),this[Sc]=t,t.on("error",()=>{}),this[rh].on("error",n=>this.handleIssue({destroy:n})),t.on("close",()=>this.handleIssue({isClose:!0})),t.on("timeout",()=>this.handleIssue({isTimeout:!0,destroy:!0})),t.pipe(this[rh]),this[rh].pipe(t)}get description(){return this[Ec]}get ismaster(){return this[yY]}set ismaster(t){this[Ec].receiveResponse(t),this[yY]=t}get generation(){return this[gY]||0}get idleTime(){return yMe(this[D1])}get clusterTime(){return this[P1]}get stream(){return this[Sc]}markAvailable(){this[D1]=R1()}handleIssue(t){if(!this.closed){t.destroy&&this[Sc].destroy(typeof t.destroy=="boolean"?void 0:t.destroy),this.closed=!0;for(let r of this[Ha]){let n=r[1];t.isTimeout?n.cb(new dMe(`connection ${this.id} to ${this.address} timed out`,{beforeHandshake:this.ismaster==null})):t.isClose?n.cb(new lMe(`connection ${this.id} to ${this.address} closed`)):n.cb(typeof t.destroy=="boolean"?void 0:t.destroy)}this[Ha].clear(),this.emit("close")}}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({force:!1},t),this[Sc]==null||this.destroyed){this.destroyed=!0,typeof r=="function"&&r();return}if(t.force){this[Sc].destroy(),this.destroyed=!0,typeof r=="function"&&r();return}this[Sc].end(n=>{this.destroyed=!0,typeof r=="function"&&r(n)})}applyApiVersion(t){return this.serverApi&&(t.serverApi=this.serverApi),t}command(t,r,n,i){typeof n=="function"&&(i=n,n={}),td.command(rd(this),t,r,this.applyApiVersion(n),i)}query(t,r,n,i,o){td.query(rd(this),t,r,n,this.applyApiVersion(i),o)}getMore(t,r,n,i,o){td.getMore(rd(this),t,r,n,this.applyApiVersion(i),o)}killCursors(t,r,n){td.killCursors(rd(this),t,r,this.applyApiVersion({}),n)}insert(t,r,n,i){td.insert(rd(this),t,r,this.applyApiVersion(n),i)}update(t,r,n,i){td.update(rd(this),t,r,this.applyApiVersion(n),i)}remove(t,r,n,i){td.remove(rd(this),t,r,this.applyApiVersion(n),i)}};s(B1,"Connection");var x1=B1;function rd(e){let t={description:e.description,clusterTime:e[P1],s:{bson:e.bson,pool:{write:SMe.bind(e),isConnected:()=>!0}}};return e[N1]&&(t.autoEncrypter=e[N1]),t}s(rd,"makeServerTrampoline");function vMe(e){return s(function(r){if(e.emit("message",r),!e[Ha].has(r.responseTo))return;let n=e[Ha].get(r.responseTo),i=n.cb;e[Ha].delete(r.responseTo),r.moreToCome?e[Ha].set(r.requestId,n):n.socketTimeoutOverride&&e[Sc].setTimeout(e.socketTimeout);try{r.parse(n)}catch(o){i(new mY(o));return}if(r.documents[0]){let o=r.documents[0],a=n.session;if(a&&mMe(a,o),o.$clusterTime&&(e[P1]=o.$clusterTime,e.emit("clusterTimeReceived",o.$clusterTime)),n.command){if(o.writeConcernError){i(new fMe(o.writeConcernError,o));return}if(o.ok===0||o.$err||o.errmsg||o.code){i(new mY(o));return}}}i(void 0,new hMe(n.fullResult?r:r.documents[0],e,r))},"messageHandler")}s(vMe,"messageHandler");function _Me(e){return typeof e.address=="function"?`${e.remoteAddress}:${e.remotePort}`:gMe().toString("hex")}s(_Me,"streamIdentifier");function SMe(e,t,r){typeof t=="function"&&(r=t),t=t||{};let n={requestId:e.requestId,cb:r,session:t.session,fullResult:typeof t.fullResult=="boolean"?t.fullResult:!1,noResponse:typeof t.noResponse=="boolean"?t.noResponse:!1,documentsReturnedIn:t.documentsReturnedIn,command:!!t.command,promoteLongs:typeof t.promoteLongs=="boolean"?t.promoteLongs:!0,promoteValues:typeof t.promoteValues=="boolean"?t.promoteValues:!0,promoteBuffers:typeof t.promoteBuffers=="boolean"?t.promoteBuffers:!1,bsonRegExp:typeof t.bsonRegExp=="boolean"?t.bsonRegExp:!1,raw:typeof t.raw=="boolean"?t.raw:!1};this[Ec]&&this[Ec].compressor&&(n.agreedCompressor=this[Ec].compressor,this[Ec].zlibCompressionLevel&&(n.zlibCompressionLevel=this[Ec].zlibCompressionLevel)),typeof t.socketTimeout=="number"&&(n.socketTimeoutOverride=!0,this[Sc].setTimeout(t.socketTimeout)),this.monitorCommands&&(this.emit("commandStarted",new Hb.CommandStartedEvent(this,e)),n.started=R1(),n.cb=(i,o)=>{i?this.emit("commandFailed",new Hb.CommandFailedEvent(this,e,i,n.started)):o&&o.result&&(o.result.ok===0||o.result.$err)?this.emit("commandFailed",new Hb.CommandFailedEvent(this,e,o.result,n.started)):this.emit("commandSucceeded",new Hb.CommandSucceededEvent(this,e,o,n.started)),typeof r=="function"&&r(i,o)}),n.noResponse||this[Ha].set(n.requestId,n);try{this[rh].writeCommand(e,n)}catch(i){if(!n.noResponse){this[Ha].delete(n.requestId),n.cb(i);return}}n.noResponse&&n.cb()}s(SMe,"write");vY.exports={Connection:x1}});var EY=w((QCt,SY)=>{"use strict";var _Y=ye().MongoError,L1=class L1 extends _Y{constructor(t){super("Attempted to check out a connection from closed connection pool"),this.name="MongoPoolClosedError",this.address=t.address}};s(L1,"PoolClosedError");var F1=L1,U1=class U1 extends _Y{constructor(t){super("Timed out while checking out a connection from connection pool"),this.name="MongoWaitQueueTimeoutError",this.address=t.address}};s(U1,"WaitQueueTimeoutError");var q1=U1;SY.exports={PoolClosedError:F1,WaitQueueTimeoutError:q1}});var kv=w((ewt,CY)=>{"use strict";var X1=class X1{constructor(t){this.time=new Date,this.address=t.address}};s(X1,"ConnectionPoolMonitoringEvent");var qs=X1,J1=class J1 extends qs{constructor(t){super(t),this.options=t.options}};s(J1,"ConnectionPoolCreatedEvent");var j1=J1,Q1=class Q1 extends qs{constructor(t){super(t)}};s(Q1,"ConnectionPoolClosedEvent");var $1=Q1,Z1=class Z1 extends qs{constructor(t,r){super(t),this.connectionId=r.id}};s(Z1,"ConnectionCreatedEvent");var k1=Z1,eM=class eM extends qs{constructor(t,r){super(t),this.connectionId=r.id}};s(eM,"ConnectionReadyEvent");var G1=eM,tM=class tM extends qs{constructor(t,r,n){super(t),this.connectionId=r.id,this.reason=n||"unknown"}};s(tM,"ConnectionClosedEvent");var W1=tM,rM=class rM extends qs{constructor(t){super(t)}};s(rM,"ConnectionCheckOutStartedEvent");var z1=rM,nM=class nM extends qs{constructor(t,r){super(t),this.reason=r}};s(nM,"ConnectionCheckOutFailedEvent");var H1=nM,iM=class iM extends qs{constructor(t,r){super(t),this.connectionId=r.id}};s(iM,"ConnectionCheckedOutEvent");var V1=iM,sM=class sM extends qs{constructor(t,r){super(t),this.connectionId=r.id}};s(sM,"ConnectionCheckedInEvent");var Y1=sM,oM=class oM extends qs{constructor(t){super(t)}};s(oM,"ConnectionPoolClearedEvent");var K1=oM,EMe=["connectionPoolCreated","connectionPoolClosed","connectionCreated","connectionReady","connectionClosed","connectionCheckOutStarted","connectionCheckOutFailed","connectionCheckedOut","connectionCheckedIn","connectionPoolCleared"];CY.exports={CMAP_EVENT_NAMES:EMe,ConnectionPoolCreatedEvent:j1,ConnectionPoolClosedEvent:$1,ConnectionCreatedEvent:k1,ConnectionReadyEvent:G1,ConnectionClosedEvent:W1,ConnectionCheckOutStartedEvent:z1,ConnectionCheckOutFailedEvent:H1,ConnectionCheckedOutEvent:V1,ConnectionCheckedInEvent:Y1,ConnectionPoolClearedEvent:K1}});var BY=w((rwt,PY)=>{"use strict";var wY=Mb(),bY=require("events").EventEmitter,CMe=Rs(),wMe=$().makeCounter,bMe=ye().MongoError,OMe=M1().Connection,TMe=Le().eachAsync,AMe=sb(),IMe=Le().relayEvents,TY=EY(),DMe=TY.PoolClosedError,RMe=TY.WaitQueueTimeoutError,Vo=kv(),NMe=Vo.ConnectionPoolCreatedEvent,xMe=Vo.ConnectionPoolClosedEvent,PMe=Vo.ConnectionCreatedEvent,BMe=Vo.ConnectionReadyEvent,AY=Vo.ConnectionClosedEvent,MMe=Vo.ConnectionCheckOutStartedEvent,aM=Vo.ConnectionCheckOutFailedEvent,OY=Vo.ConnectionCheckedOutEvent,FMe=Vo.ConnectionCheckedInEvent,qMe=Vo.ConnectionPoolClearedEvent,IY=Symbol("logger"),Va=Symbol("connections"),Wv=Symbol("permits"),Vb=Symbol("minPoolSizeTimer"),Gv=Symbol("generation"),Yb=Symbol("connectionCounter"),Kb=Symbol("cancellationToken"),Cc=Symbol("waitQueue"),Xb=Symbol("cancelled"),LMe=new Set(["ssl","bson","connectionType","serverApi","monitorCommands","socketTimeout","credentials","compression","host","port","localAddress","localPort","family","hints","lookup","path","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","passphrase","pfx","secureOptions","secureProtocol","sessionIdContext","allowHalfOpen","rejectUnauthorized","pskCallback","ALPNProtocols","servername","checkServerIdentity","session","minDHSize","secureContext","maxPoolSize","minPoolSize","maxIdleTimeMS","waitQueueTimeoutMS"]);function UMe(e,t){let r=Array.from(LMe).reduce((n,i)=>(Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]),n),{});return Object.freeze(Object.assign({},t,r))}s(UMe,"resolveOptions");var lM=class lM extends bY{constructor(t){if(super(),t=t||{},this.closed=!1,this.options=UMe(t,{connectionType:OMe,maxPoolSize:typeof t.maxPoolSize=="number"?t.maxPoolSize:100,minPoolSize:typeof t.minPoolSize=="number"?t.minPoolSize:0,maxIdleTimeMS:typeof t.maxIdleTimeMS=="number"?t.maxIdleTimeMS:0,waitQueueTimeoutMS:typeof t.waitQueueTimeoutMS=="number"?t.waitQueueTimeoutMS:0,autoEncrypter:t.autoEncrypter,metadata:t.metadata,useUnifiedTopology:t.useUnifiedTopology}),t.minSize>t.maxSize)throw new TypeError("Connection pool minimum size must not be greater than maximum pool size");this[IY]=CMe("ConnectionPool",t),this[Va]=new wY,this[Wv]=this.options.maxPoolSize,this[Vb]=void 0,this[Gv]=0,this[Yb]=wMe(1),this[Kb]=new bY,this[Kb].setMaxListeners(1/0),this[Cc]=new wY,process.nextTick(()=>{this.emit("connectionPoolCreated",new NMe(this)),DY(this)})}get address(){return`${this.options.host}:${this.options.port}`}get generation(){return this[Gv]}get totalConnectionCount(){return this[Va].length+(this.options.maxPoolSize-this[Wv])}get availableConnectionCount(){return this[Va].length}get waitQueueSize(){return this[Cc].length}checkOut(t){if(this.emit("connectionCheckOutStarted",new MMe(this)),this.closed){this.emit("connectionCheckOutFailed",new aM(this,"poolClosed")),t(new DMe(this));return}let r={callback:t},n=this,i=this.options.waitQueueTimeoutMS;i&&(r.timer=setTimeout(()=>{r[Xb]=!0,r.timer=void 0,n.emit("connectionCheckOutFailed",new aM(n,"timeout")),r.callback(new RMe(n))},i)),this[Cc].push(r),process.nextTick(()=>cM(this))}checkIn(t){let r=this.closed,n=RY(this,t),i=!!(r||n||t.closed);if(i||(t.markAvailable(),this[Va].push(t)),this.emit("connectionCheckedIn",new FMe(this,t)),i){let o=t.closed?"error":r?"poolClosed":"stale";xY(this,t,o)}process.nextTick(()=>cM(this))}clear(){this[Gv]+=1,this.emit("connectionPoolCleared",new qMe(this))}close(t,r){if(typeof t=="function"&&(r=t),t=Object.assign({force:!1},t),this.closed)return r();for(this[Kb].emit("cancel");this.waitQueueSize;){let n=this[Cc].pop();clearTimeout(n.timer),n[Xb]||n.callback(new bMe("connection pool closed"))}this[Vb]&&clearTimeout(this[Vb]),typeof this[Yb].return=="function"&&this[Yb].return(),this.closed=!0,TMe(this[Va].toArray(),(n,i)=>{this.emit("connectionClosed",new AY(this,n,"poolClosed")),n.destroy(t,i)},n=>{this[Va].clear(),this.emit("connectionPoolClosed",new xMe(this)),r(n)})}withConnection(t,r){this.checkOut((n,i)=>{t(n,i,(o,a)=>{typeof r=="function"&&(o?r(o):r(void 0,a)),i&&this.checkIn(i)})})}};s(lM,"ConnectionPool");var uM=lM;function DY(e){if(e.closed||e.options.minPoolSize===0)return;let t=e.options.minPoolSize;for(let r=e.totalConnectionCount;r<t;++r)NY(e);e[Vb]=setTimeout(()=>DY(e),10)}s(DY,"ensureMinPoolSize");function RY(e,t){return t.generation!==e[Gv]}s(RY,"connectionIsStale");function jMe(e,t){return!!(e.options.maxIdleTimeMS&&t.idleTime>e.options.maxIdleTimeMS)}s(jMe,"connectionIsIdle");function NY(e,t){let r=Object.assign({id:e[Yb].next().value,generation:e[Gv]},e.options);e[Wv]--,AMe(r,e[Kb],(n,i)=>{if(n){e[Wv]++,e[IY].debug(`connection attempt failed with error [${JSON.stringify(n)}]`),typeof t=="function"&&t(n);return}if(e.closed){i.destroy({force:!0});return}if(IMe(i,e,["commandStarted","commandFailed","commandSucceeded","clusterTimeReceived"]),e.emit("connectionCreated",new PMe(e,i)),i.markAvailable(),e.emit("connectionReady",new BMe(e,i)),typeof t=="function"){t(void 0,i);return}e[Va].push(i),process.nextTick(()=>cM(e))})}s(NY,"createConnection");function xY(e,t,r){e.emit("connectionClosed",new AY(e,t,r)),e[Wv]++,process.nextTick(()=>t.destroy())}s(xY,"destroyConnection");function cM(e){if(e.closed)return;for(;e.waitQueueSize;){let r=e[Cc].peekFront();if(r[Xb]){e[Cc].shift();continue}if(!e.availableConnectionCount)break;let n=e[Va].shift(),i=RY(e,n),o=jMe(e,n);if(!i&&!o&&!n.closed){e.emit("connectionCheckedOut",new OY(e,n)),clearTimeout(r.timer),e[Cc].shift(),r.callback(void 0,n);return}let a=n.closed?"error":i?"stale":"idle";xY(e,n,a)}let t=e.options.maxPoolSize;if(e.waitQueueSize&&(t<=0||e.totalConnectionCount<t)){NY(e,(r,n)=>{let i=e[Cc].shift();if(i==null||i[Xb]){r==null&&e[Va].push(n);return}r?e.emit("connectionCheckOutFailed",new aM(e,r)):e.emit("connectionCheckedOut",new OY(e,n)),clearTimeout(i.timer),i.callback(r,n)});return}}s(cM,"processWaitQueue");PY.exports={ConnectionPool:uM}});var zY=w((iwt,WY)=>{"use strict";var $Me=ti().ServerType,MY=require("events"),$Y=sb(),kMe=M1().Connection,kY=ti(),GMe=Le().makeStateMachine,WMe=ye().MongoNetworkError,zMe=Sn().retrieveBSON(),FY=$().makeInterruptableAsyncInterval,Jb=$().calculateDurationInMs,dM=$().now,pM=ZB(),qY=pM.ServerHeartbeatStartedEvent,LY=pM.ServerHeartbeatSucceededEvent,HMe=pM.ServerHeartbeatFailedEvent,Hv=Symbol("server"),Ti=Symbol("monitorId"),Hr=Symbol("connection"),nd=Symbol("cancellationToken"),Ya=Symbol("rttPinger"),zv=Symbol("roundTripTime"),bc=kY.STATE_CLOSED,wc=kY.STATE_CLOSING,nh="idle",ih="monitoring",sh=GMe({[wc]:[wc,nh,bc],[bc]:[bc,ih],[nh]:[nh,ih,wc],[ih]:[ih,nh,wc]}),VMe=new Set([wc,bc,ih]);function Vv(e){return e.s.state===bc||e.s.state===wc}s(Vv,"isInCloseState");var mM=class mM extends MY{constructor(t,r){super(r),this[Hv]=t,this[Hr]=void 0,this[nd]=new MY,this[nd].setMaxListeners(1/0),this[Ti]=null,this.s={state:bc},this.address=t.description.address,this.options=Object.freeze({connectTimeoutMS:typeof r.connectionTimeout=="number"?r.connectionTimeout:typeof r.connectTimeoutMS=="number"?r.connectTimeoutMS:1e4,heartbeatFrequencyMS:typeof r.heartbeatFrequencyMS=="number"?r.heartbeatFrequencyMS:1e4,minHeartbeatFrequencyMS:typeof r.minHeartbeatFrequencyMS=="number"?r.minHeartbeatFrequencyMS:500,useUnifiedTopology:r.useUnifiedTopology});let n=Object.assign({id:"<monitor>",host:t.description.host,port:t.description.port,bson:t.s.bson,connectionType:kMe},t.s.options,this.options,{raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0,bsonRegExp:!0});delete n.credentials,delete n.autoEncrypter,this.connectOptions=Object.freeze(n)}connect(){if(this.s.state!==bc)return;let t=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this[Ti]=FY(jY(this),{interval:t,minInterval:r,immediate:!0})}requestCheck(){VMe.has(this.s.state)||this[Ti].wake()}reset(){let t=this[Hv].description.topologyVersion;if(Vv(this)||t==null)return;sh(this,wc),UY(this),sh(this,nh);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this[Ti]=FY(jY(this),{interval:r,minInterval:n})}close(){Vv(this)||(sh(this,wc),UY(this),this.emit("close"),sh(this,bc))}};s(mM,"Monitor");var fM=mM;function UY(e){e[Ti]&&(e[Ti].stop(),e[Ti]=null),e[Ya]&&(e[Ya].close(),e[Ya]=void 0),e[nd].emit("cancel"),e[Ti]&&(clearTimeout(e[Ti]),e[Ti]=void 0),e[Hr]&&e[Hr].destroy({force:!0})}s(UY,"resetMonitorState");function YMe(e,t){let r=dM();e.emit("serverHeartbeatStarted",new qY(e.address));function n(i){e[Hr]&&(e[Hr].destroy({force:!0}),e[Hr]=void 0),e.emit("serverHeartbeatFailed",new HMe(Jb(r),i,e.address)),e.emit("resetServer",i),e.emit("resetConnectionPool"),t(i)}if(s(n,"failureHandler"),e[Hr]!=null&&!e[Hr].closed){let i=e.options.connectTimeoutMS,o=e.options.heartbeatFrequencyMS,a=e[Hv].description.topologyVersion,u=a!=null,l=e[Hr].serverApi,f=e[Hr].helloOk,h={[l||f?"hello":"ismaster"]:!0};f&&(h.helloOk=f);let p={socketTimeout:i};u&&(h.maxAwaitTimeMS=o,h.topologyVersion=KMe(a),i&&(p.socketTimeout=i+o),p.exhaustAllowed=!0,e[Ya]==null&&(e[Ya]=new hM(e[nd],e.connectOptions))),e[Hr].command("admin.$cmd",h,p,(g,_)=>{if(g){n(g);return}let C=_.result,D=e[Ya];"isWritablePrimary"in C&&(C.ismaster=C.isWritablePrimary);let O=u&&D?D.roundTripTime:Jb(r);e.emit("serverHeartbeatSucceeded",new LY(O,C,e.address)),u&&C.topologyVersion?(e.emit("serverHeartbeatStarted",new qY(e.address)),r=dM()):(e[Ya]&&(e[Ya].close(),e[Ya]=void 0),t(void 0,C))});return}$Y(e.connectOptions,e[nd],(i,o)=>{if(o&&Vv(e)){o.destroy({force:!0});return}if(i){e[Hr]=void 0,i instanceof WMe||e.emit("resetConnectionPool"),n(i);return}e[Hr]=o,e.emit("serverHeartbeatSucceeded",new LY(Jb(r),o.ismaster,e.address)),t(void 0,o.ismaster)})}s(YMe,"checkServer");function jY(e){return t=>{sh(e,ih);function r(){Vv(e)||sh(e,nh),t()}s(r,"done"),process.nextTick(()=>e.emit("monitoring",e[Hv])),YMe(e,(n,i)=>{if(n&&e[Hv].description.type===$Me.Unknown)return e.emit("resetServer",n),r();i&&i.topologyVersion&&setTimeout(()=>{Vv(e)||e[Ti].wake()}),r()})}}s(jY,"monitorServer");function KMe(e){return{processId:e.processId,counter:zMe.Long.fromNumber(e.counter)}}s(KMe,"makeTopologyVersion");var gM=class gM{constructor(t,r){this[Hr]=null,this[nd]=t,this[zv]=0,this.closed=!1;let n=r.heartbeatFrequencyMS;this[Ti]=setTimeout(()=>GY(this,r),n)}get roundTripTime(){return this[zv]}close(){this.closed=!0,clearTimeout(this[Ti]),this[Ti]=void 0,this[Hr]&&this[Hr].destroy({force:!0})}};s(gM,"RTTPinger");var hM=gM;function GY(e,t){let r=dM(),n=e[nd],i=t.heartbeatFrequencyMS;if(e.closed)return;function o(a){if(e.closed){a.destroy({force:!0});return}e[Hr]==null&&(e[Hr]=a),e[zv]=Jb(r),e[Ti]=setTimeout(()=>GY(e,t),i)}if(s(o,"measureAndReschedule"),e[Hr]==null){$Y(t,n,(a,u)=>{if(a){e[Hr]=void 0,e[zv]=0;return}o(u)});return}e[Hr].command("admin.$cmd",{ismaster:1},a=>{if(a){e[Hr]=void 0,e[zv]=0;return}o()})}s(GY,"measureRoundTripTime");WY.exports={Monitor:fM}});var eK=w((owt,ZY)=>{"use strict";var XMe=require("events"),JMe=BY().ConnectionPool,QMe=kv().CMAP_EVENT_NAMES,Xa=ye().MongoError,HY=Le().relayEvents,Ai=Sn().retrieveBSON(),ZMe=Rs(),YY=ql().ServerDescription,eFe=ql().compareTopologyVersion,tFe=qn(),rFe=zY().Monitor,KY=ye().MongoNetworkError,XY=ye().MongoNetworkTimeoutError,JY=Le().collationNotSupported,nFe=Sn().debugOptions,iFe=ye().isSDAMUnrecoverableError,sFe=ye().isRetryableWriteError,oFe=ye().isNodeShuttingDownError,aFe=ye().isNetworkErrorBeforeHandshake,vM=Le().maxWireVersion,uFe=Le().makeStateMachine,cFe=jl().extractCommand,Xv=ti(),lFe=Xv.ServerType,dFe=kf().isTransactionCommand,fFe=["reconnect","reconnectTries","reconnectInterval","emitError","cursorFactory","host","port","size","keepAlive","keepAliveInitialDelay","noDelay","connectionTimeout","checkServerIdentity","socketTimeout","ssl","ca","crl","cert","key","rejectUnauthorized","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","servername"],Yo=Xv.STATE_CLOSING,Ki=Xv.STATE_CLOSED,Kv=Xv.STATE_CONNECTING,Zb=Xv.STATE_CONNECTED,Qb=uFe({[Ki]:[Ki,Kv],[Kv]:[Kv,Yo,Zb,Ki],[Zb]:[Zb,Yo,Ki],[Yo]:[Yo,Ki]}),Ka=Symbol("monitor"),_M=class _M extends XMe{constructor(t,r,n){super(),this.s={description:t,options:r,logger:ZMe("Server",r),bson:r.bson||new Ai([Ai.Binary,Ai.Code,Ai.DBRef,Ai.Decimal128,Ai.Double,Ai.Int32,Ai.Long,Ai.Map,Ai.MaxKey,Ai.MinKey,Ai.ObjectId,Ai.BSONRegExp,Ai.Symbol,Ai.Timestamp]),state:Ki,credentials:r.credentials,topology:n},this.serverApi=r.serverApi;let i=Object.assign({host:this.description.host,port:this.description.port,bson:this.s.bson},r);this.s.pool=new JMe(i),HY(this.s.pool,this,["commandStarted","commandSucceeded","commandFailed"].concat(QMe)),this.s.pool.on("clusterTimeReceived",o=>{this.clusterTime=o}),this[Ka]=new rFe(this,this.s.options),HY(this[Ka],this,["serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","monitoring"]),this[Ka].on("resetConnectionPool",()=>{this.s.pool.clear()}),this[Ka].on("resetServer",o=>Oc(this,o)),this[Ka].on("serverHeartbeatSucceeded",o=>{this.emit("descriptionReceived",new YY(this.description.address,o.reply,{roundTripTime:hFe(this.description.roundTripTime,o.duration)})),this.s.state===Kv&&(Qb(this,Zb),this.emit("connect",this))})}get description(){return this.s.description}get supportsRetryableWrites(){return QY(this)}get name(){return this.s.description.address}get autoEncrypter(){return this.s.options&&this.s.options.autoEncrypter?this.s.options.autoEncrypter:null}connect(){this.s.state===Ki&&(Qb(this,Kv),this[Ka].connect())}destroy(t,r){if(typeof t=="function"&&(r=t,t={}),t=Object.assign({},{force:!1},t),this.s.state===Ki){typeof r=="function"&&r();return}Qb(this,Yo),this[Ka].close(),this.s.pool.close(t,n=>{Qb(this,Ki),this.emit("closed"),typeof r=="function"&&r(n)})}requestCheck(){this[Ka].requestCheck()}command(t,r,n,i){if(typeof n=="function"&&(i=n,n={},n=n||{}),n.serverApi=this.serverApi,this.s.state===Yo||this.s.state===Ki){i(new Xa("server is closed"));return}let o=pFe(this,n);if(o)return i(o);if(n=Object.assign({},n,{wireProtocolCommand:!1}),this.s.logger.isDebug()){let a=cFe(r);this.s.logger.debug(`executing command [${JSON.stringify({ns:t,cmd:a.shouldRedact?`${a.name} details REDACTED`:r,options:nFe(fFe,n)})}] against ${this.name}`)}if(JY(this,r)){i(new Xa(`server ${this.name} does not support collation`));return}this.s.pool.withConnection((a,u,l)=>{if(a)return Oc(this,a),l(a);u.command(t,r,n,Yv(this,u,r,n,l))},i)}query(t,r,n,i,o){if(this.s.state===Yo||this.s.state===Ki){o(new Xa("server is closed"));return}this.s.pool.withConnection((a,u,l)=>{if(a)return Oc(this,a),l(a);u.query(t,r,n,i,Yv(this,u,r,i,l))},o)}getMore(t,r,n,i,o){if(this.s.state===Yo||this.s.state===Ki){o(new Xa("server is closed"));return}this.s.pool.withConnection((a,u,l)=>{if(a)return Oc(this,a),l(a);u.getMore(t,r,n,i,Yv(this,u,null,i,l))},o)}killCursors(t,r,n){if(this.s.state===Yo||this.s.state===Ki){typeof n=="function"&&n(new Xa("server is closed"));return}this.s.pool.withConnection((i,o,a)=>{if(i)return Oc(this,i),a(i);o.killCursors(t,r,Yv(this,o,null,void 0,a))},n)}insert(t,r,n,i){yM({server:this,op:"insert",ns:t,ops:r},n,i)}update(t,r,n,i){yM({server:this,op:"update",ns:t,ops:r},n,i)}remove(t,r,n,i){yM({server:this,op:"remove",ns:t,ops:r},n,i)}};s(_M,"Server");var eO=_M;Object.defineProperty(eO.prototype,"clusterTime",{get:function(){return this.s.topology.clusterTime},set:function(e){this.s.topology.clusterTime=e}});function QY(e){return e.description.maxWireVersion>=6&&e.description.logicalSessionTimeoutMinutes&&e.description.type!==lFe.Standalone}s(QY,"supportsRetryableWrites");function hFe(e,t){if(e===-1)return t;let r=.2;return r*t+(1-r)*e}s(hFe,"calculateRoundTripTime");function pFe(e,t){if(t.readPreference&&!(t.readPreference instanceof tFe))return new Xa("readPreference must be an instance of ReadPreference")}s(pFe,"basicReadValidations");function yM(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.server,i=e.op,o=e.ns,a=Array.isArray(e.ops)?e.ops:[e.ops];if(n.s.state===Yo||n.s.state===Ki){r(new Xa("server is closed"));return}if(JY(n,t)){r(new Xa(`server ${n.name} does not support collation`));return}if((t.writeConcern&&t.writeConcern.w===0||vM(n)<5)&&(i==="update"||i==="remove")&&a.find(l=>l.hint)){r(new Xa(`servers < 3.4 do not support hint on ${i}`));return}n.s.pool.withConnection((l,f,h)=>{if(l)return Oc(n,l),h(l);f[i](o,a,t,Yv(n,f,a,t,h))},r)}s(yM,"executeWriteOperation");function Oc(e,t){t instanceof KY&&!(t instanceof XY)&&e[Ka].reset(),e.emit("descriptionReceived",new YY(e.description.address,null,{error:t,topologyVersion:t&&t.topologyVersion?t.topologyVersion:e.description.topologyVersion}))}s(Oc,"markServerUnknown");function mFe(e,t){return t.generation!==e.generation}s(mFe,"connectionIsStale");function gFe(e,t){let r=t.topologyVersion,n=e.description.topologyVersion;return eFe(n,r)<0}s(gFe,"shouldHandleStateChangeError");function VY(e,t){return e&&e.inTransaction()&&!dFe(t)}s(VY,"inActiveTransaction");function Yv(e,t,r,n,i){let o=n&&n.session;return s(function(u,l){u&&!mFe(e.s.pool,t)&&(u instanceof KY?(o&&!o.hasEnded&&(o.serverSession.isDirty=!0),QY(e)&&!VY(o,r)&&u.addErrorLabel("RetryableWriteError"),(!(u instanceof XY)||aFe(u))&&(Oc(e,u),e.s.pool.clear())):(vM(e)<9&&sFe(u)&&!VY(o,r)&&u.addErrorLabel("RetryableWriteError"),iFe(u)&&gFe(e,u)&&((vM(e)<=7||oFe(u))&&e.s.pool.clear(),Oc(e,u),process.nextTick(()=>e.requestCheck())))),i(u,l)},"handleOperationResult")}s(Yv,"makeOperationHandler");ZY.exports={Server:eO}});var tK=w((uwt,EM)=>{"use strict";var yFe=Rs(),vFe=require("events").EventEmitter,_Fe=require("dns");function SFe(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return n.endsWith(i)}s(SFe,"matchesParentDomain");var CM=class CM{constructor(t){this.srvRecords=t}addresses(){return new Set(this.srvRecords.map(t=>`${t.name}:${t.port}`))}};s(CM,"SrvPollingEvent");var tO=CM,wM=class wM extends vFe{constructor(t){if(super(),!t||!t.srvHost)throw new TypeError("options for SrvPoller must exist and include srvHost");this.srvHost=t.srvHost,this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=t.heartbeatFrequencyMS||1e4,this.logger=yFe("srvPoller",t),this.haMode=!1,this.generation=0,this._timeout=null}get srvAddress(){return`_mongodb._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&(clearTimeout(this._timeout),this.generation+=1,this._timeout=null)}schedule(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>this._poll(),this.intervalMS)}success(t){this.haMode=!1,this.schedule(),this.emit("srvRecordDiscovery",new tO(t))}failure(t,r){this.logger.warn(t,r),this.haMode=!0,this.schedule()}parentDomainMismatch(t){this.logger.warn(`parent domain mismatch on SRV record (${t.name}:${t.port})`,t)}_poll(){let t=this.generation;_Fe.resolveSrv(this.srvAddress,(r,n)=>{if(t!==this.generation)return;if(r){this.failure("DNS error",r);return}let i=[];if(n.forEach(o=>{SFe(o.name,this.srvHost)?i.push(o):this.parentDomainMismatch(o)}),!i.length){this.failure("No valid addresses found at host");return}this.success(i)})}};s(wM,"SrvPoller");var SM=wM;EM.exports.SrvPollingEvent=tO;EM.exports.SrvPoller=SM});var iK=w((lwt,nK)=>{"use strict";var Qv=ti().ServerType,Jv=ti().TopologyType,rO=qn(),bM=ye().MongoError,EFe=1e4,rK=90;function CFe(){return function(e,t){return OM(e,t.filter(r=>r.isWritable))}}s(CFe,"writableServerSelector");function wFe(e,t,r){if(e.maxStalenessSeconds==null||e.maxStalenessSeconds<0)return r;let n=e.maxStalenessSeconds,i=(t.heartbeatFrequencyMS+EFe)/1e3;if(n<i)throw new bM(`maxStalenessSeconds must be at least ${i} seconds`);if(n<rK)throw new bM(`maxStalenessSeconds must be at least ${rK} seconds`);if(t.type===Jv.ReplicaSetWithPrimary){let o=Array.from(t.servers.values()).filter(nO)[0];return r.reduce((a,u)=>((u.lastUpdateTime-u.lastWriteDate-(o.lastUpdateTime-o.lastWriteDate)+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&a.push(u),a),[])}if(t.type===Jv.ReplicaSetNoPrimary){if(r.length===0)return r;let o=r.reduce((a,u)=>u.lastWriteDate>a.lastWriteDate?u:a);return r.reduce((a,u)=>((o.lastWriteDate-u.lastWriteDate+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&a.push(u),a),[])}return r}s(wFe,"maxStalenessReducer");function bFe(e,t){let r=Object.keys(e),n=Object.keys(t);for(let i=0;i<r.length;++i){let o=r[i];if(n.indexOf(o)===-1||t[o]!==e[o])return!1}return!0}s(bFe,"tagSetMatch");function OFe(e,t){if(e.tags==null||Array.isArray(e.tags)&&e.tags.length===0)return t;for(let r=0;r<e.tags.length;++r){let n=e.tags[r],i=t.reduce((o,a)=>(bFe(n,a.tags)&&o.push(a),o),[]);if(i.length)return i}return[]}s(OFe,"tagSetReducer");function OM(e,t){let r=t.reduce((i,o)=>i===-1?o.roundTripTime:Math.min(o.roundTripTime,i),-1),n=r+e.localThresholdMS;return t.reduce((i,o)=>(o.roundTripTime<=n&&o.roundTripTime>=r&&i.push(o),i),[])}s(OM,"latencyWindowReducer");function nO(e){return e.type===Qv.RSPrimary}s(nO,"primaryFilter");function TFe(e){return e.type===Qv.RSSecondary}s(TFe,"secondaryFilter");function AFe(e){return e.type===Qv.RSSecondary||e.type===Qv.RSPrimary}s(AFe,"nearestFilter");function IFe(e){return e.type!==Qv.Unknown}s(IFe,"knownFilter");function DFe(e){if(!e.isValid())throw new TypeError("Invalid read preference specified");return function(t,r){let n=t.commonWireVersion;if(n&&e.minWireVersion&&e.minWireVersion>n)throw new bM(`Minimum wire version '${e.minWireVersion}' required, but found '${n}'`);if(t.type===Jv.Unknown)return[];if(t.type===Jv.Single||t.type===Jv.Sharded)return OM(t,r.filter(IFe));let i=e.mode;if(i===rO.PRIMARY)return r.filter(nO);if(i===rO.PRIMARY_PREFERRED){let u=r.filter(nO);if(u.length)return u}let o=i===rO.NEAREST?AFe:TFe,a=OM(t,OFe(e,wFe(e,t,r.filter(o))));return i===rO.SECONDARY_PREFERRED&&a.length===0?r.filter(nO):a}}s(DFe,"readPreferenceServerSelector");nK.exports={writableServerSelector:CFe,readPreferenceServerSelector:DFe}});var mK=w((fwt,pK)=>{"use strict";var RFe=Mb(),NFe=require("events"),xFe=ql().ServerDescription,PFe=ti().ServerType,sK=Zx().TopologyDescription,Ja=ti().TopologyType,Tc=ZB(),BFe=eK().Server,MFe=Le().relayEvents,_o=qn(),FFe=xs().CoreCursor,qFe=require("util").deprecate,ci=Sn().retrieveBSON(),LFe=kr().createCompressionInfo,UFe=uc().ClientSession,uO=ye().MongoError,jFe=ye().MongoServerSelectionError,$Fe=kr().resolveClusterTime,kFe=tK().SrvPoller,GFe=kr().getMMAPError,WFe=Le().makeStateMachine,zFe=Le().eachAsync,HFe=$().emitDeprecationWarning,VFe=uc().ServerSessionPool,YFe=Le().makeClientMetadata,KFe=kv().CMAP_EVENT_NAMES,XFe=ql().compareTopologyVersion,JFe=$().emitWarning,id=ti(),QFe=id.drainTimerQueue,ZFe=id.clearAndRemoveTimerFrom,aK=iK(),iO=aK.readPreferenceServerSelector,eqe=aK.writableServerSelector,tqe=0,uK=["serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","commandStarted","commandSucceeded","commandFailed","monitoring"].concat(KFe),rqe=["connect","descriptionReceived","close","ended"],oh=id.STATE_CLOSING,Xo=id.STATE_CLOSED,oO=id.STATE_CONNECTING,ah=id.STATE_CONNECTED,sO=WFe({[Xo]:[Xo,oO],[oO]:[oO,oh,ah,Xo],[ah]:[ah,oh,Xo],[oh]:[oh,Xo]}),nqe=new Set(["autoReconnect","reconnectTries","reconnectInterval","bufferMaxEntries"]),TM=Symbol("cancelled"),Ko=Symbol("waitQueue"),AM=class AM extends NFe{constructor(t,r){super(),typeof r>"u"&&typeof t!="string"&&(r=t,t=[],r.host&&t.push({host:r.host,port:r.port})),t=t||[],typeof t=="string"&&(t=aqe(t)),r=Object.assign({},id.TOPOLOGY_DEFAULTS,r),r=Object.freeze(Object.assign(r,{metadata:YFe(r),compression:{compressors:LFe(r)}})),nqe.forEach(a=>{r[a]&&HFe(`The option \`${a}\` is incompatible with the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,"DeprecationWarning")});let n=uqe(t,r),i=tqe++,o=t.reduce((a,u)=>{u.domain_socket&&(u.host=u.domain_socket);let l=u.port?`${u.host}:${u.port}`:`${u.host}:27017`;return a.set(l,new xFe(l)),a},new Map);this[Ko]=new RFe,this.s={id:i,options:r,seedlist:t,state:Xo,description:new sK(n,o,r.replicaSet,null,null,null,r),serverSelectionTimeoutMS:r.serverSelectionTimeoutMS,heartbeatFrequencyMS:r.heartbeatFrequencyMS,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS,Cursor:r.cursorFactory||FFe,bson:r.bson||new ci([ci.Binary,ci.Code,ci.DBRef,ci.Decimal128,ci.Double,ci.Int32,ci.Long,ci.Map,ci.MaxKey,ci.MinKey,ci.ObjectId,ci.BSONRegExp,ci.Symbol,ci.Timestamp]),servers:new Map,sessionPool:new VFe(this),sessions:new Set,promiseLibrary:r.promiseLibrary||Promise,credentials:r.credentials,clusterTime:null,connectionTimers:new Set},this.serverApi=r.serverApi,r.srvHost&&(this.s.srvPoller=r.srvPoller||new kFe({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:r.srvHost,logger:r.logger,loggerLevel:r.loggerLevel}),this.s.detectTopologyDescriptionChange=a=>{let u=a.previousDescription.type,l=a.newDescription.type;u!==Ja.Sharded&&l===Ja.Sharded&&(this.s.handleSrvPolling=dqe(this),this.s.srvPoller.on("srvRecordDiscovery",this.s.handleSrvPolling),this.s.srvPoller.start())},this.on("topologyDescriptionChanged",this.s.detectTopologyDescriptionChange)),this.setMaxListeners(1/0)}get description(){return this.s.description}get parserType(){return ci.native?"c++":"js"}connect(t,r){if(typeof t=="function"&&(r=t,t={}),t=t||{},this.s.state===ah){typeof r=="function"&&r();return}sO(this,oO),this.emit("topologyOpening",new Tc.TopologyOpeningEvent(this.s.id)),this.emit("topologyDescriptionChanged",new Tc.TopologyDescriptionChangedEvent(this.s.id,new sK(Ja.Unknown),this.s.description)),lqe(this,Array.from(this.s.description.servers.values())),_o.translate(t);let n=t.readPreference||_o.primary,i=s(o=>{if(o){this.close(),typeof r=="function"?r(o):this.emit("error",o);return}sO(this,ah),this.emit("open",o,this),this.emit("connect",this),typeof r=="function"&&r(o,this)},"connectHandler");if(this.s.credentials){this.command("admin.$cmd",{ping:1},{readPreference:n},i);return}this.selectServer(iO(n),t,i)}close(t,r){if(typeof t=="function"&&(r=t,t={}),typeof t=="boolean"&&(t={force:t}),t=t||{},this.s.state===Xo||this.s.state===oh){typeof r=="function"&&r();return}sO(this,oh),hK(this[Ko],new uO("Topology closed")),QFe(this.s.connectionTimers),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.handleSrvPolling&&(this.s.srvPoller.removeListener("srvRecordDiscovery",this.s.handleSrvPolling),delete this.s.handleSrvPolling)),this.s.detectTopologyDescriptionChange&&(this.removeListener("topologyDescriptionChanged",this.s.detectTopologyDescriptionChange),delete this.s.detectTopologyDescriptionChange),this.s.sessions.forEach(n=>n.endSession()),this.s.sessionPool.endAllPooledSessions(()=>{zFe(Array.from(this.s.servers.values()),(n,i)=>cK(n,this,t,i),n=>{this.s.servers.clear(),this.emit("topologyClosed",new Tc.TopologyClosedEvent(this.s.id)),sO(this,Xo),typeof r=="function"&&r(n)})})}selectServer(t,r,n){if(typeof r=="function")if(n=r,typeof t!="function"){r=t;let h;t instanceof _o?h=t:typeof t=="string"?h=new _o(t):(_o.translate(r),h=r.readPreference||_o.primary),t=iO(h)}else r={};r=Object.assign({},{serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS},r);let i=this.description.type===Ja.Sharded,o=r.session,a=o&&o.transaction;if(i&&a&&a.server){n(void 0,a.server);return}let u=t;if(typeof t=="object"){let h=t.readPreference?t.readPreference:_o.primary;u=iO(h)}let l={serverSelector:u,transaction:a,callback:n},f=r.serverSelectionTimeoutMS;f&&(l.timer=setTimeout(()=>{l[TM]=!0,l.timer=void 0;let h=new jFe(`Server selection timed out after ${f} ms`,this.description);l.callback(h)},f)),this[Ko].push(l),oK(this)}shouldCheckForSessionSupport(){return this.description.type===Ja.Single?!this.description.hasKnownServers:!this.description.hasDataBearingServers}hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}startSession(t,r){let n=new UFe(this,this.s.sessionPool,t,r);return n.once("ended",()=>{this.s.sessions.delete(n)}),this.s.sessions.add(n),n}endSessions(t,r){Array.isArray(t)||(t=[t]),this.command("admin.$cmd",{endSessions:t},{readPreference:_o.primaryPreferred,noResponse:!0,serverApi:this.serverApi},()=>{typeof r=="function"&&r()})}serverUpdateHandler(t){if(!this.s.description.hasServer(t.address)||oqe(this.s.description,t))return;let r=this.s.description,n=this.s.description.servers.get(t.address),i=t.$clusterTime;i&&$Fe(this,i);let o=n&&n.equals(t);if(this.s.description=this.s.description.update(t),this.s.description.compatibilityError){this.emit("error",new uO(this.s.description.compatibilityError));return}o||this.emit("serverDescriptionChanged",new Tc.ServerDescriptionChangedEvent(this.s.id,t.address,n,this.s.description.servers.get(t.address))),dK(this,t),this[Ko].length>0&&oK(this),o||this.emit("topologyDescriptionChanged",new Tc.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(t,r){typeof t=="function"&&(r=t,t=null),typeof r=="function"&&r(null,!0)}logout(t){typeof t=="function"&&t(null,!0)}insert(t,r,n,i){aO({topology:this,op:"insert",ns:t,ops:r},n,i)}update(t,r,n,i){aO({topology:this,op:"update",ns:t,ops:r},n,i)}remove(t,r,n,i){aO({topology:this,op:"remove",ns:t,ops:r},n,i)}command(t,r,n,i){typeof n=="function"&&(i=n,n={},n=n||{}),_o.translate(n);let o=n.readPreference||_o.primary;this.selectServer(iO(o),n,(a,u)=>{if(a){i(a);return}let l=!n.retrying,f=!!n.retryWrites,h=!!n.session,p=u.supportsRetryableWrites,g=!h||!n.session.inTransaction(),_=l&&f&&h&&p&&g&&sqe(r),C=s((D,O)=>{if(!D)return i(null,O);if(!fK(D))return i(D);if(_){let N=Object.assign({},n,{retrying:!0});return this.command(t,r,N,i)}return i(D)},"cb");_&&(n.session.incrementTransactionNumber(),n.willRetryWrite=_),u.command(t,r,n,C)})}cursor(t,r,n){n=n||{};let i=n.topology||this,o=n.cursorFactory||this.s.Cursor;return _o.translate(n),new o(i,t,r,n)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===ah}isDestroyed(){return this.s.state===Xo}unref(){JFe("`unref` is a noop and will be removed in the next major version")}lastIsMaster(){let t=Array.from(this.description.servers.values());return t.length===0?{}:t.filter(i=>i.type!==PFe.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get bson(){return this.s.bson}};s(AM,"Topology");var uh=AM;Object.defineProperty(uh.prototype,"clusterTime",{enumerable:!0,get:function(){return this.s.clusterTime},set:function(e){this.s.clusterTime=e}});uh.prototype.destroy=qFe(uh.prototype.close,"destroy() is deprecated, please use close() instead");var iqe=["findAndModify","insert","update","delete"];function sqe(e){return iqe.some(t=>e[t])}s(sqe,"isWriteCommand");function oqe(e,t){let n=e.servers.get(t.address).topologyVersion;return XFe(n,t.topologyVersion)>0}s(oqe,"isStaleServerDescription");function cK(e,t,r,n){r=r||{},rqe.forEach(i=>e.removeAllListeners(i)),e.destroy(r,()=>{t.emit("serverClosed",new Tc.ServerClosedEvent(t.s.id,e.description.address)),uK.forEach(i=>e.removeAllListeners(i)),typeof n=="function"&&n()})}s(cK,"destroyServer");function aqe(e){return e.split(",").map(t=>({host:t.split(":")[0],port:t.split(":")[1]||27017}))}s(aqe,"parseStringSeedlist");function uqe(e,t){return t.directConnection?Ja.Single:(t.replicaSet||t.setName||t.rs_name)==null?Ja.Unknown:Ja.ReplicaSetNoPrimary}s(uqe,"topologyTypeFromSeedlist");function cqe(e){return e[Math.floor(Math.random()*e.length)]}s(cqe,"randomSelection");function lK(e,t,r){e.emit("serverOpening",new Tc.ServerOpeningEvent(e.s.id,t.address));let n=new BFe(t,e.s.options,e);if(MFe(n,e,uK),n.on("descriptionReceived",e.serverUpdateHandler.bind(e)),r){let i=setTimeout(()=>{ZFe(i,e.s.connectionTimers),n.connect()},r);return e.s.connectionTimers.add(i),n}return n.connect(),n}s(lK,"createAndConnectServer");function lqe(e,t){e.s.servers=t.reduce((r,n)=>{let i=lK(e,n);return r.set(n.address,i),r},new Map)}s(lqe,"connectServers");function dK(e,t){if(t&&e.s.servers.has(t.address)){let r=e.s.servers.get(t.address);r.s.description=t}for(let r of e.description.servers.values())if(!e.s.servers.has(r.address)){let n=lK(e,r);e.s.servers.set(r.address,n)}for(let r of e.s.servers){let n=r[0];if(e.description.hasServer(n))continue;let i=e.s.servers.get(n);e.s.servers.delete(n),cK(i,e)}}s(dK,"updateServers");function aO(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=e.topology,i=e.op,o=e.ns,a=e.ops;n.selectServer(eqe(),t,(u,l)=>{if(u){r(u,null);return}let f=!e.retrying,h=!!t.retryWrites,p=!!t.session,g=l.supportsRetryableWrites,_=!p||!t.session.inTransaction(),C=t.explain===void 0,D=f&&h&&p&&g&&_&&C,O=s((N,F)=>{if(!N)return r(null,F);if(!fK(N))return N=GFe(N),r(N);if(D){let x=Object.assign({},e,{retrying:!0});return aO(x,t,r)}return r(N)},"handler");r.operationId&&(O.operationId=r.operationId),D&&(t.session.incrementTransactionNumber(),t.willRetryWrite=D),l[i](o,a,t,O)})}s(aO,"executeWriteOperation");function fK(e){return e instanceof uO&&e.hasErrorLabel("RetryableWriteError")}s(fK,"shouldRetryOperation");function dqe(e){return s(function(r){let n=e.s.description;e.s.description=e.s.description.updateFromSrvPollingEvent(r),e.s.description!==n&&(dK(e),e.emit("topologyDescriptionChanged",new Tc.TopologyDescriptionChangedEvent(e.s.id,n,e.s.description)))},"handleSrvPolling")}s(dqe,"srvPollingHandler");function hK(e,t){for(;e.length;){let r=e.shift();clearTimeout(r.timer),r[TM]||r.callback(t)}}s(hK,"drainWaitQueue");function oK(e){if(e.s.state===Xo){hK(e[Ko],new uO("Topology is closed, please connect"));return}let t=Array.from(e.description.servers.values()),r=e[Ko].length;for(let n=0;n<r&&e[Ko].length;++n){let i=e[Ko].shift();if(i[TM])continue;let o;try{let h=i.serverSelector;o=h?h(e.description,t):t}catch(h){clearTimeout(i.timer),i.callback(h);continue}if(o.length===0){e[Ko].push(i);continue}let a=cqe(o),u=e.s.servers.get(a.address),l=i.transaction;e.description.type===Ja.Sharded&&l&&l.isActive&&l.pinServer(u),clearTimeout(i.timer),i.callback(void 0,u)}e[Ko].length>0&&e.s.servers.forEach(n=>process.nextTick(()=>n.requestCheck()))}s(oK,"processWaitQueue");pK.exports={Topology:uh}});var CK=w((pwt,EK)=>{"use strict";var cO=require("url"),sd=require("querystring"),gK=require("dns"),wt=ye().MongoParseError,fqe=qn(),hqe=$().emitWarningOnce,pqe=/(mongodb(?:\+srv|)):\/\/(?: (?:[^:]*) (?: : ([^@]*) )? @ )?([^/?]*)(?:\/|)(.*)/,mqe=new Set(["sslCA","sslCert","sslKey","tlsCAFile","tlsCertificateKeyFile"].map(e=>e.toLowerCase()));function gqe(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return n.endsWith(i)}s(gqe,"matchesParentDomain");function yqe(e,t,r){let n=cO.parse(e,!0);if(t.directConnection||t.directconnection)return r(new wt("directConnection not supported with SRV URI"));if(n.hostname.split(".").length<3)return r(new wt("URI does not have hostname, domain name and tld"));if(n.domainLength=n.hostname.split(".").length,e.substring(14).split("/")[0].match(","))return r(new wt("Invalid URI, cannot contain multiple hostnames"));if(n.port)return r(new wt(`Ports not accepted with '${DM}' URIs`));let o=n.host;gK.resolveSrv(`_mongodb._tcp.${o}`,(a,u)=>{if(a)return r(a);if(u.length===0)return r(new wt("No addresses found at host"));for(let l=0;l<u.length;l++)if(!gqe(u[l].name,n.hostname,n.domainLength))return r(new wt("Server record does not share hostname with parent URI"));n.protocol="mongodb",n.host=u.map(l=>`${l.name}:${l.port}`).join(","),!("ssl"in t)&&(!n.search||!("ssl"in n.query)||n.query.ssl===null)&&(n.query.ssl=!0),gK.resolveTxt(o,(l,f)=>{if(l){if(l.code!=="ENODATA"&&l.code!=="ENOTFOUND")return r(l);f=null}if(f){if(f.length>1)return r(new wt("Multiple text records not allowed"));if(f=sd.parse(f[0].join("")),Object.keys(f).some(p=>p.toLowerCase()==="loadbalanced"))return r(new wt("Load balancer mode requires driver version 4+"));if(Object.keys(f).some(p=>p!=="authSource"&&p!=="replicaSet"))return r(new wt("Text record must only set `authSource` or `replicaSet`"));n.query=Object.assign({},f,n.query)}n.search=sd.stringify(n.query);let h=cO.format(n);SK(h,t,(p,g)=>{if(p){r(p);return}r(null,Object.assign({},g,{srvHost:o}))})})})}s(yqe,"parseSrvConnectionString");function IM(e,t){if(Array.isArray(t))t=t.filter((r,n)=>t.indexOf(r)===n),t.length===1&&(t=t[0]);else if(t.indexOf(":")>0)t=t.split(",").reduce((r,n)=>{let i=n.split(":");return r[i[0]]=IM(e,i[1]),r},{});else if(t.indexOf(",")>0)t=t.split(",").map(r=>IM(e,r));else if(t.toLowerCase()==="true"||t.toLowerCase()==="false")t=t.toLowerCase()==="true";else if(!Number.isNaN(t)&&!_qe.has(e)){let r=parseFloat(t);Number.isNaN(r)||(t=parseFloat(t))}return t}s(IM,"parseQueryStringItemValue");var vqe=new Set(["slaveok","slave_ok","sslvalidate","fsync","safe","retrywrites","j"]),_qe=new Set(["authsource","replicaset"]),yK=new Set(["GSSAPI","MONGODB-AWS","MONGODB-X509","MONGODB-CR","DEFAULT","SCRAM-SHA-1","SCRAM-SHA-256","PLAIN"]),vK={replicaset:"replicaSet",connecttimeoutms:"connectTimeoutMS",sockettimeoutms:"socketTimeoutMS",maxpoolsize:"maxPoolSize",minpoolsize:"minPoolSize",maxidletimems:"maxIdleTimeMS",waitqueuemultiple:"waitQueueMultiple",waitqueuetimeoutms:"waitQueueTimeoutMS",wtimeoutms:"wtimeoutMS",readconcern:"readConcern",readconcernlevel:"readConcernLevel",readpreference:"readPreference",maxstalenessseconds:"maxStalenessSeconds",readpreferencetags:"readPreferenceTags",authsource:"authSource",authmechanism:"authMechanism",authmechanismproperties:"authMechanismProperties",gssapiservicename:"gssapiServiceName",localthresholdms:"localThresholdMS",serverselectiontimeoutms:"serverSelectionTimeoutMS",serverselectiontryonce:"serverSelectionTryOnce",heartbeatfrequencyms:"heartbeatFrequencyMS",retrywrites:"retryWrites",uuidrepresentation:"uuidRepresentation",zlibcompressionlevel:"zlibCompressionLevel",tlsallowinvalidcertificates:"tlsAllowInvalidCertificates",tlsallowinvalidhostnames:"tlsAllowInvalidHostnames",tlsinsecure:"tlsInsecure",tlscafile:"tlsCAFile",tlscertificatekeyfile:"tlsCertificateKeyFile",tlscertificatekeyfilepassword:"tlsCertificateKeyFilePassword",wtimeout:"wTimeoutMS",j:"journal",directconnection:"directConnection"};function Sqe(e,t,r,n){if(t==="journal"?t="j":t==="wtimeoutms"&&(t="wtimeout"),vqe.has(t)?r=r==="true"||r===!0:t==="appname"?r=decodeURIComponent(r):t==="readconcernlevel"&&(e.readConcernLevel=r,t="readconcern",r={level:r}),t==="compressors"&&(r=Array.isArray(r)?r:[r],!r.every(i=>i==="snappy"||i==="zlib")))throw new wt("Value for `compressors` must be at least one of: `snappy`, `zlib`");if(t==="authmechanism"&&!yK.has(r))throw new wt(`Value for authMechanism must be one of: ${Array.from(yK).join(", ")}, found: ${r}`);if(t==="readpreference"&&!fqe.isValid(r))throw new wt("Value for `readPreference` must be one of: `primary`, `primaryPreferred`, `secondary`, `secondaryPreferred`, `nearest`");if(t==="zlibcompressionlevel"&&(r<-1||r>9))throw new wt("zlibCompressionLevel must be an integer between -1 and 9");if((t==="compressors"||t==="zlibcompressionlevel")&&(e.compression=e.compression||{},e=e.compression),t==="authmechanismproperties"&&(typeof r.SERVICE_NAME=="string"&&(e.gssapiServiceName=r.SERVICE_NAME),typeof r.SERVICE_REALM=="string"&&(e.gssapiServiceRealm=r.SERVICE_REALM),typeof r.CANONICALIZE_HOST_NAME<"u"&&(e.gssapiCanonicalizeHostName=r.CANONICALIZE_HOST_NAME)),t==="readpreferencetags"&&(r=Array.isArray(r)?Cqe(r):[r]),n.caseTranslate&&vK[t]){e[vK[t]]=r;return}e[t]=r}s(Sqe,"applyConnectionStringOption");var Eqe=new Set(["GSSAPI","MONGODB-CR","PLAIN","SCRAM-SHA-1","SCRAM-SHA-256"]);function Cqe(e){let t=[];for(let r=0;r<e.length;r++)t[r]={},e[r].split(",").forEach(n=>{let i=n.split(":");t[r][i[0]]=i[1]});return t}s(Cqe,"splitArrayOfMultipleReadPreferenceTags");function wqe(e){if(e.options==null)return;let t=e.options,r=t.authsource||t.authSource;r!=null&&(e.auth=Object.assign({},e.auth,{db:r}));let n=t.authmechanism||t.authMechanism;if(n!=null){if(Eqe.has(n)&&(!e.auth||e.auth.username==null))throw new wt(`Username required for mechanism \`${n}\``);if(n==="GSSAPI"){if(r!=null&&r!=="$external")throw new wt(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}if(n==="MONGODB-AWS"){if(r!=null&&r!=="$external")throw new wt(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}if(n==="MONGODB-X509"){if(e.auth&&e.auth.password!=null)throw new wt(`Password not allowed for mechanism \`${n}\``);if(r!=null&&r!=="$external")throw new wt(`Invalid source \`${r}\` for mechanism \`${n}\` specified.`);e.auth=Object.assign({},e.auth,{db:"$external"})}n==="PLAIN"&&e.auth&&e.auth.db==null&&(e.auth=Object.assign({},e.auth,{db:"$external"}))}return e.auth&&e.auth.db==null&&(e.auth=Object.assign({},e.auth,{db:"admin"})),e}s(wqe,"applyAuthExpectations");function bqe(e,t){let r={},n=sd.parse(e);Tqe(n);for(let i in n){let o=n[i];if(o===""||o==null)throw new wt("Incomplete key value pair for option");let a=i.toLowerCase();if(a==="serverapi")throw new wt("URI cannot contain `serverApi`, it can only be passed to the client");let u=mqe.has(a)?o:IM(a,o);Sqe(r,a,u,t)}return r.wtimeout&&r.wtimeoutms&&(delete r.wtimeout,hqe("Unsupported option `wtimeout` specified")),Object.keys(r).length?r:null}s(bqe,"parseQueryString");function Oqe(e){return e.tls&&(e.ssl=e.tls),e.tlsInsecure?(e.checkServerIdentity=!1,e.sslValidate=!1):Object.assign(e,{checkServerIdentity:!e.tlsAllowInvalidHostnames,sslValidate:!e.tlsAllowInvalidCertificates}),e.tlsCAFile&&(e.ssl=!0,e.sslCA=e.tlsCAFile),e.tlsCertificateKeyFile&&(e.ssl=!0,e.tlsCertificateFile?(e.sslCert=e.tlsCertificateFile,e.sslKey=e.tlsCertificateKeyFile):(e.sslKey=e.tlsCertificateKeyFile,e.sslCert=e.tlsCertificateKeyFile)),e.tlsCertificateKeyFilePassword&&(e.ssl=!0,e.sslPass=e.tlsCertificateKeyFilePassword),e}s(Oqe,"translateTLSOptions");function Tqe(e){let t=Object.keys(e);if(t.indexOf("tlsInsecure")!==-1&&(t.indexOf("tlsAllowInvalidCertificates")!==-1||t.indexOf("tlsAllowInvalidHostnames")!==-1))throw new wt("The `tlsInsecure` option cannot be used with `tlsAllowInvalidCertificates` or `tlsAllowInvalidHostnames`.");let r=_K("tls",e,t),n=_K("ssl",e,t);if(r!=null&&n!=null&&r!==n)throw new wt("All values of `tls` and `ssl` must be the same.")}s(Tqe,"checkTLSOptions");function _K(e,t,r){let n=r.indexOf(e)!==-1,i;if(Array.isArray(t[e])?i=t[e][0]:i=t[e],n&&Array.isArray(t[e])){let o=t[e][0];t[e].forEach(a=>{if(a!==o)throw new wt(`All values of ${e} must be the same.`)})}return i}s(_K,"assertTlsOptionsAreEqual");var Aqe="mongodb",DM="mongodb+srv",Iqe=[Aqe,DM];function SK(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},{caseTranslate:!0},t);try{cO.parse(e)}catch{return r(new wt("URI malformed, cannot be parsed"))}let n=e.match(pqe);if(!n)return r(new wt("Invalid connection string"));let i=n[1];if(Iqe.indexOf(i)===-1)return r(new wt("Invalid protocol provided"));let o=n[4].split("?"),a=o.length>0?o[0]:null,u=o.length>1?o[1]:null,l;try{l=bqe(u,t)}catch(D){return r(D)}if(l=Object.assign({},l,t),Object.keys(l).some(D=>D.toLowerCase()==="loadbalanced"))return r(new wt("Load balancer mode requires driver version 4+"));if(i===DM)return yqe(e,l,r);let f={username:null,password:null,db:a&&a!==""?sd.unescape(a):null};if(l.auth?(l.auth.username&&(f.username=l.auth.username),l.auth.user&&(f.username=l.auth.user),l.auth.password&&(f.password=l.auth.password)):(l.username&&(f.username=l.username),l.user&&(f.username=l.user),l.password&&(f.password=l.password)),n[4].split("?")[0].indexOf("@")!==-1)return r(new wt("Unescaped slash in userinfo section"));let h=n[3].split("@");if(h.length>2)return r(new wt("Unescaped at-sign in authority section"));if(h[0]==null||h[0]==="")return r(new wt("No username provided in authority section"));if(h.length>1){let D=h.shift().split(":");if(D.length>2)return r(new wt("Unescaped colon in authority section"));if(D[0]==="")return r(new wt("Invalid empty username provided"));f.username||(f.username=sd.unescape(D[0])),f.password||(f.password=D[1]?sd.unescape(D[1]):null)}let p=null,g=h.shift().split(",").map(D=>{let O=cO.parse(`mongodb://${D}`);if(O.path==="/:")return p=new wt("Double colon in host identifier"),null;if(D.match(/\.sock/)&&(O.hostname=sd.unescape(D),O.port=null),Number.isNaN(O.port)){p=new wt("Invalid port (non-numeric string)");return}let N={host:O.hostname,port:O.port?parseInt(O.port):27017};if(N.port===0){p=new wt("Invalid port (zero) with hostname");return}if(N.port>65535){p=new wt("Invalid port (larger than 65535) with hostname");return}if(N.port<0){p=new wt("Invalid port (negative number)");return}return N}).filter(D=>!!D);if(p)return r(p);if(g.length===0||g[0].host===""||g[0].host===null)return r(new wt("No hostname or hostnames provided in connection string"));if(!!l.directConnection&&g.length!==1)return r(new wt("directConnection option requires exactly one host"));l.directConnection==null&&g.length===1&&l.replicaSet==null&&(l.directConnection=!0);let C={hosts:g,auth:f.db||f.username?f:null,options:Object.keys(l).length?l:null};C.auth&&C.auth.db?C.defaultDatabase=C.auth.db:C.defaultDatabase="test",C.options=Oqe(C.options);try{wqe(C)}catch(D){return r(D)}r(null,C)}s(SK,"parseConnectionString");EK.exports=SK});var pe=w((gwt,bK)=>{"use strict";var wK=Nw(),Dqe=xw()(require),Rqe=Le().retrieveEJSON();try{let e=Dqe("bson-ext");e&&(wK=e)}catch{}var RM=Object.freeze({v1:"1"}),Nqe=Object.keys(RM).map(e=>RM[e]);bK.exports={ServerApiVersion:RM,ValidServerApiVersions:Nqe,MongoError:ye().MongoError,MongoNetworkError:ye().MongoNetworkError,MongoParseError:ye().MongoParseError,MongoTimeoutError:ye().MongoTimeoutError,MongoServerSelectionError:ye().MongoServerSelectionError,MongoWriteConcernError:ye().MongoWriteConcernError,Connection:fP(),Server:wb(),ReplSet:r4(),Mongos:d4(),Logger:Rs(),Cursor:xs().CoreCursor,ReadPreference:qn(),Sessions:uc(),BSON:wK,EJSON:Rqe,Topology:mK().Topology,Query:ds().Query,MongoCredentials:KP().MongoCredentials,defaultAuthProviders:eB().defaultAuthProviders,MongoCR:DP(),X509:xP(),Plain:MP(),GSSAPI:UP(),ScramSHA1:Ev().ScramSHA1,ScramSHA256:Ev().ScramSHA256,parseConnectionString:CK()}});var TK=w((ywt,OK)=>{"use strict";var xqe=require("events").EventEmitter,xM=class xM extends xqe{constructor(){super()}instrument(t,r){this.$MongoClient=t;let n=this.$prototypeConnect=t.prototype.connect,i=this;t.prototype.connect=function(o){return this.s.options.monitorCommands=!0,this.on("commandStarted",a=>i.emit("started",a)),this.on("commandSucceeded",a=>i.emit("succeeded",a)),this.on("commandFailed",a=>i.emit("failed",a)),n.call(this,o)},typeof r=="function"&&r(null,this)}uninstrument(){this.$MongoClient.prototype.connect=this.$prototypeConnect}};s(xM,"Instrumentation");var NM=xM;OK.exports=NM});var Zv=w((_wt,IK)=>{"use strict";var Pqe=pe().MongoNetworkError,un=Ml().MONGODB_ERROR_CODES,AK=new Set([un.HostUnreachable,un.HostNotFound,un.NetworkTimeout,un.ShutdownInProgress,un.PrimarySteppedDown,un.ExceededTimeLimit,un.SocketException,un.NotMaster,un.InterruptedAtShutdown,un.InterruptedDueToReplStateChange,un.NotMasterNoSlaveOk,un.NotMasterOrSecondary,un.StaleShardVersion,un.StaleEpoch,un.StaleConfig,un.RetryChangeStream,un.FailedToSatisfyReadPreference,un.CursorNotFound]);function Bqe(e,t){return e instanceof Pqe?!0:t>=9?e.code===un.CursorNotFound?!0:e.hasErrorLabel("ResumableChangeStreamError"):AK.has(e.code)}s(Bqe,"isResumableError");IK.exports={GET_MORE_RESUMABLE_CODES:AK,isResumableError:Bqe,MONGODB_ERROR_CODES:un}});var lO=w((Ewt,DK)=>{"use strict";DK.exports={SYSTEM_NAMESPACE_COLLECTION:"system.namespaces",SYSTEM_INDEX_COLLECTION:"system.indexes",SYSTEM_PROFILE_COLLECTION:"system.profile",SYSTEM_USER_COLLECTION:"system.users",SYSTEM_COMMAND_COLLECTION:"$cmd",SYSTEM_JS_COLLECTION:"system.js"}});var $n=w((Cwt,MK)=>{"use strict";var od=Ml().MONGODB_ERROR_CODES,PM=$().applyWriteConcern,Mqe=pe().BSON.Code,Fqe=$().debugOptions,Mr=$().handleCallback,ps=pe().MongoError,RK=$().parseIndexOptions,ch=pe().ReadPreference,NK=$().toError,qqe=jl().extractCommand,Lqe=lO(),Uqe=$().MongoDBNamespace,jqe=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory","parentDb","promiseLibrary","noListener"];function xK(e,t,r,n,i){let o=Object.assign({},{readPreference:ch.PRIMARY},n);if(o=PM(o,{db:e},n),o.writeConcern&&typeof i!="function")throw ps.create({message:"Cannot use a writeConcern without a provided callback",driver:!0});if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new ps("topology was destroyed"));Vqe(e,t,r,o,(a,u)=>{if(a==null||a.code===od.CannotCreateIndex||a.code===od.DuplicateKey||a.code===od.IndexOptionsConflict||a.code===od.IndexKeySpecsConflict||a.code===od.InterruptedAtShutdown||a.code===od.InvalidIndexSpecificationOption)return Mr(i,a,u);let l=BK(e,t,r,n);o.checkKeys=!1,e.s.topology.insert(e.s.namespace.withCollection(Lqe.SYSTEM_INDEX_COLLECTION),l,o,(f,h)=>{if(i!=null){if(f)return Mr(i,f);if(h==null)return Mr(i,null,null);if(h.result.writeErrors)return Mr(i,ps.create(h.result.writeErrors[0]),null);Mr(i,null,l.name)}})})}s(xK,"createIndex");function $qe(e,t,r){function n(i){if(r.listeners(t).length>0){r.emit(t,i,e);for(let o=0;o<e.s.children.length;o++)e.s.children[o].emit(t,i,e.s.children[o])}}return s(n,"listener"),n}s($qe,"createListener");function kqe(e,t,r,n,i){let o=PM({},{db:e},n),u=BK(e,t,r,n).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new ps("topology was destroyed"));o.readPreference=ch.PRIMARY,PK(e,t,o,(l,f)=>{if(l!=null&&l.code!==od.NamespaceNotFound)return Mr(i,l,null);if(f==null||!f[u])xK(e,t,r,n,i);else if(typeof i=="function")return Mr(i,null,u)})}s(kqe,"ensureIndex");function Gqe(e,t,r,n,i){let o=t,a=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return i(new ps("topology was destroyed"));o&&o._bsontype==="Code"||(o=new Mqe(o)),r!=null&&!Array.isArray(r)&&typeof r!="function"?a=[r]:r!=null&&Array.isArray(r)&&typeof r!="function"&&(a=r);let u={$eval:o,args:a};n.nolock&&(u.nolock=n.nolock),n.readPreference=new ch(ch.PRIMARY),BM(e,u,n,(l,f)=>{if(l)return Mr(i,l,null);if(f&&f.ok===1)return Mr(i,null,f.retval);if(f)return Mr(i,ps.create({message:`eval failed: ${f.errmsg}`,driver:!0}),null);Mr(i,l,f)})}s(Gqe,"evaluate");function BM(e,t,r,n){if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new ps("topology was destroyed"));let i=r.dbName||r.authdb||e.databaseName;if(r.readPreference=ch.resolve(e,r),e.s.logger.isDebug()){let o=qqe(t);e.s.logger.debug(`executing command ${JSON.stringify(o.shouldRedact?`${o.name} details REDACTED`:t)} against ${i}.$cmd with options [${JSON.stringify(Fqe(jqe,r))}]`)}e.s.topology.command(e.s.namespace.withCollection("$cmd"),t,r,(o,a)=>{if(o)return Mr(n,o);if(r.full)return Mr(n,null,a);Mr(n,null,a.result)})}s(BM,"executeCommand");function Wqe(e,t,r,n){let i=new Uqe("admin","$cmd");e.s.topology.command(i,t,r,(o,a)=>{if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new ps("topology was destroyed"));if(o)return Mr(n,o);Mr(n,null,a.result)})}s(Wqe,"executeDbAdminCommand");function PK(e,t,r,n){let i=r.full==null?!1:r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new ps("topology was destroyed"));function o(a){let u={};for(let l=0;l<a.length;l++){let f=a[l];u[f.name]=[];for(let h in f.key)u[f.name].push([h,f.key[h]])}return u}s(o,"processResults"),e.collection(t).listIndexes(r).toArray((a,u)=>{if(a)return n(NK(a));if(!Array.isArray(u))return Mr(n,null,[]);if(i)return Mr(n,null,u);Mr(n,null,o(u))})}s(PK,"indexInformation");function zqe(e,t,r){try{e.collection("system.profile").find({},t).toArray(r)}catch(n){return r(n,null)}}s(zqe,"profilingInfo");function Hqe(e){if(typeof e!="string")throw ps.create({message:"database name must be a string",driver:!0});if(e.length===0)throw ps.create({message:"database name cannot be the empty string",driver:!0});if(e==="$external")return;let t=[" ",".","$","/","\\"];for(let r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)throw ps.create({message:"database names cannot contain the character '"+t[r]+"'",driver:!0})}s(Hqe,"validateDatabaseName");function BK(e,t,r,n){let i=RK(r),o=i.fieldHash,a=typeof n.name=="string"?n.name:i.name,u={ns:e.s.namespace.withCollection(t).toString(),key:o,name:a},l=n==null||typeof n=="object"?!1:n;n=n==null||typeof n=="boolean"?{}:n;let f=Object.keys(u);for(let p in n)f.indexOf(p)===-1&&(u[p]=n[p]);u.unique==null&&(u.unique=l);let h=["w","wtimeout","j","fsync","readPreference","session"];for(let p=0;p<h.length;p++)delete u[h[p]];return u}s(BK,"createCreateIndexCommand");function Vqe(e,t,r,n,i){let o=RK(r),a=typeof n.name=="string"?n.name:o.name,u=[{name:a,key:o.fieldHash}],l=Object.keys(u[0]).concat(["writeConcern","w","wtimeout","j","fsync","readPreference","session"]);for(let p in n)l.indexOf(p)===-1&&(u[0][p]=n[p]);let f=e.s.topology.capabilities();if(u[0].collation&&f&&!f.commandsTakeCollation){let p=new ps("server/primary/mongos does not support collation");return p.code=67,i(p)}let h=PM({createIndexes:t,indexes:u},{db:e},n);n.readPreference=ch.PRIMARY,BM(e,h,n,(p,g)=>{if(p)return Mr(i,p,null);if(g.ok===0)return Mr(i,NK(g),null);Mr(i,null,a)})}s(Vqe,"createIndexUsingCreateIndexes");MK.exports={createListener:$qe,createIndex:xK,ensureIndex:kqe,evaluate:Gqe,executeCommand:BM,executeDbAdminCommand:Wqe,indexInformation:PK,profilingInfo:zqe,validateDatabaseName:Hqe}});var Ii=w((bwt,UK)=>{"use strict";var dO=$().applyRetryableWrites,fO=$().applyWriteConcern,e_=$().decorateWithCollation,Yqe=$().decorateWithReadConcern,Kqe=$n().executeCommand,FK=$().formattedOrderClause,br=$().handleCallback,hO=pe().MongoError,Xqe=pe().ReadPreference,Qa=$().toError,MM=xs().CursorState,qK=Le().maxWireVersion;function Jqe(e,t,r){let n=r.skip,i=r.limit,o=r.hint,a=r.maxTimeMS;t=t||{};let u={count:r.collectionName,query:t};return e.s.numberOfRetries?(e.options.hint?o=e.options.hint:e.cmd.hint&&(o=e.cmd.hint),e_(u,e,e.cmd)):e_(u,e,r),typeof n=="number"&&(u.skip=n),typeof i=="number"&&(u.limit=i),typeof a=="number"&&(u.maxTimeMS=a),o&&(u.hint=o),Yqe(u,e),u}s(Jqe,"buildCountCommand");function Qqe(e,t,r,n,i,o){let a={findAndModify:e.collectionName,query:t};r=FK(r),r&&(a.sort=r),a.new=!!i.new,a.remove=!!i.remove,a.upsert=!!i.upsert;let u=i.projection||i.fields;u&&(a.fields=u),i.arrayFilters&&(a.arrayFilters=i.arrayFilters,delete i.arrayFilters),n&&!i.remove&&(a.update=n),i.maxTimeMS&&(a.maxTimeMS=i.maxTimeMS),i.serializeFunctions=i.serializeFunctions||e.s.serializeFunctions,i.checkKeys=!1;let l=Object.assign({},i);l=dO(l,e.s.db),l=fO(l,{db:e.s.db,collection:e},i),l.writeConcern&&(a.writeConcern=l.writeConcern),l.bypassDocumentValidation===!0&&(a.bypassDocumentValidation=l.bypassDocumentValidation),l.readPreference=Xqe.primary;try{e_(a,e,l)}catch(f){return o(f,null)}Kqe(e.s.db,a,l,(f,h)=>f?br(o,f,null):br(o,null,h))}s(Qqe,"findAndModify");function Zqe(e,t,r,n){let i=r.full==null?!1:r.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return n(new hO("topology was destroyed"));function o(a){let u={};for(let l=0;l<a.length;l++){let f=a[l];u[f.name]=[];for(let h in f.key)u[f.name].push([h,f.key[h]])}return u}s(o,"processResults"),e.collection(t).listIndexes(r).toArray((a,u)=>{if(a)return n(Qa(a));if(!Array.isArray(u))return br(n,null,[]);if(i)return br(n,null,u);br(n,null,o(u))})}s(Zqe,"indexInformation");function LK(e,t,r){let n=typeof r.forceServerObjectId=="boolean"?r.forceServerObjectId:e.s.db.options.forceServerObjectId;return n===!0?t:t.map(i=>(n!==!0&&i._id==null&&(i._id=e.s.pkFactory.createPk()),i))}s(LK,"prepareDocs");function eLe(e,t){if(e.s.state===MM.CLOSED||e.isDead&&e.isDead())return br(t,hO.create({message:"Cursor is closed",driver:!0}));if(e.s.state===MM.INIT&&e.cmd&&e.cmd.sort)try{e.cmd.sort=FK(e.cmd.sort)}catch(r){return br(t,r)}e._next((r,n)=>{if(e.s.state=MM.OPEN,r)return br(t,r);br(t,null,n)})}s(eLe,"nextObject");function tLe(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{},t=Array.isArray(t)?t:[t];let i=Object.assign({},r);i=dO(i,e.s.db),i=fO(i,{db:e.s.db,collection:e},r),i.keepGoing===!0&&(i.ordered=!1),i.serializeFunctions=r.serializeFunctions||e.s.serializeFunctions,t=LK(e,t,r),e.s.topology.insert(e.s.namespace,t,i,(o,a)=>{if(n!=null){if(o)return br(n,o);if(a==null)return br(n,null,null);if(a.result.code)return br(n,Qa(a.result));if(a.result.writeErrors)return br(n,Qa(a.result.writeErrors[0]));a.ops=t,br(n,null,a)}})}s(tLe,"insertDocuments");function rLe(e,t,r,n){typeof r=="function"?(n=r,r={}):typeof t=="function"&&(n=t,r={},t={}),r=r||{};let i=Object.assign({},r);i=dO(i,e.s.db),i=fO(i,{db:e.s.db,collection:e},r),t==null&&(t={});let o={q:t,limit:0};r.single?o.limit=1:i.retryWrites&&(i.retryWrites=!1),r.hint&&(o.hint=r.hint);try{e_(i,e,r)}catch(a){return n(a,null)}if(r.explain!==void 0&&qK(e.s.topology)<3)return n?n(new hO("server does not support explain on remove")):void 0;e.s.topology.remove(e.s.namespace,[o],i,(a,u)=>{if(n!=null){if(a)return br(n,a,null);if(u==null)return br(n,null,null);if(u.result.code)return br(n,Qa(u.result));if(u.result.writeErrors)return br(n,Qa(u.result.writeErrors[0]));br(n,null,u)}})}s(rLe,"removeDocuments");function nLe(e,t,r,n,i){if(typeof n=="function"&&(i=n,n=null),n==null&&(n={}),typeof i!="function"&&(i=null),t==null||typeof t!="object")return i(Qa("selector must be a valid JavaScript object"));if(r==null||typeof r!="object")return i(Qa("document must be a valid JavaScript object"));let o=Object.assign({},n);o=dO(o,e.s.db),o=fO(o,{db:e.s.db,collection:e},n),o.serializeFunctions=n.serializeFunctions||e.s.serializeFunctions;let a={q:t,u:r};a.upsert=n.upsert!==void 0?!!n.upsert:!1,a.multi=n.multi!==void 0?!!n.multi:!1,n.hint&&(a.hint=n.hint),o.arrayFilters&&(a.arrayFilters=o.arrayFilters,delete o.arrayFilters),o.retryWrites&&a.multi&&(o.retryWrites=!1);try{e_(o,e,n)}catch(u){return i(u,null)}if(n.explain!==void 0&&qK(e.s.topology)<3)return i?i(new hO("server does not support explain on update")):void 0;e.s.topology.update(e.s.namespace,[a],o,(u,l)=>{if(i!=null){if(u)return br(i,u,null);if(l==null)return br(i,null,null);if(l.result.code)return br(i,Qa(l.result));if(l.result.writeErrors)return br(i,Qa(l.result.writeErrors[0]));br(i,null,l)}})}s(nLe,"updateDocuments");UK.exports={buildCountCommand:Jqe,findAndModify:Qqe,indexInformation:Zqe,nextObject:eLe,prepareDocs:LK,insertDocuments:tLe,removeDocuments:rLe,updateDocuments:nLe}});var lh=w((Twt,WK)=>{"use strict";var iLe=$().applyWriteConcern,FM=pe().BSON.Code,sLe=$n().createIndex,oLe=$().decorateWithCollation,jK=$().decorateWithReadConcern,aLe=$n().ensureIndex,uLe=$n().evaluate,qM=$n().executeCommand,Xi=$().handleCallback,$K=$n().indexInformation,cLe=pe().BSON.Long,lLe=pe().MongoError,kK=pe().ReadPreference,dLe=Ii().insertDocuments,fLe=Ii().updateDocuments,hLe=`function () {
var c = db[ns].find(condition);
var map = new Map();
var reduce_function = reduce;

while (c.hasNext()) {
var obj = c.next();
var key = {};

for (var i = 0, len = keys.length; i < len; ++i) {
var k = keys[i];
key[k] = obj[k];
}

var aggObj = map.get(key);

if (aggObj == null) {
var newObj = Object.extend({}, key);
aggObj = Object.extend(newObj, initial);
map.put(key, aggObj);
}

reduce_function(obj, aggObj);
}

return { "result": map.values() };
}`;function pLe(e,t,r,n){sLe(e.s.db,e.collectionName,t,r,n)}s(pLe,"createIndex");function mLe(e,t,r,n){let i=e.s.topology.capabilities();for(let o=0;o<t.length;o++)if(t[o].name==null){let a=[];if(t[o].collation&&i&&!i.commandsTakeCollation)return n(new lLe("server/primary/mongos does not support collation"));for(let u in t[o].key)a.push(`${u}_${t[o].key[u]}`);t[o].name=a.join("_")}r=Object.assign({},r,{readPreference:kK.PRIMARY}),qM(e.s.db,{createIndexes:e.collectionName,indexes:t},r,n)}s(mLe,"createIndexes");function gLe(e,t,r,n){aLe(e.s.db,e.collectionName,t,r,n)}s(gLe,"ensureIndex");function yLe(e,t,r,n,i,o,a,u,l){if(a){let f=i&&i._bsontype==="Code"?i:new FM(i),h={group:{ns:e.collectionName,$reduce:f,cond:r,initial:n,out:"inline"}};if(o!=null&&(h.group.finalize=o),typeof t=="function"||t&&t._bsontype==="Code")h.group.$keyf=t&&t._bsontype==="Code"?t:new FM(t);else{let p={};t.forEach(g=>{p[g]=1}),h.group.key=p}u=Object.assign({},u),u.readPreference=kK.resolve(e,u),jK(h,e,u);try{oLe(h,e,u)}catch(p){return l(p,null)}qM(e.s.db,h,u,(p,g)=>{if(p)return Xi(l,p,null);Xi(l,null,g.retval)})}else{let f=i!=null&&i._bsontype==="Code"?i.scope:{};f.ns=e.collectionName,f.keys=t,f.condition=r,f.initial=n;let h=hLe.replace(/ reduce;/,i.toString()+";");uLe(e.s.db,new FM(h,f),null,u,(p,g)=>{if(p)return Xi(l,p,null);Xi(l,null,g.result||g)})}}s(yLe,"group");function vLe(e,t,r){t=Object.assign({},{full:!0},t),$K(e.s.db,e.collectionName,t,r)}s(vLe,"indexes");function _Le(e,t,r,n){GK(e,r,(i,o)=>{if(i!=null)return Xi(n,i,null);if(!Array.isArray(t))return Xi(n,null,o[t]!=null);for(let a=0;a<t.length;a++)if(o[t[a]]==null)return Xi(n,null,!1);return Xi(n,null,!0)})}s(_Le,"indexExists");function GK(e,t,r){$K(e.s.db,e.collectionName,t,r)}s(GK,"indexInformation");function SLe(e,t,r){let n={parallelCollectionScan:e.collectionName,numCursors:t.numCursors};jK(n,e,t);let i=t.raw;delete t.raw,qM(e.s.db,n,t,(o,a)=>{if(o)return Xi(r,o,null);if(a==null)return Xi(r,new Error("no result returned for parallelCollectionScan"),null);t=Object.assign({explicitlyIgnoreSession:!0},t);let u=[];i&&(t.raw=i);for(let l=0;l<a.cursors.length;l++){let f=a.cursors[l].cursor.id,h=typeof f=="number"?cLe.fromNumber(f):f;u.push(e.s.topology.cursor(e.namespace,h,t))}Xi(r,null,u)})}s(SLe,"parallelCollectionScan");function ELe(e,t,r,n){let i=iLe(Object.assign({},r),{db:e.s.db,collection:e},r);if(t._id!=null)return i.upsert=!0,fLe(e,{_id:t._id},t,i,n);dLe(e,[t],i,(o,a)=>{if(n!=null){if(t==null)return Xi(n,null,null);if(o)return Xi(n,o,null);Xi(n,null,a)}})}s(ELe,"save");WK.exports={createIndex:pLe,createIndexes:mLe,ensureIndex:gLe,group:yLe,indexes:vLe,indexExists:_Le,indexInformation:GK,parallelCollectionScan:SLe,save:ELe}});var YK=w((Iwt,VK)=>{"use strict";var CLe=lh().buildCountCommand,dh=$().handleCallback,zK=pe().MongoError,wLe=Array.prototype.push,pO=xs().CursorState;function bLe(e,t,r,n){t&&(typeof e.cursorSkip()=="number"&&(r.skip=e.cursorSkip()),typeof e.cursorLimit()=="number"&&(r.limit=e.cursorLimit())),r.readPreference&&e.setReadPreference(r.readPreference),typeof r.maxTimeMS!="number"&&e.cmd&&typeof e.cmd.maxTimeMS=="number"&&(r.maxTimeMS=e.cmd.maxTimeMS);let i={};i.skip=r.skip,i.limit=r.limit,i.hint=r.hint,i.maxTimeMS=r.maxTimeMS,i.collectionName=e.namespace.collection;let o;try{o=CLe(e,e.cmd.query,i)}catch(a){return n(a)}e.server=e.topology.s.coreTopology,e.topology.command(e.namespace.withCollection("$cmd"),o,e.options,(a,u)=>{n(a,u?u.result.n:null)})}s(bLe,"count");function LM(e,t){if(!t)throw zK.create({message:"callback is mandatory",driver:!0});if(e.isNotified())return;if(e.s.state===pO.CLOSED||e.isDead())return dh(t,zK.create({message:"Cursor is closed",driver:!0}));e.s.state===pO.INIT&&(e.s.state=pO.OPEN);let r=null;if(e.bufferedCount()>0){for(;r=HK(e,t);)r(e,t);LM(e,t)}else e.next((n,i)=>{if(n)return dh(t,n);if(i==null)return e.close({skipKillCursors:!0},()=>dh(t,null,null));dh(t,null,i)!==!1&&LM(e,t)})}s(LM,"each");function HK(e,t){if(e.bufferedCount()!==0)return e._next(t),HK}s(HK,"loop");function OLe(e,t){let r=[];e.rewind(),e.s.state=pO.INIT;let n=s(()=>{e._next((i,o)=>{if(i)return dh(t,i);if(o==null)return e.close({skipKillCursors:!0},()=>dh(t,null,r));if(r.push(o),e.bufferedCount()>0){let a=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&typeof e.s.transforms.doc=="function"&&(a=a.map(e.s.transforms.doc)),wLe.apply(r,a)}n()})},"fetchDocs");n()}s(OLe,"toArray");VK.exports={count:bLe,each:LM,toArray:OLe}});var XK=w((Rwt,KK)=>{"use strict";var TLe=Ii().buildCountCommand,ALe=he().OperationBase,jM=class jM extends ALe{constructor(t,r,n){super(n),this.cursor=t,this.applySkipLimit=r}execute(t){let r=this.cursor,n=this.applySkipLimit,i=this.options;n&&(typeof r.cursorSkip()=="number"&&(i.skip=r.cursorSkip()),typeof r.cursorLimit()=="number"&&(i.limit=r.cursorLimit())),i.readPreference&&r.setReadPreference(i.readPreference),typeof i.maxTimeMS!="number"&&r.cmd&&typeof r.cmd.maxTimeMS=="number"&&(i.maxTimeMS=r.cmd.maxTimeMS);let o={};o.skip=i.skip,o.limit=i.limit,o.hint=i.hint,o.maxTimeMS=i.maxTimeMS,o.collectionName=r.namespace.collection;let a;try{a=TLe(r,r.cmd.query,o)}catch(u){return t(u)}r.server=r.topology.s.coreTopology,r.topology.command(r.namespace.withCollection("$cmd"),a,r.options,(u,l)=>{t(u,l?l.result.n:null)})}};s(jM,"CountOperation");var UM=jM;KK.exports=UM});var Jo=w((xwt,r5)=>{"use strict";var ILe=require("stream").Transform,DLe=require("stream").PassThrough,kM=require("util").deprecate,JK=$().handleCallback,QK=pe().ReadPreference,bt=pe().MongoError,ZK=xs().CoreCursor,et=xs().CursorState,RLe=pe().BSON.Map,t_=$().maybePromise,NLe=Vf(),xLe=$().formattedOrderClause,PLe=Ov().Explain,BLe=he().Aspect,$M=YK().each,MLe=XK(),e5=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"],t5=["numberOfRetries","tailableRetryInterval"],mO=class mO extends ZK{constructor(t,r,n,i){super(t,r,n,i),this.operation&&(i=this.operation.options);let o=i.numberOfRetries||5,a=i.tailableRetryInterval||500,u=o,l=i.promiseLibrary||Promise;this.s={numberOfRetries:o,tailableRetryInterval:a,currentNumberOfRetries:u,state:et.INIT,promiseLibrary:l,explicitlyIgnoreSession:!!i.explicitlyIgnoreSession},!i.explicitlyIgnoreSession&&i.session&&(this.cursorState.session=i.session),this.options.noCursorTimeout===!0&&this.addCursorFlag("noCursorTimeout",!0);let f=1e3;this.cmd.cursor&&this.cmd.cursor.batchSize?f=this.cmd.cursor.batchSize:i.cursor&&i.cursor.batchSize?f=i.cursor.batchSize:typeof i.batchSize=="number"&&(f=i.batchSize),this.setCursorBatchSize(f)}get readPreference(){return this.operation?this.operation.readPreference:this.options.readPreference}get sortValue(){return this.cmd.sort}set session(t){this.cursorState.session=t}_initializeCursor(t){this.operation&&this.operation.session!=null?this.cursorState.session=this.operation.session:!this.s.explicitlyIgnoreSession&&!this.cursorState.session&&this.topology.hasSessionSupport()&&(this.cursorState.session=this.topology.startSession({owner:this}),this.operation&&(this.operation.session=this.cursorState.session)),super._initializeCursor(t)}hasNext(t){if(this.s.state===et.CLOSED||this.isDead&&this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return t_(this,t,r=>{let n=this;if(n.isNotified())return r(null,!1);n._next((i,o)=>{if(i)return r(i);if(o==null||n.s.state===mO.CLOSED||n.isDead())return r(null,!1);n.s.state=et.OPEN,n.cursorState.cursorIndex--,n.cursorState.limit>0&&n.cursorState.currentLimit--,r(null,!0)})})}next(t){return t_(this,t,r=>{let n=this;if(n.s.state===et.CLOSED||n.isDead&&n.isDead()){r(bt.create({message:"Cursor is closed",driver:!0}));return}if(n.s.state===et.INIT&&n.cmd.sort)try{n.cmd.sort=xLe(n.cmd.sort)}catch(i){return r(i)}n._next((i,o)=>{if(i)return r(i);n.s.state=et.OPEN,r(null,o)})})}filter(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.query=t,this}maxScan(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.maxScan=t,this}hint(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.hint=t,this}min(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.min=t,this}max(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.max=t,this}returnKey(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.returnKey=t,this}showRecordId(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.showDiskLoc=t,this}snapshot(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.snapshot=t,this}setCursorOption(t,r){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(t5.indexOf(t)===-1)throw bt.create({message:`option ${t} is not a supported option ${t5}`,driver:!0});return this.s[t]=r,t==="numberOfRetries"&&(this.s.currentNumberOfRetries=r),this}addCursorFlag(t,r){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(e5.indexOf(t)===-1)throw bt.create({message:`flag ${t} is not a supported flag ${e5}`,driver:!0});if(typeof r!="boolean")throw bt.create({message:`flag ${t} must be a boolean value`,driver:!0});return this.cmd[t]=r,this}addQueryModifier(t,r){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(t[0]!=="$")throw bt.create({message:`${t} is not a valid query modifier`,driver:!0});let n=t.substr(1);return this.cmd[n]=r,n==="orderby"&&(this.cmd.sort=this.cmd[n]),this}comment(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.comment=t,this}maxAwaitTimeMS(t){if(typeof t!="number")throw bt.create({message:"maxAwaitTimeMS must be a number",driver:!0});if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.maxAwaitTimeMS=t,this}maxTimeMS(t){if(typeof t!="number")throw bt.create({message:"maxTimeMS must be a number",driver:!0});if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.maxTimeMS=t,this}project(t){if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});return this.cmd.fields=t,this}sort(t,r){if(this.options.tailable)throw bt.create({message:"Tailable cursor doesn't support sorting",driver:!0});if(this.s.state===et.CLOSED||this.s.state===et.OPEN||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});let n=t;return Array.isArray(n)&&Array.isArray(n[0])&&(n=new RLe(n.map(i=>{let o=[i[0],null];if(i[1]==="asc")o[1]=1;else if(i[1]==="desc")o[1]=-1;else if(i[1]===1||i[1]===-1||i[1].$meta)o[1]=i[1];else throw new bt("Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]");return o}))),r!=null&&(n=[[t,r]]),this.cmd.sort=n,this}batchSize(t){if(this.options.tailable)throw bt.create({message:"Tailable cursor doesn't support batchSize",driver:!0});if(this.s.state===et.CLOSED||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw bt.create({message:"batchSize requires an integer",driver:!0});return this.cmd.batchSize=t,this.setCursorBatchSize(t),this}collation(t){return this.cmd.collation=t,this}limit(t){if(this.options.tailable)throw bt.create({message:"Tailable cursor doesn't support limit",driver:!0});if(this.s.state===et.OPEN||this.s.state===et.CLOSED||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw bt.create({message:"limit requires an integer",driver:!0});return this.cmd.limit=t,this.setCursorLimit(t),this}skip(t){if(this.options.tailable)throw bt.create({message:"Tailable cursor doesn't support skip",driver:!0});if(this.s.state===et.OPEN||this.s.state===et.CLOSED||this.isDead())throw bt.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw bt.create({message:"skip requires an integer",driver:!0});return this.cmd.skip=t,this.setCursorSkip(t),this}each(t){this.rewind(),this.s.state=et.INIT,$M(this,t)}forEach(t,r){if(this.rewind(),this.s.state=et.INIT,typeof r=="function")$M(this,(n,i)=>{if(n)return r(n),!1;if(i!=null){try{t(i)}catch(o){return r(o),!1}return!0}if(i==null&&r){let o=r;return r=null,o(null),!1}});else return new this.s.promiseLibrary((n,i)=>{$M(this,(o,a)=>{if(o)return i(o),!1;if(a==null)return n(null),!1;try{t(a)}catch(u){return i(u),!1}return!0})})}setReadPreference(t){if(this.s.state!==et.INIT)throw bt.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});if(t instanceof QK)this.options.readPreference=t;else if(typeof t=="string")this.options.readPreference=new QK(t);else throw new TypeError("Invalid read preference: "+t);return this}toArray(t){if(this.options.tailable)throw bt.create({message:"Tailable cursor cannot be converted to array",driver:!0});return t_(this,t,r=>{let n=this,i=[];n.rewind(),n.s.state=et.INIT;let o=s(()=>{n._next((a,u)=>{if(a)return JK(r,a);if(u==null)return n.close({skipKillCursors:!0},()=>JK(r,null,i));if(i.push(u),n.bufferedCount()>0){let l=n.readBufferedDocuments(n.bufferedCount());Array.prototype.push.apply(i,l)}o()})},"fetchDocs");o()})}count(t,r,n){if(this.cmd.query==null)throw bt.create({message:"count can only be used with find command",driver:!0});typeof r=="function"&&(n=r,r={}),r=r||{},typeof t=="function"&&(n=t,t=!0),this.cursorState.session&&(r=Object.assign({},r,{session:this.cursorState.session}));let i=new MLe(this,t,r);return NLe(this.topology,i,n)}close(t,r){return typeof t=="function"&&(r=t,t={}),t=Object.assign({},{skipKillCursors:!1},t),t_(this,r,n=>{this.s.state=et.CLOSED,t.skipKillCursors||this.kill(),this._endSession(()=>{this.emit("close"),n(null,this)})})}map(t){if(this.cursorState.transforms&&this.cursorState.transforms.doc){let r=this.cursorState.transforms.doc;this.cursorState.transforms.doc=n=>t(r(n))}else this.cursorState.transforms={doc:t};return this}isClosed(){return this.isDead()}destroy(t){t&&this.emit("error",t),this.pause(),this.close()}stream(t){return this.cursorState.streamOptions=t||{},this}transformStream(t){let r=t||{};if(typeof r.transform=="function"){let n=new ILe({objectMode:!0,transform:function(i,o,a){this.push(r.transform(i)),a()}});return this.pipe(n)}return this.pipe(new DLe({objectMode:!0}))}explain(t,r){if(typeof t=="function"&&(r=t,t=!0),t===void 0&&(t=!0),!this.operation||!this.operation.hasAspect(BLe.EXPLAINABLE))throw new bt("This command cannot be explained");return this.operation.explain=new PLe(t),t_(this,r,n=>{ZK.prototype._next.apply(this,[n])})}getLogger(){return this.logger}};s(mO,"Cursor");var Ac=mO;Ac.prototype.maxTimeMs=Ac.prototype.maxTimeMS;kM(Ac.prototype.each,"Cursor.each is deprecated. Use Cursor.forEach instead.");kM(Ac.prototype.maxScan,"Cursor.maxScan is deprecated, and will be removed in a later version");kM(Ac.prototype.snapshot,"Cursor Snapshot is deprecated, and will be removed in a later version");r5.exports=Ac});var Qo=w((Bwt,s5)=>{"use strict";var gO=he().Aspect,FLe=he().OperationBase,n5=pe().ReadPreference,qLe=Wl(),LLe=Fa(),ULe=Le().maxWireVersion,jLe=$().decorateWithExplain,$Le=uc().commandSupportsReadConcern,kLe=ye().MongoError,GLe=jl().extractCommand,i5=5,WM=class WM extends FLe{constructor(t,r,n){super(r),this.ns=t.s.namespace.withCollection("$cmd");let i=this.hasAspect(gO.NO_INHERIT_OPTIONS)?void 0:t;this.readPreference=this.hasAspect(gO.WRITE_OPERATION)?n5.primary:n5.resolve(i,this.options),this.readConcern=zLe(i,this.options),this.writeConcern=WLe(i,this.options),n&&typeof n.fullResponse=="boolean"&&(this.fullResponse=!0),this.options.readPreference=this.readPreference,t.s.logger?this.logger=t.s.logger:t.s.db&&t.s.db.logger&&(this.logger=t.s.db.logger)}executeCommand(t,r,n){this.server=t;let i=this.options,o=ULe(t),a=this.session&&this.session.inTransaction();if(this.readConcern&&$Le(r)&&!a&&Object.assign(r,{readConcern:this.readConcern}),i.collation&&o<i5){n(new kLe(`Server ${t.name}, which reports wire version ${o}, does not support collation`));return}if(o>=i5&&(this.writeConcern&&this.hasAspect(gO.WRITE_OPERATION)&&Object.assign(r,{writeConcern:this.writeConcern}),i.collation&&typeof i.collation=="object"&&Object.assign(r,{collation:i.collation})),typeof i.maxTimeMS=="number"&&(r.maxTimeMS=i.maxTimeMS),typeof i.comment=="string"&&(r.comment=i.comment),this.hasAspect(gO.EXPLAINABLE)&&this.explain&&(o<6&&r.aggregate?r.explain=!0:r=jLe(r,this.explain)),this.logger&&this.logger.isDebug()){let u=GLe(r);this.logger.debug(`executing command ${JSON.stringify(u.shouldRedact?`${u.name} details REDACTED`:r)} against ${this.ns}`)}t.command(this.ns.toString(),r,this.options,(u,l)=>{if(u){n(u,null);return}if(this.fullResponse){n(null,l);return}n(null,l.result)})}};s(WM,"CommandOperationV2");var GM=WM;function WLe(e,t){return LLe.fromOptions(t)||e&&e.writeConcern}s(WLe,"resolveWriteConcern");function zLe(e,t){return qLe.fromOptions(t)||e&&e.readConcern}s(zLe,"resolveReadConcern");s5.exports=GM});var r_=w((Fwt,a5)=>{"use strict";var HLe=Qo(),o5=pe().MongoError,VLe=Le().maxWireVersion,YLe=pe().ReadPreference,yO=he().Aspect,KLe=he().defineAspects,XLe=1,JLe=8,zM=class zM extends HLe{constructor(t,r,n){if(super(t,n,{fullResponse:!0}),this.target=t.s.namespace&&t.s.namespace.collection?t.s.namespace.collection:XLe,this.pipeline=r,this.hasWriteStage=!1,typeof n.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage&&(this.readPreference=YLe.primary),this.explain&&this.writeConcern)throw new o5('"explain" cannot be used on an aggregate call with writeConcern');if(n.cursor!=null&&typeof n.cursor!="object")throw new o5("cursor options must be an object")}get canRetryRead(){return!this.hasWriteStage}addToPipeline(t){this.pipeline.push(t)}execute(t,r){let n=this.options,i=VLe(t),o={aggregate:this.target,pipeline:this.pipeline};this.hasWriteStage&&i<JLe&&(this.readConcern=null),i>=5&&this.hasWriteStage&&this.writeConcern&&Object.assign(o,{writeConcern:this.writeConcern}),n.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=n.bypassDocumentValidation),typeof n.allowDiskUse=="boolean"&&(o.allowDiskUse=n.allowDiskUse),n.hint&&(o.hint=n.hint),this.explain&&(n.full=!1),o.cursor=n.cursor||{},n.batchSize&&!this.hasWriteStage&&(o.cursor.batchSize=n.batchSize),super.executeCommand(t,o,r)}};s(zM,"AggregateOperation");var vO=zM;KLe(vO,[yO.READ_OPERATION,yO.RETRYABLE,yO.EXECUTE_WITH_SELECTION,yO.EXPLAINABLE]);a5.exports=vO});var OO=w((Lwt,d5)=>{"use strict";var c5=pe().BSON.Long,QLe=pe().MongoError,_O=pe().BSON.ObjectID,Di=pe().BSON,u5=pe().MongoWriteConcernError,HM=$().emitWarningOnce,ad=$().toError,cd=$().handleCallback,ZLe=$().applyRetryableWrites,eUe=$().applyWriteConcern,tUe=$().executeLegacyOperation,rUe=$().isPromiseLike,EO=$().hasAtomicOperators,nUe=Le().maxWireVersion,iUe=64,ud=1,Za=2,Ic=3,sUe=new Di([Di.Binary,Di.Code,Di.DBRef,Di.Decimal128,Di.Double,Di.Int32,Di.Long,Di.Map,Di.MaxKey,Di.MinKey,Di.ObjectId,Di.BSONRegExp,Di.Symbol,Di.Timestamp]),KM=class KM{constructor(t,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=t,this.operations=[],this.size=0,this.sizeBytes=0}};s(KM,"Batch");var VM=KM,fh=Symbol("upsertedIds"),hh=Symbol("insertedIds"),XM=class XM{constructor(t){this.result=t,this[fh]=void 0,this[hh]=void 0}get insertedCount(){return typeof this.result.nInserted!="number"?0:this.result.nInserted}get matchedCount(){return typeof this.result.nMatched!="number"?0:this.result.nMatched}get modifiedCount(){return typeof this.result.nModified!="number"?0:this.result.nModified}get deletedCount(){return typeof this.result.nRemoved!="number"?0:this.result.nRemoved}get upsertedCount(){return this.result.upserted?this.result.upserted.length:0}get upsertedIds(){if(this[fh])return this[fh];this[fh]={};for(let t of this.result.upserted||[])this[fh][t.index]=t._id;return this[fh]}get insertedIds(){if(this[hh])return this[hh];this[hh]={};for(let t of this.result.insertedIds||[])this[hh][t.index]=t._id;return this[hh]}get n(){return this.result.insertedCount}get ok(){return this.result.ok}get nInserted(){return this.result.nInserted}get nUpserted(){return this.result.nUpserted}get nMatched(){return this.result.nMatched}get nModified(){return this.result.nModified}get nRemoved(){return this.result.nRemoved}getInsertedIds(){return this.result.insertedIds}getUpsertedIds(){return this.result.upserted}getUpsertedIdAt(t){return this.result.upserted[t]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(t){return t<this.result.writeErrors.length?this.result.writeErrors[t]:null}getWriteErrors(){return this.result.writeErrors}getLastOp(){return this.result.lastOp}getWriteConcernError(){if(this.result.writeConcernErrors.length===0)return null;if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let t="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];t=t+n.errmsg,r===0&&(t=t+" and ")}return new n_({errmsg:t,code:iUe})}}toJSON(){return this.result}toString(){return`BulkWriteResult(${this.toJSON(this.result)})`}isOk(){return this.result.ok===1}};s(XM,"BulkWriteResult");var ph=XM,JM=class JM{constructor(t){this.err=t}get code(){return this.err.code}get errmsg(){return this.err.errmsg}toJSON(){return{code:this.err.code,errmsg:this.err.errmsg}}toString(){return`WriteConcernError(${this.err.errmsg})`}};s(JM,"WriteConcernError");var n_=JM,QM=class QM{constructor(t){this.err=t}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};s(QM,"WriteError");var CO=QM;function SO(e){return typeof e=="number"?c5.fromNumber(e):e}s(SO,"longOrConvert");function bO(e,t,r,n){if(r)n=r;else if(n&&n.result)n=n.result;else if(n==null)return;if(n.ok===0&&t.ok===1){t.ok=0;let o={index:0,code:n.code||0,errmsg:n.message,op:e.operations[0]};t.writeErrors.push(new CO(o));return}else if(n.ok===0&&t.ok===0)return;if(n.opTime||n.lastOp){let o=n.lastOp||n.opTime;if(o._bsontype==="Timestamp"&&(o={ts:o,t:c5.ZERO}),!t.lastOp)t.lastOp=o;else{let a=SO(t.lastOp.ts),u=SO(o.ts);if(u.greaterThan(a))t.lastOp=o;else if(u.equals(a)){let l=SO(t.lastOp.t);SO(o.t).greaterThan(l)&&(t.lastOp=o)}}}e.batchType===ud&&n.n&&(t.nInserted=t.nInserted+n.n),e.batchType===Ic&&n.n&&(t.nRemoved=t.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let o=0;o<n.upserted.length;o++)t.upserted.push({index:n.upserted[o].index+e.originalZeroIndex,_id:n.upserted[o]._id})}else n.upserted&&(i=1,t.upserted.push({index:e.originalZeroIndex,_id:n.upserted}));if(e.batchType===Za&&n.n){let o=n.nModified;t.nUpserted=t.nUpserted+i,t.nMatched=t.nMatched+(n.n-i),typeof o=="number"?t.nModified=t.nModified+o:t.nModified=null}if(Array.isArray(n.writeErrors))for(let o=0;o<n.writeErrors.length;o++){let a={index:e.originalIndexes[n.writeErrors[o].index],code:n.writeErrors[o].code,errmsg:n.writeErrors[o].errmsg,op:e.operations[n.writeErrors[o].index]};t.writeErrors.push(new CO(a))}n.writeConcernError&&t.writeConcernErrors.push(new n_(n.writeConcernError))}s(bO,"mergeBatchResults");function l5(e,t,r){if(e.s.batches.length===0)return cd(r,null,new ph(e.s.bulkResult));let n=e.s.batches.shift();function i(o,a){if((o&&o.driver||o&&o.message)&&!(o instanceof u5))return cd(r,o);if(o&&(o.ok=0),o instanceof u5)return oUe(n,e.s.bulkResult,o,r);let u=new ph(e.s.bulkResult);if(bO(n,e.s.bulkResult,o,a)!=null)return cd(r,null,u);e.handleWriteError(r,u)||l5(e,t,r)}s(i,"resultHandler"),e.finalOptionsHandler({options:t,batch:n,resultHandler:i},r)}s(l5,"executeCommands");function oUe(e,t,r,n){bO(e,t,null,r.result);let i=new n_({errmsg:r.result.writeConcernError.errmsg,code:r.result.writeConcernError.result});return cd(n,new mh(ad(i),new ph(t)),null)}s(oUe,"handleMongoWriteConcernError");var ZM=class ZM extends QLe{constructor(t,r){let n=t.err||t.errmsg||t.errMessage||t;super(n),Object.assign(this,t),this.name="BulkWriteError",this.result=r}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};s(ZM,"BulkWriteError");var mh=ZM,eF=class eF{constructor(t){this.s=t.s}update(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!0,upsert:r};return t.hint&&(n.hint=t.hint),this.s.currentOp=null,this.s.options.addToOperationsList(this,Za,n)}updateOne(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!1,upsert:r};if(t.hint&&(n.hint=t.hint),!EO(t))throw new TypeError("Update document requires atomic operators");return this.s.currentOp=null,this.s.options.addToOperationsList(this,Za,n)}replaceOne(t){let r=typeof this.s.currentOp.upsert=="boolean"?this.s.currentOp.upsert:!1,n={q:this.s.currentOp.selector,u:t,multi:!1,upsert:r};if(t.hint&&(n.hint=t.hint),EO(t))throw new TypeError("Replacement document must not use atomic operators");return this.s.currentOp=null,this.s.options.addToOperationsList(this,Za,n)}upsert(){return this.s.currentOp.upsert=!0,this}deleteOne(){let t={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,this.s.options.addToOperationsList(this,Ic,t)}delete(){let t={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,this.s.options.addToOperationsList(this,Ic,t)}removeOne(){return HM("bulk operation `removeOne` has been deprecated, please use `deleteOne`"),this.deleteOne()}remove(){return HM("bulk operation `remove` has been deprecated, please use `delete`"),this.delete()}};s(eF,"FindOperators");var YM=eF,tF=class tF{constructor(t,r,n,i){this.isOrdered=i,n=n??{};let o=r.s.namespace,a=!1,u=null,l=t.bson,f=t.lastIsMaster(),h=!!(t.s.options&&t.s.options.autoEncrypter),p=f&&f.maxBsonObjectSize?f.maxBsonObjectSize:1024*1024*16,g=h?1024*1024*2:p,_=f&&f.maxWriteBatchSize?f.maxWriteBatchSize:1e3,C=(_-1).toString(10).length+2,D=Object.assign({},n);D=ZLe(D,r.s.db),D=eUe(D,{collection:r},n);let O=D.writeConcern,N=n.promiseLibrary||Promise,F={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:F,currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,batches:[],writeConcern:O,maxBsonObjectSize:p,maxBatchSizeBytes:g,maxWriteBatchSize:_,maxKeySize:C,namespace:o,bson:l,topology:t,options:D,currentOp:u,executed:a,collection:r,promiseLibrary:N,err:null,checkKeys:typeof n.checkKeys=="boolean"?n.checkKeys:!0},n.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(t){return this.s.collection.s.db.options.forceServerObjectId!==!0&&t._id==null&&(t._id=new _O),this.s.options.addToOperationsList(this,ud,t)}find(t){if(!t)throw ad("Bulk find operation must specify a selector");return this.s.currentOp={selector:t},new YM(this)}raw(t){let r=Object.keys(t)[0],n=typeof this.s.options.forceServerObjectId=="boolean"?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(t.updateOne&&t.updateOne.q||t.updateMany&&t.updateMany.q||t.replaceOne&&t.replaceOne.q)return t[r].multi=!(t.updateOne||t.replaceOne),this.s.options.addToOperationsList(this,Za,t[r]);if(t.updateOne||t.updateMany||t.replaceOne){if(t.replaceOne&&EO(t[r].replacement))throw new TypeError("Replacement document must not use atomic operators");if((t.updateOne||t.updateMany)&&!EO(t[r].update))throw new TypeError("Update document requires atomic operators");let i=!(t.updateOne||t.replaceOne),o={q:t[r].filter,u:t[r].update||t[r].replacement,multi:i};if(t[r].hint&&(o.hint=t[r].hint),this.isOrdered?(o.upsert=!!t[r].upsert,t.collation&&(o.collation=t.collation)):t[r].upsert&&(o.upsert=!0),t[r].arrayFilters){if(nUe(this.s.topology)<6)throw new TypeError("arrayFilters are only supported on MongoDB 3.6+");o.arrayFilters=t[r].arrayFilters}return this.s.options.addToOperationsList(this,Za,o)}if(t.removeOne||t.removeMany||t.deleteOne&&t.deleteOne.q||t.deleteMany&&t.deleteMany.q)return t[r].limit=t.removeOne?1:0,this.s.options.addToOperationsList(this,Ic,t[r]);if(t.deleteOne||t.deleteMany){let i=t.deleteOne?1:0,o={q:t[r].filter,limit:i};return t[r].hint&&(o.hint=t[r].hint),this.isOrdered&&t.collation&&(o.collation=t.collation),this.s.options.addToOperationsList(this,Ic,o)}if(t.insertOne&&t.insertOne.document==null)return n!==!0&&t.insertOne._id==null&&(t.insertOne._id=new _O),this.s.options.addToOperationsList(this,ud,t.insertOne);if(t.insertOne&&t.insertOne.document)return n!==!0&&t.insertOne.document._id==null&&(t.insertOne.document._id=new _O),this.s.options.addToOperationsList(this,ud,t.insertOne.document);if(t.insertMany){HM("bulk operation `insertMany` has been deprecated; use multiple `insertOne` ops instead");for(let i=0;i<t.insertMany.length;i++)n!==!0&&t.insertMany[i]._id==null&&(t.insertMany[i]._id=new _O),this.s.options.addToOperationsList(this,ud,t.insertMany[i]);return}throw ad("bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany")}_handleEarlyError(t,r){if(typeof r=="function"){r(t,null);return}return this.s.promiseLibrary.reject(t)}bulkExecute(t,r,n){typeof r=="function"&&(n=r);let i=Object.assign({},this.s.options,r);if(typeof t=="function"?n=t:t&&typeof t=="object"&&(this.s.writeConcern=t),this.s.executed){let o=ad("batch cannot be re-executed");return this._handleEarlyError(o,n)}if(this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0){let o=ad("Invalid Operation, no operations specified");return this._handleEarlyError(o,n)}return{options:i,callback:n}}execute(t,r,n){let i=this.bulkExecute(t,r,n);return!i||rUe(i)?i:(r=i.options,n=i.callback,tUe(this.s.topology,l5,[this,r,n]))}finalOptionsHandler(t,r){let n=Object.assign({ordered:this.isOrdered},t.options);this.s.writeConcern!=null&&(n.writeConcern=this.s.writeConcern),n.bypassDocumentValidation!==!0&&delete n.bypassDocumentValidation,this.operationId&&(t.resultHandler.operationId=this.operationId),this.s.options.serializeFunctions&&(n.serializeFunctions=!0),this.s.options.ignoreUndefined&&(n.ignoreUndefined=!0),this.s.bypassDocumentValidation===!0&&(n.bypassDocumentValidation=!0),this.s.checkKeys===!1&&(n.checkKeys=!1),n.retryWrites&&(t.batch.batchType===Za&&(n.retryWrites=n.retryWrites&&!t.batch.operations.some(i=>i.multi)),t.batch.batchType===Ic&&(n.retryWrites=n.retryWrites&&!t.batch.operations.some(i=>i.limit===0)));try{t.batch.batchType===ud?this.s.topology.insert(this.s.namespace,t.batch.operations,n,t.resultHandler):t.batch.batchType===Za?this.s.topology.update(this.s.namespace,t.batch.operations,n,t.resultHandler):t.batch.batchType===Ic&&this.s.topology.remove(this.s.namespace,t.batch.operations,n,t.resultHandler)}catch(i){i.ok=0,cd(r,null,bO(t.batch,this.s.bulkResult,i,null))}}handleWriteError(t,r){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";return cd(t,new mh(ad({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors}),r),null),!0}if(r.getWriteConcernError())return cd(t,new mh(ad(r.getWriteConcernError()),r),null),!0}};s(tF,"BulkOperationBase");var wO=tF;Object.defineProperty(wO.prototype,"length",{enumerable:!0,get:function(){return this.s.currentIndex}});d5.exports={Batch:VM,BulkOperationBase:wO,mergeBatchResults:bO,bson:sUe,INSERT:ud,UPDATE:Za,REMOVE:Ic,BulkWriteError:mh,BulkWriteResult:ph}});var m5=w((jwt,rF)=>{"use strict";var eu=OO(),aUe=eu.BulkOperationBase,f5=eu.Batch,uUe=eu.bson,cUe=$(),h5=cUe.toError;function lUe(e,t,r){let n=uUe.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw h5("document is larger than the maximum size "+e.s.maxBsonObjectSize);e.s.currentBatch=null,t===eu.INSERT?e.s.currentBatch=e.s.currentInsertBatch:t===eu.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:t===eu.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch);let i=e.s.maxKeySize;if(e.s.currentBatch==null&&(e.s.currentBatch=new f5(t,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.size>0&&e.s.currentBatch.sizeBytes+i+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new f5(t,e.s.currentIndex)),Array.isArray(r))throw h5("operation passed in cannot be an Array");return e.s.currentBatch.operations.push(r),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,t===eu.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:r._id})):t===eu.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:t===eu.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size+=1,e.s.currentBatch.sizeBytes+=i+n,e}s(lUe,"addToOperationsList");var nF=class nF extends aUe{constructor(t,r,n){n=n||{},n=Object.assign(n,{addToOperationsList:lUe}),super(t,r,n,!1)}handleWriteError(t,r){return this.s.batches.length?!1:super.handleWriteError(t,r)}};s(nF,"UnorderedBulkOperation");var i_=nF;function p5(e,t,r){return new i_(e,t,r)}s(p5,"initializeUnorderedBulkOp");p5.UnorderedBulkOperation=i_;rF.exports=p5;rF.exports.Bulk=i_});var _5=w((kwt,iF)=>{"use strict";var TO=OO(),dUe=TO.BulkOperationBase,g5=TO.Batch,fUe=TO.bson,hUe=$(),y5=hUe.toError;function pUe(e,t,r){let n=fUe.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=e.s.maxBsonObjectSize)throw y5("document is larger than the maximum size "+e.s.maxBsonObjectSize);e.s.currentBatch==null&&(e.s.currentBatch=new g5(t,e.s.currentIndex));let i=e.s.maxKeySize;if((e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSize>0&&e.s.currentBatchSizeBytes+i+n>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new g5(t,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0),t===TO.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:r._id}),Array.isArray(r))throw y5("operation passed in cannot be an Array");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(r),e.s.currentBatchSize+=1,e.s.currentBatchSizeBytes+=i+n,e.s.currentIndex+=1,e}s(pUe,"addToOperationsList");var sF=class sF extends dUe{constructor(t,r,n){n=n||{},n=Object.assign(n,{addToOperationsList:pUe}),super(t,r,n,!0)}};s(sF,"OrderedBulkOperation");var s_=sF;function v5(e,t,r){return new s_(e,t,r)}s(v5,"initializeOrderedBulkOp");v5.OrderedBulkOperation=s_;iF.exports=v5;iF.exports.Bulk=s_});var AO=w((Wwt,E5)=>{"use strict";var S5=pe().MongoError,mUe=Jo(),gUe=xs().CursorState,oF=class oF extends mUe{constructor(t,r,n){super(t,r,n)}batchSize(t){if(this.s.state===gUe.CLOSED||this.isDead())throw S5.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw S5.create({message:"batchSize requires an integer",driver:!0});return this.operation.options.batchSize=t,this.setCursorBatchSize(t),this}geoNear(t){return this.operation.addToPipeline({$geoNear:t}),this}group(t){return this.operation.addToPipeline({$group:t}),this}limit(t){return this.operation.addToPipeline({$limit:t}),this}match(t){return this.operation.addToPipeline({$match:t}),this}maxTimeMS(t){return this.operation.options.maxTimeMS=t,this}out(t){return this.operation.addToPipeline({$out:t}),this}project(t){return this.operation.addToPipeline({$project:t}),this}lookup(t){return this.operation.addToPipeline({$lookup:t}),this}redact(t){return this.operation.addToPipeline({$redact:t}),this}skip(t){return this.operation.addToPipeline({$skip:t}),this}sort(t){return this.operation.addToPipeline({$sort:t}),this}unwind(t){return this.operation.addToPipeline({$unwind:t}),this}getLogger(){return this.logger}};s(oF,"AggregationCursor");var o_=oF;o_.prototype.get=o_.prototype.toArray;E5.exports=o_});var DO=w((Hwt,w5)=>{"use strict";var C5=pe().ReadPreference,IO=pe().MongoError,yUe=Jo(),aF=xs().CursorState,uF=class uF extends yUe{constructor(t,r,n,i){super(t,r,n,i)}setReadPreference(t){if(this.s.state===aF.CLOSED||this.isDead())throw IO.create({message:"Cursor is closed",driver:!0});if(this.s.state!==aF.INIT)throw IO.create({message:"cannot change cursor readPreference after cursor has been accessed",driver:!0});if(t instanceof C5)this.options.readPreference=t;else if(typeof t=="string")this.options.readPreference=new C5(t);else throw new TypeError("Invalid read preference: "+t);return this}batchSize(t){if(this.s.state===aF.CLOSED||this.isDead())throw IO.create({message:"Cursor is closed",driver:!0});if(typeof t!="number")throw IO.create({message:"batchSize requires an integer",driver:!0});return this.cmd.cursor&&(this.cmd.cursor.batchSize=t),this.setCursorBatchSize(t),this}maxTimeMS(t){return this.topology.lastIsMaster().minWireVersion>2&&(this.cmd.maxTimeMS=t),this}getLogger(){return this.logger}};s(uF,"CommandCursor");var a_=uF;a_.prototype.get=a_.prototype.toArray;w5.exports=a_});var dF=w((Ywt,b5)=>{"use strict";var vUe=$().applyRetryableWrites,_Ue=$().applyWriteConcern,SUe=pe().MongoError,EUe=he().OperationBase,lF=class lF extends EUe{constructor(t,r,n){super(n),this.collection=t,this.operations=r}execute(t){let r=this.collection,n=this.operations,i=this.options;r.s.options.ignoreUndefined&&(i=Object.assign({},i),i.ignoreUndefined=r.s.options.ignoreUndefined);let o=i.ordered===!0||i.ordered==null?r.initializeOrderedBulkOp(i):r.initializeUnorderedBulkOp(i),a=!1;try{for(let h=0;h<n.length;h++){let p=Object.keys(n[h])[0];n[h][p].collation&&(a=!0),o.raw(n[h])}}catch(h){return t(h,null)}let u=Object.assign({},i);u=vUe(u,r.s.db),u=_Ue(u,{db:r.s.db,collection:r},i);let l=u.writeConcern?u.writeConcern:{},f=r.s.topology.capabilities();if(a&&f&&!f.commandsTakeCollation)return t(new SUe("server/primary/mongos does not support collation"));o.execute(l,u,(h,p)=>{if(!p&&h)return t(h,null);t(null,p)})}};s(lF,"BulkWriteOperation");var cF=lF;b5.exports=cF});var pF=w((Xwt,O5)=>{"use strict";var CUe=r_(),hF=class hF extends CUe{constructor(t,r,n){let i=[{$match:r}];typeof n.skip=="number"&&i.push({$skip:n.skip}),typeof n.limit=="number"&&i.push({$limit:n.limit}),i.push({$group:{_id:1,n:{$sum:1}}}),super(t,i,n)}execute(t,r){super.execute(t,(n,i)=>{if(n){r(n,null);return}let o=i.result;if(o.cursor==null||o.cursor.firstBatch==null){r(null,0);return}let a=o.cursor.firstBatch;r(null,a.length?a[0].n:0)})}};s(hF,"CountDocumentsOperation");var fF=hF;O5.exports=fF});var gF=w((Qwt,I5)=>{"use strict";var T5=he().Aspect,wUe=he().defineAspects,bUe=Qo(),A5=pe().MongoError,OUe=$().parseIndexOptions,TUe=Le().maxWireVersion,AUe=new Set(["background","unique","name","partialFilterExpression","sparse","expireAfterSeconds","storageEngine","collation","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]),mF=class mF extends bUe{constructor(t,r,n,i){if(super(t,i),this.collection=r,!Array.isArray(n)||Array.isArray(n[0])){this.onlyReturnNameOfCreatedIndex=!0;let o=OUe(n),u={name:typeof i.name=="string"?i.name:o.name,key:o.fieldHash};for(let l in i)AUe.has(l)&&(u[l]=i[l]);this.indexes=[u];return}this.indexes=n}execute(t,r){let n=this.options,i=this.indexes,o=TUe(t);for(let u=0;u<i.length;u++){if(i[u].collation&&o<5){r(new A5(`Server ${t.name}, which reports wire version ${o}, does not support collation`));return}if(i[u].name==null){let l=[];for(let f in i[u].key)l.push(`${f}_${i[u].key[f]}`);i[u].name=l.join("_")}}let a={createIndexes:this.collection,indexes:i};if(n.commitQuorum!=null){if(o<9){r(new A5("`commitQuorum` option for `createIndexes` not supported on servers < 4.4"));return}a.commitQuorum=n.commitQuorum}this.options.collation=void 0,super.executeCommand(t,a,(u,l)=>{if(u){r(u);return}r(null,this.onlyReturnNameOfCreatedIndex?i[0].name:l)})}};s(mF,"CreateIndexesOperation");var RO=mF;wUe(RO,[T5.WRITE_OPERATION,T5.EXECUTE_WITH_SELECTION]);I5.exports=RO});var R5=w((ebt,D5)=>{"use strict";var IUe=he().OperationBase,DUe=Ii().removeDocuments,RUe=he().Aspect,NUe=he().defineAspects,yF=class yF extends IUe{constructor(t,r,n){super(n),this.collection=t,this.filter=r}execute(t){let r=this.collection,n=this.filter,i=this.options;i.single=!1,DUe(r,n,i,(o,a)=>{if(t!=null){if(o&&t)return t(o);if(a==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,a.result);a.deletedCount=a.result.n,t(null,a)}})}};s(yF,"DeleteManyOperation");var NO=yF;NUe(NO,[RUe.EXPLAINABLE]);D5.exports=NO});var x5=w((rbt,N5)=>{"use strict";var xUe=he().OperationBase,PUe=Ii().removeDocuments,BUe=he().Aspect,MUe=he().defineAspects,vF=class vF extends xUe{constructor(t,r,n){super(n),this.collection=t,this.filter=r}execute(t){let r=this.collection,n=this.filter,i=this.options;i.single=!0,PUe(r,n,i,(o,a)=>{if(t!=null){if(o&&t)return t(o);if(a==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,a.result);a.deletedCount=a.result.n,t(null,a)}})}};s(vF,"DeleteOneOperation");var xO=vF;MUe(xO,[BUe.EXPLAINABLE]);N5.exports=xO});var B5=w((ibt,P5)=>{"use strict";var PO=he().Aspect,FUe=he().defineAspects,qUe=Qo(),LUe=$().decorateWithCollation,UUe=$().decorateWithReadConcern,jUe=Le().maxWireVersion,$Ue=Zv().MongoError,_F=class _F extends qUe{constructor(t,r,n,i){super(t,i),this.collection=t,this.key=r,this.query=n}execute(t,r){let n=this.collection,i=this.key,o=this.query,a=this.options,u={distinct:n.collectionName,key:i,query:o};typeof a.maxTimeMS=="number"&&(u.maxTimeMS=a.maxTimeMS),UUe(u,n,a);try{LUe(u,n,a)}catch(l){return r(l,null)}if(this.explain&&jUe(t)<4){r(new $Ue("server does not support explain on distinct"));return}super.executeCommand(t,u,(l,f)=>{if(l){r(l);return}r(null,this.options.full||this.explain?f:f.values)})}};s(_F,"DistinctOperation");var BO=_F;FUe(BO,[PO.READ_OPERATION,PO.RETRYABLE,PO.EXECUTE_WITH_SELECTION,PO.EXPLAINABLE]);P5.exports=BO});var So=w((obt,q5)=>{"use strict";var M5=he().Aspect,kUe=he().OperationBase,F5=$().applyWriteConcern,GUe=$().debugOptions,SF=$().handleCallback,WUe=pe().MongoError,EF=pe().ReadPreference,zUe=$().MongoDBNamespace,HUe=jl().extractCommand,VUe=["authSource","w","wtimeout","j","native_parser","forceServerObjectId","serializeFunctions","raw","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","bufferMaxEntries","numberOfRetries","retryMiliSeconds","readPreference","pkFactory","parentDb","promiseLibrary","noListener"],wF=class wF extends kUe{constructor(t,r,n,i){super(r),this.hasAspect(M5.WRITE_OPERATION)?(n!=null?F5(this.options,{db:t,coll:n},this.options):F5(this.options,{db:t},this.options),this.options.readPreference=EF.primary):n!=null?this.options.readPreference=EF.resolve(n,r):this.options.readPreference=EF.resolve(t,r),this.db=t,i!=null&&(this.command=i),n!=null&&(this.collection=n)}_buildCommand(){if(this.command!=null)return this.command}execute(t){let r=this.db,n=Object.assign({},this.options);if(r.serverConfig&&r.serverConfig.isDestroyed())return t(new WUe("topology was destroyed"));let i;try{i=this._buildCommand()}catch(u){return t(u)}let o=n.dbName||n.authdb||r.databaseName;if(this.hasAspect(M5.WRITE_OPERATION)&&n.writeConcern&&(!n.session||!n.session.inTransaction())&&(i.writeConcern=n.writeConcern),r.s.logger.isDebug()){let u=HUe(i);r.s.logger.debug(`executing command ${JSON.stringify(u.shouldRedact?`${u.name} details REDACTED`:i)} against ${o}.$cmd with options [${JSON.stringify(GUe(VUe,n))}]`)}let a=this.namespace!=null?this.namespace:new zUe(o,"$cmd");r.s.topology.command(a,i,n,(u,l)=>{if(u)return SF(t,u);if(n.full)return SF(t,null,l);SF(t,null,l.result)})}};s(wF,"CommandOperation");var CF=wF;q5.exports=CF});var MO=w((ubt,L5)=>{"use strict";var YUe=he().Aspect,KUe=So(),XUe=he().defineAspects,bF=$().handleCallback,AF=class AF extends KUe{constructor(t,r){let n=Object.assign({},r,t.s.options);r.session&&(n.session=r.session),super(t,n)}execute(t){super.execute((r,n)=>{if(r)return bF(t,r);if(n.ok)return bF(t,null,!0);bF(t,null,!1)})}};s(AF,"DropOperation");var gh=AF;XUe(gh,YUe.WRITE_OPERATION);var IF=class IF extends gh{constructor(t,r,n){super(t,n),this.name=r,this.namespace=`${t.namespace}.${r}`}_buildCommand(){return{drop:this.name}}};s(IF,"DropCollectionOperation");var OF=IF,DF=class DF extends gh{_buildCommand(){return{dropDatabase:1}}};s(DF,"DropDatabaseOperation");var TF=DF;L5.exports={DropOperation:gh,DropCollectionOperation:OF,DropDatabaseOperation:TF}});var NF=w((lbt,j5)=>{"use strict";var JUe=he().Aspect,QUe=he().defineAspects,ZUe=So(),eje=$().applyWriteConcern,U5=$().handleCallback,RF=class RF extends ZUe{constructor(t,r,n){super(t.s.db,n,t),this.collection=t,this.indexName=r}_buildCommand(){let t=this.collection,r=this.indexName,n=this.options,i={dropIndexes:t.collectionName,index:r};return i=eje(i,{db:t.s.db,collection:t},n),i}execute(t){super.execute((r,n)=>{if(typeof t=="function"){if(r)return U5(t,r,null);U5(t,null,n)}})}};s(RF,"DropIndexOperation");var FO=RF;QUe(FO,JUe.WRITE_OPERATION);j5.exports=FO});var G5=w((fbt,k5)=>{"use strict";var tje=he().Aspect,rje=he().defineAspects,nje=NF(),$5=$().handleCallback,xF=class xF extends nje{constructor(t,r){super(t,"*",r)}execute(t){super.execute(r=>{if(r)return $5(t,r,!1);$5(t,null,!0)})}};s(xF,"DropIndexesOperation");var qO=xF;rje(qO,tje.WRITE_OPERATION);k5.exports=qO});var z5=w((pbt,W5)=>{"use strict";var ije=Ml().MONGODB_ERROR_CODES,PF=he().Aspect,sje=he().defineAspects,oje=Qo(),aje=Le().maxWireVersion,uje=pF(),BF=class BF extends oje{constructor(t,r){super(t,r),this.collection=t,this.collectionName=t.s.namespace.collection}execute(t,r){if(aje(t)<12)return this.executeLegacy(t,r);if(this.options.query)return new uje(this.collection,this.options.query,this.options).execute(t,r);let n=[{$collStats:{count:{}}},{$group:{_id:1,n:{$sum:"$count"}}}],i={aggregate:this.collectionName,pipeline:n,cursor:{}};typeof this.options.maxTimeMS=="number"&&(i.maxTimeMS=this.options.maxTimeMS),super.executeCommand(t,i,(o,a)=>{if(o&&o.code!==ije.NamespaceNotFound){r(o);return}r(void 0,a&&a.cursor&&a.cursor.firstBatch&&a.cursor.firstBatch[0].n||0)})}executeLegacy(t,r){let n={count:this.collectionName},i=this.options;i.query&&(n.query=i.query),i.hint&&(n.hint=i.hint),typeof i.maxTimeMS=="number"&&(n.maxTimeMS=i.maxTimeMS),typeof i.skip=="number"&&(n.skip=i.skip),typeof i.limit=="number"&&(n.limit=i.limit),super.executeCommand(t,n,(o,a)=>{if(o){r(o);return}r(null,a.n)})}};s(BF,"EstimatedDocumentCountOperation");var LO=BF;sje(LO,[PF.READ_OPERATION,PF.RETRYABLE,PF.EXECUTE_WITH_SELECTION]);W5.exports=LO});var Y5=w((gbt,V5)=>{"use strict";var cje=he().OperationBase,UO=he().Aspect,lje=he().defineAspects,H5=pe().ReadPreference,dje=Le().maxWireVersion,fje=ye().MongoError,MF=class MF extends cje{constructor(t,r,n,i){super(i),this.ns=r,this.cmd=n,this.readPreference=H5.resolve(t,this.options)}execute(t,r){if(this.server=t,this.readPreference=H5.resolve(this,this.options),typeof this.cmd.allowDiskUse<"u"&&dje(t)<4){r(new fje("The `allowDiskUse` option is not supported on MongoDB < 3.2"));return}this.explain&&(this.options.explain=this.explain.verbosity);let n=this.cursorState||{};t.query(this.ns.toString(),this.cmd,n,this.options,r)}};s(MF,"FindOperation");var jO=MF;lje(jO,[UO.READ_OPERATION,UO.RETRYABLE,UO.EXECUTE_WITH_SELECTION,UO.EXPLAINABLE]);V5.exports=jO});var J5=w((vbt,X5)=>{"use strict";var K5=$().handleCallback,hje=he().OperationBase,pje=$().toError,mje=he().Aspect,gje=he().defineAspects,FF=class FF extends hje{constructor(t,r,n){super(n),this.collection=t,this.query=r}execute(t){let r=this.collection,n=this.query,i=this.options;try{r.find(n,i).limit(-1).batchSize(1).next((a,u)=>{if(a!=null)return K5(t,pje(a),null);K5(t,null,u)})}catch(o){t(o)}}};s(FF,"FindOneOperation");var $O=FF;gje($O,[mje.EXPLAINABLE]);X5.exports=$O});var u_=w((Sbt,t9)=>{"use strict";var yje=he().OperationBase,vje=$().applyRetryableWrites,_je=$().applyWriteConcern,Sje=$().decorateWithCollation,Eje=$n().executeCommand,Cje=$().formattedOrderClause,Q5=$().handleCallback,wje=pe().ReadPreference,Z5=Le().maxWireVersion,e9=Zv().MongoError,bje=he().Aspect,Oje=he().defineAspects,Tje=$().decorateWithExplain,qF=class qF extends yje{constructor(t,r,n,i,o){super(o),this.collection=t,this.query=r,this.sort=n,this.doc=i}execute(t){let r=this.collection,n=this.query,i=Cje(this.sort),o=this.doc,a=this.options,u={findAndModify:r.collectionName,query:n};i&&(u.sort=i),u.new=!!a.new,u.remove=!!a.remove,u.upsert=!!a.upsert;let l=a.projection||a.fields;l&&(u.fields=l),a.arrayFilters&&(u.arrayFilters=a.arrayFilters),o&&!a.remove&&(u.update=o),a.maxTimeMS&&(u.maxTimeMS=a.maxTimeMS),a.serializeFunctions=a.serializeFunctions||r.s.serializeFunctions,a.checkKeys=!1,a=vje(a,r.s.db),a=_je(a,{db:r.s.db,collection:r},a),a.writeConcern&&(u.writeConcern=a.writeConcern),a.bypassDocumentValidation===!0&&(u.bypassDocumentValidation=a.bypassDocumentValidation),a.readPreference=wje.primary;try{Sje(u,r,a)}catch(f){return t(f,null)}if(a.hint){if(a.writeConcern&&a.writeConcern.w===0||Z5(r.s.topology)<8){t(new e9("The current topology does not support a hint on findAndModify commands"));return}u.hint=a.hint}if(this.explain){if(Z5(r.s.topology)<4){t(new e9("server does not support explain on findAndModify"));return}u=Tje(u,this.explain)}Eje(r.s.db,u,a,(f,h)=>f?Q5(t,f,null):Q5(t,null,h))}};s(qF,"FindAndModifyOperation");var kO=qF;Oje(kO,[bje.EXPLAINABLE]);t9.exports=kO});var n9=w((Cbt,r9)=>{"use strict";var Aje=u_(),UF=class UF extends Aje{constructor(t,r,n){let i=Object.assign({},n);if(i.fields=n.projection,i.remove=!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");super(t,r,i.sort,null,i)}};s(UF,"FindOneAndDeleteOperation");var LF=UF;r9.exports=LF});var s9=w((bbt,i9)=>{"use strict";var Ije=pe().MongoError,Dje=u_(),Rje=$().hasAtomicOperators,$F=class $F extends Dje{constructor(t,r,n,i){if("returnDocument"in i&&"returnOriginal"in i)throw new Ije("findOneAndReplace option returnOriginal is deprecated in favor of returnDocument and cannot be combined");let o=Object.assign({},i);if(o.fields=i.projection,o.update=!0,o.new=i.returnDocument==="after"||i.returnOriginal===!1,o.upsert=i.upsert===!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");if(n==null||typeof n!="object")throw new TypeError("Replacement parameter must be an object");if(Rje(n))throw new TypeError("Replacement document must not contain atomic operators");super(t,r,o.sort,n,o)}};s($F,"FindOneAndReplaceOperation");var jF=$F;i9.exports=jF});var a9=w((Tbt,o9)=>{"use strict";var Nje=pe().MongoError,xje=u_(),Pje=$().hasAtomicOperators,GF=class GF extends xje{constructor(t,r,n,i){if("returnDocument"in i&&"returnOriginal"in i)throw new Nje("findOneAndUpdate option returnOriginal is deprecated in favor of returnDocument and cannot be combined");let o=Object.assign({},i);if(o.fields=i.projection,o.update=!0,o.new=i.returnDocument==="after"||i.returnOriginal===!1,o.upsert=i.upsert===!0,r==null||typeof r!="object")throw new TypeError("Filter parameter must be an object");if(n==null||typeof n!="object")throw new TypeError("Update parameter must be an object");if(!Pje(n))throw new TypeError("Update document requires atomic operators");super(t,r,o.sort,n,o)}};s(GF,"FindOneAndUpdateOperation");var kF=GF;o9.exports=kF});var c9=w((Ibt,u9)=>{"use strict";var Bje=he().Aspect,Mje=he().defineAspects,Fje=he().OperationBase,qje=$().decorateCommand,Lje=$().decorateWithReadConcern,Uje=$n().executeCommand,WF=$().handleCallback,jje=pe().ReadPreference,$je=$().toError,zF=class zF extends Fje{constructor(t,r,n,i){super(i),this.collection=t,this.x=r,this.y=n}execute(t){let r=this.collection,n=this.x,i=this.y,o=this.options,a={geoSearch:r.collectionName,near:[n,i]};a=qje(a,o,["readPreference","session"]),o=Object.assign({},o),o.readPreference=jje.resolve(r,o),Lje(a,r,o),Uje(r.s.db,a,o,(u,l)=>{if(u)return WF(t,u);(l.err||l.errmsg)&&WF(t,$je(l)),WF(t,null,l)})}};s(zF,"GeoHaystackSearchOperation");var GO=zF;Mje(GO,Bje.READ_OPERATION);u9.exports=GO});var d9=w((Rbt,l9)=>{"use strict";var kje=he().OperationBase,Gje=Ii().indexInformation,VF=class VF extends kje{constructor(t,r){super(r),this.collection=t}execute(t){let r=this.collection,n=this.options;n=Object.assign({},{full:!0},n),Gje(r.s.db,r.collectionName,n,t)}};s(VF,"IndexesOperation");var HF=VF;l9.exports=HF});var h9=w((xbt,f9)=>{"use strict";var Wje=he().OperationBase,WO=$().handleCallback,zje=$n().indexInformation,KF=class KF extends Wje{constructor(t,r,n){super(n),this.collection=t,this.indexes=r}execute(t){let r=this.collection,n=this.indexes,i=this.options;zje(r.s.db,r.collectionName,i,(o,a)=>{if(o!=null)return WO(t,o,null);if(!Array.isArray(n))return WO(t,null,a[n]!=null);for(let u=0;u<n.length;u++)if(a[n[u]]==null)return WO(t,null,!1);return WO(t,null,!0)})}};s(KF,"IndexExistsOperation");var YF=KF;f9.exports=YF});var QF=w((Bbt,p9)=>{"use strict";var Hje=he().OperationBase,Vje=Ii().indexInformation,JF=class JF extends Hje{constructor(t,r,n){super(n),this.db=t,this.name=r}execute(t){let r=this.db,n=this.name,i=this.options;Vje(r,n,i,t)}};s(JF,"IndexInformationOperation");var XF=JF;p9.exports=XF});var g9=w((Fbt,m9)=>{"use strict";var Yje=he().OperationBase,Kje=dF(),Xje=pe().MongoError,Jje=Ii().prepareDocs,eq=class eq extends Yje{constructor(t,r,n){super(n),this.collection=t,this.docs=r}execute(t){let r=this.collection,n=this.docs,i=this.options;if(!Array.isArray(n))return t(Xje.create({message:"docs parameter must be an array of documents",driver:!0}));i.serializeFunctions=i.serializeFunctions||r.s.serializeFunctions,n=Jje(r,n,i);let o=n.map(u=>({insertOne:{document:u}}));new Kje(r,o,i).execute((u,l)=>{if(u)return t(u,null);t(null,Qje(n,l))})}};s(eq,"InsertManyOperation");var ZF=eq;function Qje(e,t){let r={result:{ok:1,n:t.insertedCount},ops:e,insertedCount:t.insertedCount,insertedIds:t.insertedIds};return t.getLastOp()&&(r.result.opTime=t.getLastOp()),r}s(Qje,"mapInsertManyResults");m9.exports=ZF});var v9=w((Lbt,y9)=>{"use strict";var Zje=pe().MongoError,e2e=he().OperationBase,t2e=Ii().insertDocuments,rq=class rq extends e2e{constructor(t,r,n){super(n),this.collection=t,this.doc=r}execute(t){let r=this.collection,n=this.doc,i=this.options;if(Array.isArray(n))return t(Zje.create({message:"doc parameter must be an object",driver:!0}));t2e(r,[n],i,(o,a)=>{if(t!=null){if(o&&t)return t(o);if(a==null)return t(null,{result:{ok:1}});a.insertedCount=a.result.n,a.insertedId=n._id,t&&t(null,a)}})}};s(rq,"InsertOneOperation");var tq=rq;y9.exports=tq});var oq=w((jbt,_9)=>{"use strict";var r2e=he().OperationBase,nq=$().handleCallback,n2e=pe().MongoError,sq=class sq extends r2e{constructor(t,r){super(r),this.collection=t}execute(t){let r=this.collection,n=this.options;r.s.db.listCollections({name:r.collectionName},n).toArray((i,o)=>{if(i)return nq(t,i);if(o.length===0)return nq(t,n2e.create({message:`collection ${r.namespace} not found`,driver:!0}));nq(t,i,o[0].options||null)})}};s(sq,"OptionsOperation");var iq=sq;_9.exports=iq});var C9=w((kbt,E9)=>{"use strict";var i2e=oq(),S9=$().handleCallback,uq=class uq extends i2e{constructor(t,r){super(t,r)}execute(t){super.execute((r,n)=>{if(r)return S9(t,r);S9(t,null,!!(n&&n.capped))})}};s(uq,"IsCappedOperation");var aq=uq;E9.exports=aq});var b9=w((Wbt,w9)=>{"use strict";var s2e=Qo(),cq=he().Aspect,o2e=he().defineAspects,a2e=Le().maxWireVersion,u2e=3,lq=class lq extends s2e{constructor(t,r){super(t,r,{fullResponse:!0}),this.collectionNamespace=t.s.namespace}execute(t,r){if(a2e(t)<u2e){let o=this.collectionNamespace.withCollection("system.indexes").toString(),a=this.collectionNamespace.toString();t.query(o,{query:{ns:a}},{},this.options,r);return}let i=this.options.batchSize?{batchSize:this.options.batchSize}:{};super.executeCommand(t,{listIndexes:this.collectionNamespace.collection,cursor:i},r)}};s(lq,"ListIndexesOperation");var zO=lq;o2e(zO,[cq.READ_OPERATION,cq.RETRYABLE,cq.EXECUTE_WITH_SELECTION]);w9.exports=zO});var fq=w((Hbt,T9)=>{"use strict";var c2e=he().Aspect,l2e=So(),d2e=he().defineAspects,f2e=require("crypto"),O9=$().handleCallback,h2e=$().toError,p2e=$().emitWarning,dq=class dq extends l2e{constructor(t,r,n,i){super(t,i),this.username=r,this.password=n}_buildCommand(){let t=this.db,r=this.username,n=this.password,i=this.options,o=[];Array.isArray(i.roles)&&(o=i.roles),typeof i.roles=="string"&&(o=[i.roles]),o.length===0&&p2e("Creating a user without roles is deprecated in MongoDB >= 2.6"),(t.databaseName.toLowerCase()==="admin"||i.dbName==="admin")&&!Array.isArray(i.roles)?o=["root"]:Array.isArray(i.roles)||(o=["dbOwner"]);let a=t.s.topology.lastIsMaster().maxWireVersion>=7,u=n;if(!a){let f=f2e.createHash("md5");f.update(r+":mongo:"+n),u=f.digest("hex")}let l={createUser:r,customData:i.customData||{},roles:o,digestPassword:a};return typeof n=="string"&&(l.pwd=u),l}execute(t){if(this.options.digestPassword!=null)return t(h2e("The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option."));super.execute((n,i)=>n?O9(t,n,null):O9(t,n,i))}};s(dq,"AddUserOperation");var HO=dq;d2e(HO,c2e.WRITE_OPERATION);T9.exports=HO});var D9=w((Ybt,I9)=>{"use strict";var m2e=he().OperationBase,A9=$().handleCallback,hq;function g2e(){return hq||(hq=yh()),hq}s(g2e,"loadCollection");var mq=class mq extends m2e{constructor(t,r){super(r),this.db=t}execute(t){let r=this.db,n=this.options,i=g2e();n=Object.assign({},n,{nameOnly:!0}),r.listCollections({},n).toArray((o,a)=>{if(o!=null)return A9(t,o,null);a=a.filter(u=>u.name.indexOf("$")===-1),A9(t,null,a.map(u=>new i(r,r.s.topology,r.databaseName,u.name,r.s.pkFactory,r.s.options)))})}};s(mq,"CollectionsOperation");var pq=mq;I9.exports=pq});var x9=w((Xbt,N9)=>{"use strict";var y2e=Qo(),v2e=he().defineAspects,R9=he().Aspect,gq=class gq extends y2e{constructor(t,r,n){super(t,n),this.command=r}execute(t,r){let n=this.command;this.executeCommand(t,n,r)}};s(gq,"RunCommandOperation");var VO=gq;v2e(VO,[R9.EXECUTE_WITH_SELECTION,R9.NO_INHERIT_OPTIONS]);N9.exports=VO});var B9=w((Qbt,P9)=>{"use strict";var _2e=he().Aspect,S2e=he().defineAspects,E2e=So(),C2e=$().applyWriteConcern,w2e=KO().loadCollection,b2e=pe().MongoError,O2e=pe().ReadPreference,T2e=new Set(["w","wtimeout","j","fsync","autoIndexId","strict","serializeFunctions","pkFactory","raw","readPreference","session","readConcern","writeConcern"]),yq=class yq extends E2e{constructor(t,r,n){super(t,n),this.name=r}_buildCommand(){let t=this.name,r=this.options,n={create:t};for(let i in r)r[i]!=null&&typeof r[i]!="function"&&!T2e.has(i)&&(n[i]=r[i]);return n}execute(t){let r=this.db,n=this.name,i=this.options,o=w2e(),a=Object.assign({nameOnly:!0,strict:!1},i);a=C2e(a,{db:r},a);function u(f){if(f)return t(f);try{t(null,new o(r,r.s.topology,r.databaseName,n,r.s.pkFactory,i))}catch(h){t(h)}}if(s(u,"done"),a.strict){r.listCollections({name:n},a).setReadPreference(O2e.PRIMARY).toArray((f,h)=>{if(f)return t(f);if(h.length>0)return t(new b2e(`Collection ${n} already exists. Currently in strict mode.`));super.execute(u)});return}super.execute(u)}};s(yq,"CreateCollectionOperation");var YO=yq;S2e(YO,_2e.WRITE_OPERATION);P9.exports=YO});var Sq=w((eOt,F9)=>{"use strict";var A2e=he().OperationBase,M9=$().handleCallback,I2e=pe().MongoError,D2e=$().MongoDBNamespace,_q=class _q extends A2e{constructor(t,r,n){super(n),this.db=t,this.selector=r}execute(t){let r=this.db,n=this.selector,i=this.options,o=new D2e("admin","$cmd");r.s.topology.command(o,n,i,(a,u)=>{if(r.serverConfig&&r.serverConfig.isDestroyed())return t(new I2e("topology was destroyed"));if(a)return M9(t,a);M9(t,null,u.result)})}};s(_q,"ExecuteDbAdminCommandOperation");var vq=_q;F9.exports=vq});var L9=w((rOt,q9)=>{"use strict";var R2e=Qo(),Eq=he().Aspect,N2e=he().defineAspects,x2e=Le().maxWireVersion,P2e=lO(),B2e=3;function M2e(e){let t=`${e}.`;return{doc:r=>{let n=r.name.indexOf(t);return r.name&&n===0&&(r.name=r.name.substr(n+t.length)),r}}}s(M2e,"listCollectionsTransforms");var Cq=class Cq extends R2e{constructor(t,r,n){super(t,n,{fullResponse:!0}),this.db=t,this.filter=r,this.nameOnly=!!this.options.nameOnly,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize)}execute(t,r){if(x2e(t)<B2e){let i=this.filter,o=this.db.s.namespace.db;typeof i.name=="string"&&!new RegExp("^"+o+"\\.").test(i.name)&&(i=Object.assign({},i),i.name=this.db.s.namespace.withCollection(i.name).toString()),i==null&&(i.name=`/${o}/`),i.name?i={$and:[{name:i.name},{name:/^((?!\$).)*$/}]}:i={name:/^((?!\$).)*$/};let a=M2e(o);t.query(`${o}.${P2e.SYSTEM_NAMESPACE_COLLECTION}`,{query:i},{batchSize:this.batchSize||1e3},{},(u,l)=>{l&&l.message&&l.message.documents&&Array.isArray(l.message.documents)&&(l.message.documents=l.message.documents.map(a.doc)),r(u,l)});return}let n={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly};return super.executeCommand(t,n,r)}};s(Cq,"ListCollectionsOperation");var XO=Cq;N2e(XO,[Eq.READ_OPERATION,Eq.RETRYABLE,Eq.EXECUTE_WITH_SELECTION]);q9.exports=XO});var j9=w((iOt,U9)=>{"use strict";var F2e=So(),bq=class bq extends F2e{constructor(t,r,n){super(t,n)}_buildCommand(){return{profile:-1}}execute(t){super.execute((r,n)=>{if(r==null&&n.ok===1){let i=n.was;return i===0?t(null,"off"):i===1?t(null,"slow_only"):i===2?t(null,"all"):t(new Error("Error: illegal profiling level value "+i),null)}else r!=null?t(r,null):t(new Error("Error with profile command"),null)})}};s(bq,"ProfilingLevelOperation");var wq=bq;U9.exports=wq});var Tq=w((oOt,k9)=>{"use strict";var q2e=he().Aspect,L2e=So(),U2e=he().defineAspects,$9=$().handleCallback,j2e=Fa(),Oq=class Oq extends L2e{constructor(t,r,n){let i={},o=j2e.fromOptions(n);o!=null&&(i.writeConcern=o),n.dbName&&(i.dbName=n.dbName),typeof n.maxTimeMS=="number"&&(i.maxTimeMS=n.maxTimeMS),super(t,i),this.username=r}_buildCommand(){return{dropUser:this.username}}execute(t){super.execute((r,n)=>{if(r)return $9(t,r,null);$9(t,r,!!n.ok)})}};s(Oq,"RemoveUserOperation");var JO=Oq;U2e(JO,q2e.WRITE_OPERATION);k9.exports=JO});var Dq=w((uOt,W9)=>{"use strict";var $2e=he().OperationBase,k2e=$().applyWriteConcern,G2e=$().checkCollectionName,W2e=$n().executeDbAdminCommand,QO=$().handleCallback,z2e=KO().loadCollection,G9=$().toError,Iq=class Iq extends $2e{constructor(t,r,n){super(n),this.collection=t,this.newName=r}execute(t){let r=this.collection,n=this.newName,i=this.options,o=z2e();G2e(n);let a=r.namespace,u=r.s.namespace.withCollection(n).toString(),l=typeof i.dropTarget=="boolean"?i.dropTarget:!1,f={renameCollection:a,to:u,dropTarget:l};k2e(f,{db:r.s.db,collection:r},i),W2e(r.s.db.admin().s.db,f,i,(h,p)=>{if(h)return QO(t,h,null);if(p.errmsg)return QO(t,G9(p),null);try{return QO(t,null,new o(r.s.db,r.s.topology,r.s.namespace.db,n,r.s.pkFactory,r.s.options))}catch(g){return QO(t,G9(g),null)}})}};s(Iq,"RenameOperation");var Aq=Iq;W9.exports=Aq});var H9=w((lOt,z9)=>{"use strict";var H2e=So(),V2e=new Set(["off","slow_only","all"]),Nq=class Nq extends H2e{constructor(t,r,n){let i=0;r==="off"?i=0:r==="slow_only"?i=1:r==="all"&&(i=2),super(t,n),this.level=r,this.profile=i}_buildCommand(){return{profile:this.profile}}execute(t){let r=this.level;if(!V2e.has(r))return t(new Error("Error: illegal profiling level value "+r));super.execute((n,i)=>n==null&&i.ok===1?t(null,r):n!=null?t(n,null):t(new Error("Error with profile command"),null))}};s(Nq,"SetProfilingLevelOperation");var Rq=Nq;z9.exports=Rq});var Y9=w((fOt,V9)=>{"use strict";var Y2e=So(),Pq=class Pq extends Y2e{constructor(t,r,n){let i={validate:r},o=Object.keys(n);for(let a=0;a<o.length;a++)Object.prototype.hasOwnProperty.call(n,o[a])&&o[a]!=="session"&&(i[o[a]]=n[o[a]]);super(t.s.db,n,null,i),this.collectionName=r}execute(t){let r=this.collectionName;super.execute((n,i)=>n!=null?t(n,null):i.ok===0?t(new Error("Error with validate command"),null):i.result!=null&&i.result.constructor!==String?t(new Error("Error with validation data"),null):i.result!=null&&i.result.match(/exception|corrupt/)!=null?t(new Error("Error: invalid collection "+r),null):i.valid!=null&&!i.valid?t(new Error("Error: invalid collection "+r),null):t(null,i))}};s(Pq,"ValidateCollectionOperation");var xq=Pq;V9.exports=xq});var X9=w((pOt,K9)=>{"use strict";var K2e=Qo(),Bq=he().Aspect,X2e=he().defineAspects,J2e=$().MongoDBNamespace,Mq=class Mq extends K2e{constructor(t,r){super(t,r),this.ns=new J2e("admin","$cmd")}execute(t,r){let n={listDatabases:1};this.options.nameOnly&&(n.nameOnly=Number(n.nameOnly)),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),super.executeCommand(t,n,r)}};s(Mq,"ListDatabasesOperation");var ZO=Mq;X2e(ZO,[Bq.READ_OPERATION,Bq.RETRYABLE,Bq.EXECUTE_WITH_SELECTION]);K9.exports=ZO});var Fq=w((gOt,Q9)=>{"use strict";var J9=$().applyWriteConcern,Q2e=fq(),vh=Sq(),Z2e=Tq(),e$e=Y9(),t$e=X9(),Zo=Vf();function ms(e,t,r){if(!(this instanceof ms))return new ms(e,t);this.s={db:e,topology:t,promiseLibrary:r}}s(ms,"Admin");ms.prototype.command=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():{};let i=new vh(this.s.db,e,t);return Zo(this.s.db.s.topology,i,r)};ms.prototype.buildInfo=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={buildinfo:1},n=new vh(this.s.db,r,e);return Zo(this.s.db.s.topology,n,t)};ms.prototype.serverInfo=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={buildinfo:1},n=new vh(this.s.db,r,e);return Zo(this.s.db.s.topology,n,t)};ms.prototype.serverStatus=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new vh(this.s.db,{serverStatus:1},e);return Zo(this.s.db.s.topology,r,t)};ms.prototype.ping=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={ping:1},n=new vh(this.s.db,r,e);return Zo(this.s.db.s.topology,n,t)};ms.prototype.addUser=function(e,t,r,n){let i=Array.prototype.slice.call(arguments,2);n=typeof i[i.length-1]=="function"?i.pop():void 0,typeof e=="string"&&t!=null&&typeof t=="object"&&(r=t,t=null),r=i.length?i.shift():{},r=Object.assign({},r),r=J9(r,{db:this.s.db}),r.dbName="admin";let o=new Q2e(this.s.db,e,t,r);return Zo(this.s.db.s.topology,o,n)};ms.prototype.removeUser=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():{},t=Object.assign({},t),t=J9(t,{db:this.s.db}),t.dbName="admin";let i=new Z2e(this.s.db,e,t);return Zo(this.s.db.s.topology,i,r)};ms.prototype.validateCollection=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new e$e(this,e,t);return Zo(this.s.db.s.topology,n,r)};ms.prototype.listDatabases=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},Zo(this.s.db.s.topology,new t$e(this.s.db,e),t)};ms.prototype.replSetGetStatus=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new vh(this.s.db,{replSetGetStatus:1},e);return Zo(this.s.db.s.topology,r,t)};Q9.exports=ms});var l_=w((vOt,iX)=>{"use strict";var rX=require("events").EventEmitter,r$e=require("util").inherits,qq=$().getSingleProperty,n$e=DO(),eT=$().handleCallback,i$e=$().filterOptions,Z9=$().toError,tT=pe().ReadPreference,eX=pe().MongoError,s$e=pe().ObjectID,o$e=pe().Logger,tX=yh(),a$e=$().conditionallyMergeWriteConcern,Lq=$().executeLegacyOperation,u$e=rT(),c_=require("util").deprecate,nX=$().deprecateOptions,c$e=$().MongoDBNamespace,_h=lO(),l$e=Fa(),Uq=Wl(),d$e=AO(),Dc=$n().createListener,f$e=$n().ensureIndex,h$e=$n().evaluate,p$e=$n().profilingInfo,m$e=$n().validateDatabaseName,g$e=r_(),y$e=fq(),v$e=D9(),_$e=So(),S$e=x9(),E$e=B9(),C$e=gF(),w$e=MO().DropCollectionOperation,b$e=MO().DropDatabaseOperation,O$e=Sq(),T$e=QF(),A$e=L9(),I$e=j9(),D$e=Tq(),R$e=Dq(),N$e=H9(),Ji=Vf(),x$e=["w","wtimeout","fsync","j","writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","bufferMaxEntries","authSource","ignoreUndefined","promiseLibrary","readConcern","retryMiliSeconds","numberOfRetries","parentDb","noListener","loggerLevel","logger","promoteBuffers","promoteLongs","promoteValues","bsonRegExp","compression","retryWrites"];function it(e,t,r){if(r=r||{},!(this instanceof it))return new it(e,t,r);rX.call(this);let n=r.promiseLibrary||Promise;r=i$e(r,x$e),r.promiseLibrary=n,this.s={dbCache:{},children:[],topology:t,options:r,logger:o$e("Db",r),bson:t?t.bson:null,readPreference:tT.fromOptions(r),bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:-1,parentDb:r.parentDb||null,pkFactory:r.pkFactory||s$e,nativeParser:r.nativeParser||r.native_parser,promiseLibrary:n,noListener:typeof r.noListener=="boolean"?r.noListener:!1,readConcern:Uq.fromOptions(r),writeConcern:l$e.fromOptions(r),namespace:new c$e(e)},m$e(e),qq(this,"serverConfig",this.s.topology),qq(this,"bufferMaxEntries",this.s.bufferMaxEntries),qq(this,"databaseName",this.s.namespace.db),!r.parentDb&&(this.s.noListener||(t.on("error",Dc(this,"error",this)),t.on("timeout",Dc(this,"timeout",this)),t.on("close",Dc(this,"close",this)),t.on("parseError",Dc(this,"parseError",this)),t.once("open",Dc(this,"open",this)),t.once("fullsetup",Dc(this,"fullsetup",this)),t.once("all",Dc(this,"all",this)),t.on("reconnect",Dc(this,"reconnect",this))))}s(it,"Db");r$e(it,rX);it.prototype.on=c_(function(){return it.super_.prototype.on.apply(this,arguments)},"Listening to events on the Db class has been deprecated and will be removed in the next major version.");it.prototype.once=c_(function(){return it.super_.prototype.once.apply(this,arguments)},"Listening to events on the Db class has been deprecated and will be removed in the next major version.");Object.defineProperty(it.prototype,"topology",{enumerable:!0,get:function(){return this.s.topology}});Object.defineProperty(it.prototype,"options",{enumerable:!0,get:function(){return this.s.options}});Object.defineProperty(it.prototype,"slaveOk",{enumerable:!0,get:function(){return this.s.options.readPreference!=null&&(this.s.options.readPreference!=="primary"||this.s.options.readPreference.mode!=="primary")}});Object.defineProperty(it.prototype,"readConcern",{enumerable:!0,get:function(){return this.s.readConcern}});Object.defineProperty(it.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference==null?tT.primary:this.s.readPreference}});Object.defineProperty(it.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern}});Object.defineProperty(it.prototype,"namespace",{enumerable:!0,get:function(){return this.s.namespace.toString()}});it.prototype.command=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t);let n=new S$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.aggregate=function(e,t,r){typeof t=="function"&&(r=t,t={}),t==null&&r==null&&(t={});let n=new d$e(this.s.topology,new g$e(this,e,t),t);if(typeof r=="function"){r(null,n);return}return n};it.prototype.admin=function(){let e=Fq();return new e(this,this.s.topology,this.s.promiseLibrary)};var P$e=["pkFactory","readPreference","serializeFunctions","strict","readConcern","ignoreUndefined","promoteValues","promoteBuffers","promoteLongs","bsonRegExp"];it.prototype.collection=nX({name:"Db.collection",deprecatedOptions:["strict"],optionsIndex:1},function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t=Object.assign({},t),t.promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern?new Uq(t.readConcern.level):this.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined);for(let i of P$e)!(i in t)&&this.s.options[i]!==void 0&&(t[i]=this.s.options[i]);if(t=a$e(t,this.s.options),t==null||!t.strict)try{let i=new tX(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t);return r&&r(null,i),i}catch(i){if(i instanceof eX&&r)return r(i);throw i}if(typeof r!="function")throw Z9(`A callback is required in strict mode. While getting collection ${e}`);if(this.serverConfig&&this.serverConfig.isDestroyed())return r(new eX("topology was destroyed"));let n=Object.assign({},t,{nameOnly:!0});this.listCollections({name:e},n).toArray((i,o)=>{if(i!=null)return eT(r,i,null);if(o.length===0)return eT(r,Z9(`Collection ${e} does not exist. Currently in strict mode.`),null);try{return eT(r,null,new tX(this,this.s.topology,this.databaseName,e,this.s.pkFactory,t))}catch(a){return eT(r,a,null)}})});it.prototype.createCollection=nX({name:"Db.createCollection",deprecatedOptions:["autoIndexId","strict","w","wtimeout","j"],optionsIndex:1},function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t.promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,t.readConcern=t.readConcern?new Uq(t.readConcern.level):this.readConcern;let n=new E$e(this,e,t);return Ji(this.s.topology,n,r)});it.prototype.stats=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r={dbStats:!0};e.scale!=null&&(r.scale=e.scale),e.readPreference==null&&this.s.readPreference&&(e.readPreference=this.s.readPreference);let n=new _$e(this,e,null,r);return Ji(this.s.topology,n,t)};it.prototype.listCollections=function(e,t){return e=e||{},t=t||{},new n$e(this.s.topology,new A$e(this,e,t),t)};it.prototype.eval=c_(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():t,r=i.length?i.shift()||{}:{},Lq(this.s.topology,h$e,[this,e,t,r,n])},"Db.eval is deprecated as of MongoDB version 3.2");it.prototype.renameCollection=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=Object.assign({},r,{readPreference:tT.PRIMARY}),r.new_collection=!0;let i=new R$e(this.collection(e),t,r);return Ji(this.s.topology,i,n)};it.prototype.dropCollection=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new w$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.dropDatabase=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new b$e(this,e);return Ji(this.s.topology,r,t)};it.prototype.collections=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new v$e(this,e);return Ji(this.s.topology,r,t)};it.prototype.executeDbAdminCommand=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},t.readPreference=tT.resolve(this,t);let n=new O$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.createIndex=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r?Object.assign({},r):{};let i=new C$e(this,e,t,r);return Ji(this.s.topology,i,n)};it.prototype.ensureIndex=c_(function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},Lq(this.s.topology,f$e,[this,e,t,r,n])},"Db.ensureIndex is deprecated as of MongoDB version 3.0 / driver version 2.0");it.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)};it.prototype.addUser=function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{},typeof e=="string"&&t!=null&&typeof t=="object"&&(r=t,t=null);let i=new y$e(this,e,t,r);return Ji(this.s.topology,i,n)};it.prototype.removeUser=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new D$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.setProfilingLevel=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new N$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.profilingInfo=c_(function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},Lq(this.s.topology,p$e,[this,e,t])},"Db.profilingInfo is deprecated. Query the system.profile collection directly.");it.prototype.profilingLevel=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new I$e(this,e);return Ji(this.s.topology,r,t)};it.prototype.indexInformation=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new T$e(this,e,t);return Ji(this.s.topology,n,r)};it.prototype.unref=function(){this.s.topology.unref()};it.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new u$e(this,e,t)};it.prototype.getLogger=function(){return this.s.logger};it.SYSTEM_NAMESPACE_COLLECTION=_h.SYSTEM_NAMESPACE_COLLECTION;it.SYSTEM_INDEX_COLLECTION=_h.SYSTEM_INDEX_COLLECTION;it.SYSTEM_PROFILE_COLLECTION=_h.SYSTEM_PROFILE_COLLECTION;it.SYSTEM_USER_COLLECTION=_h.SYSTEM_USER_COLLECTION;it.SYSTEM_COMMAND_COLLECTION=_h.SYSTEM_COMMAND_COLLECTION;it.SYSTEM_JS_COLLECTION=_h.SYSTEM_JS_COLLECTION;iX.exports=it});var KO=w((SOt,sX)=>{"use strict";var jq,$q,kq;function B$e(){return jq||(jq=yh()),jq}s(B$e,"loadCollection");function M$e(){return $q||($q=Jo()),$q}s(M$e,"loadCursor");function F$e(){return kq||(kq=l_()),kq}s(F$e,"loadDb");sX.exports={loadCollection:B$e,loadCursor:M$e,loadDb:F$e}});var uX=w((COt,aX)=>{"use strict";var q$e=$().applyWriteConcern,L$e=pe().BSON.Code,U$e=$().decorateWithCollation,j$e=$().decorateWithReadConcern,$$e=$n().executeCommand,Sh=$().handleCallback,k$e=$().isObject,G$e=KO().loadDb,W$e=he().OperationBase,z$e=pe().ReadPreference,H$e=$().toError,V$e=he().Aspect,Y$e=he().defineAspects,K$e=$().decorateWithExplain,X$e=Le().maxWireVersion,J$e=Zv().MongoError,Q$e=["explain","readPreference","session","bypassDocumentValidation","w","wtimeout","j","writeConcern"],Gq=class Gq extends W$e{constructor(t,r,n,i){super(i),this.collection=t,this.map=r,this.reduce=n}execute(t){let r=this.collection,n=this.map,i=this.reduce,o=this.options,a={mapReduce:r.collectionName,map:n,reduce:i};for(let u in o)u==="scope"?a[u]=oX(o[u]):Q$e.indexOf(u)===-1&&(a[u]=o[u]);o=Object.assign({},o),o.readPreference=z$e.resolve(r,o),o.readPreference!==!1&&o.readPreference!=="primary"&&o.out&&o.out.inline!==1&&o.out!=="inline"?(o.readPreference="primary",q$e(a,{db:r.s.db,collection:r},o)):j$e(a,r,o),o.bypassDocumentValidation===!0&&(a.bypassDocumentValidation=o.bypassDocumentValidation);try{U$e(a,r,o)}catch(u){return t(u,null)}if(this.explain){if(X$e(r.s.topology)<9){t(new J$e("server does not support explain on mapReduce"));return}a=K$e(a,this.explain)}$$e(r.s.db,a,o,(u,l)=>{if(u)return Sh(t,u);if(l.ok!==1||l.err||l.errmsg)return Sh(t,H$e(l));if(this.explain)return t(void 0,l);let f={};if(l.timeMillis&&(f.processtime=l.timeMillis),l.counts&&(f.counts=l.counts),l.timing&&(f.timing=l.timing),l.results)return o.verbose==null||!o.verbose?Sh(t,null,l.results):Sh(t,null,{results:l.results,stats:f});let h=null;if(l.result!=null&&typeof l.result=="object"){let p=l.result,g=G$e();h=new g(p.db,r.s.db.s.topology,r.s.db.s.options).collection(p.collection)}else h=r.s.db.collection(l.result);if(o.verbose==null||!o.verbose)return Sh(t,u,h);Sh(t,u,{collection:h,stats:f})})}};s(Gq,"MapReduceOperation");var nT=Gq;function oX(e){if(!k$e(e)||e._bsontype==="ObjectID")return e;let t=Object.keys(e),r,n={};for(let i=t.length-1;i>=0;i--)r=t[i],typeof e[r]=="function"?n[r]=new L$e(String(e[r])):n[r]=oX(e[r]);return n}s(oX,"processScope");Y$e(nT,[V$e.EXPLAINABLE]);aX.exports=nT});var lX=w((bOt,cX)=>{"use strict";var Z$e=he().Aspect,eke=he().defineAspects,tke=Qo(),rke=ti().serverType,nke=ti().ServerType,ike=pe().MongoError,Wq=class Wq extends tke{constructor(t,r){super(t,r),this.collectionName=t.collectionName}execute(t,r){if(rke(t)!==nke.Standalone){r(new ike("reIndex can only be executed on standalone servers."));return}super.executeCommand(t,{reIndex:this.collectionName},(n,i)=>{if(n){r(n);return}r(null,!!i.ok)})}};s(Wq,"ReIndexOperation");var iT=Wq;eke(iT,[Z$e.EXECUTE_WITH_SELECTION]);cX.exports=iT});var fX=w((TOt,dX)=>{"use strict";var ske=he().OperationBase,oke=Ii().updateDocuments,ake=$().hasAtomicOperators,Hq=class Hq extends ske{constructor(t,r,n,i){if(super(i),ake(n))throw new TypeError("Replacement document must not contain atomic operators");this.collection=t,this.filter=r,this.replacement=n}execute(t){let r=this.collection,n=this.filter,i=this.replacement,o=this.options;o.multi=!1,oke(r,n,i,o,(a,u)=>uke(a,u,i,t))}};s(Hq,"ReplaceOneOperation");var zq=Hq;function uke(e,t,r,n){if(n!=null){if(e&&n)return n(e);if(t==null)return n(null,{result:{ok:1}});t.modifiedCount=t.result.nModified!=null?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[r],n&&n(null,t)}}s(uke,"replaceCallback");dX.exports=zq});var pX=w((IOt,hX)=>{"use strict";var cke=he().Aspect,lke=So(),dke=he().defineAspects,Vq=class Vq extends lke{constructor(t,r){super(t.s.db,r,t)}_buildCommand(){let t=this.collection,r=this.options,n={collStats:t.collectionName};return r.scale!=null&&(n.scale=r.scale),n}};s(Vq,"StatsOperation");var sT=Vq;dke(sT,cke.READ_OPERATION);hX.exports=sT});var gX=w((ROt,mX)=>{"use strict";var fke=he().OperationBase,hke=Ii().updateDocuments,pke=$().hasAtomicOperators,mke=he().Aspect,gke=he().defineAspects,Yq=class Yq extends fke{constructor(t,r,n,i){if(super(i),!pke(n))throw new TypeError("Update document requires atomic operators");this.collection=t,this.filter=r,this.update=n}execute(t){let r=this.collection,n=this.filter,i=this.update,o=this.options;o.multi=!0,hke(r,n,i,o,(a,u)=>{if(t!=null){if(a)return t(a);if(u==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,u.result);u.modifiedCount=u.result.nModified!=null?u.result.nModified:u.result.n,u.upsertedId=Array.isArray(u.result.upserted)&&u.result.upserted.length>0?u.result.upserted[0]:null,u.upsertedCount=Array.isArray(u.result.upserted)&&u.result.upserted.length?u.result.upserted.length:0,u.matchedCount=Array.isArray(u.result.upserted)&&u.result.upserted.length>0?0:u.result.n,t(null,u)}})}};s(Yq,"UpdateManyOperation");var oT=Yq;gke(oT,[mke.EXPLAINABLE]);mX.exports=oT});var vX=w((xOt,yX)=>{"use strict";var yke=he().OperationBase,vke=Ii().updateDocuments,_ke=$().hasAtomicOperators,Ske=he().Aspect,Eke=he().defineAspects,Kq=class Kq extends yke{constructor(t,r,n,i){if(super(i),!_ke(n))throw new TypeError("Update document requires atomic operators");this.collection=t,this.filter=r,this.update=n}execute(t){let r=this.collection,n=this.filter,i=this.update,o=this.options;o.multi=!1,vke(r,n,i,o,(a,u)=>{if(t!=null){if(a)return t(a);if(u==null)return t(null,{result:{ok:1}});if(this.explain)return t(void 0,u.result);u.modifiedCount=u.result.nModified!=null?u.result.nModified:u.result.n,u.upsertedId=Array.isArray(u.result.upserted)&&u.result.upserted.length>0?u.result.upserted[0]:null,u.upsertedCount=Array.isArray(u.result.upserted)&&u.result.upserted.length?u.result.upserted.length:0,u.matchedCount=Array.isArray(u.result.upserted)&&u.result.upserted.length>0?0:u.result.n,t(null,u)}})}};s(Kq,"UpdateOneOperation");var aT=Kq;Eke(aT,[Ske.EXPLAINABLE]);yX.exports=aT});var yh=w((BOt,AX)=>{"use strict";var gs=require("util").deprecate,uT=$().deprecateOptions,_X=$().emitWarningOnce,Cke=$().checkCollectionName,wke=pe().BSON.ObjectID,SX=pe().MongoError,EX=$().normalizeHintField,bke=$().decorateCommand,Oke=$().decorateWithCollation,Tke=$().decorateWithReadConcern,Ake=$().formattedOrderClause,Eh=pe().ReadPreference,Ike=m5(),Dke=_5(),Rke=rT(),Ch=$().executeLegacyOperation,Nke=Fa(),xke=Wl(),Pke=$().MongoDBNamespace,Bke=AO(),Mke=DO(),Fke=lh().ensureIndex,qke=lh().group,Lke=lh().parallelCollectionScan,Uke=Ii().removeDocuments,jke=lh().save,$ke=Ii().updateDocuments,kke=r_(),Gke=dF(),Wke=pF(),CX=gF(),zke=R5(),Hke=x5(),Vke=B5(),Yke=MO().DropCollectionOperation,Kke=NF(),Xke=G5(),wX=z5(),Jke=Y5(),Qke=J5(),bX=u_(),Zke=n9(),e3e=s9(),t3e=a9(),r3e=c9(),n3e=d9(),i3e=h9(),s3e=QF(),o3e=g9(),a3e=v9(),u3e=C9(),c3e=b9(),l3e=uX(),d3e=oq(),f3e=Dq(),h3e=lX(),p3e=fX(),m3e=pX(),g3e=gX(),y3e=vX(),Gt=Vf(),v3e=["ignoreUndefined"];function Re(e,t,r,n,i,o){Cke(n);let a=null,u=o==null||o.slaveOk==null?e.slaveOk:o.slaveOk,l=o==null||o.serializeFunctions==null?e.s.options.serializeFunctions:o.serializeFunctions,f=o==null||o.raw==null?e.s.options.raw:o.raw,h=o==null||o.promoteLongs==null?e.s.options.promoteLongs:o.promoteLongs,p=o==null||o.promoteValues==null?e.s.options.promoteValues:o.promoteValues,g=o==null||o.promoteBuffers==null?e.s.options.promoteBuffers:o.promoteBuffers,_=o==null||o.bsonRegExp==null?e.s.options.bsonRegExp:o.bsonRegExp,C=null,D=new Pke(r,n),O=o.promiseLibrary||Promise;i=i??wke,this.s={pkFactory:i,db:e,topology:t,options:o,namespace:D,readPreference:Eh.fromOptions(o),slaveOk:u,serializeFunctions:l,raw:f,promoteLongs:h,promoteValues:p,promoteBuffers:g,bsonRegExp:_,internalHint:a,collectionHint:C,promiseLibrary:O,readConcern:xke.fromOptions(o),writeConcern:Nke.fromOptions(o)}}s(Re,"Collection");Object.defineProperty(Re.prototype,"dbName",{enumerable:!0,get:function(){return this.s.namespace.db}});Object.defineProperty(Re.prototype,"collectionName",{enumerable:!0,get:function(){return this.s.namespace.collection}});Object.defineProperty(Re.prototype,"namespace",{enumerable:!0,get:function(){return this.s.namespace.toString()}});Object.defineProperty(Re.prototype,"readConcern",{enumerable:!0,get:function(){return this.s.readConcern==null?this.s.db.readConcern:this.s.readConcern}});Object.defineProperty(Re.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference==null?this.s.db.readPreference:this.s.readPreference}});Object.defineProperty(Re.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern==null?this.s.db.writeConcern:this.s.writeConcern}});Object.defineProperty(Re.prototype,"hint",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=EX(e)}});var OX=["maxScan","fields","snapshot","oplogReplay"];Re.prototype.find=uT({name:"collection.find",deprecatedOptions:OX,optionsIndex:1},function(e,t,r){typeof r=="object"&&_X("Third parameter to `find()` must be a callback or undefined");let n=e;typeof r!="function"&&(typeof t=="function"?(r=t,t=void 0):t==null&&(r=typeof n=="function"?n:void 0,n=typeof n=="object"?n:void 0)),n=n??{};let i=n;if(Buffer.isBuffer(i)){let f=i[0]|i[1]<<8|i[2]<<16|i[3]<<24;if(f!==i.length){let h=new Error("query selector raw message size does not match message header size ["+i.length+"] != ["+f+"]");throw h.name="MongoError",h}}n!=null&&n._bsontype==="ObjectID"&&(n={_id:n}),t||(t={});let o=t.projection||t.fields;o&&!Buffer.isBuffer(o)&&Array.isArray(o)&&(o=o.length?o.reduce((f,h)=>(f[h]=1,f),{}):{_id:1});let a=Object.assign({},t);for(let f in this.s.options)v3e.indexOf(f)!==-1&&(a[f]=this.s.options[f]);if(a.skip=t.skip?t.skip:0,a.limit=t.limit?t.limit:0,a.raw=typeof t.raw=="boolean"?t.raw:this.s.raw,a.hint=t.hint!=null?EX(t.hint):this.s.collectionHint,a.timeout=typeof t.timeout>"u"?void 0:t.timeout,a.slaveOk=t.slaveOk!=null?t.slaveOk:this.s.db.slaveOk,a.readPreference=Eh.resolve(this,a),a.readPreference!=null&&(a.readPreference!=="primary"||a.readPreference.mode!=="primary")&&(a.slaveOk=!0),n!=null&&typeof n!="object")throw SX.create({message:"query selector must be an object",driver:!0});let u={find:this.s.namespace.toString(),limit:a.limit,skip:a.skip,query:n};typeof t.allowDiskUse=="boolean"&&(u.allowDiskUse=t.allowDiskUse),typeof a.awaitdata=="boolean"&&(a.awaitData=a.awaitdata),typeof a.timeout=="boolean"&&(a.noCursorTimeout=!a.timeout),bke(u,a,["session","collation"]),o&&(u.fields=o),a.db=this.s.db,a.promiseLibrary=this.s.promiseLibrary,a.raw==null&&typeof this.s.raw=="boolean"&&(a.raw=this.s.raw),a.promoteLongs==null&&typeof this.s.promoteLongs=="boolean"&&(a.promoteLongs=this.s.promoteLongs),a.promoteValues==null&&typeof this.s.promoteValues=="boolean"&&(a.promoteValues=this.s.promoteValues),a.promoteBuffers==null&&typeof this.s.promoteBuffers=="boolean"&&(a.promoteBuffers=this.s.promoteBuffers),a.bsonRegExp==null&&typeof this.s.bsonRegExp=="boolean"&&(a.bsonRegExp=this.s.bsonRegExp),u.sort&&(u.sort=Ake(u.sort)),Tke(u,this,t);try{Oke(u,this,t)}catch(f){if(typeof r=="function")return r(f,null);throw f}let l=this.s.topology.cursor(new Jke(this,this.s.namespace,u,a),a);if(typeof r=="function"){r(null,l);return}return l});Re.prototype.insertOne=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new a3e(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.insertMany=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t?Object.assign({},t):{ordered:!0};let n=new o3e(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.bulkWrite=function(e,t,r){if(typeof t=="function"&&(r=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw SX.create({message:"operations must be an array of documents",driver:!0});let n=new Gke(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.insert=gs(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],t.keepGoing===!0&&(t.ordered=!1),this.insertMany(e,t,r)},"collection.insert is deprecated. Use insertOne, insertMany or bulkWrite instead.");Re.prototype.updateOne=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new y3e(this,e,t,r),n)};Re.prototype.replaceOne=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new p3e(this,e,t,r),n)};Re.prototype.updateMany=function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=Object.assign({},r),this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new g3e(this,e,t,r),n)};Re.prototype.update=gs(function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Ch(this.s.topology,$ke,[this,e,t,r,n])},"collection.update is deprecated. Use updateOne, updateMany, or bulkWrite instead.");Re.prototype.deleteOne=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new Hke(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.removeOne=Re.prototype.deleteOne;Re.prototype.deleteMany=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t),this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined);let n=new zke(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.removeMany=Re.prototype.deleteMany;Re.prototype.remove=gs(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),Ch(this.s.topology,Uke,[this,e,t,r])},"collection.remove is deprecated. Use deleteOne, deleteMany, or bulkWrite instead.");Re.prototype.save=gs(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),Ch(this.s.topology,jke,[this,e,t,r])},"collection.save is deprecated. Use insertOne, insertMany, updateOne, or updateMany instead.");Re.prototype.findOne=uT({name:"collection.find",deprecatedOptions:OX,optionsIndex:1},function(e,t,r){typeof r=="object"&&_X("Third parameter to `findOne()` must be a callback or undefined"),typeof e=="function"&&(r=e,e={},t={}),typeof t=="function"&&(r=t,t={}),e=e||{},t=t||{};let n=new Qke(this,e,t);return Gt(this.s.topology,n,r)});Re.prototype.rename=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=Object.assign({},t,{readPreference:Eh.PRIMARY});let n=new f3e(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.drop=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new Yke(this.s.db,this.collectionName,e);return Gt(this.s.topology,r,t)};Re.prototype.options=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new d3e(this,e);return Gt(this.s.topology,r,t)};Re.prototype.isCapped=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new u3e(this,e);return Gt(this.s.topology,r,t)};Re.prototype.createIndex=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new CX(this,this.collectionName,e,t);return Gt(this.s.topology,n,r)};Re.prototype.createIndexes=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t?Object.assign({},t):{},typeof t.maxTimeMS!="number"&&delete t.maxTimeMS;let n=new CX(this,this.collectionName,e,t);return Gt(this.s.topology,n,r)};Re.prototype.dropIndex=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift()||{}:{},t.readPreference=Eh.PRIMARY;let i=new Kke(this,e,t);return Gt(this.s.topology,i,r)};Re.prototype.dropIndexes=function(e,t){typeof e=="function"&&(t=e,e={}),e=e?Object.assign({},e):{},typeof e.maxTimeMS!="number"&&delete e.maxTimeMS;let r=new Xke(this,e);return Gt(this.s.topology,r,t)};Re.prototype.dropAllIndexes=gs(Re.prototype.dropIndexes,"collection.dropAllIndexes is deprecated. Use dropIndexes instead.");Re.prototype.reIndex=gs(function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new h3e(this,e);return Gt(this.s.topology,r,t)},"collection.reIndex is deprecated. Use db.command instead.");Re.prototype.listIndexes=function(e){return new Mke(this.s.topology,new c3e(this,e),e)};Re.prototype.ensureIndex=gs(function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},Ch(this.s.topology,Fke,[this,e,t,r])},"collection.ensureIndex is deprecated. Use createIndexes instead.");Re.prototype.indexExists=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n=new i3e(this,e,t);return Gt(this.s.topology,n,r)};Re.prototype.indexInformation=function(e,t){let r=Array.prototype.slice.call(arguments,0);t=typeof r[r.length-1]=="function"?r.pop():void 0,e=r.length?r.shift()||{}:{};let n=new s3e(this.s.db,this.collectionName,e);return Gt(this.s.topology,n,t)};Re.prototype.count=gs(function(e,t,r){let n=Array.prototype.slice.call(arguments,0);return r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift()||{}:{},t=n.length?n.shift()||{}:{},typeof t=="function"&&(r=t,t={}),t=t||{},Gt(this.s.topology,new wX(this,Object.assign({query:e},t)),r)},"collection.count is deprecated, and will be removed in a future version. Use Collection.countDocuments or Collection.estimatedDocumentCount instead");Re.prototype.estimatedDocumentCount=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new wX(this,e);return Gt(this.s.topology,r,t)};Re.prototype.countDocuments=function(e,t,r){let n=Array.prototype.slice.call(arguments,0);r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift()||{}:{},t=n.length?n.shift()||{}:{};let i=new Wke(this,e,t);return Gt(this.s.topology,i,r)};Re.prototype.distinct=function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);n=typeof i[i.length-1]=="function"?i.pop():void 0;let o=i.length?i.shift()||{}:{},a=i.length?i.shift()||{}:{},u=new Vke(this,e,o,a);return Gt(this.s.topology,u,n)};Re.prototype.indexes=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};let r=new n3e(this,e);return Gt(this.s.topology,r,t)};Re.prototype.stats=function(e,t){let r=Array.prototype.slice.call(arguments,0);t=typeof r[r.length-1]=="function"?r.pop():void 0,e=r.length?r.shift()||{}:{};let n=new m3e(this,e);return Gt(this.s.topology,n,t)};Re.prototype.findOneAndDelete=function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},this.s.options.ignoreUndefined&&(t=Object.assign({},t),t.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new Zke(this,e,t),r)};Re.prototype.findOneAndReplace=uT({name:"collection.findOneAndReplace",deprecatedOptions:["returnOriginal"],optionsIndex:2},function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new e3e(this,e,t,r),n)});Re.prototype.findOneAndUpdate=uT({name:"collection.findOneAndUpdate",deprecatedOptions:["returnOriginal"],optionsIndex:2},function(e,t,r,n){return typeof r=="function"&&(n=r,r={}),r=r||{},this.s.options.ignoreUndefined&&(r=Object.assign({},r),r.ignoreUndefined=this.s.options.ignoreUndefined),Gt(this.s.topology,new t3e(this,e,t,r),n)});Re.prototype.findAndModify=gs(TX,"collection.findAndModify is deprecated. Use findOneAndUpdate, findOneAndReplace or findOneAndDelete instead.");Re.prototype._findAndModify=TX;function TX(e,t,r,n,i){let o=Array.prototype.slice.call(arguments,1);return i=typeof o[o.length-1]=="function"?o.pop():void 0,t=o.length?o.shift()||[]:[],r=o.length?o.shift():null,n=o.length?o.shift()||{}:{},n=Object.assign({},n),n.readPreference=Eh.PRIMARY,Gt(this.s.topology,new bX(this,e,t,r,n),i)}s(TX,"_findAndModify");Re.prototype.findAndRemove=gs(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift()||[]:[],r=i.length?i.shift()||{}:{},r.remove=!0,Gt(this.s.topology,new bX(this,e,t,null,r),n)},"collection.findAndRemove is deprecated. Use findOneAndDelete instead.");Re.prototype.aggregate=function(e,t,r){if(Array.isArray(e))typeof t=="function"&&(r=t,t={}),t==null&&r==null&&(t={});else{let i=Array.prototype.slice.call(arguments,0);r=i.pop();let o=i[i.length-1];t=o&&(o.readPreference||o.explain||o.cursor||o.out||o.maxTimeMS||o.hint||o.allowDiskUse)?i.pop():{},e=i}let n=new Bke(this.s.topology,new kke(this,e,t),t);if(typeof r=="function"){r(null,n);return}return n};Re.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new Rke(this,e,t)};Re.prototype.parallelCollectionScan=gs(function(e,t){return typeof e=="function"&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,e=Object.assign({},e),e.readPreference=Eh.resolve(this,e),e.promiseLibrary=this.s.promiseLibrary,e.session&&(e.session=void 0),Ch(this.s.topology,Lke,[this,e,t],{skipSessions:!0})},"parallelCollectionScan is deprecated in MongoDB v4.1");Re.prototype.geoHaystackSearch=gs(function(e,t,r,n){let i=Array.prototype.slice.call(arguments,2);n=typeof i[i.length-1]=="function"?i.pop():void 0,r=i.length?i.shift()||{}:{};let o=new r3e(this,e,t,r);return Gt(this.s.topology,o,n)},"geoHaystackSearch is deprecated, and will be removed in a future version.");Re.prototype.group=gs(function(e,t,r,n,i,o,a,u){let l=Array.prototype.slice.call(arguments,3);return u=typeof l[l.length-1]=="function"?l.pop():void 0,n=l.length?l.shift():null,i=l.length?l.shift():null,o=l.length?l.shift():null,a=l.length?l.shift()||{}:{},typeof i!="function"&&(o=i,i=null),!Array.isArray(e)&&e instanceof Object&&typeof e!="function"&&e._bsontype!=="Code"&&(e=Object.keys(e)),typeof n=="function"&&(n=n.toString()),typeof i=="function"&&(i=i.toString()),o=o??!0,Ch(this.s.topology,qke,[this,e,t,r,n,i,o,a,u])},"MongoDB 3.6 or higher no longer supports the group command. We recommend rewriting using the aggregation framework.");Re.prototype.mapReduce=function(e,t,r,n){if(typeof r=="function"&&(n=r,r={}),r.out==null)throw new Error("the out option parameter must be defined, see mongodb docs for possible values");typeof e=="function"&&(e=e.toString()),typeof t=="function"&&(t=t.toString()),typeof r.finalize=="function"&&(r.finalize=r.finalize.toString());let i=new l3e(this,e,t,r);return Gt(this.s.topology,i,n)};Re.prototype.initializeUnorderedBulkOp=function(e){return e=e||{},e.ignoreUndefined==null&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,Ike(this.s.topology,this,e)};Re.prototype.initializeOrderedBulkOp=function(e){return e=e||{},e.ignoreUndefined==null&&(e.ignoreUndefined=this.s.options.ignoreUndefined),e.promiseLibrary=this.s.promiseLibrary,Dke(this.s.topology,this,e)};Re.prototype.getLogger=function(){return this.s.db.s.logger};AX.exports=Re});var rT=w((FOt,qX)=>{"use strict";var _3e=Mb(),S3e=require("events"),E3e=Zv().isResumableError,f_=pe().MongoError,C3e=Jo(),w3e=Le().relayEvents,Jq=Le().maxWireVersion,Xq=$().maybePromise,IX=$().now,b3e=$().calculateDurationInMs,O3e=r_(),d_=Symbol("resumeQueue"),xX=["resumeAfter","startAfter","startAtOperationTime","fullDocument"],PX=["batchSize","maxAwaitTimeMS","collation","readPreference"].concat(xX),cT={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},tL=class tL extends S3e{constructor(t,r,n){super();let i=yh(),o=l_(),a=wh();if(this.pipeline=r||[],this.options=n||{},this.parent=t,this.namespace=t.s.namespace,t instanceof i)this.type=cT.COLLECTION,this.topology=t.s.db.serverConfig;else if(t instanceof o)this.type=cT.DATABASE,this.topology=t.serverConfig;else if(t instanceof a)this.type=cT.CLUSTER,this.topology=t.topology;else throw new TypeError("parent provided to ChangeStream constructor is not an instance of Collection, Db, or MongoClient");this.promiseLibrary=t.s.promiseLibrary,!this.options.readPreference&&t.s.readPreference&&(this.options.readPreference=t.s.readPreference),this[d_]=new _3e,this.cursor=BX(this,n),this.closed=!1,this.on("newListener",u=>{u==="change"&&this.cursor&&this.listenerCount("change")===0&&this.cursor.on("data",l=>eL(this,l))}),this.on("removeListener",u=>{u==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursor.removeAllListeners("data")})}get resumeToken(){return this.cursor.resumeToken}hasNext(t){return Xq(this.parent,t,r=>{RX(this,(n,i)=>{if(n)return r(n);i.hasNext(r)})})}next(t){return Xq(this.parent,t,r=>{RX(this,(n,i)=>{if(n)return r(n);i.next((o,a)=>{if(o){this[d_].push(()=>this.next(r)),FX(this,o,r);return}eL(this,a,r)})})})}isClosed(){return this.closed||this.cursor&&this.cursor.isClosed()}close(t){return Xq(this.parent,t,r=>{if(this.closed||(this.closed=!0,!this.cursor))return r();let n=this.cursor;return n.close(i=>(["data","close","end","error"].forEach(o=>n.removeAllListeners(o)),this.cursor=void 0,r(i)))})}pipe(t,r){return this.pipeDestinations||(this.pipeDestinations=[]),this.pipeDestinations.push(t),this.cursor.pipe(t,r)}unpipe(t){return this.pipeDestinations&&this.pipeDestinations.indexOf(t)>-1&&this.pipeDestinations.splice(this.pipeDestinations.indexOf(t),1),this.cursor.unpipe(t)}stream(t){return this.streamOptions=t,this.cursor.stream(t)}pause(){return this.cursor.pause()}resume(){return this.cursor.resume()}};s(tL,"ChangeStream");var Qq=tL,rL=class rL extends C3e{constructor(t,r,n){super(t,r,n),n=n||{},this._resumeToken=null,this.startAtOperationTime=n.startAtOperationTime,n.startAfter?this.resumeToken=n.startAfter:n.resumeAfter&&(this.resumeToken=n.resumeAfter)}set resumeToken(t){this._resumeToken=t,this.emit("resumeTokenChanged",t)}get resumeToken(){return this._resumeToken}get resumeOptions(){let t={};for(let r of PX)this.options[r]&&(t[r]=this.options[r]);if(this.resumeToken||this.startAtOperationTime)if(["resumeAfter","startAfter","startAtOperationTime"].forEach(r=>delete t[r]),this.resumeToken){let r=this.options.startAfter&&!this.hasReceived?"startAfter":"resumeAfter";t[r]=this.resumeToken}else this.startAtOperationTime&&Jq(this.server)>=7&&(t.startAtOperationTime=this.startAtOperationTime);return t}cacheResumeToken(t){this.bufferedCount()===0&&this.cursorState.postBatchResumeToken?this.resumeToken=this.cursorState.postBatchResumeToken:this.resumeToken=t,this.hasReceived=!0}_processBatch(t,r){let n=r.cursor;n.postBatchResumeToken&&(this.cursorState.postBatchResumeToken=n.postBatchResumeToken,n[t].length===0&&(this.resumeToken=n.postBatchResumeToken))}_initializeCursor(t){super._initializeCursor((r,n)=>{if(r||n==null){t(r,n);return}let i=n.documents[0];this.startAtOperationTime==null&&this.resumeAfter==null&&this.startAfter==null&&Jq(this.server)>=7&&(this.startAtOperationTime=i.operationTime),this._processBatch("firstBatch",i),this.emit("init",n),this.emit("response"),t(r,n)})}_getMore(t){super._getMore((r,n)=>{if(r){t(r);return}this._processBatch("nextBatch",n),this.emit("more",n),this.emit("response"),t(r,n)})}};s(rL,"ChangeStreamCursor");var Zq=rL;function BX(e,t){let r={fullDocument:t.fullDocument||"default"};DX(r,t,xX),e.type===cT.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r}].concat(e.pipeline),i=DX({},t,PX),o=new Zq(e.topology,new O3e(e.parent,n,t),i);if(w3e(o,e,["resumeTokenChanged","end","close"]),e.listenerCount("change")>0&&o.on("data",function(a){eL(e,a)}),o.on("error",function(a){FX(e,a)}),e.pipeDestinations){let a=o.stream(e.streamOptions);for(let u of e.pipeDestinations)a.pipe(u)}return o}s(BX,"createChangeStreamCursor");function DX(e,t,r){return r.forEach(n=>{t[n]&&(e[n]=t[n])}),e}s(DX,"applyKnownOptions");var T3e=3e4;function MX(e,t,r){setTimeout(()=>{t&&t.start==null&&(t.start=IX());let n=t.start||IX(),i=t.timeout||T3e,o=t.readPreference;if(e.isConnected({readPreference:o}))return r();if(b3e(n)>i)return r(new f_("Timed out waiting for connection"));MX(e,t,r)},500)}s(MX,"waitForTopologyConnected");function eL(e,t,r){let n=e.cursor;if(t==null&&(e.closed=!0),e.closed){r&&r(new f_("ChangeStream is closed"));return}if(t&&!t._id){let i=new Error("A change stream document has been received that lacks a resume token (_id).");return r?r(i):e.emit("error",i)}return n.cacheResumeToken(t._id),e.options.startAtOperationTime=void 0,r?r(void 0,t):e.emit("change",t)}s(eL,"processNewChange");function FX(e,t,r){let n=e.topology,i=e.cursor;if(e.closed){r&&r(new f_("ChangeStream is closed"));return}function o(u){e.cursor=u,NX(e)}s(o,"resumeWithCursor");function a(u){r||(e.emit("error",u),e.emit("close")),NX(e,u),e.closed=!0}if(s(a,"unresumableError"),i&&E3e(t,Jq(i.server))){e.cursor=void 0,["data","close","end","error"].forEach(u=>i.removeAllListeners(u)),i.close(),MX(n,{readPreference:i.options.readPreference},u=>{if(u)return a(u);let l=BX(e,i.resumeOptions);if(!r)return o(l);l.hasNext(f=>{if(f)return a(f);o(l)})});return}return r?r(t):e.emit("error",t)}s(FX,"processError");function RX(e,t){if(e.isClosed()){t(new f_("ChangeStream is closed."));return}if(e.cursor){t(void 0,e.cursor);return}e[d_].push(t)}s(RX,"getCursor");function NX(e,t){for(;e[d_].length;){let r=e[d_].pop();if(e.isClosed()&&!t){r(new f_("Change Stream is not open."));return}r(t,e.cursor)}}s(NX,"processResumeQueue");qX.exports=Qq});var Rc=w(lT=>{"use strict";var A3e=require("events"),ld=pe().MongoError,h_=require("util").format,nL=pe().ReadPreference,I3e=pe().Sessions.ClientSession,bh=s(function(e,t){var r=this,n=[];t=t||{force:!1,bufferMaxEntries:-1},this.s={storedOps:n,storeOptions:t,topology:e},Object.defineProperty(this,"length",{enumerable:!0,get:function(){return r.s.storedOps.length}})},"Store");bh.prototype.add=function(e,t,r,n,i){if(this.s.storeOptions.force)return i(ld.create({message:"db closed by application",driver:!0}));if(this.s.storeOptions.bufferMaxEntries===0)return i(ld.create({message:h_("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){for(;this.s.storedOps.length>0;){var o=this.s.storedOps.shift();o.c(ld.create({message:h_("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}return}this.s.storedOps.push({t:e,n:t,o:r,op:n,c:i})};bh.prototype.addObjectAndMethod=function(e,t,r,n,i){if(this.s.storeOptions.force)return i(ld.create({message:"db closed by application",driver:!0}));if(this.s.storeOptions.bufferMaxEntries===0)return i(ld.create({message:h_("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries){for(;this.s.storedOps.length>0;){var o=this.s.storedOps.shift();o.c(ld.create({message:h_("no connection available for operation and number of stored operation > %s",this.s.storeOptions.bufferMaxEntries),driver:!0}))}return}this.s.storedOps.push({t:e,m:r,o:t,p:n,c:i})};bh.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||ld.create({message:h_("no connection available for operation"),driver:!0}))};var LX=["primary","primaryPreferred","nearest","secondaryPreferred"],UX=["secondary","secondaryPreferred"];bh.prototype.execute=function(e){e=e||{};var t=this.s.storedOps;this.s.storedOps=[];for(var r=typeof e.executePrimary=="boolean"?e.executePrimary:!0,n=typeof e.executeSecondary=="boolean"?e.executeSecondary:!0;t.length>0;){var i=t.shift();i.t==="cursor"?(r&&n||r&&i.o.options&&i.o.options.readPreference&&LX.indexOf(i.o.options.readPreference.mode)!==-1||!r&&n&&i.o.options&&i.o.options.readPreference&&UX.indexOf(i.o.options.readPreference.mode)!==-1)&&i.o[i.m].apply(i.o,i.p):i.t==="auth"?this.s.topology[i.t].apply(this.s.topology,i.o):r&&n?this.s.topology[i.t](i.n,i.o,i.op,i.c):r&&i.op&&i.op.readPreference&&LX.indexOf(i.op.readPreference.mode)!==-1?this.s.topology[i.t](i.n,i.o,i.op,i.c):!r&&n&&i.op&&i.op.readPreference&&UX.indexOf(i.op.readPreference.mode)!==-1&&this.s.topology[i.t](i.n,i.o,i.op,i.c)}};bh.prototype.all=function(){return this.s.storedOps};var jX=s(function(e){var t=s(function(p,g,_){Object.defineProperty(p,g,{enumerable:!0,get:function(){return _}})},"setup_get_property"),r=!1,n=!1,i=!1,o=!1,a=!1,u=!1,l=e.maxWriteBatchSize||1e3,f=!1,h=!1;e.minWireVersion>=0&&(i=!0),e.maxWireVersion>=1&&(r=!0,o=!0),e.maxWireVersion>=2&&(n=!0),e.maxWireVersion>=3&&(a=!0,u=!0),e.maxWireVersion>=5&&(f=!0,h=!0),e.minWireVersion==null&&(e.minWireVersion=0),e.maxWireVersion==null&&(e.maxWireVersion=0),t(this,"hasAggregationCursor",r),t(this,"hasWriteCommands",n),t(this,"hasTextSearch",i),t(this,"hasAuthCommands",o),t(this,"hasListCollectionsCommand",a),t(this,"hasListIndexesCommand",u),t(this,"minWireVersion",e.minWireVersion),t(this,"maxWireVersion",e.maxWireVersion),t(this,"maxNumberOfDocsInBatch",l),t(this,"commandsTakeWriteConcern",f),t(this,"commandsTakeCollation",h)},"ServerCapabilities"),iL=class iL extends A3e{constructor(){super(),this.setMaxListeners(1/0)}hasSessionSupport(){return this.logicalSessionTimeoutMinutes!=null}startSession(t,r){let n=new I3e(this,this.s.sessionPool,t,r);return n.once("ended",()=>{this.s.sessions.delete(n)}),this.s.sessions.add(n),n}endSessions(t,r){return this.s.coreTopology.endSessions(t,r)}get clientMetadata(){return this.s.coreTopology.s.options.metadata}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:this.s.coreTopology.lastIsMaster()==null?null:(this.s.sCapabilities=new jX(this.s.coreTopology.lastIsMaster()),this.s.sCapabilities)}command(t,r,n,i){this.s.coreTopology.command(t.toString(),r,nL.translate(n),i)}insert(t,r,n,i){this.s.coreTopology.insert(t.toString(),r,n,i)}update(t,r,n,i){this.s.coreTopology.update(t.toString(),r,n,i)}remove(t,r,n,i){this.s.coreTopology.remove(t.toString(),r,n,i)}isConnected(t){return t=t||{},t=nL.translate(t),this.s.coreTopology.isConnected(t)}isDestroyed(){return this.s.coreTopology.isDestroyed()}cursor(t,r,n){return n=n||{},n=nL.translate(n),n.disconnectHandler=this.s.store,n.topology=this,this.s.coreTopology.cursor(t,r,n)}lastIsMaster(){return this.s.coreTopology.lastIsMaster()}selectServer(t,r,n){return this.s.coreTopology.selectServer(t,r,n)}unref(){return this.s.coreTopology.unref()}connections(){return this.s.coreTopology.connections()}close(t,r){this.s.sessions.forEach(n=>n.endSession()),this.s.sessionPool&&this.s.sessionPool.endAllPooledSessions(),t===!0&&(this.s.storeOptions.force=t,this.s.store.flush()),this.s.coreTopology.destroy({force:typeof t=="boolean"?t:!1},r)}};s(iL,"TopologyBase");var dd=iL;Object.defineProperty(dd.prototype,"bson",{enumerable:!0,get:function(){return this.s.coreTopology.s.bson}});Object.defineProperty(dd.prototype,"parserType",{enumerable:!0,get:function(){return this.s.coreTopology.parserType}});Object.defineProperty(dd.prototype,"logicalSessionTimeoutMinutes",{enumerable:!0,get:function(){return this.s.coreTopology.logicalSessionTimeoutMinutes}});Object.defineProperty(dd.prototype,"type",{enumerable:!0,get:function(){return this.s.coreTopology.type}});lT.Store=bh;lT.ServerCapabilities=jX;lT.TopologyBase=dd});var aL=w((jOt,kX)=>{"use strict";var D3e=pe().Topology,R3e=Rc().ServerCapabilities,N3e=Jo(),$X=$().translateOptions,oL=class oL extends D3e{constructor(t,r){r=r||{};let n=Object.assign({},{cursorFactory:N3e,reconnect:!1,emitError:typeof r.emitError=="boolean"?r.emitError:!0,maxPoolSize:typeof r.maxPoolSize=="number"?r.maxPoolSize:typeof r.poolSize=="number"?r.poolSize:10,minPoolSize:typeof r.minPoolSize=="number"?r.minPoolSize:typeof r.minSize=="number"?r.minSize:0,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});n=$X(n,r);var i=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;n=$X(n,i),n.serverApi=r.serverApi,n.useUnifiedTopology=r.useUnifiedTopology,super(t,n)}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:this.lastIsMaster()==null?null:(this.s.sCapabilities=new R3e(this.lastIsMaster()),this.s.sCapabilities)}command(t,r,n,i){super.command(t.toString(),r,n,i)}insert(t,r,n,i){super.insert(t.toString(),r,n,i)}update(t,r,n,i){super.update(t.toString(),r,n,i)}remove(t,r,n,i){super.remove(t.toString(),r,n,i)}};s(oL,"NativeTopology");var sL=oL;kX.exports=sL});var p_=w((kOt,WX)=>{"use strict";var x3e=pe().Server,P3e=Jo(),B3e=Rc().TopologyBase,M3e=Rc().Store,F3e=pe().MongoError,q3e=$().MAX_JS_INT,GX=$().translateOptions,L3e=$().filterOptions,U3e=$().mergeOptions,j3e=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCRL","sslCert","ciphers","ecdhCurve","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","family","loggerLevel","logger","reconnectTries","reconnectInterval","monitoring","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","compression","promiseLibrary","monitorCommands"],uL=class uL extends B3e{constructor(t,r,n){super();var i=this;n=L3e(n,j3e);let o=n.promiseLibrary;var a={force:!1,bufferMaxEntries:typeof n.bufferMaxEntries=="number"?n.bufferMaxEntries:q3e},u=n.store||new M3e(i,a);if(t.indexOf("/")!==-1)r!=null&&typeof r=="object"&&(n=r,r=null);else if(r==null)throw F3e.create({message:"port must be specified",driver:!0});var l=typeof n.auto_reconnect=="boolean"?n.auto_reconnect:!0;l=typeof n.autoReconnect=="boolean"?n.autoReconnect:l;var f=U3e({},{host:t,port:r,disconnectHandler:u,cursorFactory:P3e,reconnect:l,emitError:typeof n.emitError=="boolean"?n.emitError:!0,size:typeof n.poolSize=="number"?n.poolSize:5,monitorCommands:typeof n.monitorCommands=="boolean"?n.monitorCommands:!1});f=GX(f,n);var h=n.socketOptions&&Object.keys(n.socketOptions).length>0?n.socketOptions:n;f=GX(f,h),this.s={coreTopology:new x3e(f),sCapabilities:null,clonedOptions:f,reconnect:f.reconnect,emitError:f.emitError,poolSize:f.size,storeOptions:a,store:u,host:t,port:r,options:n,sessionPool:null,sessions:new Set,promiseLibrary:o||Promise}}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t=this.s.clonedOptions),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=s(function(){return function(g){var _=["timeout","error","close"];_.forEach(function(C){n.s.coreTopology.removeListener(C,p[C])}),n.s.coreTopology.removeListener("connect",i);try{r(g)}catch(C){process.nextTick(function(){throw C})}}},"connectErrorHandler"),o=s(function(g){return function(_){g!=="error"&&n.emit(g,_)}},"errorHandler"),a=s(function(){n.emit("reconnect",n),n.s.store.execute()},"reconnectHandler"),u=s(function(g){n.emit("reconnectFailed",g),n.s.store.flush(g)},"reconnectFailedHandler"),l=s(function(){n.s.store.flush()},"destroyHandler"),f=s(function(g){return function(_,C){n.emit(g,_,C)}},"relay"),h=s(function(){["timeout","error","close","destroy"].forEach(function(g){n.s.coreTopology.removeAllListeners(g)}),n.s.coreTopology.on("timeout",o("timeout")),n.s.coreTopology.once("error",o("error")),n.s.coreTopology.on("close",o("close")),n.s.coreTopology.on("destroy",l),n.emit("open",null,n);try{r(null,n)}catch(g){process.nextTick(function(){throw g})}},"connectHandler"),p={timeout:i("timeout"),error:i("error"),close:i("close")};["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed"].forEach(function(g){n.s.coreTopology.removeAllListeners(g)}),n.s.coreTopology.once("timeout",p.timeout),n.s.coreTopology.once("error",p.error),n.s.coreTopology.once("close",p.close),n.s.coreTopology.once("connect",h),n.s.coreTopology.on("reconnect",a),n.s.coreTopology.on("reconnectFailed",u),n.s.coreTopology.on("serverDescriptionChanged",f("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",f("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",f("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",f("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",f("serverOpening")),n.s.coreTopology.on("serverClosed",f("serverClosed")),n.s.coreTopology.on("topologyOpening",f("topologyOpening")),n.s.coreTopology.on("topologyClosed",f("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",f("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",f("commandStarted")),n.s.coreTopology.on("commandSucceeded",f("commandSucceeded")),n.s.coreTopology.on("commandFailed",f("commandFailed")),n.s.coreTopology.on("attemptReconnect",f("attemptReconnect")),n.s.coreTopology.on("monitoring",f("monitoring")),n.s.coreTopology.connect(t)}};s(uL,"Server");var fd=uL;Object.defineProperty(fd.prototype,"poolSize",{enumerable:!0,get:function(){return this.s.coreTopology.connections().length}});Object.defineProperty(fd.prototype,"autoReconnect",{enumerable:!0,get:function(){return this.s.reconnect}});Object.defineProperty(fd.prototype,"host",{enumerable:!0,get:function(){return this.s.host}});Object.defineProperty(fd.prototype,"port",{enumerable:!0,get:function(){return this.s.port}});WX.exports=fd});var lL=w((WOt,HX)=>{"use strict";var $3e=Rc().TopologyBase,k3e=pe().MongoError,G3e=pe().Mongos,W3e=Jo(),z3e=p_(),H3e=Rc().Store,V3e=$().MAX_JS_INT,zX=$().translateOptions,Y3e=$().filterOptions,K3e=$().mergeOptions,X3e=["ha","haInterval","acceptableLatencyMS","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCRL","sslCert","ciphers","ecdhCurve","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","promiseLibrary","monitorCommands"],cL=class cL extends $3e{constructor(t,r){super(),r=r||{};var n=this;r=Y3e(r,X3e);for(var i=0;i<t.length;i++)if(!(t[i]instanceof z3e))throw k3e.create({message:"all seed list instances must be of the Server type",driver:!0});var o={force:!1,bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:V3e},a=r.store||new H3e(n,o),u=t.map(function(p){return{host:p.host,port:p.port}}),l=typeof r.auto_reconnect=="boolean"?r.auto_reconnect:!0;l=typeof r.autoReconnect=="boolean"?r.autoReconnect:l;var f=K3e({},{disconnectHandler:a,cursorFactory:W3e,reconnect:l,emitError:typeof r.emitError=="boolean"?r.emitError:!0,size:typeof r.poolSize=="number"?r.poolSize:5,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});f=zX(f,r);var h=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;f=zX(f,h),this.s={coreTopology:new G3e(u,f),sCapabilities:null,debug:f.debug,storeOptions:o,clonedOptions:f,store:a,options:r,sessionPool:null,sessions:new Set,promiseLibrary:r.promiseLibrary||Promise}}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t={}),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=s(function(){return function(h){var p=["timeout","error","close"];p.forEach(function(g){n.removeListener(g,i)}),n.s.coreTopology.removeListener("connect",i),n.close(!0);try{r(h)}catch(g){process.nextTick(function(){throw g})}}},"connectErrorHandler"),o=s(function(h){return function(p){h!=="error"&&n.emit(h,p)}},"errorHandler"),a=s(function(){n.emit("reconnect"),n.s.store.execute()},"reconnectHandler"),u=s(function(h){return function(p,g){n.emit(h,p,g)}},"relay"),l=s(function(){var h=["timeout","error","close","fullsetup"];h.forEach(function(p){n.s.coreTopology.removeAllListeners(p)}),n.s.coreTopology.on("timeout",o("timeout")),n.s.coreTopology.on("error",o("error")),n.s.coreTopology.on("close",o("close")),n.s.coreTopology.on("fullsetup",function(){n.emit("fullsetup",n)}),n.emit("open",null,n);try{r(null,n)}catch(p){process.nextTick(function(){throw p})}},"connectHandler"),f=["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed"];f.forEach(function(h){n.s.coreTopology.removeAllListeners(h)}),n.s.coreTopology.on("serverDescriptionChanged",u("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",u("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",u("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",u("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",u("serverOpening")),n.s.coreTopology.on("serverClosed",u("serverClosed")),n.s.coreTopology.on("topologyOpening",u("topologyOpening")),n.s.coreTopology.on("topologyClosed",u("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",u("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",u("commandStarted")),n.s.coreTopology.on("commandSucceeded",u("commandSucceeded")),n.s.coreTopology.on("commandFailed",u("commandFailed")),n.s.coreTopology.once("timeout",i("timeout")),n.s.coreTopology.once("error",i("error")),n.s.coreTopology.once("close",i("close")),n.s.coreTopology.once("connect",l),n.s.coreTopology.on("joined",u("joined")),n.s.coreTopology.on("left",u("left")),n.s.coreTopology.on("reconnect",a),n.s.coreTopology.connect(t)}};s(cL,"Mongos");var dT=cL;Object.defineProperty(dT.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});HX.exports=dT});var fL=w((HOt,YX)=>{"use strict";var J3e=p_(),Q3e=Jo(),Z3e=pe().MongoError,eGe=Rc().TopologyBase,tGe=Rc().Store,rGe=pe().ReplSet,nGe=$().MAX_JS_INT,VX=$().translateOptions,iGe=$().filterOptions,sGe=$().mergeOptions,oGe=["ha","haInterval","replicaSet","rs_name","secondaryAcceptableLatencyMS","connectWithNoPrimary","poolSize","ssl","checkServerIdentity","sslValidate","sslCA","sslCert","ciphers","ecdhCurve","sslCRL","sslKey","sslPass","socketOptions","bufferMaxEntries","store","auto_reconnect","autoReconnect","emitError","keepAlive","keepAliveInitialDelay","noDelay","connectTimeoutMS","socketTimeoutMS","strategy","debug","family","loggerLevel","logger","reconnectTries","appname","domainsEnabled","servername","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","maxStalenessSeconds","promiseLibrary","minSize","monitorCommands"],dL=class dL extends eGe{constructor(t,r){super(),r=r||{};var n=this;r=iGe(r,oGe);for(var i=0;i<t.length;i++)if(!(t[i]instanceof J3e))throw Z3e.create({message:"all seed list instances must be of the Server type",driver:!0});var o={force:!1,bufferMaxEntries:typeof r.bufferMaxEntries=="number"?r.bufferMaxEntries:nGe},a=r.store||new tGe(n,o),u=t.map(function(p){return{host:p.host,port:p.port}}),l=sGe({},{disconnectHandler:a,cursorFactory:Q3e,reconnect:!1,emitError:typeof r.emitError=="boolean"?r.emitError:!0,size:typeof r.poolSize=="number"?r.poolSize:5,monitorCommands:typeof r.monitorCommands=="boolean"?r.monitorCommands:!1});l=VX(l,r);var f=r.socketOptions&&Object.keys(r.socketOptions).length>0?r.socketOptions:r;l=VX(l,f);var h=new rGe(u,l);h.on("reconnect",function(){n.emit("reconnect"),a.execute()}),this.s={coreTopology:h,sCapabilities:null,tag:r.tag,storeOptions:o,clonedOptions:l,store:a,options:r,sessionPool:null,sessions:new Set,promiseLibrary:r.promiseLibrary||Promise},l.debug&&Object.defineProperty(this,"replset",{enumerable:!0,get:function(){return h}})}connect(t,r){var n=this;typeof t=="function"&&(r=t,t={}),t==null&&(t={}),typeof r!="function"&&(r=null),t=Object.assign({},this.s.clonedOptions,t),n.s.options=t,n.s.storeOptions.bufferMaxEntries=typeof t.bufferMaxEntries=="number"?t.bufferMaxEntries:-1;var i=s(function(p){return function(g){p!=="error"&&n.emit(p,g)}},"errorHandler"),o=["timeout","error","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed","joined","left","ping","ha"];o.forEach(function(p){n.s.coreTopology.removeAllListeners(p)});var a=s(function(p){return function(g,_){n.emit(p,g,_)}},"relay"),u=s(function(p){return function(g,_){n.emit(p,g,_.lastIsMaster(),_)}},"replsetRelay"),l=s(function(p,g){n.emit("ha",p,g),p==="start"?n.emit("ha_connect",p,g):p==="end"&&n.emit("ha_ismaster",p,g)},"relayHa");n.s.coreTopology.on("joined",u("joined")),n.s.coreTopology.on("left",a("left")),n.s.coreTopology.on("ping",a("ping")),n.s.coreTopology.on("ha",l),n.s.coreTopology.on("serverDescriptionChanged",a("serverDescriptionChanged")),n.s.coreTopology.on("serverHeartbeatStarted",a("serverHeartbeatStarted")),n.s.coreTopology.on("serverHeartbeatSucceeded",a("serverHeartbeatSucceeded")),n.s.coreTopology.on("serverHeartbeatFailed",a("serverHeartbeatFailed")),n.s.coreTopology.on("serverOpening",a("serverOpening")),n.s.coreTopology.on("serverClosed",a("serverClosed")),n.s.coreTopology.on("topologyOpening",a("topologyOpening")),n.s.coreTopology.on("topologyClosed",a("topologyClosed")),n.s.coreTopology.on("topologyDescriptionChanged",a("topologyDescriptionChanged")),n.s.coreTopology.on("commandStarted",a("commandStarted")),n.s.coreTopology.on("commandSucceeded",a("commandSucceeded")),n.s.coreTopology.on("commandFailed",a("commandFailed")),n.s.coreTopology.on("fullsetup",function(){n.emit("fullsetup",n,n)}),n.s.coreTopology.on("all",function(){n.emit("all",null,n)});var f=s(function(){n.s.coreTopology.once("timeout",i("timeout")),n.s.coreTopology.once("error",i("error")),n.s.coreTopology.once("close",i("close")),n.emit("open",null,n);try{r(null,n)}catch(p){process.nextTick(function(){throw p})}},"connectHandler"),h=s(function(){return function(p){["timeout","error","close"].forEach(function(g){n.s.coreTopology.removeListener(g,h)}),n.s.coreTopology.removeListener("connect",h),n.s.coreTopology.destroy();try{r(p)}catch(g){n.s.coreTopology.isConnected()||process.nextTick(function(){throw g})}}},"connectErrorHandler");n.s.coreTopology.once("timeout",h("timeout")),n.s.coreTopology.once("error",h("error")),n.s.coreTopology.once("close",h("close")),n.s.coreTopology.once("connect",f),n.s.coreTopology.connect(t)}close(t,r){["timeout","error","close","joined","left"].forEach(n=>this.removeAllListeners(n)),super.close(t,r)}};s(dL,"ReplSet");var fT=dL;Object.defineProperty(fT.prototype,"haInterval",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});YX.exports=fT});var QX=w((YOt,JX)=>{"use strict";var aGe=pe().ReadPreference,hL=require("url"),uGe=require("util").format,cGe=pe().Logger,KX=require("dns"),lGe=Wl(),dGe=require("querystring"),hT=ye().MongoParseError;JX.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};let n;try{n=hL.parse(e,!0)}catch{return r(new Error("URL malformed, cannot be parsed"))}if(n.protocol!=="mongodb:"&&n.protocol!=="mongodb+srv:")return r(new Error("Invalid schema, expected `mongodb` or `mongodb+srv`"));if(n.protocol==="mongodb:")return XX(e,t,r);if(n.hostname.split(".").length<3)return r(new Error("URI does not have hostname, domain name and tld"));if(n.domainLength=n.hostname.split(".").length,e.substring(14).split("/")[0].match(","))return r(new Error("Invalid URI, cannot contain multiple hostnames"));if(n.port)return r(new Error("Ports not accepted with `mongodb+srv` URIs"));let o=`_mongodb._tcp.${n.host}`;KX.resolveSrv(o,function(a,u){if(a)return r(a);if(u.length===0)return r(new Error("No addresses found at host"));for(let g=0;g<u.length;g++)if(!fGe(u[g].name,n.hostname,n.domainLength))return r(new Error("Server record does not share hostname with parent URI"));let l=n.auth?`mongodb://${n.auth}@`:"mongodb://",h=u.map(function(g,_){return _===0?`${l}${g.name}:${g.port}`:`${g.name}:${g.port}`}).join(",")+"/",p=[];if(n.path){let g=n.path.slice(1);g.indexOf("?")!==-1&&(g=g.slice(0,g.indexOf("?"))),h+=g}(!t.ssl&&!n.search||!t.ssl&&n.search&&!n.search.match("ssl"))&&p.push("ssl=true"),n.search&&p.push(n.search.replace("?","")),KX.resolveTxt(n.host,function(g,_){if(g&&g.code!=="ENODATA"&&g.code!=="ENOTFOUND")return r(g);if(g&&g.code==="ENODATA"&&(_=null),_){if(_.length>1)return r(new hT("Multiple text records not allowed"));_=_[0].join("");let C=dGe.parse(_),D=Object.keys(C);if(Object.keys(D).some(O=>O.toLowerCase()==="loadbalanced"))return r(new hT("Load balancer mode requires driver version 4+"));if(D.some(O=>O!=="authSource"&&O!=="replicaSet"))return r(new hT("Text record must only set `authSource` or `replicaSet`"));D.length>0&&p.push(_)}p.length&&(h+=`?${p.join("&")}`),XX(h,t,r)})})};function fGe(e,t){let r=/^.*?\./,n=`.${e.replace(r,"")}`,i=`.${t.replace(r,"")}`;return!!n.endsWith(i)}s(fGe,"matchesParentDomain");function XX(e,t,r){let n,i;try{n=hGe(e,t)}catch(o){i=o}return i?r(i,null):r(null,n)}s(XX,"parseHandler");function hGe(e,t){let r="",n="",i="",o="admin",a=hL.parse(e,!0);if((a.hostname==null||a.hostname==="")&&e.indexOf(".sock")===-1)throw new Error("No hostname or hostnames provided in connection string");if(a.port==="0")throw new Error("Invalid port (zero) with hostname");if(!isNaN(parseInt(a.port,10))&&parseInt(a.port,10)>65535)throw new Error("Invalid port (larger than 65535) with hostname");if(a.path&&a.path.length>0&&a.path[0]!=="/"&&e.indexOf(".sock")===-1)throw new Error("Missing delimiting slash between hosts and options");if(a.query)for(let G in a.query){if(G.indexOf("::")!==-1)throw new Error("Double colon in host identifier");if(a.query[G]==="")throw new Error("Query parameter "+G+" is an incomplete value pair")}if(a.auth){let G=a.auth.split(":");if(e.indexOf(a.auth)!==-1&&G.length>2)throw new Error("Username with password containing an unescaped colon");if(e.indexOf(a.auth)!==-1&&a.auth.indexOf("@")!==-1)throw new Error("Username containing an unescaped at-sign")}let l=e.split("?").shift().split(","),f=[];for(let G=0;G<l.length;G++){let ue=l[G];ue.indexOf("mongodb")!==-1?ue.indexOf("@")!==-1?f.push(ue.split("@").pop()):f.push(ue.substr(10)):ue.indexOf("/")!==-1?f.push(ue.split("/").shift()):ue.indexOf("/")===-1&&f.push(ue.trim())}for(let G=0;G<f.length;G++){let ue=hL.parse(uGe("mongodb://%s",f[G].trim()));if(!(ue.path&&ue.path.indexOf(".sock")!==-1)&&ue.path&&ue.path.indexOf(":")!==-1)throw ue.path.split("/").length>1&&ue.path.indexOf("::")===-1?new Error("Slash in host identifier"):new Error("Double colon in host identifier")}if(e.indexOf("?")!==-1?(i=e.substr(e.indexOf("?")+1),r=e.substring(10,e.indexOf("?"))):r=e.substring(10),r.indexOf("@")!==-1&&(n=r.split("@")[0],r=r.split("@")[1]),r.split("/").length>2)throw new Error("Unsupported host '"+r.split("?")[0]+"', hosts must be URL encoded and contain at most one unencoded slash");if(r.indexOf(".sock")!==-1){if(r.indexOf(".sock/")!==-1){if(o=r.split(".sock/")[1],o.indexOf("/")!==-1)throw o.split("/").length===2&&o.split("/")[1].length===0?new Error("Illegal trailing backslash after database name"):new Error("More than 1 database name in URL");r=r.split("/",r.indexOf(".sock")+5)}}else if(r.indexOf("/")!==-1){if(r.split("/").length>2)throw r.split("/")[2].length===0?new Error("Illegal trailing backslash after database name"):new Error("More than 1 database name in URL");o=r.split("/")[1],r=r.split("/")[0]}r=decodeURIComponent(r);let h={},p=n||"",g=p.split(":",2),_=decodeURIComponent(g[0]);if(g[0]!==encodeURIComponent(_))throw new Error("Username contains an illegal unescaped character");if(g[0]=_,g[1]){let G=decodeURIComponent(g[1]);if(g[1]!==encodeURIComponent(G))throw new Error("Password contains an illegal unescaped character");g[1]=G}g.length===2&&(h.auth={user:g[0],password:g[1]}),t&&t.auth!=null&&(h.auth=t.auth);let C,D,O,N,F={socketOptions:{}},x={read_preference_tags:[]},P={socketOptions:{}},X={socketOptions:{}};if(h.server_options=F,h.db_options=x,h.rs_options=P,h.mongos_options=X,e.match(/\.sock/)){let G=e.substring(e.indexOf("mongodb://")+10,e.lastIndexOf(".sock")+5);G.indexOf("@")!==-1&&(G=G.split("@")[1]),G=decodeURIComponent(G),O=[{domain_socket:G}]}else{C=r;let G={};O=C.split(",").map(function(ue){let be,Q,Se;if(Se=/\[([^\]]+)\](?::(.+))?/.exec(ue))be=Se[1],Q=parseInt(Se[2],10)||27017;else{let Ce=ue.split(":",2);be=Ce[0]||"localhost",Q=Ce[1]!=null?parseInt(Ce[1],10):27017,be.indexOf("?")!==-1&&(be=be.split(/\?/)[0])}return G[be+"_"+Q]?null:(G[be+"_"+Q]=1,{host:be,port:Q})}).filter(function(ue){return ue!=null})}if(h.dbName=o||"admin",D=(i||"").split(/[&;]/),D.some(G=>G.toLowerCase()==="loadbalanced"))throw new hT("Load balancer mode requires driver version 4+");if(D.forEach(function(G){if(G){var ue=G.split("="),be=ue[0],Q=ue[1];switch(be){case"slaveOk":case"slave_ok":F.slave_ok=Q==="true",x.slaveOk=Q==="true";break;case"maxPoolSize":case"poolSize":F.poolSize=parseInt(Q,10),P.poolSize=parseInt(Q,10);break;case"appname":h.appname=decodeURIComponent(Q);break;case"autoReconnect":case"auto_reconnect":F.auto_reconnect=Q==="true";break;case"ssl":if(Q==="prefer"){F.ssl=Q,P.ssl=Q,X.ssl=Q;break}F.ssl=Q==="true",P.ssl=Q==="true",X.ssl=Q==="true";break;case"sslValidate":F.sslValidate=Q==="true",P.sslValidate=Q==="true",X.sslValidate=Q==="true";break;case"replicaSet":case"rs_name":P.rs_name=Q;break;case"reconnectWait":P.reconnectWait=parseInt(Q,10);break;case"retries":P.retries=parseInt(Q,10);break;case"readSecondary":case"read_secondary":P.read_secondary=Q==="true";break;case"fsync":x.fsync=Q==="true";break;case"journal":x.j=Q==="true";break;case"safe":x.safe=Q==="true";break;case"nativeParser":case"native_parser":x.native_parser=Q==="true";break;case"readConcernLevel":x.readConcern=new lGe(Q);break;case"connectTimeoutMS":F.socketOptions.connectTimeoutMS=parseInt(Q,10),P.socketOptions.connectTimeoutMS=parseInt(Q,10),X.socketOptions.connectTimeoutMS=parseInt(Q,10);break;case"socketTimeoutMS":F.socketOptions.socketTimeoutMS=parseInt(Q,10),P.socketOptions.socketTimeoutMS=parseInt(Q,10),X.socketOptions.socketTimeoutMS=parseInt(Q,10);break;case"w":x.w=parseInt(Q,10),isNaN(x.w)&&(x.w=Q);break;case"authSource":x.authSource=Q;break;case"gssapiServiceName":x.gssapiServiceName=Q;break;case"authMechanism":if(Q==="GSSAPI")if(h.auth==null){let Se=decodeURIComponent(p);if(Se.indexOf("@")===-1)throw new Error("GSSAPI requires a provided principal");h.auth={user:Se,password:null}}else h.auth.user=decodeURIComponent(h.auth.user);else Q==="MONGODB-X509"&&(h.auth={user:decodeURIComponent(p)});if(Q!=="GSSAPI"&&Q!=="MONGODB-X509"&&Q!=="MONGODB-CR"&&Q!=="DEFAULT"&&Q!=="SCRAM-SHA-1"&&Q!=="SCRAM-SHA-256"&&Q!=="PLAIN")throw new Error("Only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, or SCRAM-SHA-1 is supported by authMechanism");x.authMechanism=Q;break;case"authMechanismProperties":{let Se=Q.split(","),Ce={};Se.forEach(function(le){let ce=le.split(":");Ce[ce[0]]=ce[1]}),x.authMechanismProperties=Ce,typeof Ce.SERVICE_NAME=="string"&&(x.gssapiServiceName=Ce.SERVICE_NAME),typeof Ce.SERVICE_REALM=="string"&&(x.gssapiServiceRealm=Ce.SERVICE_REALM),typeof Ce.CANONICALIZE_HOST_NAME=="string"&&(x.gssapiCanonicalizeHostName=Ce.CANONICALIZE_HOST_NAME==="true")}break;case"wtimeoutMS":x.wtimeout=parseInt(Q,10);break;case"readPreference":if(!aGe.isValid(Q))throw new Error("readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest");x.readPreference=Q;break;case"maxStalenessSeconds":x.maxStalenessSeconds=parseInt(Q,10);break;case"readPreferenceTags":{Q=decodeURIComponent(Q);let Se={};if(Q==null||Q===""){x.read_preference_tags.push(Se);break}let Ce=Q.split(/,/);for(let le=0;le<Ce.length;le++){let ce=Ce[le].trim().split(/:/);Se[ce[0]]=ce[1]}x.read_preference_tags.push(Se)}break;case"compressors":{N=F.compression||{};let Se=Q.split(",");if(!Se.every(function(Ce){return Ce==="snappy"||Ce==="zlib"}))throw new Error("Compressors must be at least one of snappy or zlib");N.compressors=Se,F.compression=N}break;case"zlibCompressionLevel":{N=F.compression||{};let Se=parseInt(Q,10);if(Se<-1||Se>9)throw new Error("zlibCompressionLevel must be an integer between -1 and 9");N.zlibCompressionLevel=Se,F.compression=N}break;case"retryWrites":x.retryWrites=Q==="true";break;case"minSize":x.minSize=parseInt(Q,10);break;default:cGe("URL Parser").warn(`${be} is not supported as a connection string option`);break}}}),x.read_preference_tags.length===0&&(x.read_preference_tags=null),(x.w===-1||x.w===0)&&(x.journal===!0||x.fsync===!0||x.safe===!0))throw new Error("w set to -1 or 0 cannot be combined with safe/w/journal/fsync");return x.readPreference||(x.readPreference="primary"),x=Object.assign(x,t),h.servers=O,h}s(hGe,"parseConnectionString")});var mL=w((XOt,e7)=>{"use strict";var pGe=wh(),Ri=Sn().retrieveBSON(),ZX=ye().MongoError,pT;try{pT=require("mongodb-client-encryption")}catch{throw new ZX("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project")}if(pT===void 0||typeof pT.extension!="function")throw new ZX("loaded version of `mongodb-client-encryption` does not have property `extension`. Please make sure you are loading the correct version of `mongodb-client-encryption`");var mGe=pT.extension(gL()).AutoEncrypter,tu=Symbol("internalClient"),mT=class mT{constructor(t,r){this.bypassAutoEncryption=!!r.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,r.maxPoolSize===0&&r.autoEncryption.keyVaultClient==null?r.autoEncryption.keyVaultClient=t:r.autoEncryption.keyVaultClient==null&&(r.autoEncryption.keyVaultClient=this.getInternalClient(t)),this.bypassAutoEncryption?r.autoEncryption.metadataClient=void 0:r.maxPoolSize===0?r.autoEncryption.metadataClient=t:r.autoEncryption.metadataClient=this.getInternalClient(t),r.autoEncryption.bson=mT.makeBSON(r),this.autoEncrypter=new mGe(t,r.autoEncryption)}getInternalClient(t){if(!this[tu]){let r={};for(let i of Object.keys(t.s.options))["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].indexOf(i)===-1&&(r[i]=t.s.options[i]);r.minPoolSize=0;let n=["commandStarted","commandSucceeded","commandFailed","serverOpening","serverClosed","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha","connectionPoolCreated","connectionPoolClosed","connectionCreated","connectionReady","connectionClosed","connectionCheckOutStarted","connectionCheckOutFailed","connectionCheckedOut","connectionCheckedIn","connectionPoolCleared"];this[tu]=new pGe(t.s.url,r);for(let i of n)for(let o of t.listeners(i))this[tu].on(i,o);t.on("newListener",(i,o)=>{this[tu].on(i,o)}),this.needsConnecting=!0}return this[tu]}connectInternalClient(t){return this.needsConnecting?(this.needsConnecting=!1,this[tu].connect(t)):t()}close(t,r,n){this.autoEncrypter.teardown(i=>{if(this[tu]&&t!==this[tu])return this[tu].close(r,n);n(i)})}static makeBSON(t){return(t||{}).bson||new Ri([Ri.Binary,Ri.Code,Ri.DBRef,Ri.Decimal128,Ri.Double,Ri.Int32,Ri.Long,Ri.Map,Ri.MaxKey,Ri.MinKey,Ri.ObjectId,Ri.BSONRegExp,Ri.Symbol,Ri.Timestamp])}};s(mT,"Encrypter");var pL=mT;e7.exports={Encrypter:pL}});var TL=w((QOt,l7)=>{"use strict";var gGe=require("util").deprecate,yGe=pe().Logger,vGe=pe().MongoCredentials,EL=pe().MongoError,r7=lL(),n7=aL(),_Ge=pe().parseConnectionString,SGe=Wl(),CL=pe().ReadPreference,i7=fL(),vL=p_(),EGe=pe().Sessions.ServerSessionPool,CGe=$().emitDeprecationWarning,_L=$().emitWarningOnce,wGe=require("fs"),s7=Fa(),bGe=kv().CMAP_EVENT_NAMES,yL;function OGe(){return yL||(yL=wh()),yL}s(OGe,"loadClient");var TGe=gGe(QX(),"current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect."),AGe={DEFAULT:"default",PLAIN:"plain",GSSAPI:"gssapi","MONGODB-CR":"mongocr","MONGODB-X509":"x509","MONGODB-AWS":"mongodb-aws","SCRAM-SHA-1":"scram-sha-1","SCRAM-SHA-256":"scram-sha-256"},o7=["timeout","close","serverOpening","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","serverClosed","topologyOpening","topologyClosed","topologyDescriptionChanged","commandStarted","commandSucceeded","commandFailed","joined","left","ping","ha","all","fullsetup","open"],IGe=new Set(["DEFAULT","PLAIN","GSSAPI","MONGODB-CR","MONGODB-X509","MONGODB-AWS","SCRAM-SHA-1","SCRAM-SHA-256"]),SL=["poolSize","ssl","sslValidate","sslCA","sslCert","sslKey","sslPass","sslCRL","autoReconnect","noDelay","keepAlive","keepAliveInitialDelay","connectTimeoutMS","family","socketTimeoutMS","reconnectTries","reconnectInterval","ha","haInterval","replicaSet","secondaryAcceptableLatencyMS","acceptableLatencyMS","connectWithNoPrimary","authSource","w","wtimeout","j","writeConcern","forceServerObjectId","serializeFunctions","ignoreUndefined","raw","bufferMaxEntries","readPreference","pkFactory","promiseLibrary","readConcern","maxStalenessSeconds","loggerLevel","logger","promoteValues","promoteBuffers","promoteLongs","bsonRegExp","domainsEnabled","checkServerIdentity","validateOptions","appname","auth","user","password","authMechanism","compression","fsync","readPreferenceTags","numberOfRetries","auto_reconnect","minSize","monitorCommands","serverApi","retryWrites","retryReads","useNewUrlParser","useUnifiedTopology","serverSelectionTimeoutMS","useRecoveryToken","autoEncryption","driverInfo","tls","tlsInsecure","tlsinsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsCAFile","tlsCertificateFile","tlsCertificateKeyFile","tlsCertificateKeyFilePassword","minHeartbeatFrequencyMS","heartbeatFrequencyMS","directConnection","appName","maxPoolSize","minPoolSize","maxIdleTimeMS","waitQueueTimeoutMS"],DGe=["native_parser"],t7=["server","replset","replSet","mongos","db"];function RGe(e){let t=SL.concat(t7);for(let r in e)if(DGe.indexOf(r)===-1){if(t.indexOf(r)===-1){if(e.validateOptions)return new EL(`option ${r} is not supported`);_L(`the options [${r}] is not supported`)}t7.indexOf(r)!==-1&&_L(`the server/replset/mongos/db options are deprecated, all their options are supported at the top level of the options object [${SL}]`)}}s(RGe,"validOptions");var NGe=SL.reduce((e,t)=>(e[t.toLowerCase()]=t,e),{});function wL(e,t){t.on("authenticated",ru(e,"authenticated")),t.on("error",ru(e,"error")),t.on("timeout",ru(e,"timeout")),t.on("close",ru(e,"close")),t.on("parseError",ru(e,"parseError")),t.once("open",ru(e,"open")),t.once("fullsetup",ru(e,"fullsetup")),t.once("all",ru(e,"all")),t.on("reconnect",ru(e,"reconnect"))}s(wL,"addListeners");function bL(e,t){e.topology=t,t instanceof n7||(t.s.sessionPool=new EGe(t.s.coreTopology))}s(bL,"assignTopology");function xGe(e){o7.forEach(t=>e.removeAllListeners(t))}s(xGe,"clearAllEvents");function PGe(e,t){let r=OGe(),n=[];return e instanceof r&&o7.forEach(i=>{t.on(i,(o,a)=>{i==="open"?n.push({event:i,object1:e}):n.push({event:i,object1:o,object2:a})})}),n}s(PGe,"collectEvents");function BGe(e){e.tls!=null&&["sslCA","sslKey","sslCert"].forEach(t=>{e[t]&&(e[t]=wGe.readFileSync(e[t]))})}s(BGe,"resolveTLSOptions");function MGe(e,t,r,n){if(r=Object.assign({},r),n==null)throw new Error("no callback function provided");let i=!1,o=yGe("MongoClient",r);if(t instanceof vL||t instanceof i7||t instanceof r7)return FGe(e,t,r,f);let a=r.useNewUrlParser!==!1,u=a?_Ge:TGe,l=a?kGe:jGe;u(t,r,(h,p)=>{if(h)return n(h);let g=l(p),_=a7(g,r);if(_.socketTimeoutMS==null&&(_.socketTimeoutMS=0),_.connectTimeoutMS==null&&(_.connectTimeoutMS=1e4),_.retryWrites==null&&(_.retryWrites=!0),_.useRecoveryToken==null&&(_.useRecoveryToken=!0),_.readPreference==null&&(_.readPreference="primary"),_.db_options&&_.db_options.auth&&delete _.db_options.auth,BGe(_),e.s.options=_,e.s.readPreference=CL.fromOptions(_),e.s.writeConcern=s7.fromOptions(_),g.servers.length===0)return n(new Error("connection string must contain at least one seed host"));if(_.auth&&!_.credentials)try{i=!0,_.credentials=u7(e,_.auth.user,_.auth.password,_)}catch(C){return n(C)}return _.useUnifiedTopology?gT(e,"unified",_,f):(_L("Current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor."),_.replicaSet||_.rs_name?gT(e,"replicaset",_,f):g.servers.length>1?gT(e,"mongos",_,f):qGe(e,_,f))});function f(h,p){let g="seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name";if(h&&h.message==="no mongos proxies found in seed list")return o.isWarn()&&o.warn(g),n(new EL(g));i&&e.emit("authenticated",null,!0),n(h,p)}s(f,"connectCallback")}s(MGe,"connect");function FGe(e,t,r,n){bL(e,t),wL(e,t),OL(e,t);let i=Object.assign({},r);if((typeof r.readPreference=="string"||typeof r.read_preference=="string")&&(i.readPreference=new CL(r.readPreference||r.read_preference)),(i.user||i.password||i.authMechanism)&&!i.credentials)try{i.credentials=u7(e,i.user,i.password,i)}catch(a){return n(a,t)}return t.connect(i,n)}s(FGe,"connectWithUrl");function ru(e,t){let r=new Set(["all","fullsetup","open","reconnect"]);return(n,i)=>{if(r.has(t))return e.emit(t,e);e.emit(t,n,i)}}s(ru,"createListener");function qGe(e,t,r){t.promiseLibrary=e.s.promiseLibrary;let i=c7(t)[0],o=PGe(e,i);i.connect(t,(a,u)=>{if(a)return i.close(!0),r(a);xGe(i),OL(e,i),wL(e,i);let l=u.lastIsMaster();if(bL(e,u),l&&l.msg==="isdbgrid")return u.close(),gT(e,"mongos",t,r);$Ge(e,o),r(a,u)})}s(qGe,"createServer");var LGe=new Set(["reconnect","reconnectFailed","attemptReconnect","joined","left","ping","ha","all","fullsetup","open"]);function UGe(e){e.on("newListener",t=>{LGe.has(t)&&CGe(`The \`${t}\` event is no longer supported by the unified topology, please read more by visiting http://bit.ly/2D8WfT6`,"DeprecationWarning")})}s(UGe,"registerDeprecatedEventNotifiers");function gT(e,t,r,n){r.promiseLibrary=e.s.promiseLibrary;let i={};t==="unified"&&(i.createServers=!1);let o=c7(r,i);if(r.autoEncryption!=null){let u=mL().Encrypter;r.encrypter=new u(e,r),r.autoEncrypter=r.encrypter.autoEncrypter}let a;if(t==="mongos"?a=new r7(o,r):t==="replicaset"?a=new i7(o,r):t==="unified"&&(a=new n7(r.servers,r),UGe(e)),wL(e,a),OL(e,a),bL(e,a),r.autoEncrypter){r.autoEncrypter.init(u=>{if(u){n(u);return}a.connect(r,l=>{if(l){a.close(!0),n(l);return}r.encrypter.connectInternalClient(f=>{if(f)return n(f);n(void 0,a)})})});return}a.connect(r,u=>{if(u)return a.close(!0),n(u);n(void 0,a)})}s(gT,"createTopology");function a7(e,t){let r=["mongos","server","db","replset","db_options","server_options","rs_options","mongos_options"],n=["readconcern","compression","autoencryption"],i=["w","wtimeout","j","journal","fsync","writeconcern"];for(let a in t)i.indexOf(a.toLowerCase())===-1&&(n.indexOf(a.toLowerCase())!==-1?e[a]=t[a]:r.indexOf(a.toLowerCase())!==-1?e=yT(e,t[a],!1):t[a]&&typeof t[a]=="object"&&!Buffer.isBuffer(t[a])&&!Array.isArray(t[a])?e=yT(e,t[a],!0):e[a]=t[a]);let o=s7.fromOptions(t);return o&&(e.writeConcern=Object.assign({},e.writeConcern,o)),e}s(a7,"createUnifiedOptions");function u7(e,t,r,n){n=Object.assign({},n);let i=n.authSource||n.authdb||n.dbName,o=n.authMechanism||"DEFAULT",a=o.toUpperCase(),u=n.authMechanismProperties;if(!IGe.has(a))throw EL.create({message:`authentication mechanism ${o} not supported', options.authMechanism`,driver:!0});return new vGe({mechanism:AGe[a],mechanismProperties:u,source:i,username:t,password:r})}s(u7,"generateCredentials");function jGe(e){return yT(a7({},e),e,!1)}s(jGe,"legacyTransformUrlOptions");function yT(e,t,r){for(let n in t)t[n]&&typeof t[n]=="object"&&r?e=yT(e,t[n],r):e[n]=t[n];return e}s(yT,"mergeOptions");function OL(e,t){["commandStarted","commandSucceeded","commandFailed","serverOpening","serverClosed","serverDescriptionChanged","serverHeartbeatStarted","serverHeartbeatSucceeded","serverHeartbeatFailed","topologyOpening","topologyClosed","topologyDescriptionChanged","joined","left","ping","ha"].concat(bGe).forEach(n=>{t.on(n,(i,o)=>{e.emit(n,i,o)})})}s(OL,"relayEvents");function $Ge(e,t){for(let r=0;r<t.length;r++)e.emit(t[r].event,t[r].object1,t[r].object2)}s($Ge,"replayEvents");function kGe(e){let t=Object.assign({servers:e.hosts},e.options);for(let o in t){let a=NGe[o];a&&(t[a]=t[o])}let r=e.auth&&e.auth.username,n=e.options&&e.options.authMechanism;(r||n)&&(t.auth=Object.assign({},e.auth),t.auth.db&&(t.authSource=t.authSource||t.auth.db),t.auth.username&&(t.auth.user=t.auth.username)),e.defaultDatabase&&(t.dbName=e.defaultDatabase),t.maxPoolSize&&(t.poolSize=t.maxPoolSize),t.readConcernLevel&&(t.readConcern=new SGe(t.readConcernLevel)),t.wTimeoutMS&&(t.wtimeout=t.wTimeoutMS,t.wTimeoutMS=void 0),e.srvHost&&(t.srvHost=e.srvHost);let i=["w","wtimeout","j","journal","fsync"];for(let o of i)t[o]!==void 0&&(t.writeConcern===void 0&&(t.writeConcern={}),t.writeConcern[o]=t[o],t[o]=void 0);return t}s(kGe,"transformUrlOptions");function c7(e,t){if(t=Object.assign({},{createServers:!0},t),(typeof e.readPreference=="string"||typeof e.read_preference=="string")&&(e.readPreference=new CL(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),e.socketTimeoutMS==null&&(e.socketTimeoutMS=0),e.connectTimeoutMS==null&&(e.connectTimeoutMS=1e4),!!t.createServers)return e.servers.map(r=>r.domain_socket?new vL(r.domain_socket,27017,e):new vL(r.host,r.port,e))}s(c7,"translateOptions");l7.exports={validOptions:RGe,connect:MGe}});var wh=w((eTt,m7)=>{"use strict";var GGe=rT(),WGe=l_(),f7=require("events").EventEmitter,zGe=require("util").inherits,vT=pe().MongoError,AL=pe().ValidServerApiVersions,h7=require("util").deprecate,HGe=Fa(),VGe=$().MongoDBNamespace,d7=qn(),p7=$().maybePromise,YGe=aL(),KGe=TL().connect,XGe=TL().validOptions;function kn(e,t){if(t=t||{},!(this instanceof kn))return new kn(e,t);if(f7.call(this),t.autoEncryption&&mL(),t.serverApi){let r=typeof t.serverApi=="string"?{version:t.serverApi}:t.serverApi,n=r&&r.version;if(!n)throw new vT(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${AL.join('", "')}"]`);if(!AL.some(i=>i===n))throw new vT(`Invalid server API version=${n}; must be in the following enum: ["${AL.join('", "')}"]`);t.serverApi=r}this.s={url:e,options:t,promiseLibrary:t&&t.promiseLibrary||Promise,dbCache:new Map,sessions:new Set,writeConcern:HGe.fromOptions(t),readPreference:d7.fromOptions(t)||d7.primary,namespace:new VGe("admin")}}s(kn,"MongoClient");zGe(kn,f7);Object.defineProperty(kn.prototype,"writeConcern",{enumerable:!0,get:function(){return this.s.writeConcern}});Object.defineProperty(kn.prototype,"readPreference",{enumerable:!0,get:function(){return this.s.readPreference}});kn.prototype.connect=function(e){if(typeof e=="string")throw new TypeError("`connect` only accepts a callback");let t=this;return p7(this,e,r=>{let n=XGe(t.s.options);if(n)return r(n);KGe(t,t.s.url,t.s.options,i=>{if(i)return r(i);r(null,t)})})};kn.prototype.logout=h7(function(e,t){typeof e=="function"&&(t=e,e={}),typeof t=="function"&&t(null,!0)},"Multiple authentication is prohibited on a connected client, please only authenticate once per MongoClient");kn.prototype.close=function(e,t){typeof e=="function"&&(t=e,e=!1);let r=this;return p7(this,t,n=>{let i=s(o=>{if(r.emit("close",r),!(r.topology instanceof YGe))for(let a of r.s.dbCache)a[1].emit("close",r);r.removeAllListeners("close"),n(o)},"completeClose");if(r.topology==null){i();return}r.topology.close(e,o=>{let a=r.topology.s.options.encrypter;if(a)return a.close(r,e,u=>{i(o||u)});i(o)})})};kn.prototype.db=function(e,t){t=t||{},e||(e=this.s.options.dbName);let r=Object.assign({},this.s.options,t);if(this.s.dbCache.has(e)&&r.returnNonCachedInstance!==!0)return this.s.dbCache.get(e);if(r.promiseLibrary=this.s.promiseLibrary,!this.topology)throw new vT("MongoClient must be connected before calling MongoClient.prototype.db");let n=new WGe(e,this.topology,r);return this.s.dbCache.set(e,n),n};kn.prototype.isConnected=h7(function(e){return e=e||{},this.topology?this.topology.isConnected(e):!1},"isConnected is deprecated and will be removed in the next major version");kn.connect=function(e,t,r){let n=Array.prototype.slice.call(arguments,1);return r=typeof n[n.length-1]=="function"?n.pop():void 0,t=n.length?n.shift():null,t=t||{},new kn(e,t).connect(r)};kn.prototype.startSession=function(e){if(e=Object.assign({explicit:!0},e),!this.topology)throw new vT("Must connect to a server before calling this method");return this.topology.startSession(e,this.s.options)};kn.prototype.withSession=function(e,t){typeof e=="function"&&(t=e,e=void 0);let r=this.startSession(e),n=s((i,o,a)=>{if(n=s(()=>{throw new ReferenceError("cleanupHandler was called too many times")},"cleanupHandler"),a=Object.assign({throw:!0},a),r.endSession(),i){if(a.throw)throw i;return Promise.reject(i)}},"cleanupHandler");try{let i=t(r);return Promise.resolve(i).then(o=>n(null,o)).catch(o=>n(o,null,{throw:!0}))}catch(i){return n(i,null,{throw:!1})}};kn.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new GGe(this,e,t)};kn.prototype.getLogger=function(){return this.s.options.logger};m7.exports=kn});var IL=w((rTt,g7)=>{"use strict";var _T=pe().BSON.Binary,JGe=pe().BSON.ObjectID,ST=Ci().Buffer,Qi=s(function(e,t,r){if(!(this instanceof Qi))return new Qi(e,t);this.file=e;var n=t??{};if(this.writeConcern=r||{w:1},this.objectId=n._id==null?new JGe:n._id,this.chunkNumber=n.n==null?0:n.n,this.data=new _T,typeof n.data=="string"){var i=ST.alloc(n.data.length);i.write(n.data,0,n.data.length,"binary"),this.data=new _T(i)}else if(Array.isArray(n.data)){i=ST.alloc(n.data.length);var o=n.data.join("");i.write(o,0,o.length,"binary"),this.data=new _T(i)}else if(n.data&&n.data._bsontype==="Binary")this.data=n.data;else if(!ST.isBuffer(n.data)&&n.data!=null)throw Error("Illegal chunk format");this.internalPosition=0},"Chunk");Qi.prototype.write=function(e,t){return this.data.write(e,this.internalPosition,e.length,"binary"),this.internalPosition=this.data.length(),t!=null?t(null,this):this};Qi.prototype.read=function(e){if(e=e==null||e===0?this.length():e,this.length()-this.internalPosition+1>=e){var t=this.data.read(this.internalPosition,e);return this.internalPosition=this.internalPosition+e,t}else return""};Qi.prototype.readSlice=function(e){if(this.length()-this.internalPosition>=e){var t=null;return this.data.buffer!=null?t=this.data.buffer.slice(this.internalPosition,this.internalPosition+e):(t=ST.alloc(e),e=this.data.readInto(t,this.internalPosition)),this.internalPosition=this.internalPosition+e,t}else return null};Qi.prototype.eof=function(){return this.internalPosition===this.length()};Qi.prototype.getc=function(){return this.read(1)};Qi.prototype.rewind=function(){this.internalPosition=0,this.data=new _T};Qi.prototype.save=function(e,t){var r=this;typeof e=="function"&&(t=e,e={}),r.file.chunkCollection(function(n,i){if(n)return t(n);var o={upsert:!0};for(var a in e)o[a]=e[a];for(a in r.writeConcern)o[a]=r.writeConcern[a];r.data.length()>0?r.buildMongoObject(function(u){var l={forceServerObjectId:!0};for(var f in r.writeConcern)l[f]=r.writeConcern[f];i.replaceOne({_id:r.objectId},u,o,function(h){t(h,r)})}):t(null,r)})};Qi.prototype.buildMongoObject=function(e){var t={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};this.objectId!=null&&(t._id=this.objectId),e(t)};Qi.prototype.length=function(){return this.data.length()};Object.defineProperty(Qi.prototype,"position",{enumerable:!0,get:function(){return this.internalPosition},set:function(e){this.internalPosition=e}});Qi.DEFAULT_CHUNK_SIZE=1024*255;g7.exports=Qi});var C7=w((iTt,E7)=>{"use strict";var ys=IL(),RL=pe().BSON.ObjectID,NL=pe().ReadPreference,wT=Ci().Buffer,ET=require("fs"),xL=require("util").format,QGe=require("util"),nu=pe().MongoError,ZGe=QGe.inherits,S7=require("stream").Duplex,eWe=$().shallowClone,li=$().executeLegacyOperation,tWe=require("util").deprecate,rWe=0,m_=1,nWe=tWe(()=>{},"GridStore is deprecated, and will be removed in a future version. Please use GridFSBucket instead"),Ot=s(function e(t,r,n,i,o){if(nWe(),!(this instanceof e))return new e(t,r,n,i,o);this.db=t,typeof o>"u"&&(o={}),typeof i>"u"?(i=n,n=void 0):typeof i=="object"&&(o=i,i=n,n=void 0),r&&r._bsontype==="ObjectID"?(this.referenceBy=m_,this.fileId=r,this.filename=n):typeof n>"u"?(this.referenceBy=rWe,this.filename=r,i.indexOf("w")!=null&&(this.fileId=new RL)):(this.referenceBy=m_,this.fileId=r,this.filename=n),this.mode=i??"r",this.options=o||{},this.isOpen=!1,this.root=this.options.root==null?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||t.options.readPreference||NL.primary,this.writeConcern=PL(t,this.options),this.internalChunkSize=this.options.chunkSize==null?ys.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var a=this.options.promiseLibrary||Promise;this.promiseLibrary=a,Object.defineProperty(this,"chunkSize",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(u){this.mode[0]==="w"&&this.position===0&&this.uploadDate==null?this.internalChunkSize=u:this.internalChunkSize=this.internalChunkSize}}),Object.defineProperty(this,"md5",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,"chunkNumber",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})},"GridStore");Ot.prototype.open=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},this.mode!=="w"&&this.mode!=="w+"&&this.mode!=="r")throw nu.create({message:"Illegal mode "+this.mode,driver:!0});return li(this.db.s.topology,iWe,[this,e,t],{skipSessions:!0})};var iWe=s(function(e,t,r){var n=PL(e.db,e.options);if(e.mode==="w"||e.mode==="w+"){var i=e.collection();i.ensureIndex([["filename",1]],n,function(){var o=e.chunkCollection(),a=eWe(n);a.unique=!0,o.ensureIndex([["files_id",1],["n",1]],a,function(){y7(e,n,function(u,l){if(u)return r(u);e.isOpen=!0,r(u,l)})})})}else y7(e,n,function(o,a){if(o)return r(o);e.isOpen=!0,r(o,a)})},"open");Ot.prototype.eof=function(){return this.position===this.length};Ot.prototype.getc=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},li(this.db.s.topology,sWe,[this,e,t],{skipSessions:!0})};var sWe=s(function(e,t,r){e.eof()?r(null,null):e.currentChunk.eof()?Oh(e,e.currentChunk.chunkNumber+1,function(n,i){e.currentChunk=i,e.position=e.position+1,r(n,e.currentChunk.getc())}):(e.position=e.position+1,r(null,e.currentChunk.getc()))},"getc");Ot.prototype.puts=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n=e.match(/\n$/)==null?e+`
`:e;return li(this.db.s.topology,this.write.bind(this),[n,t,r],{skipSessions:!0})};Ot.prototype.stream=function(){return new iu(this)};Ot.prototype.write=s(function(t,r,n,i){return typeof n=="function"&&(i=n,n={}),n=n||{},li(this.db.s.topology,vWe,[this,t,r,n,i],{skipSessions:!0})},"write");Ot.prototype.destroy=s(function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit("close")))},"destroy");Ot.prototype.writeFile=function(e,t,r){return typeof t=="function"&&(r=t,t={}),t=t||{},li(this.db.s.topology,oWe,[this,e,t,r],{skipSessions:!0})};var oWe=s(function(e,t,r,n){if(typeof t=="string"){ET.open(t,"r",function(i,o){if(i)return n(i);e.writeFile(o,n)});return}e.open(function(i,o){if(i)return n(i,o);ET.fstat(t,function(a,u){if(a)return n(a,o);var l=0,f=0,h=s(function(){var p=wT.alloc(o.chunkSize);ET.read(t,p,0,p.length,l,function(g,_,C){if(g)return n(g,o);l=l+_;var D=new ys(o,{n:f++},o.writeConcern);D.write(C.slice(0,_),function(O,N){if(O)return n(O,o);N.save({},function(F){if(F)return n(F,o);if(o.position=o.position+_,o.currentChunk=N,l>=u.size)ET.close(t,function(x){if(x)return n(x);o.close(function(P){return n(P||null,o)})});else return process.nextTick(h)})})})},"writeChunk");process.nextTick(h)})})},"writeFile");Ot.prototype.close=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},li(this.db.s.topology,aWe,[this,e,t],{skipSessions:!0})};var aWe=s(function(e,t,r){e.mode[0]==="w"?(t=Object.assign({},e.writeConcern,t),e.currentChunk!=null&&e.currentChunk.position>0?e.currentChunk.save({},function(n){if(n&&typeof r=="function")return r(n);e.collection(function(i,o){if(i&&typeof r=="function")return r(i);e.uploadDate!=null?DL(e,function(a,u){if(a){if(typeof r=="function")return r(a);throw a}o.save(u,t,function(l){typeof r=="function"&&r(l,u)})}):(e.uploadDate=new Date,DL(e,function(a,u){if(a){if(typeof r=="function")return r(a);throw a}o.save(u,t,function(l){typeof r=="function"&&r(l,u)})}))})}):e.collection(function(n,i){if(n&&typeof r=="function")return r(n);e.uploadDate=new Date,DL(e,function(o,a){if(o){if(typeof r=="function")return r(o);throw o}i.save(a,t,function(u){typeof r=="function"&&r(u,a)})})})):e.mode[0]==="r"?typeof r=="function"&&r(null,null):typeof r=="function"&&r(nu.create({message:xL("Illegal mode %s",e.mode),driver:!0}))},"close");Ot.prototype.chunkCollection=function(e){return typeof e=="function"?this.db.collection(this.root+".chunks",e):this.db.collection(this.root+".chunks")};Ot.prototype.unlink=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},li(this.db.s.topology,uWe,[this,e,t],{skipSessions:!0})};var uWe=s(function(e,t,r){g_(e,function(n){if(n!==null)return n.message="at deleteChunks: "+n.message,r(n);e.collection(function(i,o){if(i!==null)return i.message="at collection: "+i.message,r(i);o.remove({_id:e.fileId},e.writeConcern,function(a){r(a,e)})})})},"unlink");Ot.prototype.collection=function(e){return typeof e=="function"&&this.db.collection(this.root+".files",e),this.db.collection(this.root+".files")};Ot.prototype.readlines=function(e,t,r){var n=Array.prototype.slice.call(arguments,0);return r=typeof n[n.length-1]=="function"?n.pop():void 0,e=n.length?n.shift():`
`,e=e||`
`,t=n.length?n.shift():{},li(this.db.s.topology,cWe,[this,e,t,r],{skipSessions:!0})};var cWe=s(function(e,t,r,n){e.read(function(i,o){if(i)return n(i);var a=o.toString().split(t);a=a.length>0?a.splice(0,a.length-1):[];for(var u=0;u<a.length;u++)a[u]=a[u]+t;n(null,a)})},"readlines");Ot.prototype.rewind=function(e,t){return typeof e=="function"&&(t=e,e={}),e=e||{},li(this.db.s.topology,lWe,[this,e,t],{skipSessions:!0})};var lWe=s(function(e,t,r){e.currentChunk.chunkNumber!==0?e.mode[0]==="w"?g_(e,function(n){if(n)return r(n);e.currentChunk=new ys(e,{n:0},e.writeConcern),e.position=0,r(null,e)}):e.currentChunk(0,function(n,i){if(n)return r(n);e.currentChunk=i,e.currentChunk.rewind(),e.position=0,r(null,e)}):(e.currentChunk.rewind(),e.position=0,r(null,e))},"rewind");Ot.prototype.read=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,0);return n=typeof i[i.length-1]=="function"?i.pop():void 0,e=i.length?i.shift():null,t=i.length?i.shift():null,r=i.length?i.shift():{},li(this.db.s.topology,dWe,[this,e,t,r,n],{skipSessions:!0})};var dWe=s(function(e,t,r,n,i){var o=t??e.length-e.position,a=r??wT.alloc(o);if(a._index=r!=null&&r._index!=null?r._index:0,e.currentChunk.length()-e.currentChunk.position+a._index>=o){var u=e.currentChunk.readSlice(o-a._index);return u.copy(a,a._index),e.position=e.position+a.length,o===0&&a.length===0?i(nu.create({message:"File does not exist",driver:!0}),null):i(null,a)}u=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position),u.copy(a,a._index),a._index+=u.length,Oh(e,e.currentChunk.chunkNumber+1,function(l,f){if(l)return i(l);f.length()>0?(e.currentChunk=f,e.read(t,a,i)):a._index>0?i(null,a):i(nu.create({message:"no chunks found for file, possibly corrupt",driver:!0}),null)})},"read");Ot.prototype.tell=function(e){var t=this;return typeof e=="function"?e(null,this.position):new t.promiseLibrary(function(r){r(t.position)})};Ot.prototype.seek=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():null,r=i.length?i.shift():{},li(this.db.s.topology,fWe,[this,e,t,r,n],{skipSessions:!0})};var fWe=s(function(e,t,r,n,i){if(e.mode!=="r")return i(nu.create({message:"seek is only supported for mode r",driver:!0}));var o=r??Ot.IO_SEEK_SET,a=t,u=0;o===Ot.IO_SEEK_CUR?u=e.position+a:o===Ot.IO_SEEK_END?u=e.length+a:u=a;var l=Math.floor(u/e.chunkSize),f=s(function(){Oh(e,l,function(h,p){if(h)return i(h,null);if(p==null)return i(new Error("no chunk found"));e.currentChunk=p,e.position=u,e.currentChunk.position=e.position%e.chunkSize,i(h,e)})},"seekChunk");f()},"seek"),y7=s(function(e,t,r){var n=e.collection(),i=e.referenceBy===m_?{_id:e.fileId}:{filename:e.filename};i=e.fileId==null&&e.filename==null?null:i,t.readPreference=e.readPreference,i!=null?n.findOne(i,t,function(a,u){if(a)return o(a);if(u!=null)e.fileId=u._id,e.filename=e.mode==="r"||e.filename===void 0?u.filename:e.filename,e.contentType=u.contentType,e.internalChunkSize=u.chunkSize,e.uploadDate=u.uploadDate,e.aliases=u.aliases,e.length=u.length,e.metadata=u.metadata,e.internalMd5=u.md5;else if(e.mode!=="r")e.fileId=e.fileId==null?new RL:e.fileId,e.contentType=Ot.DEFAULT_CONTENT_TYPE,e.internalChunkSize=e.internalChunkSize==null?ys.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0;else{e.length=0;var l=e.fileId._bsontype==="ObjectID"?e.fileId.toHexString():e.fileId;return o(nu.create({message:xL("file with id %s not opened for writing",e.referenceBy===m_?l:e.filename),driver:!0}),e)}e.mode==="r"?Oh(e,0,t,function(f,h){if(f)return o(f);e.currentChunk=h,e.position=0,r(null,e)}):e.mode==="w"&&u?g_(e,t,function(f){if(f)return o(f);e.currentChunk=new ys(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)}):e.mode==="w"?(e.currentChunk=new ys(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)):e.mode==="w+"&&Oh(e,_7(e),t,function(f,h){if(f)return o(f);e.currentChunk=h??new ys(e,{n:0},e.writeConcern),e.currentChunk.position=e.currentChunk.data.length(),e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=e.length,r(null,e)})}):(e.fileId=e.fileId==null?new RL:e.fileId,e.contentType=Ot.DEFAULT_CONTENT_TYPE,e.internalChunkSize=e.internalChunkSize==null?ys.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,e.mode==="w"?g_(e,t,function(a){if(a)return o(a);e.currentChunk=new ys(e,{n:0},e.writeConcern),e.contentType=e.options.content_type==null?e.contentType:e.options.content_type,e.internalChunkSize=e.options.chunk_size==null?e.internalChunkSize:e.options.chunk_size,e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=0,r(null,e)}):e.mode==="w+"&&Oh(e,_7(e),t,function(a,u){if(a)return o(a);e.currentChunk=u??new ys(e,{n:0},e.writeConcern),e.currentChunk.position=e.currentChunk.data.length(),e.metadata=e.options.metadata==null?e.metadata:e.options.metadata,e.aliases=e.options.aliases==null?e.aliases:e.options.aliases,e.position=e.length,r(null,e)}));function o(a){o.err||r(o.err=a)}s(o,"error")},"_open"),v7=s(function(e,t,r,n){typeof r=="function"&&(n=r,r=null);var i=typeof r=="boolean"?r:!1;if(e.mode!=="w")n(nu.create({message:xL("file with id %s not opened for writing",e.referenceBy===m_?e.referenceBy:e.filename),driver:!0}),null);else if(e.currentChunk.position+t.length>=e.chunkSize){for(var o=e.currentChunk.chunkNumber,a=e.chunkSize-e.currentChunk.position,u=t.slice(0,a),l=t.slice(a),f=[e.currentChunk.write(u)];l.length>=e.chunkSize;){var h=new ys(e,{n:o+1},e.writeConcern);u=l.slice(0,e.chunkSize),l=l.slice(e.chunkSize),o=o+1,h.write(u),f.push(h)}e.currentChunk=new ys(e,{n:o+1},e.writeConcern),l.length>0&&e.currentChunk.write(l),e.position=e.position+t.length;for(var p=f.length,g=0;g<f.length;g++)f[g].save({},function(_){if(_)return n(_);if(p=p-1,p<=0)return i?e.close(function(C){n(C,e)}):n(null,e)})}else return e.position=e.position+t.length,e.currentChunk.write(t),i?e.close(function(_){n(_,e)}):n(null,e)},"writeBuffer"),DL=s(function(e,t){var r={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},n={filemd5:e.fileId,root:e.root};e.db.command(n,function(i,o){if(i)return t(i);r.md5=o.md5,t(null,r)})},"buildMongoObject"),Oh=s(function(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||e.writeConcern,r.readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:t},r,function(i,o){if(i)return n(i);var a=o??{};n(null,new ys(e,a,e.writeConcern))})},"nthChunk"),_7=s(function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},"lastChunkNumber"),g_=s(function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||e.writeConcern,e.fileId!=null?e.chunkCollection().remove({files_id:e.fileId},t,function(n){if(n)return r(n,!1);r(null,!0)}):r(null,!0)},"deleteChunks");Ot.DEFAULT_ROOT_COLLECTION="fs";Ot.DEFAULT_CONTENT_TYPE="binary/octet-stream";Ot.IO_SEEK_SET=0;Ot.IO_SEEK_CUR=1;Ot.IO_SEEK_END=2;Ot.exist=function(e,t,r,n,i){var o=Array.prototype.slice.call(arguments,2);return i=typeof o[o.length-1]=="function"?o.pop():void 0,r=o.length?o.shift():null,n=o.length?o.shift():{},n=n||{},li(e.s.topology,hWe,[e,t,r,n,i],{skipSessions:!0})};var hWe=s(function(e,t,r,n,i){var o=n.readPreference||NL.PRIMARY,a=r??Ot.DEFAULT_ROOT_COLLECTION;e.collection(a+".files",function(u,l){if(u)return i(u);var f=typeof t=="string"||Object.prototype.toString.call(t)==="[object RegExp]"?{filename:t}:{_id:t};t!=null&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object RegExp]"&&(f=t),l.findOne(f,{readPreference:o},function(h,p){if(h)return i(h);i(null,p!=null)})})},"exists");Ot.list=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,1);return n=typeof i[i.length-1]=="function"?i.pop():void 0,t=i.length?i.shift():null,r=i.length?i.shift():{},r=r||{},li(e.s.topology,pWe,[e,t,r,n],{skipSessions:!0})};var pWe=s(function(e,t,r,n){t!=null&&typeof t=="object"&&(r=t,t=null);var i=r.readPreference||NL.primary,o=r.id!=null?r.id:!1,a=t??Ot.DEFAULT_ROOT_COLLECTION,u=[];e.collection(a+".files",function(l,f){if(l)return n(l);f.find({},{readPreference:i},function(h,p){if(h)return n(h);p.each(function(g,_){_!=null?u.push(o?_._id:_.filename):n(g,u)})})})},"list");Ot.read=function(e,t,r,n,i,o){var a=Array.prototype.slice.call(arguments,2);return o=typeof a[a.length-1]=="function"?a.pop():void 0,r=a.length?a.shift():null,n=a.length?a.shift():null,i=a.length?a.shift():null,i=i||{},li(e.s.topology,mWe,[e,t,r,n,i,o],{skipSessions:!0})};var mWe=s(function(e,t,r,n,i,o){new Ot(e,t,"r",i).open(function(a,u){if(a)return o(a);if(n&&n>=u.length)return o("offset larger than size of file",null);if(r&&r>u.length)return o("length is larger than the size of the file",null);if(n&&r&&n+r>u.length)return o("offset and length is larger than the size of the file",null);n!=null?u.seek(n,function(l,f){if(l)return o(l);f.read(r,o)}):u.read(r,o)})},"readStatic");Ot.readlines=function(e,t,r,n,i){var o=Array.prototype.slice.call(arguments,2);return i=typeof o[o.length-1]=="function"?o.pop():void 0,r=o.length?o.shift():null,n=o.length?o.shift():null,n=n||{},li(e.s.topology,gWe,[e,t,r,n,i],{skipSessions:!0})};var gWe=s(function(e,t,r,n,i){var o=r??`
`;new Ot(e,t,"r",n).open(function(a,u){if(a)return i(a);u.readlines(o,i)})},"readlinesStatic");Ot.unlink=function(e,t,r,n){var i=Array.prototype.slice.call(arguments,2);return n=typeof i[i.length-1]=="function"?i.pop():void 0,r=i.length?i.shift():{},r=r||{},li(e.s.topology,yWe,[this,e,t,r,n],{skipSessions:!0})};var yWe=s(function(e,t,r,n,i){var o=PL(t,n);if(r.constructor===Array)for(var a=0,u=0;u<r.length;u++)++a,Ot.unlink(t,r[u],n,function(){--a===0&&i(null,e)});else new Ot(t,r,"w",n).open(function(l,f){if(l)return i(l);g_(f,function(h){if(h)return i(h);f.collection(function(p,g){if(p)return i(p);g.remove({_id:f.fileId},o,function(_){i(_,e)})})})})},"unlinkStatic"),vWe=s(function(e,t,r,n,i){return wT.isBuffer(t)?v7(e,t,r,i):v7(e,wT.from(t,"binary"),r,i)},"_writeNormal"),CT=s(function(e){let t=Object.assign(e,e.writeConcern);var r={};return t.w!=null&&(r.w=t.w),t.journal===!0&&(r.j=t.journal),t.j===!0&&(r.j=t.j),t.fsync===!0&&(r.fsync=t.fsync),t.wtimeout!=null&&(r.wtimeout=t.wtimeout),r},"_setWriteConcernHash"),PL=s(function(e,t){var r={w:1};if(t=t||{},t.writeConcern!=null||t.w!=null||typeof t.j=="boolean"||typeof t.journal=="boolean"||typeof t.fsync=="boolean"?r=CT(t):t.safe!=null&&typeof t.safe=="object"?r=CT(t.safe):typeof t.safe=="boolean"?r={w:t.safe?1:0}:e.options.writeConcern!=null||e.options.w!=null||typeof e.options.j=="boolean"||typeof e.options.journal=="boolean"||typeof e.options.fsync=="boolean"?r=CT(e.options):e.safe&&(e.safe.w!=null||typeof e.safe.j=="boolean"||typeof e.safe.journal=="boolean"||typeof e.safe.fsync=="boolean")?r=CT(e.safe):typeof e.safe=="boolean"&&(r={w:e.safe?1:0}),r.w<1&&(r.journal===!0||r.j===!0||r.fsync===!0))throw nu.create({message:"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true",driver:!0});return r},"_getWriteConcern"),iu=s(function(e){S7.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position},"GridStoreStream");ZGe(iu,S7);iu.prototype._pipe=iu.prototype.pipe;iu.prototype.pipe=function(e){var t=this;return t.gs.isOpen?(t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])):t.gs.open(function(r){if(r)return t.emit("error",r);t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])}),e};iu.prototype._read=function(){var e=this,t=s(function(){e.gs.read(r,function(n,i){if(n&&!e.endCalled)return e.emit("error",n);if(e.endCalled||i==null)return e.push(null);i.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-i.length,e.push(i)):i.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-i._index,e.push(i.slice(0,i._index))),e.totalBytesToRead<=0&&(e.endCalled=!0)})},"read"),r=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?t():e.gs.open(function(n){if(e.totalBytesToRead=e.gs.length-e.gs.position,n)return e.emit("error",n);t()})};iu.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit("end")};iu.prototype.write=function(e){var t=this;return t.endCalled?t.emit("error",nu.create({message:"attempting to write to stream after end called",driver:!0})):t.gs.isOpen?(t.gs.write(e,function(){t.emit("drain")}),!0):(t.gs.open(function(){t.gs.isOpen=!0,t.gs.write(e,function(){process.nextTick(function(){t.emit("drain")})})}),!1)};iu.prototype.end=function(e,t,r){var n=this,i=Array.prototype.slice.call(arguments,0);r=typeof i[i.length-1]=="function"?i.pop():void 0,e=i.length?i.shift():null,t=i.length?i.shift():null,n.endCalled=!0,e&&n.gs.write(e,function(){n.gs.close(function(){typeof r=="function"&&r(),n.emit("end")})}),n.gs.close(function(){typeof r=="function"&&r(),n.emit("end")})};E7.exports=Ot});var T7=w((oTt,O7)=>{"use strict";var w7=require("stream"),_We=require("util");O7.exports=Th;function Th(e,t,r,n,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:n,init:!1,expectedEnd:0,file:null,options:i,readPreference:r},w7.Readable.call(this)}s(Th,"GridFSBucketReadStream");_We.inherits(Th,w7.Readable);Th.prototype._read=function(){var e=this;this.destroyed||CWe(e,function(){SWe(e)})};Th.prototype.start=function(e){return b7(this),this.s.options.start=e,this};Th.prototype.end=function(e){return b7(this),this.s.options.end=e,this};Th.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(r){t.emit("close"),e&&e(r)}):(this.s.init||t.emit("close"),e&&e())};function b7(e){if(e.s.init)throw new Error("You cannot change options after the stream has enteredflowing mode!")}s(b7,"throwIfInitialized");function SWe(e){e.destroyed||e.s.cursor.next(function(t,r){if(e.destroyed)return;if(t)return ea(e,t);if(!r){e.push(null),process.nextTick(()=>{e.s.cursor.close(function(g){if(g){ea(e,g);return}e.emit("close")})});return}var n=e.s.file.length-e.s.bytesRead,i=e.s.expected++,o=Math.min(e.s.file.chunkSize,n);if(r.n>i){var a="ChunkIsMissing: Got unexpected n: "+r.n+", expected: "+i;return ea(e,new Error(a))}if(r.n<i)return a="ExtraChunk: Got unexpected n: "+r.n+", expected: "+i,ea(e,new Error(a));var u=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(u.length!==o)return n<=0?(a="ExtraChunk: Got unexpected n: "+r.n,ea(e,new Error(a))):(a="ChunkIsWrongSize: Got unexpected length: "+u.length+", expected: "+o,ea(e,new Error(a)));if(e.s.bytesRead+=u.length,u.length===0)return e.push(null);var l=null,f=null;e.s.bytesToSkip!=null&&(l=e.s.bytesToSkip,e.s.bytesToSkip=0);let h=i===e.s.expectedEnd-1,p=e.s.options.end-e.s.bytesToSkip;h&&e.s.bytesToTrim!=null?f=e.s.file.chunkSize-e.s.bytesToTrim:e.s.options.end&&p<r.data.length()&&(f=p),(l!=null||f!=null)&&(u=u.slice(l||0,f||u.length)),e.push(u)})}s(SWe,"doRead");function EWe(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference),e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort),e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip),e.s.files.findOne(e.s.filter,t,function(r,n){if(r)return ea(e,r);if(!n){var i=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,o="FileNotFound: file "+i+" was not found",a=new Error(o);return a.code="ENOENT",ea(e,a)}if(n.length<=0){e.push(null);return}if(e.destroyed){e.emit("close");return}try{e.s.bytesToSkip=wWe(e,n,e.s.options)}catch(f){return ea(e,f)}var u={files_id:n._id};if(e.s.options&&e.s.options.start!=null){var l=Math.floor(e.s.options.start/n.chunkSize);l>0&&(u.n={$gte:l})}e.s.cursor=e.s.chunks.find(u).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(n.length/n.chunkSize),e.s.file=n;try{e.s.bytesToTrim=bWe(e,n,e.s.cursor,e.s.options)}catch(f){return ea(e,f)}e.emit("file",n)})}s(EWe,"init");function CWe(e,t){if(e.s.file)return t();e.s.init||(EWe(e),e.s.init=!0),e.once("file",function(){t()})}s(CWe,"waitForFile");function wWe(e,t,r){if(r&&r.start!=null){if(r.start>t.length)throw new Error("Stream start ("+r.start+") must not be more than the length of the file ("+t.length+")");if(r.start<0)throw new Error("Stream start ("+r.start+") must not be negative");if(r.end!=null&&r.end<r.start)throw new Error("Stream start ("+r.start+") must not be greater than stream end ("+r.end+")");return e.s.bytesRead=Math.floor(r.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(r.start/t.chunkSize),r.start-e.s.bytesRead}}s(wWe,"handleStartOption");function bWe(e,t,r,n){if(n&&n.end!=null){if(n.end>t.length)throw new Error("Stream end ("+n.end+") must not be more than the length of the file ("+t.length+")");if(n.start<0)throw new Error("Stream end ("+n.end+") must not be negative");var i=n.start!=null?Math.floor(n.start/t.chunkSize):0;return r.limit(Math.ceil(n.end/t.chunkSize)-i),e.s.expectedEnd=Math.ceil(n.end/t.chunkSize),Math.ceil(n.end/t.chunkSize)*t.chunkSize-n.end}}s(bWe,"handleEndOption");function ea(e,t){e.emit("error",t)}s(ea,"__handleError")});var B7=w((uTt,P7)=>{"use strict";var I7=Ml().MONGODB_ERROR_CODES,D7=pe(),OWe=require("crypto"),R7=require("stream"),TWe=require("util"),y_=Ci().Buffer,AWe=$().deprecateOptions,__=AWe({name:"GridFSBucketWriteStream",deprecatedOptions:["disableMD5"],optionsIndex:2},function(e,t,r){if(r=r||{},R7.Writable.call(this,r),this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=r,this.done=!1,this.id=r.id?r.id:D7.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=y_.alloc(this.chunkSizeBytes),this.length=0,this.md5=!r.disableMD5&&OWe.createHash("md5"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var n=this;IWe(this,function(){n.bucket.s.checkedIndexes=!0,n.bucket.emit("index")})}});TWe.inherits(__,R7.Writable);__.prototype.write=function(e,t,r){var n=this;return x7(this,function(){return RWe(n,e,t,r)})};__.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error("Cannot abort a stream that has already completed");return typeof e=="function"?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error("Cannot call abort() on a stream twice"),typeof e=="function"?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(r){typeof e=="function"&&e(r)})};__.prototype.end=function(e,t,r){var n=this;if(typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),!v_(this,r)){if(this.state.streamEnd=!0,r&&this.once("finish",function(i){r(null,i)}),!e){x7(this,function(){A7(n)});return}this.write(e,t,function(){A7(n)})}};function FL(e,t,r){if(!e.state.errored){if(e.state.errored=!0,r)return r(t);e.emit("error",t)}}s(FL,"__handleError");function N7(e,t,r){return{_id:D7.BSON.ObjectId(),files_id:e,n:t,data:r}}s(N7,"createChunkDoc");function BL(e,t){e.chunks.listIndexes().toArray(function(r,n){if(r){if(r.code===I7.NamespaceNotFound){var i={files_id:1,n:1};e.chunks.createIndex(i,{background:!1,unique:!0},function(u){if(u)return t(u);t()});return}return t(r)}var o=!1;if(n.forEach(function(u){if(u.key){var l=Object.keys(u.key);l.length===2&&u.key.files_id===1&&u.key.n===1&&(o=!0)}}),o)t();else{i={files_id:1,n:1};var a=S_(e);a.background=!1,a.unique=!0,e.chunks.createIndex(i,a,function(u){if(u)return t(u);t()})}})}s(BL,"checkChunksIndex");function ML(e,t){if(e.done)return!0;if(e.state.streamEnd&&e.state.outstandingRequests===0&&!e.state.errored){e.done=!0;var r=DWe(e.id,e.length,e.chunkSizeBytes,e.md5&&e.md5.digest("hex"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return v_(e,t)?!1:(e.files.insertOne(r,S_(e),function(n){if(n)return FL(e,n,t);e.emit("finish",r),e.emit("close")}),!0)}return!1}s(ML,"checkDone");function IWe(e,t){e.files.findOne({},{_id:1},function(r,n){if(r)return t(r);if(n)return t();e.files.listIndexes().toArray(function(i,o){if(i){if(i.code===I7.NamespaceNotFound){var a={filename:1,uploadDate:1};e.files.createIndex(a,{background:!1},function(f){if(f)return t(f);BL(e,t)});return}return t(i)}var u=!1;if(o.forEach(function(f){var h=Object.keys(f.key);h.length===2&&f.key.filename===1&&f.key.uploadDate===1&&(u=!0)}),u)BL(e,t);else{a={filename:1,uploadDate:1};var l=S_(e);l.background=!1,e.files.createIndex(a,l,function(f){if(f)return t(f);BL(e,t)})}})})}s(IWe,"checkIndexes");function DWe(e,t,r,n,i,o,a,u){var l={_id:e,length:t,chunkSize:r,uploadDate:new Date,filename:i};return n&&(l.md5=n),o&&(l.contentType=o),a&&(l.aliases=a),u&&(l.metadata=u),l}s(DWe,"createFilesDoc");function RWe(e,t,r,n){if(v_(e,n))return!1;var i=y_.isBuffer(t)?t:y_.from(t,r);if(e.length+=i.length,e.pos+i.length<e.chunkSizeBytes)return i.copy(e.bufToStore,e.pos),e.pos+=i.length,n&&n(),!0;for(var o=i.length,a=e.chunkSizeBytes-e.pos,u=Math.min(a,i.length),l=0;o>0;){var f=i.length-o;if(i.copy(e.bufToStore,e.pos,f,f+u),e.pos+=u,a-=u,a===0){e.md5&&e.md5.update(e.bufToStore);var h=N7(e.id,e.n,y_.from(e.bufToStore));if(++e.state.outstandingRequests,++l,v_(e,n))return!1;e.chunks.insertOne(h,S_(e),function(p){if(p)return FL(e,p);--e.state.outstandingRequests,--l,l||(e.emit("drain",h),n&&n(),ML(e))}),a=e.chunkSizeBytes,e.pos=0,++e.n}o-=u,u=Math.min(a,o)}return!1}s(RWe,"doWrite");function S_(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}s(S_,"getWriteOptions");function x7(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once("index",function(){t(!0)}),!0)}s(x7,"waitForIndexes");function A7(e,t){if(e.pos===0)return ML(e,t);++e.state.outstandingRequests;var r=y_.alloc(e.pos);e.bufToStore.copy(r,0,0,e.pos),e.md5&&e.md5.update(r);var n=N7(e.id,e.n,r);if(v_(e,t))return!1;e.chunks.insertOne(n,S_(e),function(i){if(i)return FL(e,i);--e.state.outstandingRequests,ML(e)})}s(A7,"writeRemnant");function v_(e,t){return e.state.aborted?(typeof t=="function"&&t(new Error("this stream has been aborted")),!0):!1}s(v_,"checkAborted");P7.exports=__});var j7=w((lTt,U7)=>{"use strict";var M7=require("events").EventEmitter,F7=T7(),q7=B7(),LL=$().shallowClone,NWe=$().toError,xWe=require("util"),UL=$().executeLegacyOperation,L7=$().deprecateOptions,qL={bucketName:"fs",chunkSizeBytes:255*1024};U7.exports=Eo;function Eo(e,t){if(M7.apply(this),this.setMaxListeners(0),t&&typeof t=="object"){t=LL(t);for(var r=Object.keys(qL),n=0;n<r.length;++n)t[r[n]]||(t[r[n]]=qL[r[n]])}else t=qL;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+".chunks"),_filesCollection:e.collection(t.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||Promise}}s(Eo,"GridFSBucket");xWe.inherits(Eo,M7);Eo.prototype.openUploadStream=L7({name:"GridFSBucket.openUploadStream",deprecatedOptions:["disableMD5"],optionsIndex:1},function(e,t){return t?t=LL(t):t={},t.chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new q7(this,e,t)});Eo.prototype.openUploadStreamWithId=L7({name:"GridFSBucket.openUploadStreamWithId",deprecatedOptions:["disableMD5"],optionsIndex:2},function(e,t,r){return r?r=LL(r):r={},r.chunkSizeBytes||(r.chunkSizeBytes=this.s.options.chunkSizeBytes),r.id=e,new q7(this,t,r)});Eo.prototype.openDownloadStream=function(e,t){var r={_id:e};return t={start:t&&t.start,end:t&&t.end},new F7(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,r,t)};Eo.prototype.delete=function(e,t){return UL(this.s.db.s.topology,PWe,[this,e,t],{skipSessions:!0})};function PWe(e,t,r){e.s._filesCollection.deleteOne({_id:t},function(n,i){if(n)return r(n);e.s._chunksCollection.deleteMany({files_id:t},function(o){if(o)return r(o);if(!i.result.n){var a="FileNotFound: no file with id "+t+" found";return r(new Error(a))}r()})})}s(PWe,"_delete");Eo.prototype.find=function(e,t){e=e||{},t=t||{};var r=this.s._filesCollection.find(e);return t.batchSize!=null&&r.batchSize(t.batchSize),t.limit!=null&&r.limit(t.limit),t.maxTimeMS!=null&&r.maxTimeMS(t.maxTimeMS),t.noCursorTimeout!=null&&r.addCursorFlag("noCursorTimeout",t.noCursorTimeout),t.skip!=null&&r.skip(t.skip),t.sort!=null&&r.sort(t.sort),r};Eo.prototype.openDownloadStreamByName=function(e,t){var r={uploadDate:-1},n=null;t&&t.revision!=null&&(t.revision>=0?(r={uploadDate:1},n=t.revision):n=-t.revision-1);var i={filename:e};return t={sort:r,skip:n,start:t&&t.start,end:t&&t.end},new F7(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)};Eo.prototype.rename=function(e,t,r){return UL(this.s.db.s.topology,BWe,[this,e,t,r],{skipSessions:!0})};function BWe(e,t,r,n){var i={_id:t},o={$set:{filename:r}};e.s._filesCollection.updateOne(i,o,function(a,u){if(a)return n(a);if(!u.result.n)return n(NWe("File with id "+t+" not found"));n()})}s(BWe,"_rename");Eo.prototype.drop=function(e){return UL(this.s.db.s.topology,MWe,[this,e],{skipSessions:!0})};Eo.prototype.getLogger=function(){return this.s.db.s.logger};function MWe(e,t){e.s._filesCollection.drop(function(r){if(r)return t(r);e.s._chunksCollection.drop(function(n){return n?t(n):t()})})}s(MWe,"_drop")});var gL=w((fTt,$7)=>{"use strict";var hr=pe(),FWe=TK(),nt=wh().connect;nt.MongoError=hr.MongoError;nt.MongoNetworkError=hr.MongoNetworkError;nt.MongoTimeoutError=hr.MongoTimeoutError;nt.MongoServerSelectionError=hr.MongoServerSelectionError;nt.MongoParseError=hr.MongoParseError;nt.MongoWriteConcernError=hr.MongoWriteConcernError;nt.MongoBulkWriteError=OO().BulkWriteError;nt.BulkWriteError=nt.MongoBulkWriteError;nt.ServerApiVersion=hr.ServerApiVersion;nt.Admin=Fq();nt.MongoClient=wh();nt.Db=l_();nt.Collection=yh();nt.Server=p_();nt.ReplSet=fL();nt.Mongos=lL();nt.ReadPreference=hr.ReadPreference;nt.GridStore=C7();nt.Chunk=IL();nt.Logger=hr.Logger;nt.AggregationCursor=AO();nt.CommandCursor=DO();nt.Cursor=Jo();nt.GridFSBucket=j7();nt.CoreServer=hr.Server;nt.CoreConnection=hr.Connection;nt.Binary=hr.BSON.Binary;nt.Code=hr.BSON.Code;nt.Map=hr.BSON.Map;nt.DBRef=hr.BSON.DBRef;nt.Double=hr.BSON.Double;nt.Int32=hr.BSON.Int32;nt.Long=hr.BSON.Long;nt.MinKey=hr.BSON.MinKey;nt.MaxKey=hr.BSON.MaxKey;nt.ObjectID=hr.BSON.ObjectID;nt.ObjectId=hr.BSON.ObjectID;nt.Symbol=hr.BSON.Symbol;nt.Timestamp=hr.BSON.Timestamp;nt.BSONRegExp=hr.BSON.BSONRegExp;nt.Decimal128=hr.BSON.Decimal128;nt.connect=nt;nt.instrument=function(e,t){typeof e=="function"&&(t=e,e={});let r=new FWe;return r.instrument(nt.MongoClient,t),r};$7.exports=nt});var E_=w((k7,G7)=>{var qWe=require("stream");k7=G7.exports=jL;jL.through=jL;function jL(e,t,r){e=e||function(h){this.queue(h)},t=t||function(){this.queue(null)};var n=!1,i=!1,o=[],a=!1,u=new qWe;u.readable=u.writable=!0,u.paused=!1,u.autoDestroy=!(r&&r.autoDestroy===!1),u.write=function(h){return e.call(this,h),!u.paused};function l(){for(;o.length&&!u.paused;){var h=o.shift();if(h===null)return u.emit("end");u.emit("data",h)}}s(l,"drain"),u.queue=u.push=function(h){return a||(h===null&&(a=!0),o.push(h),l()),u},u.on("end",function(){u.readable=!1,!u.writable&&u.autoDestroy&&process.nextTick(function(){u.destroy()})});function f(){u.writable=!1,t.call(u),!u.readable&&u.autoDestroy&&u.destroy()}return s(f,"_end"),u.end=function(h){if(!n)return n=!0,arguments.length&&u.write(h),f(),u},u.destroy=function(){if(!i)return i=!0,n=!0,o.length=0,u.writable=u.readable=!1,u.emit("close"),u},u.pause=function(){if(!u.paused)return u.paused=!0,u},u.resume=function(){return u.paused&&(u.paused=!1,u.emit("resume")),l(),u.paused||u.emit("drain"),u},u}s(jL,"through")});var z7=w((pTt,W7)=>{"use strict";var LWe=require("stream");W7.exports=s(function e(t){if(Array.isArray(t)){var r=0,n=t.length;return e(function(u){return r<n?this.emit("data",t[r++]):this.emit("end"),!0})}var i=new LWe,o=0;i.ended=!1,i.started=!1,i.readable=!0,i.writable=!1,i.paused=!1,i.ended=!1,i.pause=function(){i.started=!0,i.paused=!0};function a(){if(i.started=!0,!i.ended)for(;!i.ended&&!i.paused&&t.call(i,o++,function(){!i.ended&&!i.paused&&process.nextTick(a)}););}return s(a,"next"),i.resume=function(){i.started=!0,i.paused=!1,a()},i.on("end",function(){i.ended=!0,i.readable=!1,process.nextTick(i.destroy)}),i.destroy=function(){i.ended=!0,i.emit("close")},process.nextTick(function(){i.started||i.resume()}),i},"from")});var kL=w((gTt,V7)=>{var UWe=require("stream"),jWe=["write","end","destroy"],$We=["resume","pause"],kWe=["data","close"],H7=Array.prototype.slice;V7.exports=GWe;function $L(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r)}s($L,"forEach");function GWe(e,t){var r=new UWe,n=!1;return $L(jWe,i),$L($We,o),$L(kWe,a),t.on("end",u),e.on("drain",function(){r.emit("drain")}),e.on("error",l),t.on("error",l),r.writable=e.writable,r.readable=t.readable,r;function i(f){r[f]=h;function h(){return e[f].apply(e,arguments)}s(h,"method")}s(i,"proxyWriter");function o(f){r[f]=h;function h(){r.emit(f);var p=t[f];if(p)return p.apply(t,arguments);t.emit(f)}s(h,"method")}s(o,"proxyReader");function a(f){t.on(f,h);function h(){var p=H7.call(arguments);p.unshift(f),r.emit.apply(r,p)}s(h,"reemit")}s(a,"proxyStream");function u(){if(!n){n=!0;var f=H7.call(arguments);f.unshift("end"),r.emit.apply(r,f)}}s(u,"handleEnd");function l(f){r.emit("error",f)}s(l,"reemit")}s(GWe,"duplex")});var K7=w((vTt,Y7)=>{var WWe=require("stream").Stream;Y7.exports=function(e,t){var r=new WWe,n=0,i=0,o=!1,a=!1,u=!1,l=0,f=!1;t=t||{};var h=t.failures?"failure":"error",p={};r.writable=!0,r.readable=!0;function g(O,N){var F=l+1;if(N===F?(O!==void 0&&r.emit.apply(r,["data",O]),l++,F++):p[N]=O,p.hasOwnProperty(F)){var x=p[F];return delete p[F],g(x,F)}i++,n===i&&(a&&(a=!1,r.emit("drain")),o&&D())}s(g,"queueData");function _(O,N,F){u||(f=!0,(!O||t.failures)&&g(N,F),O&&r.emit.apply(r,[h,O]),f=!1)}s(_,"next");function C(O,N,F){return e.call(null,O,function(x,P){F(x,P,N)})}s(C,"wrappedMapper"),r.write=function(O){if(o)throw new Error("map stream is not writable");f=!1,n++;try{var N=C(O,n,_);return a=N===!1,!a}catch(F){if(f)throw F;return _(F),!a}};function D(O){if(o=!0,r.writable=!1,O!==void 0)return g(O,n);n==i&&(r.readable=!1,r.emit("end"),r.destroy())}return s(D,"end"),r.end=function(O){o||D(O)},r.destroy=function(){o=u=!0,r.writable=r.readable=a=!1,process.nextTick(function(){r.emit("close")})},r.pause=function(){a=!0},r.resume=function(){a=!1},r}});var J7=w((STt,X7)=>{X7.exports=E_()});var Z7=w((ETt,Q7)=>{var zWe=E_(),HWe=require("string_decoder").StringDecoder;Q7.exports=VWe;function VWe(e,t,r){var n=new HWe,i="",o=r&&r.maxLength,a=!(r&&r.trailing===!1);typeof e=="function"&&(t=e,e=null),e||(e=/\r?\n/);function u(f,h){if(t){try{h=t(h)}catch(p){return f.emit("error",p)}typeof h<"u"&&f.queue(h)}else f.queue(h)}s(u,"emit");function l(f,h){var p=((i??"")+h).split(e);if(i=p.pop(),o&&i.length>o)return f.emit("error",new Error("maximum buffer reached"));for(var g=0;g<p.length;g++){var _=p[g];u(f,_)}}return s(l,"next"),zWe(function(f){l(this,n.write(f))},function(){n.end&&l(this,n.end()),a&&i!=null&&u(this,i),this.queue(null)})}s(VWe,"split")});var tJ=w((wTt,eJ)=>{var YWe=kL(),KWe=E_();eJ.exports=function(){var e;if(arguments.length==1&&Array.isArray(arguments[0])?e=arguments[0]:e=[].slice.call(arguments),e.length==0)return KWe();if(e.length==1)return e[0];var t=e[0],r=e[e.length-1],n=YWe(t,r);function i(u){u.length<2||(u[0].pipe(u[1]),i(u.slice(1)))}s(i,"recurse"),i(e);function o(){var u=[].slice.call(arguments);u.unshift("error"),n.emit.apply(n,u)}s(o,"onerror");for(var a=1;a<e.length-1;a++)e[a].on("error",o);return n}});var GL=w(rJ=>{var C_=require("stream").Stream,_t=rJ,XWe=E_(),JWe=z7(),QWe=kL(),ZWe=K7(),eze=J7(),tze=Z7(),rze=tJ(),nze=global.setImmediate||process.nextTick;_t.Stream=C_;_t.through=XWe;_t.from=JWe;_t.duplex=QWe;_t.map=ZWe;_t.pause=eze;_t.split=tze;_t.pipeline=_t.connect=_t.pipe=rze;_t.concat=_t.merge=function(){var e=[].slice.call(arguments);e.length===1&&e[0]instanceof Array&&(e=e[0]);var t=new C_;t.setMaxListeners(0);var r=0;return t.writable=t.readable=!0,e.length?e.forEach(function(n){n.pipe(t,{end:!1});var i=!1;n.on("end",function(){i||(i=!0,r++,r==e.length&&t.emit("end"))})}):process.nextTick(function(){t.emit("end")}),t.write=function(n){this.emit("data",n)},t.destroy=function(){e.forEach(function(n){n.destroy&&n.destroy()})},t};_t.collect=_t.writeArray=function(e){if(typeof e!="function")throw new Error("function writeArray (done): done must be function");var t=new C_,r=[],n=!1;return t.write=function(i){r.push(i)},t.end=function(){n=!0,e(null,r)},t.writable=!0,t.readable=!1,t.destroy=function(){t.writable=t.readable=!1,!n&&e(new Error("destroyed before end"),r)},t};_t.readArray=function(e){var t=new C_,r=0,n=!1,i=!1;if(t.readable=!0,t.writable=!1,!Array.isArray(e))throw new Error("event-stream.read expects an array");return t.resume=function(){if(!i){n=!1;for(var o=e.length;r<o&&!n&&!i;)t.emit("data",e[r++]);r==o&&!i&&(i=!0,t.readable=!1,t.emit("end"))}},process.nextTick(t.resume),t.pause=function(){n=!0},t.destroy=function(){i=!0,t.emit("close")},t};_t.readable=function(e,t){var r=new C_,n=0,i=!1,o=!1,a=!1;if(r.readable=!0,r.writable=!1,typeof e!="function")throw new Error("event-stream.readable expects async function");r.on("end",function(){o=!0});function u(l,f){l?(r.emit("error",l),t||r.emit("end")):arguments.length>1&&r.emit("data",f),nze(function(){if(!(o||i||a))try{a=!0,e.call(r,n++,function(){a=!1,u.apply(null,arguments)})}catch(h){r.emit("error",h)}})}return s(u,"get"),r.resume=function(){i=!1,u()},process.nextTick(u),r.pause=function(){i=!0},r.destroy=function(){r.emit("end"),r.emit("close"),o=!0},r};_t.mapSync=function(e){return _t.through(s(function(r){var n;try{n=e(r)}catch(i){return this.emit("error",i)}n!==void 0&&this.emit("data",n)},"write"))};_t.filterSync=function(e){return _t.through(function(t){var r=this;e(t)&&r.queue(t)})};_t.flatmapSync=function(e){return _t.through(function(t){var r=this;t.forEach(function(n){r.queue(e(n))})})};_t.log=function(e){return _t.through(function(t){var r=[].slice.call(arguments);e?console.error(e,t):console.error(t),this.emit("data",t)})};_t.child=function(e){return _t.duplex(e.stdin,e.stdout)};_t.parse=function(e){var t=!!(e&&e.error);return _t.through(function(r){var n;try{r&&(n=JSON.parse(r.toString()))}catch(i){return t?this.emit("error",i):console.error(i,"attempting to parse:",r)}n!==void 0&&this.emit("data",n)})};_t.stringify=function(){var e=require("buffer").Buffer;return _t.mapSync(function(t){return JSON.stringify(e.isBuffer(t)?t.toString():t)+`
`})};_t.replace=function(e,t){return _t.pipeline(_t.split(e),_t.join(t))};_t.join=function(e){if(typeof e=="function")return _t.wait(e);var t=!0;return _t.through(function(r){return t||this.emit("data",e),t=!1,this.emit("data",r),!0})};_t.wait=function(e){var t=[];return _t.through(function(r){t.push(r)},function(){var r=Buffer.isBuffer(t[0])?Buffer.concat(t):t.join("");this.emit("data",r),this.emit("end"),e&&e(null,r)})};_t.pipeable=function(){throw new Error("[EVENT-STREAM] es.pipeable is deprecated")}});var _J=w((st,vJ)=>{st=vJ.exports=qt;var er;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?er=s(function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)},"debug"):er=s(function(){},"debug");st.SEMVER_SPEC_VERSION="2.0.0";var w_=256,bT=Number.MAX_SAFE_INTEGER||9007199254740991,WL=16,ize=w_-6,b_=st.re=[],pr=st.safeRe=[],oe=st.src=[],Pt=0,KL="[a-zA-Z0-9-]",zL=[["\\s",1],["\\d",w_],[KL,ize]];function RT(e){for(var t=0;t<zL.length;t++){var r=zL[t][0],n=zL[t][1];e=e.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return e}s(RT,"makeSafeRe");var Ah=Pt++;oe[Ah]="0|[1-9]\\d*";var Ih=Pt++;oe[Ih]="\\d+";var XL=Pt++;oe[XL]="\\d*[a-zA-Z-]"+KL+"*";var iJ=Pt++;oe[iJ]="("+oe[Ah]+")\\.("+oe[Ah]+")\\.("+oe[Ah]+")";var sJ=Pt++;oe[sJ]="("+oe[Ih]+")\\.("+oe[Ih]+")\\.("+oe[Ih]+")";var HL=Pt++;oe[HL]="(?:"+oe[Ah]+"|"+oe[XL]+")";var VL=Pt++;oe[VL]="(?:"+oe[Ih]+"|"+oe[XL]+")";var JL=Pt++;oe[JL]="(?:-("+oe[HL]+"(?:\\."+oe[HL]+")*))";var QL=Pt++;oe[QL]="(?:-?("+oe[VL]+"(?:\\."+oe[VL]+")*))";var YL=Pt++;oe[YL]=KL+"+";var T_=Pt++;oe[T_]="(?:\\+("+oe[YL]+"(?:\\."+oe[YL]+")*))";var ZL=Pt++,oJ="v?"+oe[iJ]+oe[JL]+"?"+oe[T_]+"?";oe[ZL]="^"+oJ+"$";var eU="[v=\\s]*"+oe[sJ]+oe[QL]+"?"+oe[T_]+"?",tU=Pt++;oe[tU]="^"+eU+"$";var Ph=Pt++;oe[Ph]="((?:<|>)?=?)";var OT=Pt++;oe[OT]=oe[Ih]+"|x|X|\\*";var TT=Pt++;oe[TT]=oe[Ah]+"|x|X|\\*";var hd=Pt++;oe[hd]="[v=\\s]*("+oe[TT]+")(?:\\.("+oe[TT]+")(?:\\.("+oe[TT]+")(?:"+oe[JL]+")?"+oe[T_]+"?)?)?";var Rh=Pt++;oe[Rh]="[v=\\s]*("+oe[OT]+")(?:\\.("+oe[OT]+")(?:\\.("+oe[OT]+")(?:"+oe[QL]+")?"+oe[T_]+"?)?)?";var aJ=Pt++;oe[aJ]="^"+oe[Ph]+"\\s*"+oe[hd]+"$";var uJ=Pt++;oe[uJ]="^"+oe[Ph]+"\\s*"+oe[Rh]+"$";var cJ=Pt++;oe[cJ]="(?:^|[^\\d])(\\d{1,"+WL+"})(?:\\.(\\d{1,"+WL+"}))?(?:\\.(\\d{1,"+WL+"}))?(?:$|[^\\d])";var NT=Pt++;oe[NT]="(?:~>?)";var Nh=Pt++;oe[Nh]="(\\s*)"+oe[NT]+"\\s+";b_[Nh]=new RegExp(oe[Nh],"g");pr[Nh]=new RegExp(RT(oe[Nh]),"g");var sze="$1~",lJ=Pt++;oe[lJ]="^"+oe[NT]+oe[hd]+"$";var dJ=Pt++;oe[dJ]="^"+oe[NT]+oe[Rh]+"$";var xT=Pt++;oe[xT]="(?:\\^)";var xh=Pt++;oe[xh]="(\\s*)"+oe[xT]+"\\s+";b_[xh]=new RegExp(oe[xh],"g");pr[xh]=new RegExp(RT(oe[xh]),"g");var oze="$1^",fJ=Pt++;oe[fJ]="^"+oe[xT]+oe[hd]+"$";var hJ=Pt++;oe[hJ]="^"+oe[xT]+oe[Rh]+"$";var rU=Pt++;oe[rU]="^"+oe[Ph]+"\\s*("+eU+")$|^$";var nU=Pt++;oe[nU]="^"+oe[Ph]+"\\s*("+oJ+")$|^$";var pd=Pt++;oe[pd]="(\\s*)"+oe[Ph]+"\\s*("+eU+"|"+oe[hd]+")";b_[pd]=new RegExp(oe[pd],"g");pr[pd]=new RegExp(RT(oe[pd]),"g");var aze="$1$2$3",pJ=Pt++;oe[pJ]="^\\s*("+oe[hd]+")\\s+-\\s+("+oe[hd]+")\\s*$";var mJ=Pt++;oe[mJ]="^\\s*("+oe[Rh]+")\\s+-\\s+("+oe[Rh]+")\\s*$";var gJ=Pt++;oe[gJ]="(<|>)?=?\\s*\\*";for(ta=0;ta<Pt;ta++)er(ta,oe[ta]),b_[ta]||(b_[ta]=new RegExp(oe[ta]),pr[ta]=new RegExp(RT(oe[ta])));var ta;st.parse=md;function md(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof qt)return e;if(typeof e!="string"||e.length>w_)return null;var r=t.loose?pr[tU]:pr[ZL];if(!r.test(e))return null;try{return new qt(e,t)}catch{return null}}s(md,"parse");st.valid=uze;function uze(e,t){var r=md(e,t);return r?r.version:null}s(uze,"valid");st.clean=cze;function cze(e,t){var r=md(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}s(cze,"clean");st.SemVer=qt;function qt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof qt){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>w_)throw new TypeError("version is longer than "+w_+" characters");if(!(this instanceof qt))return new qt(e,t);er("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?pr[tU]:pr[ZL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>bT||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bT||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bT||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<bT)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}s(qt,"SemVer");qt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};qt.prototype.toString=function(){return this.version};qt.prototype.compare=function(e){return er("SemVer.compare",this.version,this.options,e),e instanceof qt||(e=new qt(e,this.options)),this.compareMain(e)||this.comparePre(e)};qt.prototype.compareMain=function(e){return e instanceof qt||(e=new qt(e,this.options)),Dh(this.major,e.major)||Dh(this.minor,e.minor)||Dh(this.patch,e.patch)};qt.prototype.comparePre=function(e){if(e instanceof qt||(e=new qt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(er("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Dh(r,n)}while(++t)};qt.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};st.inc=lze;function lze(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new qt(e,r).inc(t,n).version}catch{return null}}s(lze,"inc");st.diff=dze;function dze(e,t){if(iU(e,t))return null;var r=md(e),n=md(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return i+a;return o}s(dze,"diff");st.compareIdentifiers=Dh;var nJ=/^[0-9]+$/;function Dh(e,t){var r=nJ.test(e),n=nJ.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}s(Dh,"compareIdentifiers");st.rcompareIdentifiers=fze;function fze(e,t){return Dh(t,e)}s(fze,"rcompareIdentifiers");st.major=hze;function hze(e,t){return new qt(e,t).major}s(hze,"major");st.minor=pze;function pze(e,t){return new qt(e,t).minor}s(pze,"minor");st.patch=mze;function mze(e,t){return new qt(e,t).patch}s(mze,"patch");st.compare=su;function su(e,t,r){return new qt(e,r).compare(new qt(t,r))}s(su,"compare");st.compareLoose=gze;function gze(e,t){return su(e,t,!0)}s(gze,"compareLoose");st.rcompare=yze;function yze(e,t,r){return su(t,e,r)}s(yze,"rcompare");st.sort=vze;function vze(e,t){return e.sort(function(r,n){return st.compare(r,n,t)})}s(vze,"sort");st.rsort=_ze;function _ze(e,t){return e.sort(function(r,n){return st.rcompare(r,n,t)})}s(_ze,"rsort");st.gt=O_;function O_(e,t,r){return su(e,t,r)>0}s(O_,"gt");st.lt=AT;function AT(e,t,r){return su(e,t,r)<0}s(AT,"lt");st.eq=iU;function iU(e,t,r){return su(e,t,r)===0}s(iU,"eq");st.neq=yJ;function yJ(e,t,r){return su(e,t,r)!==0}s(yJ,"neq");st.gte=sU;function sU(e,t,r){return su(e,t,r)>=0}s(sU,"gte");st.lte=oU;function oU(e,t,r){return su(e,t,r)<=0}s(oU,"lte");st.cmp=IT;function IT(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return iU(e,r,n);case"!=":return yJ(e,r,n);case">":return O_(e,r,n);case">=":return sU(e,r,n);case"<":return AT(e,r,n);case"<=":return oU(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}s(IT,"cmp");st.Comparator=Ls;function Ls(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Ls){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Ls))return new Ls(e,t);e=e.trim().split(/\s+/).join(" "),er("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===A_?this.value="":this.value=this.operator+this.semver.version,er("comp",this)}s(Ls,"Comparator");var A_={};Ls.prototype.parse=function(e){var t=this.options.loose?pr[rU]:pr[nU],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new qt(r[2],this.options.loose):this.semver=A_};Ls.prototype.toString=function(){return this.value};Ls.prototype.test=function(e){return er("Comparator.test",e,this.options.loose),this.semver===A_?!0:(typeof e=="string"&&(e=new qt(e,this.options)),IT(e,this.operator,this.semver,this.options))};Ls.prototype.intersects=function(e,t){if(!(e instanceof Ls))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new Fr(e.value,t),DT(this.value,r,t);if(e.operator==="")return r=new Fr(this.value,t),DT(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=IT(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),l=IT(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&a||u||l};st.Range=Fr;function Fr(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Fr)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Fr(e.raw,t);if(e instanceof Ls)return new Fr(e.value,t);if(!(this instanceof Fr))return new Fr(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}s(Fr,"Range");Fr.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};Fr.prototype.toString=function(){return this.range};Fr.prototype.parseRange=function(e){var t=this.options.loose,r=t?pr[mJ]:pr[pJ];e=e.replace(r,Dze),er("hyphen replace",e),e=e.replace(pr[pd],aze),er("comparator trim",e,pr[pd]),e=e.replace(pr[Nh],sze),e=e.replace(pr[xh],oze);var n=t?pr[rU]:pr[nU],i=e.split(" ").map(function(o){return Eze(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new Ls(o,this.options)},this),i};Fr.prototype.intersects=function(e,t){if(!(e instanceof Fr))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(o){return n.intersects(o,t)})})})})};st.toComparators=Sze;function Sze(e,t){return new Fr(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}s(Sze,"toComparators");function Eze(e,t){return er("comp",e,t),e=bze(e,t),er("caret",e),e=Cze(e,t),er("tildes",e),e=Tze(e,t),er("xrange",e),e=Ize(e,t),er("stars",e),e}s(Eze,"parseComparator");function Ni(e){return!e||e.toLowerCase()==="x"||e==="*"}s(Ni,"isX");function Cze(e,t){return e.trim().split(/\s+/).map(function(r){return wze(r,t)}).join(" ")}s(Cze,"replaceTildes");function wze(e,t){var r=t.loose?pr[dJ]:pr[lJ];return e.replace(r,function(n,i,o,a,u){er("tilde",e,n,i,o,a,u);var l;return Ni(i)?l="":Ni(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Ni(a)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":u?(er("replaceTilde pr",u),l=">="+i+"."+o+"."+a+"-"+u+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0",er("tilde return",l),l})}s(wze,"replaceTilde");function bze(e,t){return e.trim().split(/\s+/).map(function(r){return Oze(r,t)}).join(" ")}s(bze,"replaceCarets");function Oze(e,t){er("caret",e,t);var r=t.loose?pr[hJ]:pr[fJ];return e.replace(r,function(n,i,o,a,u){er("caret",e,n,i,o,a,u);var l;return Ni(i)?l="":Ni(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Ni(a)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":u?(er("replaceCaret pr",u),i==="0"?o==="0"?l=">="+i+"."+o+"."+a+"-"+u+" <"+i+"."+o+"."+(+a+1):l=">="+i+"."+o+"."+a+"-"+u+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+a+"-"+u+" <"+(+i+1)+".0.0"):(er("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+a+" <"+i+"."+o+"."+(+a+1):l=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+a+" <"+(+i+1)+".0.0"),er("caret return",l),l})}s(Oze,"replaceCaret");function Tze(e,t){return er("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return Aze(r,t)}).join(" ")}s(Tze,"replaceXRanges");function Aze(e,t){e=e.trim();var r=t.loose?pr[uJ]:pr[aJ];return e.replace(r,function(n,i,o,a,u,l){er("xRange",e,n,i,o,a,u,l);var f=Ni(o),h=f||Ni(a),p=h||Ni(u),g=p;return i==="="&&g&&(i=""),f?i===">"||i==="<"?n="<0.0.0":n="*":i&&g?(h&&(a=0),u=0,i===">"?(i=">=",h?(o=+o+1,a=0,u=0):(a=+a+1,u=0)):i==="<="&&(i="<",h?o=+o+1:a=+a+1),n=i+o+"."+a+"."+u):h?n=">="+o+".0.0 <"+(+o+1)+".0.0":p&&(n=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0"),er("xRange return",n),n})}s(Aze,"replaceXRange");function Ize(e,t){return er("replaceStars",e,t),e.trim().replace(pr[gJ],"")}s(Ize,"replaceStars");function Dze(e,t,r,n,i,o,a,u,l,f,h,p,g){return Ni(r)?t="":Ni(n)?t=">="+r+".0.0":Ni(i)?t=">="+r+"."+n+".0":t=">="+t,Ni(l)?u="":Ni(f)?u="<"+(+l+1)+".0.0":Ni(h)?u="<"+l+"."+(+f+1)+".0":p?u="<="+l+"."+f+"."+h+"-"+p:u="<="+u,(t+" "+u).trim()}s(Dze,"hyphenReplace");Fr.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new qt(e,this.options));for(var t=0;t<this.set.length;t++)if(Rze(this.set[t],e,this.options))return!0;return!1};function Rze(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(er(e[n].semver),e[n].semver!==A_&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}s(Rze,"testSet");st.satisfies=DT;function DT(e,t,r){try{t=new Fr(t,r)}catch{return!1}return t.test(e)}s(DT,"satisfies");st.maxSatisfying=Nze;function Nze(e,t,r){var n=null,i=null;try{var o=new Fr(t,r)}catch{return null}return e.forEach(function(a){o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new qt(n,r))}),n}s(Nze,"maxSatisfying");st.minSatisfying=xze;function xze(e,t,r){var n=null,i=null;try{var o=new Fr(t,r)}catch{return null}return e.forEach(function(a){o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new qt(n,r))}),n}s(xze,"minSatisfying");st.minVersion=Pze;function Pze(e,t){e=new Fr(e,t);var r=new qt("0.0.0");if(e.test(r)||(r=new qt("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(o){var a=new qt(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!r||O_(r,a))&&(r=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&e.test(r)?r:null}s(Pze,"minVersion");st.validRange=Bze;function Bze(e,t){try{return new Fr(e,t).range||"*"}catch{return null}}s(Bze,"validRange");st.ltr=Mze;function Mze(e,t,r){return aU(e,t,"<",r)}s(Mze,"ltr");st.gtr=Fze;function Fze(e,t,r){return aU(e,t,">",r)}s(Fze,"gtr");st.outside=aU;function aU(e,t,r,n){e=new qt(e,n),t=new Fr(t,n);var i,o,a,u,l;switch(r){case">":i=O_,o=oU,a=AT,u=">",l=">=";break;case"<":i=AT,o=sU,a=O_,u="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(DT(e,t,n))return!1;for(var f=0;f<t.set.length;++f){var h=t.set[f],p=null,g=null;if(h.forEach(function(_){_.semver===A_&&(_=new Ls(">=0.0.0")),p=p||_,g=g||_,i(_.semver,p.semver,n)?p=_:a(_.semver,g.semver,n)&&(g=_)}),p.operator===u||p.operator===l||(!g.operator||g.operator===u)&&o(e,g.semver))return!1;if(g.operator===l&&a(e,g.semver))return!1}return!0}s(aU,"outside");st.prerelease=qze;function qze(e,t){var r=md(e,t);return r&&r.prerelease.length?r.prerelease:null}s(qze,"prerelease");st.intersects=Lze;function Lze(e,t,r){return e=new Fr(e,r),t=new Fr(t,r),e.intersects(t)}s(Lze,"intersects");st.coerce=Uze;function Uze(e){if(e instanceof qt)return e;if(typeof e!="string")return null;var t=e.match(pr[cJ]);return t==null?null:md(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}s(Uze,"coerce")});var EJ=w((ITt,SJ)=>{var Bh=1e3,Mh=Bh*60,Fh=Mh*60,gd=Fh*24,jze=gd*7,$ze=gd*365.25;SJ.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return kze(e);if(r==="number"&&isFinite(e))return t.long?Wze(e):Gze(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function kze(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*$ze;case"weeks":case"week":case"w":return r*jze;case"days":case"day":case"d":return r*gd;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fh;case"minutes":case"minute":case"mins":case"min":case"m":return r*Mh;case"seconds":case"second":case"secs":case"sec":case"s":return r*Bh;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(kze,"parse");function Gze(e){var t=Math.abs(e);return t>=gd?Math.round(e/gd)+"d":t>=Fh?Math.round(e/Fh)+"h":t>=Mh?Math.round(e/Mh)+"m":t>=Bh?Math.round(e/Bh)+"s":e+"ms"}s(Gze,"fmtShort");function Wze(e){var t=Math.abs(e);return t>=gd?PT(e,t,gd,"day"):t>=Fh?PT(e,t,Fh,"hour"):t>=Mh?PT(e,t,Mh,"minute"):t>=Bh?PT(e,t,Bh,"second"):e+" ms"}s(Wze,"fmtLong");function PT(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}s(PT,"plural")});var uU=w((RTt,CJ)=>{function zze(e){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=EJ(),r.destroy=f,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function t(h){let p=0;for(let g=0;g<h.length;g++)p=(p<<5)-p+h.charCodeAt(g),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(t,"selectColor"),r.selectColor=t;function r(h){let p,g=null,_,C;function D(...O){if(!D.enabled)return;let N=D,F=Number(new Date),x=F-(p||F);N.diff=x,N.prev=p,N.curr=F,p=F,O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let P=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(G,ue)=>{if(G==="%%")return"%";P++;let be=r.formatters[ue];if(typeof be=="function"){let Q=O[P];G=be.call(N,Q),O.splice(P,1),P--}return G}),r.formatArgs.call(N,O),(N.log||r.log).apply(N,O)}return s(D,"debug"),D.namespace=h,D.useColors=r.useColors(),D.color=r.selectColor(h),D.extend=n,D.destroy=r.destroy,Object.defineProperty(D,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(_!==r.namespaces&&(_=r.namespaces,C=r.enabled(h)),C),set:O=>{g=O}}),typeof r.init=="function"&&r.init(D),D}s(r,"createDebug");function n(h,p){let g=r(this.namespace+(typeof p>"u"?":":p)+h);return g.log=this.log,g}s(n,"extend");function i(h){r.save(h),r.namespaces=h,r.names=[],r.skips=[];let p,g=(typeof h=="string"?h:"").split(/[\s,]+/),_=g.length;for(p=0;p<_;p++)g[p]&&(h=g[p].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.slice(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}s(i,"enable");function o(){let h=[...r.names.map(u),...r.skips.map(u).map(p=>"-"+p)].join(",");return r.enable(""),h}s(o,"disable");function a(h){if(h[h.length-1]==="*")return!0;let p,g;for(p=0,g=r.skips.length;p<g;p++)if(r.skips[p].test(h))return!1;for(p=0,g=r.names.length;p<g;p++)if(r.names[p].test(h))return!0;return!1}s(a,"enabled");function u(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}s(u,"toNamespace");function l(h){return h instanceof Error?h.stack||h.message:h}s(l,"coerce");function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(f,"destroy"),r.enable(r.load()),r}s(zze,"setup");CJ.exports=zze});var wJ=w((vs,BT)=>{vs.formatArgs=Vze;vs.save=Yze;vs.load=Kze;vs.useColors=Hze;vs.storage=Xze();vs.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vs.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Hze(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(Hze,"useColors");function Vze(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+BT.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}s(Vze,"formatArgs");vs.log=console.debug||console.log||(()=>{});function Yze(e){try{e?vs.storage.setItem("debug",e):vs.storage.removeItem("debug")}catch{}}s(Yze,"save");function Kze(){let e;try{e=vs.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}s(Kze,"load");function Xze(){try{return localStorage}catch{}}s(Xze,"localstorage");BT.exports=uU()(vs);var{formatters:Jze}=BT.exports;Jze.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var OJ=w((PTt,bJ)=>{"use strict";bJ.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var IJ=w((BTt,AJ)=>{"use strict";var Qze=require("os"),TJ=require("tty"),Us=OJ(),{env:En}=process,Nc;Us("no-color")||Us("no-colors")||Us("color=false")||Us("color=never")?Nc=0:(Us("color")||Us("colors")||Us("color=true")||Us("color=always"))&&(Nc=1);"FORCE_COLOR"in En&&(En.FORCE_COLOR==="true"?Nc=1:En.FORCE_COLOR==="false"?Nc=0:Nc=En.FORCE_COLOR.length===0?1:Math.min(parseInt(En.FORCE_COLOR,10),3));function cU(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}s(cU,"translateLevel");function lU(e,t){if(Nc===0)return 0;if(Us("color=16m")||Us("color=full")||Us("color=truecolor"))return 3;if(Us("color=256"))return 2;if(e&&!t&&Nc===void 0)return 0;let r=Nc||0;if(En.TERM==="dumb")return r;if(process.platform==="win32"){let n=Qze.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in En)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in En)||En.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in En)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(En.TEAMCITY_VERSION)?1:0;if(En.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in En){let n=parseInt((En.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(En.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(En.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(En.TERM)||"COLORTERM"in En?1:r}s(lU,"supportsColor");function Zze(e){let t=lU(e,e&&e.isTTY);return cU(t)}s(Zze,"getSupportLevel");AJ.exports={supportsColor:Zze,stdout:cU(lU(!0,TJ.isatty(1))),stderr:cU(lU(!0,TJ.isatty(2)))}});var RJ=w((Gn,FT)=>{var eHe=require("tty"),MT=require("util");Gn.init=aHe;Gn.log=iHe;Gn.formatArgs=rHe;Gn.save=sHe;Gn.load=oHe;Gn.useColors=tHe;Gn.destroy=MT.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Gn.colors=[6,2,3,4,5,1];try{let e=IJ();e&&(e.stderr||e).level>=2&&(Gn.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Gn.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function tHe(){return"colors"in Gn.inspectOpts?!!Gn.inspectOpts.colors:eHe.isatty(process.stderr.fd)}s(tHe,"useColors");function rHe(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${t} \x1B[0m`;e[0]=o+e[0].split(`
`).join(`
`+o),e.push(i+"m+"+FT.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=nHe()+t+" "+e[0]}s(rHe,"formatArgs");function nHe(){return Gn.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(nHe,"getDate");function iHe(...e){return process.stderr.write(MT.format(...e)+`
`)}s(iHe,"log");function sHe(e){e?process.env.DEBUG=e:delete process.env.DEBUG}s(sHe,"save");function oHe(){return process.env.DEBUG}s(oHe,"load");function aHe(e){e.inspectOpts={};let t=Object.keys(Gn.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Gn.inspectOpts[t[r]]}s(aHe,"init");FT.exports=uU()(Gn);var{formatters:DJ}=FT.exports;DJ.o=function(e){return this.inspectOpts.colors=this.useColors,MT.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};DJ.O=function(e){return this.inspectOpts.colors=this.useColors,MT.inspect(e,this.inspectOpts)}});var qT=w((qTt,dU)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?dU.exports=wJ():dU.exports=RJ()});var mU=w((LTt,qJ)=>{var xJ=9007199254740991,uHe="[object Arguments]",cHe="[object Function]",lHe="[object GeneratorFunction]",dHe=/^(?:0|[1-9]\d*)$/;function PJ(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}s(PJ,"apply");function fHe(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}s(fHe,"baseTimes");var I_=Object.prototype,D_=I_.hasOwnProperty,BJ=I_.toString,hHe=I_.propertyIsEnumerable,NJ=Math.max;function pHe(e,t){var r=bHe(e)||wHe(e)?fHe(e.length,String):[],n=r.length,i=!!n;for(var o in e)(t||D_.call(e,o))&&!(i&&(o=="length"||FJ(o,n)))&&r.push(o);return r}s(pHe,"arrayLikeKeys");function mHe(e,t,r,n){return e===void 0||fU(e,I_[r])&&!D_.call(n,r)?t:e}s(mHe,"assignInDefaults");function gHe(e,t,r){var n=e[t];(!(D_.call(e,t)&&fU(n,r))||r===void 0&&!(t in e))&&(e[t]=r)}s(gHe,"assignValue");function yHe(e){if(!pU(e))return CHe(e);var t=EHe(e),r=[];for(var n in e)n=="constructor"&&(t||!D_.call(e,n))||r.push(n);return r}s(yHe,"baseKeysIn");function MJ(e,t){return t=NJ(t===void 0?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=NJ(r.length-t,0),o=Array(i);++n<i;)o[n]=r[t+n];n=-1;for(var a=Array(t+1);++n<t;)a[n]=r[n];return a[t]=o,PJ(e,this,a)}}s(MJ,"baseRest");function vHe(e,t,r,n){r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],u=n?n(r[a],e[a],a,r,e):void 0;gHe(r,a,u===void 0?e[a]:u)}return r}s(vHe,"copyObject");function _He(e){return MJ(function(t,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&SHe(r[0],r[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var u=r[n];u&&e(t,u,n,o)}return t})}s(_He,"createAssigner");function FJ(e,t){return t=t??xJ,!!t&&(typeof e=="number"||dHe.test(e))&&e>-1&&e%1==0&&e<t}s(FJ,"isIndex");function SHe(e,t,r){if(!pU(r))return!1;var n=typeof t;return(n=="number"?hU(r)&&FJ(t,r.length):n=="string"&&t in r)?fU(r[t],e):!1}s(SHe,"isIterateeCall");function EHe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||I_;return e===r}s(EHe,"isPrototype");function CHe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}s(CHe,"nativeKeysIn");function fU(e,t){return e===t||e!==e&&t!==t}s(fU,"eq");function wHe(e){return OHe(e)&&D_.call(e,"callee")&&(!hHe.call(e,"callee")||BJ.call(e)==uHe)}s(wHe,"isArguments");var bHe=Array.isArray;function hU(e){return e!=null&&AHe(e.length)&&!THe(e)}s(hU,"isArrayLike");function OHe(e){return IHe(e)&&hU(e)}s(OHe,"isArrayLikeObject");function THe(e){var t=pU(e)?BJ.call(e):"";return t==cHe||t==lHe}s(THe,"isFunction");function AHe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=xJ}s(AHe,"isLength");function pU(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}s(pU,"isObject");function IHe(e){return!!e&&typeof e=="object"}s(IHe,"isObjectLike");var DHe=_He(function(e,t,r,n){vHe(t,NHe(t),e,n)}),RHe=MJ(function(e){return e.push(void 0,mHe),PJ(DHe,void 0,e)});function NHe(e){return hU(e)?pHe(e,!0):yHe(e)}s(NHe,"keysIn");qJ.exports=RHe});var yU=w((jTt,UJ)=>{var xHe=mU(),LJ=require("stream").Readable,PHe=require("util").inherits;function gU(e,t,r){this.db=e,this.collectionName=t,this.opts=r,r=xHe(r||{},{query:{},size:5,fields:null,raw:!1,sort:{_id:-1},maxTimeMS:void 0,promoteValues:!0}),this.query=r.query||{},this.size=r.size,this.raw=r.raw,this.fields=r.fields,this.sort=r.sort,this.maxTimeMS=r.maxTimeMS,this.promoteValues=r.promoteValues,LJ.call(this,{objectMode:!0})}s(gU,"BaseSampler");PHe(gU,LJ);Object.defineProperty(gU.prototype,"collection",{get:function(){return this.db.collection(this.collectionName,{})}});UJ.exports=gU});var $J=w((vU,jJ)=>{(function(e,t){"use strict";typeof vU=="object"?jJ.exports=t():typeof define=="function"&&define.amd?define(t):e.Reservoir=t()})(vU,function(){"use strict";var e=22,t="none";function r(a,i){var o=i||Math.random,a=Math.max(1,Math.floor(a)>>0||1),u=0,l=-1,f=F,h=e*a;t==="R"?f=N:t==="X"?h=1/0:t==="Z"&&(f=x);var p=0,g=Math.exp(-Math.log(o())/a),_=null,C=[];C.pushSome=function(){this.length=Math.min(this.length,a);for(var P=0;P<arguments.length;P++)D.call(this,arguments[P]);return this.length};var D=s(function(P){return u<a?this.push(P):(l<0&&(l=f()),l===0&&O(P,this),l--),u++,this},"addSample");function O(P,X){var G;_!==null?(G=_,_=null):G=Math.floor(o()*a),X.splice(G,1),X.push(P)}s(O,"replaceRandomSample");function N(){for(var P=u+1,X=Math.floor(o()*P),G=0;X>=a;)G++,P++,X=Math.floor(o()*P);return _=X,G}s(N,"algorithmR");function F(){var P=u,X=o(),G=0,ue;if(u<=h){for(P++,p++,ue=p/P;ue>X;)G++,P++,p++,ue=ue*p/P;return G}else return f=x,f()}s(F,"algorithmX");function x(){for(var P=u-a+1,X,G,ue;;){var be=o(),Q=u*(g-1),Se=Math.floor(Q),Ce=(u+1)/P;Ce*=Ce;var le=P+Se,ce=Math.exp(Math.log(be*Ce*le/(u+Q))/a),ve=(u+Q)/le*P/u;if(ce<=ve){g=ve/ce;break}var Pe=be*(u+1)/P*(u+Se+1)/(u+Q);for(a<Se?(X=u,ue=P+Se):(X=u-a+Se,ue=u+1),G=u+Se;G>=ue;G--)Pe=Pe*G/X,X--;if(g=Math.exp(-Math.log(o())/a),Math.exp(Math.log(Pe)/a)<=(u+Q)/u)break}return Se}return s(x,"algorithmZ"),C}return s(r,"_Reservoir"),r})});var VJ=w((GTt,HJ)=>{var kJ=1/0,WJ=9007199254740991,BHe=17976931348623157e292,GJ=NaN,MHe="[object Function]",FHe="[object GeneratorFunction]",qHe="[object Symbol]",LHe=/^\s+|\s+$/g,UHe=/^[-+]0x[0-9a-f]+$/i,jHe=/^0b[01]+$/i,$He=/^0o[0-7]+$/i,kHe=/^(?:0|[1-9]\d*)$/,GHe=parseInt,WHe=Object.prototype,zJ=WHe.toString,zHe=Math.ceil,HHe=Math.max;function VHe(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}s(VHe,"baseSlice");function YHe(e,t){return t=t??WJ,!!t&&(typeof e=="number"||kHe.test(e))&&e>-1&&e%1==0&&e<t}s(YHe,"isIndex");function KHe(e,t,r){if(!LT(r))return!1;var n=typeof t;return(n=="number"?QHe(r)&&YHe(t,r.length):n=="string"&&t in r)?JHe(r[t],e):!1}s(KHe,"isIterateeCall");function XHe(e,t,r){(r?KHe(e,t,r):t===void 0)?t=1:t=HHe(i6e(t),0);var n=e?e.length:0;if(!n||t<1)return[];for(var i=0,o=0,a=Array(zHe(n/t));i<n;)a[o++]=VHe(e,i,i+=t);return a}s(XHe,"chunk");function JHe(e,t){return e===t||e!==e&&t!==t}s(JHe,"eq");function QHe(e){return e!=null&&e6e(e.length)&&!ZHe(e)}s(QHe,"isArrayLike");function ZHe(e){var t=LT(e)?zJ.call(e):"";return t==MHe||t==FHe}s(ZHe,"isFunction");function e6e(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=WJ}s(e6e,"isLength");function LT(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}s(LT,"isObject");function t6e(e){return!!e&&typeof e=="object"}s(t6e,"isObjectLike");function r6e(e){return typeof e=="symbol"||t6e(e)&&zJ.call(e)==qHe}s(r6e,"isSymbol");function n6e(e){if(!e)return e===0?e:0;if(e=s6e(e),e===kJ||e===-kJ){var t=e<0?-1:1;return t*BHe}return e===e?e:0}s(n6e,"toFinite");function i6e(e){var t=n6e(e),r=t%1;return t===t?r?t-r:t:0}s(i6e,"toInteger");function s6e(e){if(typeof e=="number")return e;if(r6e(e))return GJ;if(LT(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=LT(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(LHe,"");var r=jHe.test(e);return r||$He.test(e)?GHe(e.slice(2),r?2:8):UHe.test(e)?GJ:+e}s(s6e,"toNumber");HJ.exports=XHe});var SU=w((zTt,XJ)=>{var KJ=yU(),o6e=require("util").inherits,UT=GL(),a6e=$J(),u6e=mU(),c6e=VJ(),YJ=qT()("mongodb-collection-sample:reservoir-sampler"),l6e=1e4,d6e=1e3;function f6e(e,t,r){r=u6e(r||{},{chunkSize:d6e,promoteValues:!0});var n=new a6e(t),i=UT.through(s(function(a){n.pushSome(a)},"write"),s(function(){var a=c6e(n,r.chunkSize),u=a.map(function(l){var f=e.find({_id:{$in:l}},{promoteValues:r.promoteValues,raw:r.raw});return r.fields&&f.project(r.fields),r.maxTimeMS&&f.maxTimeMS(r.maxTimeMS),f.stream()});UT.merge(u).pipe(UT.through(function(l){i.emit("data",l)})).on("end",function(){i.emit("end")})},"end"));return i}s(f6e,"reservoirStream");function _U(e,t,r){this.running=!1,this.chunkSize=r?r.chunkSize:void 0,KJ.call(this,e,t,r)}s(_U,"ReservoirSampler");o6e(_U,KJ);_U.prototype._read=function(){this.running||(this.running=!0,YJ("using query `%j`",this.query),this.collection.countDocuments(this.query,function(e,t){if(e)return this.emit("error",e);YJ("sampling %d documents from a collection with %d documents",this.size,t),this.collection.find(this.query,{projection:{_id:1},sort:this.sort,limit:l6e}).stream().pipe(UT.map(function(r,n){return n(null,r._id)})).pipe(f6e(this.collection,this.size,{chunkSize:this.chunkSize,fields:this.fields,maxTimeMS:this.maxTimeMS,raw:this.raw,promoteValues:this.promoteValues})).on("error",this.emit.bind(this,"error")).on("data",this.push.bind(this)).on("end",function(){this.running=!1,this.push(null)}.bind(this))}.bind(this)))};XJ.exports=_U});var js=w(xc=>{"use strict";var JJ=xc&&xc.__extends||function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(xc,"__esModule",{value:!0});xc.BSONTypeError=xc.BSONError=void 0;var h6e=function(e){JJ(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return s(t,"BSONError"),Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error);xc.BSONError=h6e;var p6e=function(e){JJ(t,e);function t(r){var n=e.call(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return s(t,"BSONTypeError"),Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);xc.BSONTypeError=p6e});var EU=w($T=>{"use strict";Object.defineProperty($T,"__esModule",{value:!0});$T.getGlobal=void 0;function jT(e){return e&&e.Math==Math&&e}s(jT,"checkForMath");function m6e(){return jT(typeof globalThis=="object"&&globalThis)||jT(typeof window=="object"&&window)||jT(typeof self=="object"&&self)||jT(typeof global=="object"&&global)||Function("return this")()}s(m6e,"getGlobal");$T.getGlobal=m6e});var Co=w(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.deprecate=mr.isObjectLike=mr.isDate=mr.haveBuffer=mr.isMap=mr.isRegExp=mr.isBigUInt64Array=mr.isBigInt64Array=mr.isUint8Array=mr.isAnyArrayBuffer=mr.randomBytes=mr.normalizedFunctionString=void 0;var CU=require("buffer"),g6e=EU();function y6e(e){return e.toString().replace("function(","function (")}s(y6e,"normalizedFunctionString");mr.normalizedFunctionString=y6e;function v6e(){var e=(0,g6e.getGlobal)();return typeof e.navigator=="object"&&e.navigator.product==="ReactNative"}s(v6e,"isReactNative");var QJ=s(function(t){var r=v6e()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=CU.Buffer.alloc(t),i=0;i<t;++i)n[i]=Math.floor(Math.random()*256);return n},"insecureRandomBytes"),_6e=s(function(){if(process.browser){if(typeof window<"u"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(r){return e.getRandomValues(CU.Buffer.alloc(r))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(r){return global.crypto.getRandomValues(CU.Buffer.alloc(r))}:QJ}else{var t=void 0;try{t=require("crypto").randomBytes}catch{}return t||QJ}},"detectRandomBytes");mr.randomBytes=_6e();function S6e(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}s(S6e,"isAnyArrayBuffer");mr.isAnyArrayBuffer=S6e;function E6e(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}s(E6e,"isUint8Array");mr.isUint8Array=E6e;function C6e(e){return Object.prototype.toString.call(e)==="[object BigInt64Array]"}s(C6e,"isBigInt64Array");mr.isBigInt64Array=C6e;function w6e(e){return Object.prototype.toString.call(e)==="[object BigUint64Array]"}s(w6e,"isBigUInt64Array");mr.isBigUInt64Array=w6e;function b6e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}s(b6e,"isRegExp");mr.isRegExp=b6e;function O6e(e){return Object.prototype.toString.call(e)==="[object Map]"}s(O6e,"isMap");mr.isMap=O6e;function T6e(){return typeof global<"u"&&typeof global.Buffer<"u"}s(T6e,"haveBuffer");mr.haveBuffer=T6e;function A6e(e){return ZJ(e)&&Object.prototype.toString.call(e)==="[object Date]"}s(A6e,"isDate");mr.isDate=A6e;function ZJ(e){return typeof e=="object"&&e!==null}s(ZJ,"isObjectLike");mr.isObjectLike=ZJ;function I6e(e,t){var r=!1;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r||(console.warn(t),r=!0),e.apply(this,i)}return s(n,"deprecated"),n}s(I6e,"deprecate");mr.deprecate=I6e});var R_=w(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.ensureBuffer=void 0;var eQ=require("buffer"),D6e=js(),R6e=Co();function N6e(e){if(ArrayBuffer.isView(e))return eQ.Buffer.from(e.buffer,e.byteOffset,e.byteLength);if((0,R6e.isAnyArrayBuffer)(e))return eQ.Buffer.from(e);throw new D6e.BSONTypeError("Must use either Buffer or TypedArray")}s(N6e,"ensureBuffer");kT.ensureBuffer=N6e});var tQ=w(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.bufferToUuidHexString=ou.uuidHexStringToBuffer=ou.uuidValidateString=void 0;var x6e=require("buffer"),P6e=js(),B6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,M6e=s(function(e){return typeof e=="string"&&B6e.test(e)},"uuidValidateString");ou.uuidValidateString=M6e;var F6e=s(function(e){if(!(0,ou.uuidValidateString)(e))throw new P6e.BSONTypeError('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return x6e.Buffer.from(t,"hex")},"uuidHexStringToBuffer");ou.uuidHexStringToBuffer=F6e;var q6e=s(function(e,t){return t===void 0&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},"bufferToUuidHexString");ou.bufferToUuidHexString=q6e});var qh=w(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.BSON_BINARY_SUBTYPE_USER_DEFINED=_e.BSON_BINARY_SUBTYPE_COLUMN=_e.BSON_BINARY_SUBTYPE_ENCRYPTED=_e.BSON_BINARY_SUBTYPE_MD5=_e.BSON_BINARY_SUBTYPE_UUID_NEW=_e.BSON_BINARY_SUBTYPE_UUID=_e.BSON_BINARY_SUBTYPE_BYTE_ARRAY=_e.BSON_BINARY_SUBTYPE_FUNCTION=_e.BSON_BINARY_SUBTYPE_DEFAULT=_e.BSON_DATA_MAX_KEY=_e.BSON_DATA_MIN_KEY=_e.BSON_DATA_DECIMAL128=_e.BSON_DATA_LONG=_e.BSON_DATA_TIMESTAMP=_e.BSON_DATA_INT=_e.BSON_DATA_CODE_W_SCOPE=_e.BSON_DATA_SYMBOL=_e.BSON_DATA_CODE=_e.BSON_DATA_DBPOINTER=_e.BSON_DATA_REGEXP=_e.BSON_DATA_NULL=_e.BSON_DATA_DATE=_e.BSON_DATA_BOOLEAN=_e.BSON_DATA_OID=_e.BSON_DATA_UNDEFINED=_e.BSON_DATA_BINARY=_e.BSON_DATA_ARRAY=_e.BSON_DATA_OBJECT=_e.BSON_DATA_STRING=_e.BSON_DATA_NUMBER=_e.JS_INT_MIN=_e.JS_INT_MAX=_e.BSON_INT64_MIN=_e.BSON_INT64_MAX=_e.BSON_INT32_MIN=_e.BSON_INT32_MAX=void 0;_e.BSON_INT32_MAX=2147483647;_e.BSON_INT32_MIN=-2147483648;_e.BSON_INT64_MAX=Math.pow(2,63)-1;_e.BSON_INT64_MIN=-Math.pow(2,63);_e.JS_INT_MAX=Math.pow(2,53);_e.JS_INT_MIN=-Math.pow(2,53);_e.BSON_DATA_NUMBER=1;_e.BSON_DATA_STRING=2;_e.BSON_DATA_OBJECT=3;_e.BSON_DATA_ARRAY=4;_e.BSON_DATA_BINARY=5;_e.BSON_DATA_UNDEFINED=6;_e.BSON_DATA_OID=7;_e.BSON_DATA_BOOLEAN=8;_e.BSON_DATA_DATE=9;_e.BSON_DATA_NULL=10;_e.BSON_DATA_REGEXP=11;_e.BSON_DATA_DBPOINTER=12;_e.BSON_DATA_CODE=13;_e.BSON_DATA_SYMBOL=14;_e.BSON_DATA_CODE_W_SCOPE=15;_e.BSON_DATA_INT=16;_e.BSON_DATA_TIMESTAMP=17;_e.BSON_DATA_LONG=18;_e.BSON_DATA_DECIMAL128=19;_e.BSON_DATA_MIN_KEY=255;_e.BSON_DATA_MAX_KEY=127;_e.BSON_BINARY_SUBTYPE_DEFAULT=0;_e.BSON_BINARY_SUBTYPE_FUNCTION=1;_e.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2;_e.BSON_BINARY_SUBTYPE_UUID=3;_e.BSON_BINARY_SUBTYPE_UUID_NEW=4;_e.BSON_BINARY_SUBTYPE_MD5=5;_e.BSON_BINARY_SUBTYPE_ENCRYPTED=6;_e.BSON_BINARY_SUBTYPE_COLUMN=7;_e.BSON_BINARY_SUBTYPE_USER_DEFINED=128});var Uh=w(Pc=>{"use strict";var L6e=Pc&&Pc.__extends||function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.UUID=Pc.Binary=void 0;var au=require("buffer"),bU=R_(),Lh=tQ(),rQ=Co(),yd=js(),nQ=qh(),N_=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=null&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new yd.BSONTypeError("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??e.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=au.Buffer.alloc(e.BUFFER_SIZE),this.position=0):(typeof t=="string"?this.buffer=au.Buffer.from(t,"binary"):Array.isArray(t)?this.buffer=au.Buffer.from(t):this.buffer=(0,bU.ensureBuffer)(t),this.position=this.buffer.byteLength)}return s(e,"Binary"),e.prototype.put=function(t){if(typeof t=="string"&&t.length!==1)throw new yd.BSONTypeError("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new yd.BSONTypeError("only accepts single character Uint8Array or Array");var r;if(typeof t=="string"?r=t.charCodeAt(0):typeof t=="number"?r=t:r=t[0],r<0||r>255)throw new yd.BSONTypeError("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=au.Buffer.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var n=au.Buffer.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set((0,bU.ensureBuffer)(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):typeof t=="string"&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return r=r&&r>0?r:this.position,this.buffer.slice(t,t+r)},e.prototype.value=function(t){return t=!!t,t&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new OU(this.buffer.slice(0,this.position));throw new yd.BSONError('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(e.SUBTYPE_UUID,'" is currently supported.'))},e.fromExtendedJSON=function(t,r){r=r||{};var n,i;if("$binary"in t?r.legacy&&typeof t.$binary=="string"&&"$type"in t?(i=t.$type?parseInt(t.$type,16):0,n=au.Buffer.from(t.$binary,"base64")):typeof t.$binary!="string"&&(i=t.$binary.subType?parseInt(t.$binary.subType,16):0,n=au.Buffer.from(t.$binary.base64,"base64")):"$uuid"in t&&(i=4,n=(0,Lh.uuidHexStringToBuffer)(t.$uuid)),!n)throw new yd.BSONTypeError("Unexpected Binary Extended JSON format ".concat(JSON.stringify(t)));return i===nQ.BSON_BINARY_SUBTYPE_UUID_NEW?new OU(n):new e(n,i)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Pc.Binary=N_;Object.defineProperty(N_.prototype,"_bsontype",{value:"Binary"});var wU=16,OU=function(e){L6e(t,e);function t(r){var n=this,i,o;if(r==null)i=t.generate();else if(r instanceof t)i=au.Buffer.from(r.buffer),o=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===wU)i=(0,bU.ensureBuffer)(r);else if(typeof r=="string")i=(0,Lh.uuidHexStringToBuffer)(r);else throw new yd.BSONTypeError("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return n=e.call(this,i,nQ.BSON_BINARY_SUBTYPE_UUID_NEW)||this,n.__id=o,n}return s(t,"UUID"),Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,t.cacheHexString&&(this.__id=(0,Lh.bufferToUuidHexString)(r))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(r){if(r===void 0&&(r=!0),t.cacheHexString&&this.__id)return this.__id;var n=(0,Lh.bufferToUuidHexString)(this.id,r);return t.cacheHexString&&(this.__id=n),n},t.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(r){if(!r)return!1;if(r instanceof t)return r.id.equals(this.id);try{return new t(r).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new N_(this.id,N_.SUBTYPE_UUID)},t.generate=function(){var r=(0,rQ.randomBytes)(wU);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,au.Buffer.from(r)},t.isValid=function(r){return r?r instanceof t?!0:typeof r=="string"?(0,Lh.uuidValidateString)(r):(0,rQ.isUint8Array)(r)?r.length!==wU?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},t.createFromHexString=function(r){var n=(0,Lh.uuidHexStringToBuffer)(r);return new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}(N_);Pc.UUID=OU});var WT=w(GT=>{"use strict";Object.defineProperty(GT,"__esModule",{value:!0});GT.Code=void 0;var iQ=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return s(e,"Code"),e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},e}();GT.Code=iQ;Object.defineProperty(iQ.prototype,"_bsontype",{value:"Code"})});var zT=w(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.DBRef=jh.isDBRefLike=void 0;var U6e=Co();function j6e(e){return(0,U6e.isObjectLike)(e)&&e.$id!=null&&typeof e.$ref=="string"&&(e.$db==null||typeof e.$db=="string")}s(j6e,"isDBRefLike");jh.isDBRefLike=j6e;var sQ=function(){function e(t,r,n,i){if(!(this instanceof e))return new e(t,r,n,i);var o=t.split(".");o.length===2&&(n=o.shift(),t=o.shift()),this.collection=t,this.oid=r,this.db=n,this.fields=i||{}}return s(e,"DBRef"),Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){t=t||{};var r={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},e}();jh.DBRef=sQ;Object.defineProperty(sQ.prototype,"_bsontype",{value:"DBRef"})});var vd=w(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0});HT.Long=void 0;var $6e=Co(),$s=void 0;try{$s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var oQ=65536,k6e=1<<24,$h=oQ*oQ,lQ=$h*$h,aQ=lQ/2,uQ={},cQ={},TU=function(){function e(t,r,n){if(t===void 0&&(t=0),!(this instanceof e))return new e(t,r,n);typeof t=="bigint"?Object.assign(this,e.fromBigInt(t,!!r)):typeof t=="string"?Object.assign(this,e.fromString(t,!!r)):(this.low=t|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return s(e,"Long"),e.fromBits=function(t,r,n){return new e(t,r,n)},e.fromInt=function(t,r){var n,i,o;return r?(t>>>=0,(o=0<=t&&t<256)&&(i=cQ[t],i)?i:(n=e.fromBits(t,(t|0)<0?-1:0,!0),o&&(cQ[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(i=uQ[t],i)?i:(n=e.fromBits(t,t<0?-1:0,!1),o&&(uQ[t]=n),n))},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=lQ)return e.MAX_UNSIGNED_VALUE}else{if(t<=-aQ)return e.MIN_VALUE;if(t+1>=aQ)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%$h|0,t/$h|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return e.fromString(t.substring(1),r,n).neg();for(var o=e.fromNumber(Math.pow(n,8)),a=e.ZERO,u=0;u<t.length;u+=8){var l=Math.min(8,t.length-u),f=parseInt(t.substring(u,u+l),n);if(l<8){var h=e.fromNumber(Math.pow(n,l));a=a.mul(h).add(e.fromNumber(f))}else a=a.mul(o),a=a.add(e.fromNumber(f))}return a.unsigned=r,a},e.fromBytes=function(t,r,n){return n?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return(0,$6e.isObjectLike)(t)&&t.__isLong__===!0},e.fromValue=function(t,r){return typeof t=="number"?e.fromNumber(t,r):typeof t=="string"?e.fromString(t,r):e.fromBits(t.low,t.high,typeof r=="boolean"?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,a=t.high>>>16,u=t.high&65535,l=t.low>>>16,f=t.low&65535,h=0,p=0,g=0,_=0;return _+=o+f,g+=_>>>16,_&=65535,g+=i+l,p+=g>>>16,g&=65535,p+=n+u,h+=p>>>16,p&=65535,h+=r+a,h&=65535,e.fromBits(g<<16|_,h<<16|p,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if($s){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?$s.div_u:$s.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,$s.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var n,i,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;o=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var a=this.shr(1);return n=a.div(t).shl(1),n.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(i=this.sub(t.mul(n)),o=n.add(i.div(t)),o)}else if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=e.ZERO}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),l=u<=48?1:Math.pow(2,u-48),f=e.fromNumber(n),h=f.mul(t);h.isNegative()||h.gt(i);)n-=l,f=e.fromNumber(n,this.unsigned),h=f.mul(t);f.isZero()&&(f=e.ONE),o=o.add(f),i=i.sub(h)}return o},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(t&1<<r);r--);return this.high!==0?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),$s){var r=(this.unsigned?$s.rem_u:$s.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,$s.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),$s){var r=$s.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,$s.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,u=t.high>>>16,l=t.high&65535,f=t.low>>>16,h=t.low&65535,p=0,g=0,_=0,C=0;return C+=a*h,_+=C>>>16,C&=65535,_+=o*h,g+=_>>>16,_&=65535,_+=a*f,g+=_>>>16,_&=65535,g+=i*h,p+=g>>>16,g&=65535,g+=o*f,p+=g>>>16,g&=65535,g+=a*l,p+=g>>>16,g&=65535,p+=n*h+i*f+o*l+a*u,p&=65535,e.fromBits(_<<16|C,p<<16|g,this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var n=this.low;return e.fromBits(n>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*$h+(this.low>>>0):this.high*$h+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),n=this.div(r),i=n.mul(r).sub(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=e.fromNumber(Math.pow(t,6),this.unsigned),a=this,u="";;){var l=a.div(o),f=a.sub(l.mul(o)).toInt()>>>0,h=f.toString(t);if(a=l,a.isZero())return h+u;for(;h.length<6;)h="0"+h;u=""+h+u}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var n=e.fromString(t.$numberLong);return r&&r.relaxed?n.toNumber():n},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},e.TWO_PWR_24=e.fromInt(k6e),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();HT.Long=TU;Object.defineProperty(TU.prototype,"__isLong__",{value:!0});Object.defineProperty(TU.prototype,"_bsontype",{value:"Long"})});var YT=w(VT=>{"use strict";Object.defineProperty(VT,"__esModule",{value:!0});VT.Decimal128=void 0;var kh=require("buffer"),Wh=js(),gt=vd(),G6e=Co(),W6e=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,z6e=/^(\+|-)?(Infinity|inf)$/i,H6e=/^(\+|-)?NaN$/i,x_=6111,AU=-6176,dQ=6176,V6e=34,IU=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),fQ=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),hQ=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Y6e=/^([-+])?(\d+)?$/,K6e=31,pQ=16383,X6e=30,J6e=31;function mQ(e){return!isNaN(parseInt(e,10))}s(mQ,"isDigit");function Q6e(e){var t=gt.Long.fromNumber(1e9),r=gt.Long.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new gt.Long(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}s(Q6e,"divideu128");function Z6e(e,t){if(!e&&!t)return{high:gt.Long.fromNumber(0),low:gt.Long.fromNumber(0)};var r=e.shiftRightUnsigned(32),n=new gt.Long(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new gt.Long(t.getLowBits(),0),a=r.multiply(i),u=r.multiply(o),l=n.multiply(i),f=n.multiply(o);return a=a.add(u.shiftRightUnsigned(32)),u=new gt.Long(u.getLowBits(),0).add(l).add(f.shiftRightUnsigned(32)),a=a.add(u.shiftRightUnsigned(32)),f=u.shiftLeft(32).add(new gt.Long(f.getLowBits(),0)),{high:a,low:f}}s(Z6e,"multiply64x2");function eVe(e,t){var r=e.high>>>0,n=t.high>>>0;if(r<n)return!0;if(r===n){var i=e.low>>>0,o=t.low>>>0;if(i<o)return!0}return!1}s(eVe,"lessThan");function Gh(e,t){throw new Wh.BSONTypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}s(Gh,"invalidErr");var gQ=function(){function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="string")this.bytes=e.fromString(t).bytes;else if((0,G6e.isUint8Array)(t)){if(t.byteLength!==16)throw new Wh.BSONTypeError("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new Wh.BSONTypeError("Decimal128 must take a Buffer or string")}return s(e,"Decimal128"),e.fromString=function(t){var r=!1,n=!1,i=!1,o=0,a=0,u=0,l=0,f=0,h=[0],p=0,g=0,_=0,C=0,D=0,O=0,N=new gt.Long(0,0),F=new gt.Long(0,0),x=0,P=0;if(t.length>=7e3)throw new Wh.BSONTypeError(""+t+" not a valid Decimal128 string");var X=t.match(W6e),G=t.match(z6e),ue=t.match(H6e);if(!X&&!G&&!ue||t.length===0)throw new Wh.BSONTypeError(""+t+" not a valid Decimal128 string");if(X){var be=X[2],Q=X[4],Se=X[5],Ce=X[6];Q&&Ce===void 0&&Gh(t,"missing exponent power"),Q&&be===void 0&&Gh(t,"missing exponent base"),Q===void 0&&(Se||Ce)&&Gh(t,"missing e before exponent")}if((t[P]==="+"||t[P]==="-")&&(r=t[P++]==="-"),!mQ(t[P])&&t[P]!=="."){if(t[P]==="i"||t[P]==="I")return new e(kh.Buffer.from(r?fQ:hQ));if(t[P]==="N")return new e(kh.Buffer.from(IU))}for(;mQ(t[P])||t[P]===".";){if(t[P]==="."){n&&Gh(t,"contains multiple periods"),n=!0,P=P+1;continue}p<34&&(t[P]!=="0"||i)&&(i||(f=a),i=!0,h[g++]=parseInt(t[P],10),p=p+1),i&&(u=u+1),n&&(l=l+1),a=a+1,P=P+1}if(n&&!a)throw new Wh.BSONTypeError(""+t+" not a valid Decimal128 string");if(t[P]==="e"||t[P]==="E"){var le=t.substr(++P).match(Y6e);if(!le||!le[2])return new e(kh.Buffer.from(IU));D=parseInt(le[0],10),P=P+le[0].length}if(t[P])return new e(kh.Buffer.from(IU));if(_=0,!p)_=0,C=0,h[0]=0,u=1,p=1,o=0;else if(C=p-1,o=u,o!==1)for(;h[f+o-1]===0;)o=o-1;for(D<=l&&l-D>16384?D=AU:D=D-l;D>x_;){if(C=C+1,C-_>V6e){var ce=h.join("");if(ce.match(/^0+$/)){D=x_;break}Gh(t,"overflow")}D=D-1}for(;D<AU||p<u;){if(C===0&&o<p){D=AU,o=0;break}if(p<u?u=u-1:C=C-1,D<x_)D=D+1;else{var ce=h.join("");if(ce.match(/^0+$/)){D=x_;break}Gh(t,"overflow")}}if(C-_+1<o){var ve=a;n&&(f=f+1,ve=ve+1),r&&(f=f+1,ve=ve+1);var Pe=parseInt(t[f+C+1],10),Ee=0;if(Pe>=5&&(Ee=1,Pe===5)){for(Ee=h[C]%2===1?1:0,O=f+C+2;O<ve;O++)if(parseInt(t[O],10)){Ee=1;break}}if(Ee){for(var Oe=C;Oe>=0;Oe--)if(++h[Oe]>9&&(h[Oe]=0,Oe===0))if(D<x_)D=D+1,h[Oe]=1;else return new e(kh.Buffer.from(r?fQ:hQ))}}if(N=gt.Long.fromNumber(0),F=gt.Long.fromNumber(0),o===0)N=gt.Long.fromNumber(0),F=gt.Long.fromNumber(0);else if(C-_<17){var Oe=_;for(F=gt.Long.fromNumber(h[Oe++]),N=new gt.Long(0,0);Oe<=C;Oe++)F=F.multiply(gt.Long.fromNumber(10)),F=F.add(gt.Long.fromNumber(h[Oe]))}else{var Oe=_;for(N=gt.Long.fromNumber(h[Oe++]);Oe<=C-17;Oe++)N=N.multiply(gt.Long.fromNumber(10)),N=N.add(gt.Long.fromNumber(h[Oe]));for(F=gt.Long.fromNumber(h[Oe++]);Oe<=C;Oe++)F=F.multiply(gt.Long.fromNumber(10)),F=F.add(gt.Long.fromNumber(h[Oe]))}var dt=Z6e(N,gt.Long.fromString("100000000000000000"));dt.low=dt.low.add(F),eVe(dt.low,F)&&(dt.high=dt.high.add(gt.Long.fromNumber(1))),x=D+dQ;var Fe={low:gt.Long.fromNumber(0),high:gt.Long.fromNumber(0)};dt.high.shiftRightUnsigned(49).and(gt.Long.fromNumber(1)).equals(gt.Long.fromNumber(1))?(Fe.high=Fe.high.or(gt.Long.fromNumber(3).shiftLeft(61)),Fe.high=Fe.high.or(gt.Long.fromNumber(x).and(gt.Long.fromNumber(16383).shiftLeft(47))),Fe.high=Fe.high.or(dt.high.and(gt.Long.fromNumber(0x7fffffffffff)))):(Fe.high=Fe.high.or(gt.Long.fromNumber(x&16383).shiftLeft(49)),Fe.high=Fe.high.or(dt.high.and(gt.Long.fromNumber(562949953421311)))),Fe.low=dt.low,r&&(Fe.high=Fe.high.or(gt.Long.fromString("9223372036854775808")));var rt=kh.Buffer.alloc(16);return P=0,rt[P++]=Fe.low.low&255,rt[P++]=Fe.low.low>>8&255,rt[P++]=Fe.low.low>>16&255,rt[P++]=Fe.low.low>>24&255,rt[P++]=Fe.low.high&255,rt[P++]=Fe.low.high>>8&255,rt[P++]=Fe.low.high>>16&255,rt[P++]=Fe.low.high>>24&255,rt[P++]=Fe.high.low&255,rt[P++]=Fe.high.low>>8&255,rt[P++]=Fe.high.low>>16&255,rt[P++]=Fe.high.low>>24&255,rt[P++]=Fe.high.high&255,rt[P++]=Fe.high.high>>8&255,rt[P++]=Fe.high.high>>16&255,rt[P++]=Fe.high.high>>24&255,new e(rt)},e.prototype.toString=function(){for(var t,r=0,n=new Array(36),i=0;i<n.length;i++)n[i]=0;var o=0,a=!1,u,l={parts:[0,0,0,0]},f,h,p=[];o=0;var g=this.bytes,_=g[o++]|g[o++]<<8|g[o++]<<16|g[o++]<<24,C=g[o++]|g[o++]<<8|g[o++]<<16|g[o++]<<24,D=g[o++]|g[o++]<<8|g[o++]<<16|g[o++]<<24,O=g[o++]|g[o++]<<8|g[o++]<<16|g[o++]<<24;o=0;var N={low:new gt.Long(_,C),high:new gt.Long(D,O)};N.high.lessThan(gt.Long.ZERO)&&p.push("-");var F=O>>26&K6e;if(F>>3===3){if(F===X6e)return p.join("")+"Infinity";if(F===J6e)return"NaN";t=O>>15&pQ,u=8+(O>>14&1)}else u=O>>14&7,t=O>>17&pQ;var x=t-dQ;if(l.parts[0]=(O&16383)+((u&15)<<14),l.parts[1]=D,l.parts[2]=C,l.parts[3]=_,l.parts[0]===0&&l.parts[1]===0&&l.parts[2]===0&&l.parts[3]===0)a=!0;else for(h=3;h>=0;h--){var P=0,X=Q6e(l);if(l=X.quotient,P=X.rem.low,!!P)for(f=8;f>=0;f--)n[h*9+f]=P%10,P=Math.floor(P/10)}if(a)r=1,n[o]=0;else for(r=36;!n[o];)r=r-1,o=o+1;var G=r-1+x;if(G>=34||G<=-7||x>0){if(r>34)return p.push("".concat(0)),x>0?p.push("E+".concat(x)):x<0&&p.push("E".concat(x)),p.join("");p.push("".concat(n[o++])),r=r-1,r&&p.push(".");for(var i=0;i<r;i++)p.push("".concat(n[o++]));p.push("E"),G>0?p.push("+".concat(G)):p.push("".concat(G))}else if(x>=0)for(var i=0;i<r;i++)p.push("".concat(n[o++]));else{var ue=r+x;if(ue>0)for(var i=0;i<ue;i++)p.push("".concat(n[o++]));else p.push("0");for(p.push(".");ue++<0;)p.push("0");for(var i=0;i<r-Math.max(ue-1,0);i++)p.push("".concat(n[o++]))}return p.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},e}();VT.Decimal128=gQ;Object.defineProperty(gQ.prototype,"_bsontype",{value:"Decimal128"})});var XT=w(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.Double=void 0;var yQ=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return s(e,"Double"),e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},e.fromExtendedJSON=function(t,r){var n=parseFloat(t.$numberDouble);return r&&r.relaxed?n:new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},e}();KT.Double=yQ;Object.defineProperty(yQ.prototype,"_bsontype",{value:"Double"})});var QT=w(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});JT.Int32=void 0;var vQ=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t|0}return s(e,"Int32"),e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},e}();JT.Int32=vQ;Object.defineProperty(vQ.prototype,"_bsontype",{value:"Int32"})});var eA=w(ZT=>{"use strict";Object.defineProperty(ZT,"__esModule",{value:!0});ZT.MaxKey=void 0;var _Q=function(){function e(){if(!(this instanceof e))return new e}return s(e,"MaxKey"),e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();ZT.MaxKey=_Q;Object.defineProperty(_Q.prototype,"_bsontype",{value:"MaxKey"})});var rA=w(tA=>{"use strict";Object.defineProperty(tA,"__esModule",{value:!0});tA.MinKey=void 0;var SQ=function(){function e(){if(!(this instanceof e))return new e}return s(e,"MinKey"),e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();tA.MinKey=SQ;Object.defineProperty(SQ.prototype,"_bsontype",{value:"MinKey"})});var iA=w(nA=>{"use strict";Object.defineProperty(nA,"__esModule",{value:!0});nA.ObjectId=void 0;var uu=require("buffer"),tVe=R_(),P_=js(),zh=Co(),rVe=new RegExp("^[0-9a-fA-F]{24}$"),_d=null,ra=Symbol("id"),na=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new P_.BSONTypeError("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?r=uu.Buffer.from(t.toHexString(),"hex"):r=t.id}else r=t;if(r==null||typeof r=="number")this[ra]=e.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[ra]=r instanceof uu.Buffer?r:(0,tVe.ensureBuffer)(r);else if(typeof r=="string")if(r.length===12){var n=uu.Buffer.from(r);if(n.byteLength===12)this[ra]=n;else throw new P_.BSONTypeError("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&rVe.test(r))this[ra]=uu.Buffer.from(r,"hex");else throw new P_.BSONTypeError("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new P_.BSONTypeError("Argument passed in does not match the accepted types");e.cacheHexString&&(this.__id=this.id.toString("hex"))}return s(e,"ObjectId"),Object.defineProperty(e.prototype,"id",{get:function(){return this[ra]},set:function(t){this[ra]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),n=uu.Buffer.alloc(12);return n.writeUInt32BE(t,0),_d===null&&(_d=(0,zh.randomBytes)(5)),n[4]=_d[0],n[5]=_d[1],n[6]=_d[2],n[7]=_d[3],n[8]=_d[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(t==null)return!1;if(t instanceof e)return this[ra][11]===t[ra][11]&&this[ra].equals(t[ra]);if(typeof t=="string"&&e.isValid(t)&&t.length===12&&(0,zh.isUint8Array)(this.id))return t===uu.Buffer.prototype.toString.call(this.id,"latin1");if(typeof t=="string"&&e.isValid(t)&&t.length===24)return t.toLowerCase()===this.toHexString();if(typeof t=="string"&&e.isValid(t)&&t.length===12)return uu.Buffer.from(t).equals(this.id);if(typeof t=="object"&&"toHexString"in t&&typeof t.toHexString=="function"){var r=t.toHexString(),n=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===n}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(Math.floor(r)*1e3),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=uu.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new P_.BSONTypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(uu.Buffer.from(t,"hex"))},e.isValid=function(t){if(t==null)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},e.index=Math.floor(Math.random()*16777215),e}();nA.ObjectId=na;Object.defineProperty(na.prototype,"generate",{value:(0,zh.deprecate)(function(e){return na.generate(e)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(na.prototype,"getInc",{value:(0,zh.deprecate)(function(){return na.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(na.prototype,"get_inc",{value:(0,zh.deprecate)(function(){return na.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(na,"get_inc",{value:(0,zh.deprecate)(function(){return na.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(na.prototype,"_bsontype",{value:"ObjectID"})});var aA=w(oA=>{"use strict";Object.defineProperty(oA,"__esModule",{value:!0});oA.BSONRegExp=void 0;var sA=js();function nVe(e){return e.split("").sort().join("")}s(nVe,"alphabetize");var EQ=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=nVe(r??""),this.pattern.indexOf("\0")!==-1)throw new sA.BSONError("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new sA.BSONError("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new sA.BSONError("The regular expression option [".concat(this.options[n],"] is not supported"))}return s(e,"BSONRegExp"),e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new e(t.$regex,e.parseOptions(t.$options));if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new sA.BSONTypeError("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(t)))},e}();oA.BSONRegExp=EQ;Object.defineProperty(EQ.prototype,"_bsontype",{value:"BSONRegExp"})});var cA=w(uA=>{"use strict";Object.defineProperty(uA,"__esModule",{value:!0});uA.BSONSymbol=void 0;var CQ=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return s(e,"BSONSymbol"),e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();uA.BSONSymbol=CQ;Object.defineProperty(CQ.prototype,"_bsontype",{value:"Symbol"})});var B_=w(cu=>{"use strict";var iVe=cu&&cu.__extends||function(){var e=s(function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)},"extendStatics");return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}s(n,"__"),t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(cu,"__esModule",{value:!0});cu.Timestamp=cu.LongWithoutOverridesClass=void 0;var Hh=vd(),sVe=Co();cu.LongWithoutOverridesClass=Hh.Long;var oVe=function(e){iVe(t,e);function t(r,n){var i=this;return i instanceof t?(Hh.Long.isLong(r)?i=e.call(this,r.low,r.high,!0)||this:(0,sVe.isObjectLike)(r)&&typeof r.t<"u"&&typeof r.i<"u"?i=e.call(this,r.i,r.t,!0)||this:i=e.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new t(r,n)}return s(t,"Timestamp"),t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(Hh.Long.fromInt(r,!0))},t.fromNumber=function(r){return new t(Hh.Long.fromNumber(r,!0))},t.fromBits=function(r,n){return new t(r,n)},t.fromString=function(r,n){return new t(Hh.Long.fromString(r,!0,n))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},t.MAX_VALUE=Hh.Long.MAX_UNSIGNED_VALUE,t}(cu.LongWithoutOverridesClass);cu.Timestamp=oVe});var fA=w(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.EJSON=Sd.isBSONType=void 0;var DU=Uh(),xU=WT(),M_=zT(),bQ=YT(),PU=XT(),F_=js(),BU=QT(),lA=vd(),OQ=eA(),TQ=rA(),RU=iA(),NU=Co(),dA=aA(),AQ=cA(),IQ=B_();function DQ(e){return(0,NU.isObjectLike)(e)&&Reflect.has(e,"_bsontype")&&typeof e._bsontype=="string"}s(DQ,"isBSONType");Sd.isBSONType=DQ;var RQ=2147483647,NQ=-2147483648,xQ=9223372036854776e3,PQ=-9223372036854776e3,aVe={$oid:RU.ObjectId,$binary:DU.Binary,$uuid:DU.Binary,$symbol:AQ.BSONSymbol,$numberInt:BU.Int32,$numberDecimal:bQ.Decimal128,$numberDouble:PU.Double,$numberLong:lA.Long,$minKey:TQ.MinKey,$maxKey:OQ.MaxKey,$regex:dA.BSONRegExp,$regularExpression:dA.BSONRegExp,$timestamp:IQ.Timestamp};function BQ(e,t){if(t===void 0&&(t={}),typeof e=="number"){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=NQ&&e<=RQ)return new BU.Int32(e);if(e>=PQ&&e<=xQ)return lA.Long.fromNumber(e)}return new PU.Double(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(p){return p.startsWith("$")&&e[p]!=null}),n=0;n<r.length;n++){var i=aVe[r[n]];if(i)return i.fromExtendedJSON(e,t)}if(e.$date!=null){var o=e.$date,a=new Date;return t.legacy?typeof o=="number"?a.setTime(o):typeof o=="string"&&a.setTime(Date.parse(o)):typeof o=="string"?a.setTime(Date.parse(o)):lA.Long.isLong(o)?a.setTime(o.toNumber()):typeof o=="number"&&t.relaxed&&a.setTime(o),a}if(e.$code!=null){var u=Object.assign({},e);return e.$scope&&(u.$scope=BQ(e.$scope)),xU.Code.fromExtendedJSON(e)}if((0,M_.isDBRefLike)(e)||e.$dbPointer){var l=e.$ref?e:e.$dbPointer;if(l instanceof M_.DBRef)return l;var f=Object.keys(l).filter(function(p){return p.startsWith("$")}),h=!0;if(f.forEach(function(p){["$ref","$id","$db"].indexOf(p)===-1&&(h=!1)}),h)return M_.DBRef.fromExtendedJSON(l)}return e}s(BQ,"deserializeValue");function uVe(e,t){return e.map(function(r,n){t.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return Bc(r,t)}finally{t.seenObjects.pop()}})}s(uVe,"serializeArray");function wQ(e){var t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}s(wQ,"getISOString");function Bc(e,t){if((typeof e=="object"||typeof e=="function")&&e!==null){var r=t.seenObjects.findIndex(function(N){return N.obj===e});if(r!==-1){var n=t.seenObjects.map(function(N){return N.propertyName}),i=n.slice(0,r).map(function(N){return"".concat(N," -> ")}).join(""),o=n[r],a=" -> "+n.slice(r+1,n.length-1).map(function(N){return"".concat(N," -> ")}).join(""),u=n[n.length-1],l=" ".repeat(i.length+o.length/2),f="-".repeat(a.length+(o.length+u.length)/2-1);throw new F_.BSONTypeError(`Converting circular structure to EJSON:
`+"    ".concat(i).concat(o).concat(a).concat(u,`
`)+"    ".concat(l,"\\").concat(f,"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return uVe(e,t);if(e===void 0)return null;if(e instanceof Date||(0,NU.isDate)(e)){var h=e.getTime(),p=h>-1&&h<2534023188e5;return t.legacy?t.relaxed&&p?{$date:e.getTime()}:{$date:wQ(e)}:t.relaxed&&p?{$date:wQ(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Math.floor(e)===e){var g=e>=NQ&&e<=RQ,_=e>=PQ&&e<=xQ;if(g)return{$numberInt:e.toString()};if(_)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||(0,NU.isRegExp)(e)){var C=e.flags;if(C===void 0){var D=e.toString().match(/[gimuy]*$/);D&&(C=D[0])}var O=new dA.BSONRegExp(e.source,C);return O.toExtendedJSON(t)}return e!=null&&typeof e=="object"?lVe(e,t):e}s(Bc,"serializeValue");var cVe={Binary:function(e){return new DU.Binary(e.value(),e.sub_type)},Code:function(e){return new xU.Code(e.code,e.scope)},DBRef:function(e){return new M_.DBRef(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new bQ.Decimal128(e.bytes)},Double:function(e){return new PU.Double(e.value)},Int32:function(e){return new BU.Int32(e.value)},Long:function(e){return lA.Long.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_)},MaxKey:function(){return new OQ.MaxKey},MinKey:function(){return new TQ.MinKey},ObjectID:function(e){return new RU.ObjectId(e)},ObjectId:function(e){return new RU.ObjectId(e)},BSONRegExp:function(e){return new dA.BSONRegExp(e.pattern,e.options)},Symbol:function(e){return new AQ.BSONSymbol(e.value)},Timestamp:function(e){return IQ.Timestamp.fromBits(e.low,e.high)}};function lVe(e,t){if(e==null||typeof e!="object")throw new F_.BSONError("not an object instance");var r=e._bsontype;if(typeof r>"u"){var n={};for(var i in e){t.seenObjects.push({propertyName:i,obj:null});try{var o=Bc(e[i],t);i==="__proto__"?Object.defineProperty(n,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):n[i]=o}finally{t.seenObjects.pop()}}return n}else if(DQ(e)){var a=e;if(typeof a.toExtendedJSON!="function"){var u=cVe[e._bsontype];if(!u)throw new F_.BSONTypeError("Unrecognized or invalid _bsontype: "+e._bsontype);a=u(a)}return r==="Code"&&a.scope?a=new xU.Code(a.code,Bc(a.scope,t)):r==="DBRef"&&a.oid&&(a=new M_.DBRef(Bc(a.collection,t),Bc(a.oid,t),Bc(a.db,t),Bc(a.fields,t))),a.toExtendedJSON(t)}else throw new F_.BSONError("_bsontype must be a string, but was: "+typeof r)}s(lVe,"serializeDocument");var dVe;(function(e){function t(o,a){var u=Object.assign({},{relaxed:!0,legacy:!1},a);return typeof u.relaxed=="boolean"&&(u.strict=!u.relaxed),typeof u.strict=="boolean"&&(u.relaxed=!u.strict),JSON.parse(o,function(l,f){if(l.indexOf("\0")!==-1)throw new F_.BSONError("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(l)));return BQ(f,u)})}s(t,"parse"),e.parse=t;function r(o,a,u,l){u!=null&&typeof u=="object"&&(l=u,u=0),a!=null&&typeof a=="object"&&!Array.isArray(a)&&(l=a,a=void 0,u=0);var f=Object.assign({relaxed:!0,legacy:!1},l,{seenObjects:[{propertyName:"(root)",obj:null}]}),h=Bc(o,f);return JSON.stringify(h,a,u)}s(r,"stringify"),e.stringify=r;function n(o,a){return a=a||{},JSON.parse(r(o,a))}s(n,"serialize"),e.serialize=n;function i(o,a){return a=a||{},t(JSON.stringify(o),a)}s(i,"deserialize"),e.deserialize=i})(dVe=Sd.EJSON||(Sd.EJSON={}))});var FU=w(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.Map=void 0;var fVe=EU(),MU;Vh.Map=MU;var MQ=(0,fVe.getGlobal)();MQ.Map?Vh.Map=MU=MQ.Map:Vh.Map=MU=function(){function e(t){t===void 0&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(t[r]!=null){var n=t[r],i=n[0],o=n[1];this._keys.push(i),this._values[i]={v:o,i:this._keys.length-1}}}return s(e,"Map"),e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return r==null?!1:(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?[n,t._values[n].v]:void 0,done:n===void 0}}}},e.prototype.forEach=function(t,r){r=r||this;for(var n=0;n<this._keys.length;n++){var i=this._keys[n];t.call(r,this._values[i].v,i,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return this._values[t]!=null},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var n=t._keys[r++];return{value:n!==void 0?t._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}()});var qQ=w(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0});pA.calculateObjectSize=void 0;var Ut=require("buffer"),hVe=Uh(),hA=qh(),Yh=Co();function q_(e,t,r){var n=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)n+=FQ(i.toString(),e[i],t,!0,r);else{typeof(e==null?void 0:e.toBSON)=="function"&&(e=e.toBSON());for(var o in e)n+=FQ(o,e[o],t,!1,r)}return n}s(q_,"calculateObjectSize");pA.calculateObjectSize=q_;function FQ(e,t,r,n,i){switch(r===void 0&&(r=!1),n===void 0&&(n=!1),i===void 0&&(i=!1),typeof(t==null?void 0:t.toBSON)=="function"&&(t=t.toBSON()),typeof t){case"string":return 1+Ut.Buffer.byteLength(e,"utf8")+1+4+Ut.Buffer.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=hA.JS_INT_MIN&&t<=hA.JS_INT_MAX&&t>=hA.BSON_INT32_MIN&&t<=hA.BSON_INT32_MAX?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+5:(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+9;case"undefined":return n||!i?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+2;case"object":if(t==null||t._bsontype==="MinKey"||t._bsontype==="MaxKey")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1;if(t._bsontype==="ObjectId"||t._bsontype==="ObjectID")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||(0,Yh.isDate)(t))return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+9;if(ArrayBuffer.isView(t)||t instanceof ArrayBuffer||(0,Yh.isAnyArrayBuffer)(t))return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+6+t.byteLength;if(t._bsontype==="Long"||t._bsontype==="Double"||t._bsontype==="Timestamp")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+9;if(t._bsontype==="Decimal128")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+17;if(t._bsontype==="Code")return t.scope!=null&&Object.keys(t.scope).length>0?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Ut.Buffer.byteLength(t.code.toString(),"utf8")+1+q_(t.scope,r,i):(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+4+Ut.Buffer.byteLength(t.code.toString(),"utf8")+1;if(t._bsontype==="Binary"){var o=t;return o.sub_type===hVe.Binary.SUBTYPE_BYTE_ARRAY?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+(o.position+1+4+1+4):(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+(o.position+1+4+1)}else{if(t._bsontype==="Symbol")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+Ut.Buffer.byteLength(t.value,"utf8")+4+1+1;if(t._bsontype==="DBRef"){var a=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return t.db!=null&&(a.$db=t.db),(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+q_(a,r,i)}else return t instanceof RegExp||(0,Yh.isRegExp)(t)?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+Ut.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t._bsontype==="BSONRegExp"?(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+Ut.Buffer.byteLength(t.pattern,"utf8")+1+Ut.Buffer.byteLength(t.options,"utf8")+1:(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+q_(t,r,i)+1}case"function":if(t instanceof RegExp||(0,Yh.isRegExp)(t)||String.call(t)==="[object RegExp]")return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+Ut.Buffer.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(r&&t.scope!=null&&Object.keys(t.scope).length>0)return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+4+4+Ut.Buffer.byteLength((0,Yh.normalizedFunctionString)(t),"utf8")+1+q_(t.scope,r,i);if(r)return(e!=null?Ut.Buffer.byteLength(e,"utf8")+1:0)+1+4+Ut.Buffer.byteLength((0,Yh.normalizedFunctionString)(t),"utf8")+1}return 0}s(FQ,"calculateElement")});var LQ=w(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0});mA.validateUtf8=void 0;var pVe=128,mVe=192,gVe=224,yVe=240,vVe=248,_Ve=192,SVe=224,EVe=240,CVe=128;function wVe(e,t,r){for(var n=0,i=t;i<r;i+=1){var o=e[i];if(n){if((o&mVe)!==CVe)return!1;n-=1}else if(o&pVe)if((o&gVe)===_Ve)n=1;else if((o&yVe)===SVe)n=2;else if((o&vVe)===EVe)n=3;else return!1}return!n}s(wVe,"validateUtf8");mA.validateUtf8=wVe});var GQ=w(Xh=>{"use strict";var Kh=Xh&&Xh.__assign||function(){return Kh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Kh.apply(this,arguments)};Object.defineProperty(Xh,"__esModule",{value:!0});Xh.deserialize=void 0;var gA=require("buffer"),L_=Uh(),UQ=WT(),sr=qh(),qU=zT(),bVe=YT(),OVe=XT(),St=js(),TVe=QT(),SA=vd(),AVe=eA(),IVe=rA(),jQ=iA(),DVe=aA(),RVe=cA(),NVe=B_(),kQ=LQ(),xVe=SA.Long.fromNumber(sr.JS_INT_MAX),PVe=SA.Long.fromNumber(sr.JS_INT_MIN),$Q={};function BVe(e,t,r){t=t??{};var n=t&&t.index?t.index:0,i=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(i<5)throw new St.BSONError("bson size must be >= 5, is ".concat(i));if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new St.BSONError("buffer length ".concat(e.length," must be >= bson size ").concat(i));if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new St.BSONError("buffer length ".concat(e.length," must === bson size ").concat(i));if(i+n>e.byteLength)throw new St.BSONError("(bson size ".concat(i," + options.index ").concat(n," must be <= buffer length ").concat(e.byteLength,")"));if(e[n+i-1]!==0)throw new St.BSONError("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return _A(e,n,t,r)}s(BVe,"deserialize");Xh.deserialize=BVe;var MVe=/^\$ref$|^\$id$|^\$db$/;function _A(e,t,r,n){n===void 0&&(n=!1);var i=r.evalFunctions==null?!1:r.evalFunctions,o=r.cacheFunctions==null?!1:r.cacheFunctions,a=r.fieldsAsRaw==null?null:r.fieldsAsRaw,u=r.raw==null?!1:r.raw,l=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,f=r.promoteBuffers==null?!1:r.promoteBuffers,h=r.promoteLongs==null?!0:r.promoteLongs,p=r.promoteValues==null?!0:r.promoteValues,g=r.validation==null?{utf8:!0}:r.validation,_=!0,C,D=new Set,O=g.utf8;if(typeof O=="boolean")C=O;else{_=!1;var N=Object.keys(O).map(function(ml){return O[ml]});if(N.length===0)throw new St.BSONError("UTF-8 validation setting cannot be empty");if(typeof N[0]!="boolean")throw new St.BSONError("Invalid UTF-8 validation option, must specify boolean values");if(C=N[0],!N.every(function(ml){return ml===C}))throw new St.BSONError("Invalid UTF-8 validation option - keys must be all true or all false")}if(!_)for(var F=0,x=Object.keys(O);F<x.length;F++){var P=x[F];D.add(P)}var X=t;if(e.length<5)throw new St.BSONError("corrupt bson message < 5 bytes long");var G=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(G<5||G>e.length)throw new St.BSONError("corrupt bson message");for(var ue=n?[]:{},be=0,Q=!1,Se=n?!1:null,Ce=new DataView(e.buffer,e.byteOffset,e.byteLength);!Q;){var le=e[t++];if(le===0)break;for(var ce=t;e[ce]!==0&&ce<e.length;)ce++;if(ce>=e.byteLength)throw new St.BSONError("Bad BSON Document: illegal CString");var ve=n?be++:e.toString("utf8",t,ce),Pe=!0;_||D.has(ve)?Pe=C:Pe=!C,Se!==!1&&ve[0]==="$"&&(Se=MVe.test(ve));var Ee=void 0;if(t=ce+1,le===sr.BSON_DATA_STRING){var Oe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Oe<=0||Oe>e.length-t||e[t+Oe-1]!==0)throw new St.BSONError("bad string length in bson");Ee=vA(e,t,t+Oe-1,Pe),t=t+Oe}else if(le===sr.BSON_DATA_OID){var dt=gA.Buffer.alloc(12);e.copy(dt,0,t,t+12),Ee=new jQ.ObjectId(dt),t=t+12}else if(le===sr.BSON_DATA_INT&&p===!1)Ee=new TVe.Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(le===sr.BSON_DATA_INT)Ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(le===sr.BSON_DATA_NUMBER&&p===!1)Ee=new OVe.Double(Ce.getFloat64(t,!0)),t=t+8;else if(le===sr.BSON_DATA_NUMBER)Ee=Ce.getFloat64(t,!0),t=t+8;else if(le===sr.BSON_DATA_DATE){var Fe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,rt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;Ee=new Date(new SA.Long(Fe,rt).toNumber())}else if(le===sr.BSON_DATA_BOOLEAN){if(e[t]!==0&&e[t]!==1)throw new St.BSONError("illegal boolean type value");Ee=e[t++]===1}else if(le===sr.BSON_DATA_OBJECT){var Kn=t,Cr=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(Cr<=0||Cr>e.length-t)throw new St.BSONError("bad embedded document length in bson");if(u)Ee=e.slice(t,t+Cr);else{var Lr=r;_||(Lr=Kh(Kh({},r),{validation:{utf8:Pe}})),Ee=_A(e,Kn,Lr,!1)}t=t+Cr}else if(le===sr.BSON_DATA_ARRAY){var Kn=t,Cr=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,yn=r,or=t+Cr;if(a&&a[ve]){yn={};for(var Li in r)yn[Li]=r[Li];yn.raw=!0}if(_||(yn=Kh(Kh({},yn),{validation:{utf8:Pe}})),Ee=_A(e,Kn,yn,!0),t=t+Cr,e[t-1]!==0)throw new St.BSONError("invalid array terminator byte");if(t!==or)throw new St.BSONError("corrupted array bson")}else if(le===sr.BSON_DATA_UNDEFINED)Ee=void 0;else if(le===sr.BSON_DATA_NULL)Ee=null;else if(le===sr.BSON_DATA_LONG){var Fe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,rt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,fn=new SA.Long(Fe,rt);h&&p===!0?Ee=fn.lessThanOrEqual(xVe)&&fn.greaterThanOrEqual(PVe)?fn.toNumber():fn:Ee=fn}else if(le===sr.BSON_DATA_DECIMAL128){var Mo=gA.Buffer.alloc(16);e.copy(Mo,0,t,t+16),t=t+16;var vn=new bVe.Decimal128(Mo);"toObject"in vn&&typeof vn.toObject=="function"?Ee=vn.toObject():Ee=vn}else if(le===sr.BSON_DATA_BINARY){var $t=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,Ui=$t,Pr=e[t++];if($t<0)throw new St.BSONError("Negative binary type element size found");if($t>e.byteLength)throw new St.BSONError("Binary type size larger than document size");if(e.slice!=null){if(Pr===L_.Binary.SUBTYPE_BYTE_ARRAY){if($t=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,$t<0)throw new St.BSONError("Negative binary type element size found for subtype 0x02");if($t>Ui-4)throw new St.BSONError("Binary type with subtype 0x02 contains too long binary size");if($t<Ui-4)throw new St.BSONError("Binary type with subtype 0x02 contains too short binary size")}f&&p?Ee=e.slice(t,t+$t):(Ee=new L_.Binary(e.slice(t,t+$t),Pr),Pr===sr.BSON_BINARY_SUBTYPE_UUID_NEW&&(Ee=Ee.toUUID()))}else{var Cs=gA.Buffer.alloc($t);if(Pr===L_.Binary.SUBTYPE_BYTE_ARRAY){if($t=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,$t<0)throw new St.BSONError("Negative binary type element size found for subtype 0x02");if($t>Ui-4)throw new St.BSONError("Binary type with subtype 0x02 contains too long binary size");if($t<Ui-4)throw new St.BSONError("Binary type with subtype 0x02 contains too short binary size")}for(ce=0;ce<$t;ce++)Cs[ce]=e[t+ce];f&&p?Ee=Cs:Pr===sr.BSON_BINARY_SUBTYPE_UUID_NEW?Ee=new L_.Binary(e.slice(t,t+$t),Pr).toUUID():Ee=new L_.Binary(e.slice(t,t+$t),Pr)}t=t+$t}else if(le===sr.BSON_DATA_REGEXP&&l===!1){for(ce=t;e[ce]!==0&&ce<e.length;)ce++;if(ce>=e.length)throw new St.BSONError("Bad BSON Document: illegal CString");var hl=e.toString("utf8",t,ce);for(t=ce+1,ce=t;e[ce]!==0&&ce<e.length;)ce++;if(ce>=e.length)throw new St.BSONError("Bad BSON Document: illegal CString");var Pn=e.toString("utf8",t,ce);t=ce+1;var ma=new Array(Pn.length);for(ce=0;ce<Pn.length;ce++)switch(Pn[ce]){case"m":ma[ce]="m";break;case"s":ma[ce]="g";break;case"i":ma[ce]="i";break}Ee=new RegExp(hl,ma.join(""))}else if(le===sr.BSON_DATA_REGEXP&&l===!0){for(ce=t;e[ce]!==0&&ce<e.length;)ce++;if(ce>=e.length)throw new St.BSONError("Bad BSON Document: illegal CString");var hl=e.toString("utf8",t,ce);for(t=ce+1,ce=t;e[ce]!==0&&ce<e.length;)ce++;if(ce>=e.length)throw new St.BSONError("Bad BSON Document: illegal CString");var Pn=e.toString("utf8",t,ce);t=ce+1,Ee=new DVe.BSONRegExp(hl,Pn)}else if(le===sr.BSON_DATA_SYMBOL){var Oe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Oe<=0||Oe>e.length-t||e[t+Oe-1]!==0)throw new St.BSONError("bad string length in bson");var kd=vA(e,t,t+Oe-1,Pe);Ee=p?kd:new RVe.BSONSymbol(kd),t=t+Oe}else if(le===sr.BSON_DATA_TIMESTAMP){var Fe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,rt=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;Ee=new NVe.Timestamp(Fe,rt)}else if(le===sr.BSON_DATA_MIN_KEY)Ee=new IVe.MinKey;else if(le===sr.BSON_DATA_MAX_KEY)Ee=new AVe.MaxKey;else if(le===sr.BSON_DATA_CODE){var Oe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Oe<=0||Oe>e.length-t||e[t+Oe-1]!==0)throw new St.BSONError("bad string length in bson");var Xn=vA(e,t,t+Oe-1,Pe);i?o?Ee=yA(Xn,$Q,ue):Ee=yA(Xn):Ee=new UQ.Code(Xn),t=t+Oe}else if(le===sr.BSON_DATA_CODE_W_SCOPE){var hn=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(hn<13)throw new St.BSONError("code_w_scope total size shorter minimum expected length");var Oe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Oe<=0||Oe>e.length-t||e[t+Oe-1]!==0)throw new St.BSONError("bad string length in bson");var Xn=vA(e,t,t+Oe-1,Pe);t=t+Oe;var Kn=t,Cr=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,co=_A(e,Kn,r,!1);if(t=t+Cr,hn<8+Cr+Oe)throw new St.BSONError("code_w_scope total size is too short, truncating scope");if(hn>8+Cr+Oe)throw new St.BSONError("code_w_scope total size is too long, clips outer document");i?(o?Ee=yA(Xn,$Q,ue):Ee=yA(Xn),Ee.scope=co):Ee=new UQ.Code(Xn,co)}else if(le===sr.BSON_DATA_DBPOINTER){var Oe=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Oe<=0||Oe>e.length-t||e[t+Oe-1]!==0)throw new St.BSONError("bad string length in bson");if(g!=null&&g.utf8&&!(0,kQ.validateUtf8)(e,t,t+Oe-1))throw new St.BSONError("Invalid UTF-8 string in BSON document");var Fo=e.toString("utf8",t,t+Oe-1);t=t+Oe;var pl=gA.Buffer.alloc(12);e.copy(pl,0,t,t+12);var dt=new jQ.ObjectId(pl);t=t+12,Ee=new qU.DBRef(Fo,dt)}else throw new St.BSONError("Detected unknown BSON type ".concat(le.toString(16),' for fieldname "').concat(ve,'"'));ve==="__proto__"?Object.defineProperty(ue,ve,{value:Ee,writable:!0,enumerable:!0,configurable:!0}):ue[ve]=Ee}if(G!==t-X)throw n?new St.BSONError("corrupt array bson"):new St.BSONError("corrupt object bson");if(!Se)return ue;if((0,qU.isDBRefLike)(ue)){var is=Object.assign({},ue);return delete is.$ref,delete is.$id,delete is.$db,new qU.DBRef(ue.$ref,ue.$id,ue.$db,is)}return ue}s(_A,"deserializeObject");function yA(e,t,r){return t?(t[e]==null&&(t[e]=new Function(e)),t[e].bind(r)):new Function(e)}s(yA,"isolateEval");function vA(e,t,r,n){var i=e.toString("utf8",t,r);if(n){for(var o=0;o<i.length;o++)if(i.charCodeAt(o)===65533){if(!(0,kQ.validateUtf8)(e,t,r))throw new St.BSONError("Invalid UTF-8 string in BSON document");break}}return i}s(vA,"getValidatedString")});var VQ=w(wA=>{"use strict";Object.defineProperty(wA,"__esModule",{value:!0});wA.serializeInto=void 0;var WQ=Uh(),tr=qh(),FVe=R_(),lu=js(),qVe=fA(),LVe=vd(),UVe=FU(),Zi=Co(),EA=/\x00/,zQ=new Set(["$db","$ref","$id","$clusterTime"]);function LU(e,t,r,n,i){e[n++]=tr.BSON_DATA_STRING;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o+1,e[n-1]=0;var a=e.write(r,n+4,void 0,"utf8");return e[n+3]=a+1>>24&255,e[n+2]=a+1>>16&255,e[n+1]=a+1>>8&255,e[n]=a+1&255,n=n+4+a,e[n++]=0,n}s(LU,"serializeString");var j_=new Uint8Array(8),HQ=new DataView(j_.buffer,j_.byteOffset,j_.byteLength);function UU(e,t,r,n,i){if(Number.isInteger(r)&&r>=tr.BSON_INT32_MIN&&r<=tr.BSON_INT32_MAX){e[n++]=tr.BSON_DATA_INT;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255}else{e[n++]=tr.BSON_DATA_NUMBER;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0,HQ.setFloat64(0,r,!0),e.set(j_,n),n=n+8}return n}s(UU,"serializeNumber");function U_(e,t,r,n,i){e[n++]=tr.BSON_DATA_NULL;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,n}s(U_,"serializeNull");function jU(e,t,r,n,i){e[n++]=tr.BSON_DATA_BOOLEAN;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,e[n++]=r?1:0,n}s(jU,"serializeBoolean");function $U(e,t,r,n,i){e[n++]=tr.BSON_DATA_DATE;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0;var a=LVe.Long.fromNumber(r.getTime()),u=a.getLowBits(),l=a.getHighBits();return e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=l&255,e[n++]=l>>8&255,e[n++]=l>>16&255,e[n++]=l>>24&255,n}s($U,"serializeDate");function kU(e,t,r,n,i){e[n++]=tr.BSON_DATA_REGEXP;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");if(n=n+o,e[n++]=0,r.source&&r.source.match(EA)!=null)throw Error("value "+r.source+" must not contain null bytes");return n=n+e.write(r.source,n,void 0,"utf8"),e[n++]=0,r.ignoreCase&&(e[n++]=105),r.global&&(e[n++]=115),r.multiline&&(e[n++]=109),e[n++]=0,n}s(kU,"serializeRegExp");function GU(e,t,r,n,i){e[n++]=tr.BSON_DATA_REGEXP;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");if(n=n+o,e[n++]=0,r.pattern.match(EA)!=null)throw Error("pattern "+r.pattern+" must not contain null bytes");return n=n+e.write(r.pattern,n,void 0,"utf8"),e[n++]=0,n=n+e.write(r.options.split("").sort().join(""),n,void 0,"utf8"),e[n++]=0,n}s(GU,"serializeBSONRegExp");function WU(e,t,r,n,i){r===null?e[n++]=tr.BSON_DATA_NULL:r._bsontype==="MinKey"?e[n++]=tr.BSON_DATA_MIN_KEY:e[n++]=tr.BSON_DATA_MAX_KEY;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,n}s(WU,"serializeMinMax");function zU(e,t,r,n,i){e[n++]=tr.BSON_DATA_OID;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");if(n=n+o,e[n++]=0,typeof r.id=="string")e.write(r.id,n,void 0,"binary");else if((0,Zi.isUint8Array)(r.id))e.set(r.id.subarray(0,12),n);else throw new lu.BSONTypeError("object ["+JSON.stringify(r)+"] is not a valid ObjectId");return n+12}s(zU,"serializeObjectId");function HU(e,t,r,n,i){e[n++]=tr.BSON_DATA_BINARY;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0;var a=r.length;return e[n++]=a&255,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,e[n++]=tr.BSON_BINARY_SUBTYPE_DEFAULT,e.set((0,FVe.ensureBuffer)(r),n),n=n+a,n}s(HU,"serializeBuffer");function VU(e,t,r,n,i,o,a,u,l,f){i===void 0&&(i=!1),o===void 0&&(o=0),a===void 0&&(a=!1),u===void 0&&(u=!0),l===void 0&&(l=!1),f===void 0&&(f=[]);for(var h=0;h<f.length;h++)if(f[h]===r)throw new lu.BSONError("cyclic dependency detected");f.push(r),e[n++]=Array.isArray(r)?tr.BSON_DATA_ARRAY:tr.BSON_DATA_OBJECT;var p=l?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+p,e[n++]=0;var g=CA(e,r,i,n,o+1,a,u,f);return f.pop(),g}s(VU,"serializeObject");function YU(e,t,r,n,i){e[n++]=tr.BSON_DATA_DECIMAL128;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,e.set(r.bytes.subarray(0,16),n),n+16}s(YU,"serializeDecimal128");function KU(e,t,r,n,i){e[n++]=r._bsontype==="Long"?tr.BSON_DATA_LONG:tr.BSON_DATA_TIMESTAMP;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0;var a=r.getLowBits(),u=r.getHighBits();return e[n++]=a&255,e[n++]=a>>8&255,e[n++]=a>>16&255,e[n++]=a>>24&255,e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,n}s(KU,"serializeLong");function XU(e,t,r,n,i){r=r.valueOf(),e[n++]=tr.BSON_DATA_INT;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,e[n++]=r&255,e[n++]=r>>8&255,e[n++]=r>>16&255,e[n++]=r>>24&255,n}s(XU,"serializeInt32");function JU(e,t,r,n,i){e[n++]=tr.BSON_DATA_NUMBER;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");return n=n+o,e[n++]=0,HQ.setFloat64(0,r.value,!0),e.set(j_,n),n=n+8,n}s(JU,"serializeDouble");function QU(e,t,r,n,i,o,a){i===void 0&&(i=!1),o===void 0&&(o=0),e[n++]=tr.BSON_DATA_CODE;var u=a?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+u,e[n++]=0;var l=(0,Zi.normalizedFunctionString)(r),f=e.write(l,n+4,void 0,"utf8")+1;return e[n]=f&255,e[n+1]=f>>8&255,e[n+2]=f>>16&255,e[n+3]=f>>24&255,n=n+4+f-1,e[n++]=0,n}s(QU,"serializeFunction");function ZU(e,t,r,n,i,o,a,u,l){if(i===void 0&&(i=!1),o===void 0&&(o=0),a===void 0&&(a=!1),u===void 0&&(u=!0),l===void 0&&(l=!1),r.scope&&typeof r.scope=="object"){e[n++]=tr.BSON_DATA_CODE_W_SCOPE;var f=l?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+f,e[n++]=0;var h=n,p=typeof r.code=="string"?r.code:r.code.toString();n=n+4;var g=e.write(p,n+4,void 0,"utf8")+1;e[n]=g&255,e[n+1]=g>>8&255,e[n+2]=g>>16&255,e[n+3]=g>>24&255,e[n+4+g-1]=0,n=n+g+4;var _=CA(e,r.scope,i,n,o+1,a,u);n=_-1;var C=_-h;e[h++]=C&255,e[h++]=C>>8&255,e[h++]=C>>16&255,e[h++]=C>>24&255,e[n++]=0}else{e[n++]=tr.BSON_DATA_CODE;var f=l?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+f,e[n++]=0;var p=r.code.toString(),D=e.write(p,n+4,void 0,"utf8")+1;e[n]=D&255,e[n+1]=D>>8&255,e[n+2]=D>>16&255,e[n+3]=D>>24&255,n=n+4+D-1,e[n++]=0}return n}s(ZU,"serializeCode");function ej(e,t,r,n,i){e[n++]=tr.BSON_DATA_BINARY;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0;var a=r.value(!0),u=r.position;return r.sub_type===WQ.Binary.SUBTYPE_BYTE_ARRAY&&(u=u+4),e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255,e[n++]=r.sub_type,r.sub_type===WQ.Binary.SUBTYPE_BYTE_ARRAY&&(u=u-4,e[n++]=u&255,e[n++]=u>>8&255,e[n++]=u>>16&255,e[n++]=u>>24&255),e.set(a,n),n=n+r.position,n}s(ej,"serializeBinary");function tj(e,t,r,n,i){e[n++]=tr.BSON_DATA_SYMBOL;var o=i?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+o,e[n++]=0;var a=e.write(r.value,n+4,void 0,"utf8")+1;return e[n]=a&255,e[n+1]=a>>8&255,e[n+2]=a>>16&255,e[n+3]=a>>24&255,n=n+4+a-1,e[n++]=0,n}s(tj,"serializeSymbol");function rj(e,t,r,n,i,o,a){e[n++]=tr.BSON_DATA_OBJECT;var u=a?e.write(t,n,void 0,"ascii"):e.write(t,n,void 0,"utf8");n=n+u,e[n++]=0;var l=n,f={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(f.$db=r.db),f=Object.assign(f,r.fields);var h=CA(e,f,!1,n,i+1,o),p=h-l;return e[l++]=p&255,e[l++]=p>>8&255,e[l++]=p>>16&255,e[l++]=p>>24&255,h}s(rj,"serializeDBRef");function CA(e,t,r,n,i,o,a,u){r===void 0&&(r=!1),n===void 0&&(n=0),i===void 0&&(i=0),o===void 0&&(o=!1),a===void 0&&(a=!0),u===void 0&&(u=[]),n=n||0,u=u||[],u.push(t);var l=n+4;if(Array.isArray(t))for(var f=0;f<t.length;f++){var h="".concat(f),p=t[f];if(typeof(p==null?void 0:p.toBSON)=="function"&&(p=p.toBSON()),typeof p=="string")l=LU(e,h,p,l,!0);else if(typeof p=="number")l=UU(e,h,p,l,!0);else{if(typeof p=="bigint")throw new lu.BSONTypeError("Unsupported type BigInt, please use Decimal128");if(typeof p=="boolean")l=jU(e,h,p,l,!0);else if(p instanceof Date||(0,Zi.isDate)(p))l=$U(e,h,p,l,!0);else if(p===void 0)l=U_(e,h,p,l,!0);else if(p===null)l=U_(e,h,p,l,!0);else if(p._bsontype==="ObjectId"||p._bsontype==="ObjectID")l=zU(e,h,p,l,!0);else if((0,Zi.isUint8Array)(p))l=HU(e,h,p,l,!0);else if(p instanceof RegExp||(0,Zi.isRegExp)(p))l=kU(e,h,p,l,!0);else if(typeof p=="object"&&p._bsontype==null)l=VU(e,h,p,l,r,i,o,a,!0,u);else if(typeof p=="object"&&(0,qVe.isBSONType)(p)&&p._bsontype==="Decimal128")l=YU(e,h,p,l,!0);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")l=KU(e,h,p,l,!0);else if(p._bsontype==="Double")l=JU(e,h,p,l,!0);else if(typeof p=="function"&&o)l=QU(e,h,p,l,r,i,!0);else if(p._bsontype==="Code")l=ZU(e,h,p,l,r,i,o,a,!0);else if(p._bsontype==="Binary")l=ej(e,h,p,l,!0);else if(p._bsontype==="Symbol")l=tj(e,h,p,l,!0);else if(p._bsontype==="DBRef")l=rj(e,h,p,l,i,o,!0);else if(p._bsontype==="BSONRegExp")l=GU(e,h,p,l,!0);else if(p._bsontype==="Int32")l=XU(e,h,p,l,!0);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")l=WU(e,h,p,l,!0);else if(typeof p._bsontype<"u")throw new lu.BSONTypeError("Unrecognized or invalid _bsontype: ".concat(String(p._bsontype)))}}else if(t instanceof UVe.Map||(0,Zi.isMap)(t))for(var g=t.entries(),_=!1;!_;){var C=g.next();if(_=!!C.done,!_){var h=C.value[0],p=C.value[1],D=typeof p;if(typeof h=="string"&&!zQ.has(h)){if(h.match(EA)!=null)throw Error("key "+h+" must not contain null bytes");if(r){if(h[0]==="$")throw Error("key "+h+" must not start with '$'");if(~h.indexOf("."))throw Error("key "+h+" must not contain '.'")}}if(D==="string")l=LU(e,h,p,l);else if(D==="number")l=UU(e,h,p,l);else{if(D==="bigint"||(0,Zi.isBigInt64Array)(p)||(0,Zi.isBigUInt64Array)(p))throw new lu.BSONTypeError("Unsupported type BigInt, please use Decimal128");if(D==="boolean")l=jU(e,h,p,l);else if(p instanceof Date||(0,Zi.isDate)(p))l=$U(e,h,p,l);else if(p===null||p===void 0&&a===!1)l=U_(e,h,p,l);else if(p._bsontype==="ObjectId"||p._bsontype==="ObjectID")l=zU(e,h,p,l);else if((0,Zi.isUint8Array)(p))l=HU(e,h,p,l);else if(p instanceof RegExp||(0,Zi.isRegExp)(p))l=kU(e,h,p,l);else if(D==="object"&&p._bsontype==null)l=VU(e,h,p,l,r,i,o,a,!1,u);else if(D==="object"&&p._bsontype==="Decimal128")l=YU(e,h,p,l);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")l=KU(e,h,p,l);else if(p._bsontype==="Double")l=JU(e,h,p,l);else if(p._bsontype==="Code")l=ZU(e,h,p,l,r,i,o,a);else if(typeof p=="function"&&o)l=QU(e,h,p,l,r,i,o);else if(p._bsontype==="Binary")l=ej(e,h,p,l);else if(p._bsontype==="Symbol")l=tj(e,h,p,l);else if(p._bsontype==="DBRef")l=rj(e,h,p,l,i,o);else if(p._bsontype==="BSONRegExp")l=GU(e,h,p,l);else if(p._bsontype==="Int32")l=XU(e,h,p,l);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")l=WU(e,h,p,l);else if(typeof p._bsontype<"u")throw new lu.BSONTypeError("Unrecognized or invalid _bsontype: ".concat(String(p._bsontype)))}}}else{if(typeof(t==null?void 0:t.toBSON)=="function"&&(t=t.toBSON(),t!=null&&typeof t!="object"))throw new lu.BSONTypeError("toBSON function did not return an object");for(var h in t){var p=t[h];typeof(p==null?void 0:p.toBSON)=="function"&&(p=p.toBSON());var D=typeof p;if(typeof h=="string"&&!zQ.has(h)){if(h.match(EA)!=null)throw Error("key "+h+" must not contain null bytes");if(r){if(h[0]==="$")throw Error("key "+h+" must not start with '$'");if(~h.indexOf("."))throw Error("key "+h+" must not contain '.'")}}if(D==="string")l=LU(e,h,p,l);else if(D==="number")l=UU(e,h,p,l);else{if(D==="bigint")throw new lu.BSONTypeError("Unsupported type BigInt, please use Decimal128");if(D==="boolean")l=jU(e,h,p,l);else if(p instanceof Date||(0,Zi.isDate)(p))l=$U(e,h,p,l);else if(p===void 0)a===!1&&(l=U_(e,h,p,l));else if(p===null)l=U_(e,h,p,l);else if(p._bsontype==="ObjectId"||p._bsontype==="ObjectID")l=zU(e,h,p,l);else if((0,Zi.isUint8Array)(p))l=HU(e,h,p,l);else if(p instanceof RegExp||(0,Zi.isRegExp)(p))l=kU(e,h,p,l);else if(D==="object"&&p._bsontype==null)l=VU(e,h,p,l,r,i,o,a,!1,u);else if(D==="object"&&p._bsontype==="Decimal128")l=YU(e,h,p,l);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")l=KU(e,h,p,l);else if(p._bsontype==="Double")l=JU(e,h,p,l);else if(p._bsontype==="Code")l=ZU(e,h,p,l,r,i,o,a);else if(typeof p=="function"&&o)l=QU(e,h,p,l,r,i,o);else if(p._bsontype==="Binary")l=ej(e,h,p,l);else if(p._bsontype==="Symbol")l=tj(e,h,p,l);else if(p._bsontype==="DBRef")l=rj(e,h,p,l,i,o);else if(p._bsontype==="BSONRegExp")l=GU(e,h,p,l);else if(p._bsontype==="Int32")l=XU(e,h,p,l);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")l=WU(e,h,p,l);else if(typeof p._bsontype<"u")throw new lu.BSONTypeError("Unrecognized or invalid _bsontype: ".concat(String(p._bsontype)))}}}u.pop(),e[l++]=0;var O=l-n;return e[n++]=O&255,e[n++]=O>>8&255,e[n++]=O>>16&255,e[n++]=O>>24&255,l}s(CA,"serializeInto");wA.serializeInto=CA});var vZ=w(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.BSONRegExp=ee.MaxKey=ee.MinKey=ee.Int32=ee.Double=ee.Timestamp=ee.Long=ee.UUID=ee.ObjectId=ee.Binary=ee.DBRef=ee.BSONSymbol=ee.Map=ee.Code=ee.LongWithoutOverridesClass=ee.EJSON=ee.BSON_INT64_MIN=ee.BSON_INT64_MAX=ee.BSON_INT32_MIN=ee.BSON_INT32_MAX=ee.BSON_DATA_UNDEFINED=ee.BSON_DATA_TIMESTAMP=ee.BSON_DATA_SYMBOL=ee.BSON_DATA_STRING=ee.BSON_DATA_REGEXP=ee.BSON_DATA_OID=ee.BSON_DATA_OBJECT=ee.BSON_DATA_NUMBER=ee.BSON_DATA_NULL=ee.BSON_DATA_MIN_KEY=ee.BSON_DATA_MAX_KEY=ee.BSON_DATA_LONG=ee.BSON_DATA_INT=ee.BSON_DATA_DECIMAL128=ee.BSON_DATA_DBPOINTER=ee.BSON_DATA_DATE=ee.BSON_DATA_CODE_W_SCOPE=ee.BSON_DATA_CODE=ee.BSON_DATA_BOOLEAN=ee.BSON_DATA_BINARY=ee.BSON_DATA_ARRAY=ee.BSON_BINARY_SUBTYPE_COLUMN=ee.BSON_BINARY_SUBTYPE_ENCRYPTED=ee.BSON_BINARY_SUBTYPE_UUID_NEW=ee.BSON_BINARY_SUBTYPE_UUID=ee.BSON_BINARY_SUBTYPE_USER_DEFINED=ee.BSON_BINARY_SUBTYPE_MD5=ee.BSON_BINARY_SUBTYPE_FUNCTION=ee.BSON_BINARY_SUBTYPE_DEFAULT=ee.BSON_BINARY_SUBTYPE_BYTE_ARRAY=void 0;ee.deserializeStream=ee.calculateObjectSize=ee.deserialize=ee.serializeWithBufferAndIndex=ee.serialize=ee.setInternalBufferSize=ee.BSONTypeError=ee.BSONError=ee.ObjectID=ee.Decimal128=void 0;var $_=require("buffer"),bA=Uh();Object.defineProperty(ee,"Binary",{enumerable:!0,get:function(){return bA.Binary}});Object.defineProperty(ee,"UUID",{enumerable:!0,get:function(){return bA.UUID}});var KQ=WT();Object.defineProperty(ee,"Code",{enumerable:!0,get:function(){return KQ.Code}});var XQ=zT();Object.defineProperty(ee,"DBRef",{enumerable:!0,get:function(){return XQ.DBRef}});var JQ=YT();Object.defineProperty(ee,"Decimal128",{enumerable:!0,get:function(){return JQ.Decimal128}});var QQ=XT();Object.defineProperty(ee,"Double",{enumerable:!0,get:function(){return QQ.Double}});var ZQ=R_(),jVe=fA(),eZ=QT();Object.defineProperty(ee,"Int32",{enumerable:!0,get:function(){return eZ.Int32}});var tZ=vd();Object.defineProperty(ee,"Long",{enumerable:!0,get:function(){return tZ.Long}});var rZ=FU();Object.defineProperty(ee,"Map",{enumerable:!0,get:function(){return rZ.Map}});var nZ=eA();Object.defineProperty(ee,"MaxKey",{enumerable:!0,get:function(){return nZ.MaxKey}});var iZ=rA();Object.defineProperty(ee,"MinKey",{enumerable:!0,get:function(){return iZ.MinKey}});var OA=iA();Object.defineProperty(ee,"ObjectId",{enumerable:!0,get:function(){return OA.ObjectId}});Object.defineProperty(ee,"ObjectID",{enumerable:!0,get:function(){return OA.ObjectId}});var YQ=js(),$Ve=qQ(),sZ=GQ(),oZ=VQ(),aZ=aA();Object.defineProperty(ee,"BSONRegExp",{enumerable:!0,get:function(){return aZ.BSONRegExp}});var uZ=cA();Object.defineProperty(ee,"BSONSymbol",{enumerable:!0,get:function(){return uZ.BSONSymbol}});var cZ=B_();Object.defineProperty(ee,"Timestamp",{enumerable:!0,get:function(){return cZ.Timestamp}});var jt=qh();Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_BYTE_ARRAY",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_BYTE_ARRAY}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_DEFAULT",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_DEFAULT}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_FUNCTION",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_FUNCTION}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_MD5",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_MD5}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_USER_DEFINED",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_USER_DEFINED}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_UUID",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_UUID}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_UUID_NEW",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_UUID_NEW}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_ENCRYPTED",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_ENCRYPTED}});Object.defineProperty(ee,"BSON_BINARY_SUBTYPE_COLUMN",{enumerable:!0,get:function(){return jt.BSON_BINARY_SUBTYPE_COLUMN}});Object.defineProperty(ee,"BSON_DATA_ARRAY",{enumerable:!0,get:function(){return jt.BSON_DATA_ARRAY}});Object.defineProperty(ee,"BSON_DATA_BINARY",{enumerable:!0,get:function(){return jt.BSON_DATA_BINARY}});Object.defineProperty(ee,"BSON_DATA_BOOLEAN",{enumerable:!0,get:function(){return jt.BSON_DATA_BOOLEAN}});Object.defineProperty(ee,"BSON_DATA_CODE",{enumerable:!0,get:function(){return jt.BSON_DATA_CODE}});Object.defineProperty(ee,"BSON_DATA_CODE_W_SCOPE",{enumerable:!0,get:function(){return jt.BSON_DATA_CODE_W_SCOPE}});Object.defineProperty(ee,"BSON_DATA_DATE",{enumerable:!0,get:function(){return jt.BSON_DATA_DATE}});Object.defineProperty(ee,"BSON_DATA_DBPOINTER",{enumerable:!0,get:function(){return jt.BSON_DATA_DBPOINTER}});Object.defineProperty(ee,"BSON_DATA_DECIMAL128",{enumerable:!0,get:function(){return jt.BSON_DATA_DECIMAL128}});Object.defineProperty(ee,"BSON_DATA_INT",{enumerable:!0,get:function(){return jt.BSON_DATA_INT}});Object.defineProperty(ee,"BSON_DATA_LONG",{enumerable:!0,get:function(){return jt.BSON_DATA_LONG}});Object.defineProperty(ee,"BSON_DATA_MAX_KEY",{enumerable:!0,get:function(){return jt.BSON_DATA_MAX_KEY}});Object.defineProperty(ee,"BSON_DATA_MIN_KEY",{enumerable:!0,get:function(){return jt.BSON_DATA_MIN_KEY}});Object.defineProperty(ee,"BSON_DATA_NULL",{enumerable:!0,get:function(){return jt.BSON_DATA_NULL}});Object.defineProperty(ee,"BSON_DATA_NUMBER",{enumerable:!0,get:function(){return jt.BSON_DATA_NUMBER}});Object.defineProperty(ee,"BSON_DATA_OBJECT",{enumerable:!0,get:function(){return jt.BSON_DATA_OBJECT}});Object.defineProperty(ee,"BSON_DATA_OID",{enumerable:!0,get:function(){return jt.BSON_DATA_OID}});Object.defineProperty(ee,"BSON_DATA_REGEXP",{enumerable:!0,get:function(){return jt.BSON_DATA_REGEXP}});Object.defineProperty(ee,"BSON_DATA_STRING",{enumerable:!0,get:function(){return jt.BSON_DATA_STRING}});Object.defineProperty(ee,"BSON_DATA_SYMBOL",{enumerable:!0,get:function(){return jt.BSON_DATA_SYMBOL}});Object.defineProperty(ee,"BSON_DATA_TIMESTAMP",{enumerable:!0,get:function(){return jt.BSON_DATA_TIMESTAMP}});Object.defineProperty(ee,"BSON_DATA_UNDEFINED",{enumerable:!0,get:function(){return jt.BSON_DATA_UNDEFINED}});Object.defineProperty(ee,"BSON_INT32_MAX",{enumerable:!0,get:function(){return jt.BSON_INT32_MAX}});Object.defineProperty(ee,"BSON_INT32_MIN",{enumerable:!0,get:function(){return jt.BSON_INT32_MIN}});Object.defineProperty(ee,"BSON_INT64_MAX",{enumerable:!0,get:function(){return jt.BSON_INT64_MAX}});Object.defineProperty(ee,"BSON_INT64_MIN",{enumerable:!0,get:function(){return jt.BSON_INT64_MIN}});var kVe=fA();Object.defineProperty(ee,"EJSON",{enumerable:!0,get:function(){return kVe.EJSON}});var GVe=B_();Object.defineProperty(ee,"LongWithoutOverridesClass",{enumerable:!0,get:function(){return GVe.LongWithoutOverridesClass}});var lZ=js();Object.defineProperty(ee,"BSONError",{enumerable:!0,get:function(){return lZ.BSONError}});Object.defineProperty(ee,"BSONTypeError",{enumerable:!0,get:function(){return lZ.BSONTypeError}});var dZ=1024*1024*17,Mc=$_.Buffer.alloc(dZ);function fZ(e){Mc.length<e&&(Mc=$_.Buffer.alloc(e))}s(fZ,"setInternalBufferSize");ee.setInternalBufferSize=fZ;function hZ(e,t){t===void 0&&(t={});var r=typeof t.checkKeys=="boolean"?t.checkKeys:!1,n=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,i=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0,o=typeof t.minInternalBufferSize=="number"?t.minInternalBufferSize:dZ;Mc.length<o&&(Mc=$_.Buffer.alloc(o));var a=(0,oZ.serializeInto)(Mc,e,r,0,0,n,i,[]),u=$_.Buffer.alloc(a);return Mc.copy(u,0,0,u.length),u}s(hZ,"serialize");ee.serialize=hZ;function pZ(e,t,r){r===void 0&&(r={});var n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,o=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,a=typeof r.index=="number"?r.index:0,u=(0,oZ.serializeInto)(Mc,e,n,0,0,i,o);return Mc.copy(t,a,0,u),a+u-1}s(pZ,"serializeWithBufferAndIndex");ee.serializeWithBufferAndIndex=pZ;function mZ(e,t){return t===void 0&&(t={}),(0,sZ.deserialize)(e instanceof $_.Buffer?e:(0,ZQ.ensureBuffer)(e),t)}s(mZ,"deserialize");ee.deserialize=mZ;function gZ(e,t){t===void 0&&(t={}),t=t||{};var r=typeof t.serializeFunctions=="boolean"?t.serializeFunctions:!1,n=typeof t.ignoreUndefined=="boolean"?t.ignoreUndefined:!0;return(0,$Ve.calculateObjectSize)(e,r,n)}s(gZ,"calculateObjectSize");ee.calculateObjectSize=gZ;function yZ(e,t,r,n,i,o){for(var a=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},o),u=(0,ZQ.ensureBuffer)(e),l=t,f=0;f<r;f++){var h=u[l]|u[l+1]<<8|u[l+2]<<16|u[l+3]<<24;a.index=l,n[i+f]=(0,sZ.deserialize)(u,a),l=l+h}return l}s(yZ,"deserializeStream");ee.deserializeStream=yZ;var WVe={Binary:bA.Binary,Code:KQ.Code,DBRef:XQ.DBRef,Decimal128:JQ.Decimal128,Double:QQ.Double,Int32:eZ.Int32,Long:tZ.Long,UUID:bA.UUID,Map:rZ.Map,MaxKey:nZ.MaxKey,MinKey:iZ.MinKey,ObjectId:OA.ObjectId,ObjectID:OA.ObjectId,BSONRegExp:aZ.BSONRegExp,BSONSymbol:uZ.BSONSymbol,Timestamp:cZ.Timestamp,EJSON:jVe.EJSON,setInternalBufferSize:fZ,serialize:hZ,serializeWithBufferAndIndex:pZ,deserialize:mZ,calculateObjectSize:gZ,deserializeStream:yZ,BSONError:YQ.BSONError,BSONTypeError:YQ.BSONTypeError};ee.default=WVe});var EZ=w((WAt,SZ)=>{var zVe=require("stream").Transform,_Z=vZ();SZ.exports=s(function(t){function r(n,i,o){if(t){var a=_Z.deserialize(n);return a.cursor.firstBatch.forEach(function(u){this.push(_Z.serialize(u))}.bind(this)),o()}return o(null,n)}return s(r,"transform"),new zVe({readableObjectMode:!0,writableObjectMode:!0,transform:r})},"rawTransform")});var bZ=w((HAt,wZ)=>{var CZ=yU(),HVe=EZ(),VVe=SU(),YVe=require("util").inherits,KVe=qT()("mongodb-collection-sample:native-sampler");function nj(e,t,r){CZ.call(this,e,t,r),this.running=!1}s(nj,"NativeSampler");YVe(nj,CZ);nj.prototype._read=function(){if(!this.running){this.running=!0;var e={maxTimeMS:this.maxTimeMS,allowDiskUse:!0,promoteValues:this.promoteValues};this.collection.countDocuments(this.query,e,function(t,r){if(t)return this.emit("error",t);if(KVe("sampling %d documents from a collection with %d documents",this.size,r),r>this.size&&r<=this.size*20){var n=new VVe(this.db,this.collectionName,this.opts);return n.on("error",this.emit.bind(this,"error")).on("data",this.push.bind(this)).on("end",this.push.bind(this,null))}this.pipeline=[],Object.keys(this.query).length>0&&this.pipeline.push({$match:this.query}),r>this.size&&this.pipeline.push({$sample:{size:this.size}}),this.fields&&Object.keys(this.fields).length>0&&this.pipeline.push({$project:this.fields}),e.raw=this.raw,e.cursor=this.cursor,e.batchSize=this.size;var i=this.collection.aggregate(this.pipeline,e);i.pipe(HVe(this.raw)).on("error",this.emit.bind(this,"error")).on("data",this.push.bind(this)).on("end",this.push.bind(this,null))}.bind(this))}};wZ.exports=nj});var TZ=w((YAt,ij)=>{var XVe=GL(),JVe=_J(),QVe=qT()("mongodb-collection-sample"),ZVe=SU(),e8e=bZ();function OZ(e,t,r,n){e.admin().serverInfo(function(i,o){if(i)return n(i);var a=JVe.gte(o.version,"3.1.6");return QVe("has native $sample?",a),a?n(null,new e8e(e,t,r)):n(null,new ZVe(e,t,r))})}s(OZ,"getSampler");ij.exports=function(e,t,r){var n=XVe.readable(function(){OZ(e,t,r,function(i,o){if(i)return n.emit("error",i);o.on("data",n.emit.bind(n,"data")),o.on("error",n.emit.bind(n,"error")),o.on("end",n.emit.bind(n,"end"))})});return n};ij.exports.getSampler=OZ});var IZ=w((XAt,AZ)=>{AZ.exports=TZ()});var RZ=w((JAt,DZ)=>{"use strict";var t8e=s(e=>e instanceof Error?e:new Error(e),"getError");DZ.exports={getError:t8e}});var BZ=w((ZAt,PZ)=>{"use strict";var{MongoClient:r8e}=gL(),n8e=IZ(),{getError:Fc}=RZ(),sj=null,Ed=null,i8e=s(({connectionInfo:e})=>({sshTunnelUsername:e.ssh_user||"ec2-user",sshTunnelHostname:e.ssh_host,sshTunnelPort:Number(e.ssh_port)||22,sshAuthMethod:e.ssh_method==="privateKey"?"IDENTITY_FILE":"",sshTunnelIdentityFile:e.ssh_key_file,sshTunnelPassphrase:e.ssh_key_passphrase,host:e.host,port:e.port?Number(e.port):null}),"getSshConfig"),s8e=s(async({connectionInfo:e,sshService:t})=>{let r=i8e({connectionInfo:e}),{options:n}=await t.openTunnel(r);return{...e,host:n.host,port:n.port.toString()||"22"}},"getSshConnectionSettings"),o8e=s(({connectionInfo:e})=>{let{host:t,port:r,sslType:n,ssh:i,certAuthority:o}=e,a=xZ(e.username),u=xZ(e.password),l=n==="TRUST_CUSTOM_CA_SIGNED_CERTIFICATES",f=`mongodb://${a}:${u}@${t}:${r}/?`,h=new URLSearchParams("retryWrites=false"),p=s(()=>`${f}${h.toString()}`,"prepareUrl"),g={useUnifiedTopology:!0};return l&&i||n==="UNVALIDATED_SSL"?{url:p(),options:{...g,tls:!0,tlsAllowInvalidHostnames:!0,sslValidate:!1}}:(h.set("replicaSet","rs0"),h.set("readPreference","secondaryPreferred"),l?(h.set("tls","true"),{url:p(),options:{...g,tlsCAFile:o}}):{url:p(),options:{...g,useNewUrlParser:!0}})},"generateConnectionParams"),a8e=s(async(e,t)=>{try{if(Ed)return NZ({connection:Ed});e.ssh&&(e=await s8e({connectionInfo:e,sshService:t}),sj=!0);let r=o8e({connectionInfo:e});return Ed=await r8e.connect(r.url,r.options),NZ({connection:Ed})}catch(r){let n=r.code===18?"Authentication failed. Please, check connection settings and try again":r.message;throw new Error(n)}},"connect"),NZ=s(({connection:e})=>{let t=s(()=>new Promise((g,_)=>{e.db().admin().listDatabases((D,O)=>D?_(Fc(D)):g(O.databases))}),"getDatabases"),r=s(g=>new Promise((_,C)=>{let D=e.db(g);if(!D)return C(Fc(`Failed connection to database "${g}"`));D.listCollections().toArray((O,N)=>O?C(Fc(O)):_(N))}),"getCollections"),n=s(()=>new Promise((g,_)=>{e.db().admin().buildInfo((D,O)=>{D?_(Fc(D)):g(O)})}),"getBuildInfo"),i=s((g,_,C)=>{let D=e.db(g);return!C.sort||Object.keys(C.sort).length===0?n8e(D,_,C):D.collection(_).find(C.query,{sort:C.sort,limit:Number(C.size),maxTimeMS:C.maxTimeMS}).stream()},"getDataStream"),o=s((g,_,{query:C,sort:D,limit:O,maxTimeMS:N})=>new Promise((F,x)=>{let G=[],ue={size:Number(O),query:C,sort:D,maxTimeMS:N||12e4},be,Q=s(Ce=>{if(Ce.code===28799&&(Ce={message:"MongoDB Error: $sample stage could not find a non-duplicate document after 100 while using a random cursor. Please try again."}),Ce.code===11601){let le=new Error("MongoDB Error: "+Ce.message+". Please, try to increase query timeout (Options -> Reverse-Engineering) and try again.");le.stack=Ce.stack,Ce=le}be=Ce,x(Fc(Ce))},"streamErrorHandler"),Se=i(g,_,ue);Se.on("error",Ce=>{Q(Ce)}),Se.on("data",Ce=>{G.push(Ce)}),Se.on("end",()=>{be||F(G)})}),"getRandomDocuments"),a=s((g,_)=>new Promise((C,D)=>{e.db(g).collection(_).estimatedDocumentCount((F,x)=>F?D(Fc(F)):C(x))}),"getCount"),u=s((g,_,C)=>new Promise((D,O)=>{e.db(g).collection(_).findOne(C,(x,P)=>x?O(Fc(x)):D(P))}),"findOne");return{getDatabases:t,getCollections:r,getBuildInfo:n,getDataStream:i,getCount:a,getRandomDocuments:o,findOne:u,hasPermission:s(async(g,_)=>{try{return await u(g,_),!0}catch(C){if(C.code===13)return!1;throw C}},"hasPermission"),getIndexes:s((g,_)=>new Promise((C,D)=>{e.db(g).collection(_).indexes({full:!0},(F,x)=>F?D(Fc(F)):C(x))}),"getIndexes"),getCollection:s((g,_)=>{let D=e.db(g).collection(_);return{createIndex(O,N){return D.createIndex(O,N)},insertOne(O){return D.insertOne(O)}}},"getCollection"),createCollection:s(async(g,_)=>{let D=e.db(g);try{return await D.createCollection(_)}catch(O){if(O.code===48)return;throw O}},"createCollection")}},"createConnection"),u8e=s(e=>{Ed&&(Ed.close(),Ed=null),sj&&(sj=!1,e.closeConsumer())},"close"),xZ=s(e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16)),"encodeURIComponentRFC3986");PZ.exports={connect:a8e,close:u8e}});var MZ=w((tIt,c8e)=>{c8e.exports={name:"DocumentDB",version:"0.2.1",author:"hackolade",engines:{hackolade:"6.10.3",hackoladePlugin:"1.0.1"},contributes:{target:{applicationTarget:"DocumentDB",title:"DocumentDB",versions:["3.6.0","4.0.0","5.0.0"]},features:{nestedCollections:!1,forwardEngineering:{jsonSchema:{keepParentType:{objectId:{type:"string",pattern:"^[a-fA-F0-9]{24}$"},regex:"string",date:{type:"string",format:"date-time"},timestamp:{type:"string",format:"date-time"},binary:{type:"string",mediaType:"image/png",contentEncoding:"base64"},minKey:"number",maxKey:"number"}}},enableReverseEngineering:!0,enableForwardEngineering:!0,enableReverseEngineeringDetectionSchemaByContent:!1,enableReversingDateTypeAsISODate:!0,supportInferRelationships:!0,enableREQueryAndSortCriteria:!0,relationships:{entityNameSeparator:"."}}},description:"Hackolade plugin for Amazon DocumentDB",scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},dependencies:{"@aws-sdk/client-docdb":"3.687.0","@hackolade/fetch":"1.1.0",async:"3.2.6",bson:"1.1.6",lodash:"4.17.21",mongodb:"3.7.3","mongodb-collection-sample":"4.5.1"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"1.0.0","eslint-plugin-import":"2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."}}});var qZ=w((rIt,FZ)=>{"use strict";var du=require("os"),l8e=MZ(),d8e=s(()=>l8e.version,"getPluginVersion"),f8e=s(e=>`Date: ${new Date}
Application version: ${e}
Plugin version: ${d8e()}

System information:
 Hostname:  ${du.hostname()}
 Platform:  ${du.platform()} ${du.arch()}
 Release:   ${du.release()}
 Uptime:    ${m8e(du.uptime())}
 Total RAM: ${(du.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${du.cpus()[0].model}
 CPU Clock: ${h8e(du.cpus())} MHZ
 CPU Cores: ${du.cpus().length} cores

`,"getSystemInfo"),h8e=s(e=>e.reduce((t,r)=>Math.max(t,r.speed),0),"maxClock"),p8e=s(e=>e<10?"0"+e:e,"prefixZero"),m8e=s(e=>Math.floor(e/3600)+":"+p8e(parseInt((e/3600-Math.floor(e/3600))*60)),"toTime"),g8e=s(({title:e,logger:t,hiddenKeys:r})=>({info(n){t.log("info",{message:n},e,r)},progress(n,i="",o=""){t.progress({message:n,containerName:i,entityName:o})},error(n){t.log("error",y8e(n),e)}}),"createLogger"),y8e=s(e=>({message:e.message||e.msg||e.errmsg,code:e.code,stack:e.stack}),"createError");FZ.exports={createLogger:g8e,getSystemInfo:f8e}});var LZ=w((Jh,k_)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",u=500,l="__lodash_placeholder__",f=1,h=2,p=4,g=1,_=2,C=1,D=2,O=4,N=8,F=16,x=32,P=64,X=128,G=256,ue=512,be=30,Q="...",Se=800,Ce=16,le=1,ce=2,ve=3,Pe=1/0,Ee=9007199254740991,Oe=17976931348623157e292,dt=NaN,Fe=4294967295,rt=Fe-1,Kn=Fe>>>1,Cr=[["ary",X],["bind",C],["bindKey",D],["curry",N],["curryRight",F],["flip",ue],["partial",x],["partialRight",P],["rearg",G]],Lr="[object Arguments]",yn="[object Array]",or="[object AsyncFunction]",Li="[object Boolean]",fn="[object Date]",Mo="[object DOMException]",vn="[object Error]",$t="[object Function]",Ui="[object GeneratorFunction]",Pr="[object Map]",Cs="[object Number]",hl="[object Null]",Pn="[object Object]",ma="[object Promise]",kd="[object Proxy]",Xn="[object RegExp]",hn="[object Set]",co="[object String]",Fo="[object Symbol]",pl="[object Undefined]",is="[object WeakMap]",ml="[object WeakSet]",ji="[object ArrayBuffer]",qo="[object DataView]",Gd="[object Float32Array]",gy="[object Float64Array]",ga="[object Int8Array]",yy="[object Int16Array]",Lo="[object Int32Array]",vy="[object Uint8Array]",$u="[object Uint8ClampedArray]",_y="[object Uint16Array]",ku="[object Uint32Array]",uC=/\b__p \+= '';/g,lo=/\b(__p \+=) '' \+/g,AR=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gl=/&(?:amp|lt|gt|quot|#39);/g,cC=/[&<>"']/g,Wd=RegExp(gl.source),IR=RegExp(cC.source),zd=/<%-([\s\S]+?)%>/g,lC=/<%([\s\S]+?)%>/g,Sy=/<%=([\s\S]+?)%>/g,DR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yl=/^\w*$/,dC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hd=/[\\^$.*+?()[\]{}|]/g,RR=RegExp(Hd.source),Gu=/^\s+/,NR=/\s/,vl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xR=/\{\n\/\* \[wrapped with (.+)\] \*/,_l=/,? & /,Ey=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,PR=/[()=,{}\[\]\/\s]/,Vd=/\\(\\)?/g,BR=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sl=/\w*$/,MR=/^[-+]0x[0-9a-f]+$/i,Yd=/^0b[01]+$/i,FR=/^\[object .+?Constructor\]$/,qR=/^0o[0-7]+$/i,Kd=/^(?:0|[1-9]\d*)$/,LR=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ya=/($^)/,UR=/['\n\r\u2028\u2029\\]/g,va="\\ud800-\\udfff",jR="\\u0300-\\u036f",Xd="\\ufe20-\\ufe2f",$R="\\u20d0-\\u20ff",Cy=jR+Xd+$R,fC="\\u2700-\\u27bf",El="a-z\\xdf-\\xf6\\xf8-\\xff",hC="\\xac\\xb1\\xd7\\xf7",pC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mC="\\u2000-\\u206f",kR=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cl="A-Z\\xc0-\\xd6\\xd8-\\xde",wy="\\ufe0e\\ufe0f",by=hC+pC+mC+kR,Jd="['\u2019]",Qd="["+va+"]",Oy="["+by+"]",Wu="["+Cy+"]",Ty="\\d+",gC="["+fC+"]",Zd="["+El+"]",ef="[^"+va+by+Ty+fC+El+Cl+"]",Ay="\\ud83c[\\udffb-\\udfff]",yC="(?:"+Wu+"|"+Ay+")",tf="[^"+va+"]",rf="(?:\\ud83c[\\udde6-\\uddff]){2}",Iy="[\\ud800-\\udbff][\\udc00-\\udfff]",_a="["+Cl+"]",wl="\\u200d",bl="(?:"+Zd+"|"+ef+")",vC="(?:"+_a+"|"+ef+")",nf="(?:"+Jd+"(?:d|ll|m|re|s|t|ve))?",_C="(?:"+Jd+"(?:D|LL|M|RE|S|T|VE))?",Dy=yC+"?",SC="["+wy+"]?",EC="(?:"+wl+"(?:"+[tf,rf,Iy].join("|")+")"+SC+Dy+")*",GR="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ry=SC+Dy+EC,Ny="(?:"+[gC,rf,Iy].join("|")+")"+Ry,wC="(?:"+[tf+Wu+"?",Wu,rf,Iy,Qd].join("|")+")",sf=RegExp(Jd,"g"),WR=RegExp(Wu,"g"),of=RegExp(Ay+"(?="+Ay+")|"+wC+Ry,"g"),bC=RegExp([_a+"?"+Zd+"+"+nf+"(?="+[Oy,_a,"$"].join("|")+")",vC+"+"+_C+"(?="+[Oy,_a+bl,"$"].join("|")+")",_a+"?"+bl+"+"+nf,_a+"+"+_C,CC,GR,Ty,Ny].join("|"),"g"),zR=RegExp("["+wl+va+Cy+wy+"]"),af=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,HR=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uf=-1,ar={};ar[Gd]=ar[gy]=ar[ga]=ar[yy]=ar[Lo]=ar[vy]=ar[$u]=ar[_y]=ar[ku]=!0,ar[Lr]=ar[yn]=ar[ji]=ar[Li]=ar[qo]=ar[fn]=ar[vn]=ar[$t]=ar[Pr]=ar[Cs]=ar[Pn]=ar[Xn]=ar[hn]=ar[co]=ar[is]=!1;var Yt={};Yt[Lr]=Yt[yn]=Yt[ji]=Yt[qo]=Yt[Li]=Yt[fn]=Yt[Gd]=Yt[gy]=Yt[ga]=Yt[yy]=Yt[Lo]=Yt[Pr]=Yt[Cs]=Yt[Pn]=Yt[Xn]=Yt[hn]=Yt[co]=Yt[Fo]=Yt[vy]=Yt[$u]=Yt[_y]=Yt[ku]=!0,Yt[vn]=Yt[$t]=Yt[is]=!1;var VR={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},OC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},YR={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cf=parseFloat,AC=parseInt,xy=typeof global=="object"&&global&&global.Object===Object&&global,IC=typeof self=="object"&&self&&self.Object===Object&&self,sn=xy||IC||Function("return this")(),lf=typeof Jh=="object"&&Jh&&!Jh.nodeType&&Jh,Uo=lf&&typeof k_=="object"&&k_&&!k_.nodeType&&k_,DC=Uo&&Uo.exports===lf,Sa=DC&&xy.process,yi=function(){try{var L=Uo&&Uo.require&&Uo.require("util").types;return L||Sa&&Sa.binding&&Sa.binding("util")}catch{}}(),RC=yi&&yi.isArrayBuffer,Py=yi&&yi.isDate,NC=yi&&yi.isMap,df=yi&&yi.isRegExp,ff=yi&&yi.isSet,I=yi&&yi.isTypedArray;function b(L,Z,H){switch(H.length){case 0:return L.call(Z);case 1:return L.call(Z,H[0]);case 2:return L.call(Z,H[0],H[1]);case 3:return L.call(Z,H[0],H[1],H[2])}return L.apply(Z,H)}s(b,"apply");function R(L,Z,H,Te){for(var ut=-1,Kt=L==null?0:L.length;++ut<Kt;){var pn=L[ut];Z(Te,pn,H(pn),L)}return Te}s(R,"arrayAggregator");function M(L,Z){for(var H=-1,Te=L==null?0:L.length;++H<Te&&Z(L[H],H,L)!==!1;);return L}s(M,"arrayEach");function k(L,Z){for(var H=L==null?0:L.length;H--&&Z(L[H],H,L)!==!1;);return L}s(k,"arrayEachRight");function W(L,Z){for(var H=-1,Te=L==null?0:L.length;++H<Te;)if(!Z(L[H],H,L))return!1;return!0}s(W,"arrayEvery");function V(L,Z){for(var H=-1,Te=L==null?0:L.length,ut=0,Kt=[];++H<Te;){var pn=L[H];Z(pn,H,L)&&(Kt[ut++]=pn)}return Kt}s(V,"arrayFilter");function J(L,Z){var H=L==null?0:L.length;return!!H&&we(L,Z,0)>-1}s(J,"arrayIncludes");function ie(L,Z,H){for(var Te=-1,ut=L==null?0:L.length;++Te<ut;)if(H(Z,L[Te]))return!0;return!1}s(ie,"arrayIncludesWith");function de(L,Z){for(var H=-1,Te=L==null?0:L.length,ut=Array(Te);++H<Te;)ut[H]=Z(L[H],H,L);return ut}s(de,"arrayMap");function at(L,Z){for(var H=-1,Te=Z.length,ut=L.length;++H<Te;)L[ut+H]=Z[H];return L}s(at,"arrayPush");function Rt(L,Z,H,Te){var ut=-1,Kt=L==null?0:L.length;for(Te&&Kt&&(H=L[++ut]);++ut<Kt;)H=Z(H,L[ut],ut,L);return H}s(Rt,"arrayReduce");function Nt(L,Z,H,Te){var ut=L==null?0:L.length;for(Te&&ut&&(H=L[--ut]);ut--;)H=Z(H,L[ut],ut,L);return H}s(Nt,"arrayReduceRight");function Jn(L,Z){for(var H=-1,Te=L==null?0:L.length;++H<Te;)if(Z(L[H],H,L))return!0;return!1}s(Jn,"arraySome");var zu=Ur("length");function Ea(L){return L.split("")}s(Ea,"asciiToArray");function Ol(L){return L.match(Ey)||[]}s(Ol,"asciiWords");function Mt(L,Z,H){var Te;return H(L,function(ut,Kt,pn){if(Z(ut,Kt,pn))return Te=Kt,!1}),Te}s(Mt,"baseFindKey");function qe(L,Z,H,Te){for(var ut=L.length,Kt=H+(Te?1:-1);Te?Kt--:++Kt<ut;)if(Z(L[Kt],Kt,L))return Kt;return-1}s(qe,"baseFindIndex");function we(L,Z,H){return Z===Z?$_e(L,Z,H):qe(L,At,H)}s(we,"baseIndexOf");function Ke(L,Z,H,Te){for(var ut=H-1,Kt=L.length;++ut<Kt;)if(Te(L[ut],Z))return ut;return-1}s(Ke,"baseIndexOfWith");function At(L){return L!==L}s(At,"baseIsNaN");function ur(L,Z){var H=L==null?0:L.length;return H?ba(L,Z)/H:dt}s(ur,"baseMean");function Ur(L){return function(Z){return Z==null?e:Z[L]}}s(Ur,"baseProperty");function Qn(L){return function(Z){return L==null?e:L[Z]}}s(Qn,"basePropertyOf");function Ca(L,Z,H,Te,ut){return ut(L,function(Kt,pn,cr){H=Te?(Te=!1,Kt):Z(H,Kt,pn,cr)}),H}s(Ca,"baseReduce");function wa(L,Z){var H=L.length;for(L.sort(Z);H--;)L[H]=L[H].value;return L}s(wa,"baseSortBy");function ba(L,Z){for(var H,Te=-1,ut=L.length;++Te<ut;){var Kt=Z(L[Te]);Kt!==e&&(H=H===e?Kt:H+Kt)}return H}s(ba,"baseSum");function KR(L,Z){for(var H=-1,Te=Array(L);++H<L;)Te[H]=Z(H);return Te}s(KR,"baseTimes");function x_e(L,Z){return de(Z,function(H){return[H,L[H]]})}s(x_e,"baseToPairs");function mW(L){return L&&L.slice(0,_W(L)+1).replace(Gu,"")}s(mW,"baseTrim");function ss(L){return function(Z){return L(Z)}}s(ss,"baseUnary");function XR(L,Z){return de(Z,function(H){return L[H]})}s(XR,"baseValues");function By(L,Z){return L.has(Z)}s(By,"cacheHas");function gW(L,Z){for(var H=-1,Te=L.length;++H<Te&&we(Z,L[H],0)>-1;);return H}s(gW,"charsStartIndex");function yW(L,Z){for(var H=L.length;H--&&we(Z,L[H],0)>-1;);return H}s(yW,"charsEndIndex");function P_e(L,Z){for(var H=L.length,Te=0;H--;)L[H]===Z&&++Te;return Te}s(P_e,"countHolders");var B_e=Qn(VR),M_e=Qn(OC);function F_e(L){return"\\"+YR[L]}s(F_e,"escapeStringChar");function q_e(L,Z){return L==null?e:L[Z]}s(q_e,"getValue");function hf(L){return zR.test(L)}s(hf,"hasUnicode");function L_e(L){return af.test(L)}s(L_e,"hasUnicodeWord");function U_e(L){for(var Z,H=[];!(Z=L.next()).done;)H.push(Z.value);return H}s(U_e,"iteratorToArray");function JR(L){var Z=-1,H=Array(L.size);return L.forEach(function(Te,ut){H[++Z]=[ut,Te]}),H}s(JR,"mapToArray");function vW(L,Z){return function(H){return L(Z(H))}}s(vW,"overArg");function Hu(L,Z){for(var H=-1,Te=L.length,ut=0,Kt=[];++H<Te;){var pn=L[H];(pn===Z||pn===l)&&(L[H]=l,Kt[ut++]=H)}return Kt}s(Hu,"replaceHolders");function xC(L){var Z=-1,H=Array(L.size);return L.forEach(function(Te){H[++Z]=Te}),H}s(xC,"setToArray");function j_e(L){var Z=-1,H=Array(L.size);return L.forEach(function(Te){H[++Z]=[Te,Te]}),H}s(j_e,"setToPairs");function $_e(L,Z,H){for(var Te=H-1,ut=L.length;++Te<ut;)if(L[Te]===Z)return Te;return-1}s($_e,"strictIndexOf");function k_e(L,Z,H){for(var Te=H+1;Te--;)if(L[Te]===Z)return Te;return Te}s(k_e,"strictLastIndexOf");function pf(L){return hf(L)?W_e(L):zu(L)}s(pf,"stringSize");function fo(L){return hf(L)?z_e(L):Ea(L)}s(fo,"stringToArray");function _W(L){for(var Z=L.length;Z--&&NR.test(L.charAt(Z)););return Z}s(_W,"trimmedEndIndex");var G_e=Qn(TC);function W_e(L){for(var Z=of.lastIndex=0;of.test(L);)++Z;return Z}s(W_e,"unicodeSize");function z_e(L){return L.match(of)||[]}s(z_e,"unicodeToArray");function H_e(L){return L.match(bC)||[]}s(H_e,"unicodeWords");var V_e=s(function L(Z){Z=Z==null?sn:Vu.defaults(sn.Object(),Z,Vu.pick(sn,HR));var H=Z.Array,Te=Z.Date,ut=Z.Error,Kt=Z.Function,pn=Z.Math,cr=Z.Object,QR=Z.RegExp,Y_e=Z.String,ws=Z.TypeError,PC=H.prototype,K_e=Kt.prototype,mf=cr.prototype,BC=Z["__core-js_shared__"],MC=K_e.toString,Zt=mf.hasOwnProperty,X_e=0,SW=function(){var c=/[^.]+$/.exec(BC&&BC.keys&&BC.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),FC=mf.toString,J_e=MC.call(cr),Q_e=sn._,Z_e=QR("^"+MC.call(Zt).replace(Hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qC=DC?Z.Buffer:e,Yu=Z.Symbol,LC=Z.Uint8Array,EW=qC?qC.allocUnsafe:e,UC=vW(cr.getPrototypeOf,cr),CW=cr.create,wW=mf.propertyIsEnumerable,jC=PC.splice,bW=Yu?Yu.isConcatSpreadable:e,My=Yu?Yu.iterator:e,Tl=Yu?Yu.toStringTag:e,$C=function(){try{var c=Nl(cr,"defineProperty");return c({},"",{}),c}catch{}}(),eSe=Z.clearTimeout!==sn.clearTimeout&&Z.clearTimeout,tSe=Te&&Te.now!==sn.Date.now&&Te.now,rSe=Z.setTimeout!==sn.setTimeout&&Z.setTimeout,kC=pn.ceil,GC=pn.floor,ZR=cr.getOwnPropertySymbols,nSe=qC?qC.isBuffer:e,OW=Z.isFinite,iSe=PC.join,sSe=vW(cr.keys,cr),mn=pn.max,Zn=pn.min,oSe=Te.now,aSe=Z.parseInt,TW=pn.random,uSe=PC.reverse,eN=Nl(Z,"DataView"),Fy=Nl(Z,"Map"),tN=Nl(Z,"Promise"),gf=Nl(Z,"Set"),qy=Nl(Z,"WeakMap"),Ly=Nl(cr,"create"),WC=qy&&new qy,yf={},cSe=xl(eN),lSe=xl(Fy),dSe=xl(tN),fSe=xl(gf),hSe=xl(qy),zC=Yu?Yu.prototype:e,Uy=zC?zC.valueOf:e,AW=zC?zC.toString:e;function T(c){if(jr(c)&&!ct(c)&&!(c instanceof xt)){if(c instanceof bs)return c;if(Zt.call(c,"__wrapped__"))return Iz(c)}return new bs(c)}s(T,"lodash");var vf=function(){function c(){}return s(c,"object"),function(d){if(!Br(d))return{};if(CW)return CW(d);c.prototype=d;var m=new c;return c.prototype=e,m}}();function HC(){}s(HC,"baseLodash");function bs(c,d){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=e}s(bs,"LodashWrapper"),T.templateSettings={escape:zd,evaluate:lC,interpolate:Sy,variable:"",imports:{_:T}},T.prototype=HC.prototype,T.prototype.constructor=T,bs.prototype=vf(HC.prototype),bs.prototype.constructor=bs;function xt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}s(xt,"LazyWrapper");function pSe(){var c=new xt(this.__wrapped__);return c.__actions__=$i(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=$i(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=$i(this.__views__),c}s(pSe,"lazyClone");function mSe(){if(this.__filtered__){var c=new xt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}s(mSe,"lazyReverse");function gSe(){var c=this.__wrapped__.value(),d=this.__dir__,m=ct(c),y=d<0,E=m?c.length:0,A=I0e(0,E,this.__views__),B=A.start,q=A.end,U=q-B,te=y?q:B-1,re=this.__iteratees__,se=re.length,ge=0,xe=Zn(U,this.__takeCount__);if(!m||!y&&E==U&&xe==U)return JW(c,this.__actions__);var Qe=[];e:for(;U--&&ge<xe;){te+=d;for(var vt=-1,Ze=c[te];++vt<se;){var It=re[vt],Ft=It.iteratee,us=It.type,Si=Ft(Ze);if(us==ce)Ze=Si;else if(!Si){if(us==le)continue e;break e}}Qe[ge++]=Ze}return Qe}s(gSe,"lazyValue"),xt.prototype=vf(HC.prototype),xt.prototype.constructor=xt;function Al(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var y=c[d];this.set(y[0],y[1])}}s(Al,"Hash");function ySe(){this.__data__=Ly?Ly(null):{},this.size=0}s(ySe,"hashClear");function vSe(c){var d=this.has(c)&&delete this.__data__[c];return this.size-=d?1:0,d}s(vSe,"hashDelete");function _Se(c){var d=this.__data__;if(Ly){var m=d[c];return m===a?e:m}return Zt.call(d,c)?d[c]:e}s(_Se,"hashGet");function SSe(c){var d=this.__data__;return Ly?d[c]!==e:Zt.call(d,c)}s(SSe,"hashHas");function ESe(c,d){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Ly&&d===e?a:d,this}s(ESe,"hashSet"),Al.prototype.clear=ySe,Al.prototype.delete=vSe,Al.prototype.get=_Se,Al.prototype.has=SSe,Al.prototype.set=ESe;function Oa(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var y=c[d];this.set(y[0],y[1])}}s(Oa,"ListCache");function CSe(){this.__data__=[],this.size=0}s(CSe,"listCacheClear");function wSe(c){var d=this.__data__,m=VC(d,c);if(m<0)return!1;var y=d.length-1;return m==y?d.pop():jC.call(d,m,1),--this.size,!0}s(wSe,"listCacheDelete");function bSe(c){var d=this.__data__,m=VC(d,c);return m<0?e:d[m][1]}s(bSe,"listCacheGet");function OSe(c){return VC(this.__data__,c)>-1}s(OSe,"listCacheHas");function TSe(c,d){var m=this.__data__,y=VC(m,c);return y<0?(++this.size,m.push([c,d])):m[y][1]=d,this}s(TSe,"listCacheSet"),Oa.prototype.clear=CSe,Oa.prototype.delete=wSe,Oa.prototype.get=bSe,Oa.prototype.has=OSe,Oa.prototype.set=TSe;function Ta(c){var d=-1,m=c==null?0:c.length;for(this.clear();++d<m;){var y=c[d];this.set(y[0],y[1])}}s(Ta,"MapCache");function ASe(){this.size=0,this.__data__={hash:new Al,map:new(Fy||Oa),string:new Al}}s(ASe,"mapCacheClear");function ISe(c){var d=sw(this,c).delete(c);return this.size-=d?1:0,d}s(ISe,"mapCacheDelete");function DSe(c){return sw(this,c).get(c)}s(DSe,"mapCacheGet");function RSe(c){return sw(this,c).has(c)}s(RSe,"mapCacheHas");function NSe(c,d){var m=sw(this,c),y=m.size;return m.set(c,d),this.size+=m.size==y?0:1,this}s(NSe,"mapCacheSet"),Ta.prototype.clear=ASe,Ta.prototype.delete=ISe,Ta.prototype.get=DSe,Ta.prototype.has=RSe,Ta.prototype.set=NSe;function Il(c){var d=-1,m=c==null?0:c.length;for(this.__data__=new Ta;++d<m;)this.add(c[d])}s(Il,"SetCache");function xSe(c){return this.__data__.set(c,a),this}s(xSe,"setCacheAdd");function PSe(c){return this.__data__.has(c)}s(PSe,"setCacheHas"),Il.prototype.add=Il.prototype.push=xSe,Il.prototype.has=PSe;function ho(c){var d=this.__data__=new Oa(c);this.size=d.size}s(ho,"Stack");function BSe(){this.__data__=new Oa,this.size=0}s(BSe,"stackClear");function MSe(c){var d=this.__data__,m=d.delete(c);return this.size=d.size,m}s(MSe,"stackDelete");function FSe(c){return this.__data__.get(c)}s(FSe,"stackGet");function qSe(c){return this.__data__.has(c)}s(qSe,"stackHas");function LSe(c,d){var m=this.__data__;if(m instanceof Oa){var y=m.__data__;if(!Fy||y.length<r-1)return y.push([c,d]),this.size=++m.size,this;m=this.__data__=new Ta(y)}return m.set(c,d),this.size=m.size,this}s(LSe,"stackSet"),ho.prototype.clear=BSe,ho.prototype.delete=MSe,ho.prototype.get=FSe,ho.prototype.has=qSe,ho.prototype.set=LSe;function IW(c,d){var m=ct(c),y=!m&&Pl(c),E=!m&&!y&&Zu(c),A=!m&&!y&&!E&&Cf(c),B=m||y||E||A,q=B?KR(c.length,Y_e):[],U=q.length;for(var te in c)(d||Zt.call(c,te))&&!(B&&(te=="length"||E&&(te=="offset"||te=="parent")||A&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||Ra(te,U)))&&q.push(te);return q}s(IW,"arrayLikeKeys");function DW(c){var d=c.length;return d?c[fN(0,d-1)]:e}s(DW,"arraySample");function USe(c,d){return ow($i(c),Dl(d,0,c.length))}s(USe,"arraySampleSize");function jSe(c){return ow($i(c))}s(jSe,"arrayShuffle");function rN(c,d,m){(m!==e&&!po(c[d],m)||m===e&&!(d in c))&&Aa(c,d,m)}s(rN,"assignMergeValue");function jy(c,d,m){var y=c[d];(!(Zt.call(c,d)&&po(y,m))||m===e&&!(d in c))&&Aa(c,d,m)}s(jy,"assignValue");function VC(c,d){for(var m=c.length;m--;)if(po(c[m][0],d))return m;return-1}s(VC,"assocIndexOf");function $Se(c,d,m,y){return Ku(c,function(E,A,B){d(y,E,m(E),B)}),y}s($Se,"baseAggregator");function RW(c,d){return c&&$o(d,_n(d),c)}s(RW,"baseAssign");function kSe(c,d){return c&&$o(d,Gi(d),c)}s(kSe,"baseAssignIn");function Aa(c,d,m){d=="__proto__"&&$C?$C(c,d,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[d]=m}s(Aa,"baseAssignValue");function nN(c,d){for(var m=-1,y=d.length,E=H(y),A=c==null;++m<y;)E[m]=A?e:qN(c,d[m]);return E}s(nN,"baseAt");function Dl(c,d,m){return c===c&&(m!==e&&(c=c<=m?c:m),d!==e&&(c=c>=d?c:d)),c}s(Dl,"baseClamp");function Os(c,d,m,y,E,A){var B,q=d&f,U=d&h,te=d&p;if(m&&(B=E?m(c,y,E,A):m(c)),B!==e)return B;if(!Br(c))return c;var re=ct(c);if(re){if(B=R0e(c),!q)return $i(c,B)}else{var se=ei(c),ge=se==$t||se==Ui;if(Zu(c))return ez(c,q);if(se==Pn||se==Lr||ge&&!E){if(B=U||ge?{}:_z(c),!q)return U?_0e(c,kSe(B,c)):v0e(c,RW(B,c))}else{if(!Yt[se])return E?c:{};B=N0e(c,se,q)}}A||(A=new ho);var xe=A.get(c);if(xe)return xe;A.set(c,B),Yz(c)?c.forEach(function(Ze){B.add(Os(Ze,d,m,Ze,c,A))}):Hz(c)&&c.forEach(function(Ze,It){B.set(It,Os(Ze,d,m,It,c,A))});var Qe=te?U?wN:CN:U?Gi:_n,vt=re?e:Qe(c);return M(vt||c,function(Ze,It){vt&&(It=Ze,Ze=c[It]),jy(B,It,Os(Ze,d,m,It,c,A))}),B}s(Os,"baseClone");function GSe(c){var d=_n(c);return function(m){return NW(m,c,d)}}s(GSe,"baseConforms");function NW(c,d,m){var y=m.length;if(c==null)return!y;for(c=cr(c);y--;){var E=m[y],A=d[E],B=c[E];if(B===e&&!(E in c)||!A(B))return!1}return!0}s(NW,"baseConformsTo");function xW(c,d,m){if(typeof c!="function")throw new ws(i);return Vy(function(){c.apply(e,m)},d)}s(xW,"baseDelay");function $y(c,d,m,y){var E=-1,A=J,B=!0,q=c.length,U=[],te=d.length;if(!q)return U;m&&(d=de(d,ss(m))),y?(A=ie,B=!1):d.length>=r&&(A=By,B=!1,d=new Il(d));e:for(;++E<q;){var re=c[E],se=m==null?re:m(re);if(re=y||re!==0?re:0,B&&se===se){for(var ge=te;ge--;)if(d[ge]===se)continue e;U.push(re)}else A(d,se,y)||U.push(re)}return U}s($y,"baseDifference");var Ku=sz(jo),PW=sz(sN,!0);function WSe(c,d){var m=!0;return Ku(c,function(y,E,A){return m=!!d(y,E,A),m}),m}s(WSe,"baseEvery");function YC(c,d,m){for(var y=-1,E=c.length;++y<E;){var A=c[y],B=d(A);if(B!=null&&(q===e?B===B&&!as(B):m(B,q)))var q=B,U=A}return U}s(YC,"baseExtremum");function zSe(c,d,m,y){var E=c.length;for(m=pt(m),m<0&&(m=-m>E?0:E+m),y=y===e||y>E?E:pt(y),y<0&&(y+=E),y=m>y?0:Xz(y);m<y;)c[m++]=d;return c}s(zSe,"baseFill");function BW(c,d){var m=[];return Ku(c,function(y,E,A){d(y,E,A)&&m.push(y)}),m}s(BW,"baseFilter");function Bn(c,d,m,y,E){var A=-1,B=c.length;for(m||(m=P0e),E||(E=[]);++A<B;){var q=c[A];d>0&&m(q)?d>1?Bn(q,d-1,m,y,E):at(E,q):y||(E[E.length]=q)}return E}s(Bn,"baseFlatten");var iN=oz(),MW=oz(!0);function jo(c,d){return c&&iN(c,d,_n)}s(jo,"baseForOwn");function sN(c,d){return c&&MW(c,d,_n)}s(sN,"baseForOwnRight");function KC(c,d){return V(d,function(m){return Na(c[m])})}s(KC,"baseFunctions");function Rl(c,d){d=Ju(d,c);for(var m=0,y=d.length;c!=null&&m<y;)c=c[ko(d[m++])];return m&&m==y?c:e}s(Rl,"baseGet");function FW(c,d,m){var y=d(c);return ct(c)?y:at(y,m(c))}s(FW,"baseGetAllKeys");function vi(c){return c==null?c===e?pl:hl:Tl&&Tl in cr(c)?A0e(c):j0e(c)}s(vi,"baseGetTag");function oN(c,d){return c>d}s(oN,"baseGt");function HSe(c,d){return c!=null&&Zt.call(c,d)}s(HSe,"baseHas");function VSe(c,d){return c!=null&&d in cr(c)}s(VSe,"baseHasIn");function YSe(c,d,m){return c>=Zn(d,m)&&c<mn(d,m)}s(YSe,"baseInRange");function aN(c,d,m){for(var y=m?ie:J,E=c[0].length,A=c.length,B=A,q=H(A),U=1/0,te=[];B--;){var re=c[B];B&&d&&(re=de(re,ss(d))),U=Zn(re.length,U),q[B]=!m&&(d||E>=120&&re.length>=120)?new Il(B&&re):e}re=c[0];var se=-1,ge=q[0];e:for(;++se<E&&te.length<U;){var xe=re[se],Qe=d?d(xe):xe;if(xe=m||xe!==0?xe:0,!(ge?By(ge,Qe):y(te,Qe,m))){for(B=A;--B;){var vt=q[B];if(!(vt?By(vt,Qe):y(c[B],Qe,m)))continue e}ge&&ge.push(Qe),te.push(xe)}}return te}s(aN,"baseIntersection");function KSe(c,d,m,y){return jo(c,function(E,A,B){d(y,m(E),A,B)}),y}s(KSe,"baseInverter");function ky(c,d,m){d=Ju(d,c),c=wz(c,d);var y=c==null?c:c[ko(As(d))];return y==null?e:b(y,c,m)}s(ky,"baseInvoke");function qW(c){return jr(c)&&vi(c)==Lr}s(qW,"baseIsArguments");function XSe(c){return jr(c)&&vi(c)==ji}s(XSe,"baseIsArrayBuffer");function JSe(c){return jr(c)&&vi(c)==fn}s(JSe,"baseIsDate");function Gy(c,d,m,y,E){return c===d?!0:c==null||d==null||!jr(c)&&!jr(d)?c!==c&&d!==d:QSe(c,d,m,y,Gy,E)}s(Gy,"baseIsEqual");function QSe(c,d,m,y,E,A){var B=ct(c),q=ct(d),U=B?yn:ei(c),te=q?yn:ei(d);U=U==Lr?Pn:U,te=te==Lr?Pn:te;var re=U==Pn,se=te==Pn,ge=U==te;if(ge&&Zu(c)){if(!Zu(d))return!1;B=!0,re=!1}if(ge&&!re)return A||(A=new ho),B||Cf(c)?gz(c,d,m,y,E,A):O0e(c,d,U,m,y,E,A);if(!(m&g)){var xe=re&&Zt.call(c,"__wrapped__"),Qe=se&&Zt.call(d,"__wrapped__");if(xe||Qe){var vt=xe?c.value():c,Ze=Qe?d.value():d;return A||(A=new ho),E(vt,Ze,m,y,A)}}return ge?(A||(A=new ho),T0e(c,d,m,y,E,A)):!1}s(QSe,"baseIsEqualDeep");function ZSe(c){return jr(c)&&ei(c)==Pr}s(ZSe,"baseIsMap");function uN(c,d,m,y){var E=m.length,A=E,B=!y;if(c==null)return!A;for(c=cr(c);E--;){var q=m[E];if(B&&q[2]?q[1]!==c[q[0]]:!(q[0]in c))return!1}for(;++E<A;){q=m[E];var U=q[0],te=c[U],re=q[1];if(B&&q[2]){if(te===e&&!(U in c))return!1}else{var se=new ho;if(y)var ge=y(te,re,U,c,d,se);if(!(ge===e?Gy(re,te,g|_,y,se):ge))return!1}}return!0}s(uN,"baseIsMatch");function LW(c){if(!Br(c)||M0e(c))return!1;var d=Na(c)?Z_e:FR;return d.test(xl(c))}s(LW,"baseIsNative");function e0e(c){return jr(c)&&vi(c)==Xn}s(e0e,"baseIsRegExp");function t0e(c){return jr(c)&&ei(c)==hn}s(t0e,"baseIsSet");function r0e(c){return jr(c)&&fw(c.length)&&!!ar[vi(c)]}s(r0e,"baseIsTypedArray");function UW(c){return typeof c=="function"?c:c==null?Wi:typeof c=="object"?ct(c)?kW(c[0],c[1]):$W(c):aH(c)}s(UW,"baseIteratee");function cN(c){if(!Hy(c))return sSe(c);var d=[];for(var m in cr(c))Zt.call(c,m)&&m!="constructor"&&d.push(m);return d}s(cN,"baseKeys");function n0e(c){if(!Br(c))return U0e(c);var d=Hy(c),m=[];for(var y in c)y=="constructor"&&(d||!Zt.call(c,y))||m.push(y);return m}s(n0e,"baseKeysIn");function lN(c,d){return c<d}s(lN,"baseLt");function jW(c,d){var m=-1,y=ki(c)?H(c.length):[];return Ku(c,function(E,A,B){y[++m]=d(E,A,B)}),y}s(jW,"baseMap");function $W(c){var d=ON(c);return d.length==1&&d[0][2]?Ez(d[0][0],d[0][1]):function(m){return m===c||uN(m,c,d)}}s($W,"baseMatches");function kW(c,d){return AN(c)&&Sz(d)?Ez(ko(c),d):function(m){var y=qN(m,c);return y===e&&y===d?LN(m,c):Gy(d,y,g|_)}}s(kW,"baseMatchesProperty");function XC(c,d,m,y,E){c!==d&&iN(d,function(A,B){if(E||(E=new ho),Br(A))i0e(c,d,B,m,XC,y,E);else{var q=y?y(DN(c,B),A,B+"",c,d,E):e;q===e&&(q=A),rN(c,B,q)}},Gi)}s(XC,"baseMerge");function i0e(c,d,m,y,E,A,B){var q=DN(c,m),U=DN(d,m),te=B.get(U);if(te){rN(c,m,te);return}var re=A?A(q,U,m+"",c,d,B):e,se=re===e;if(se){var ge=ct(U),xe=!ge&&Zu(U),Qe=!ge&&!xe&&Cf(U);re=U,ge||xe||Qe?ct(q)?re=q:Vr(q)?re=$i(q):xe?(se=!1,re=ez(U,!0)):Qe?(se=!1,re=tz(U,!0)):re=[]:Yy(U)||Pl(U)?(re=q,Pl(q)?re=Jz(q):(!Br(q)||Na(q))&&(re=_z(U))):se=!1}se&&(B.set(U,re),E(re,U,y,A,B),B.delete(U)),rN(c,m,re)}s(i0e,"baseMergeDeep");function GW(c,d){var m=c.length;if(m)return d+=d<0?m:0,Ra(d,m)?c[d]:e}s(GW,"baseNth");function WW(c,d,m){d.length?d=de(d,function(A){return ct(A)?function(B){return Rl(B,A.length===1?A[0]:A)}:A}):d=[Wi];var y=-1;d=de(d,ss(Je()));var E=jW(c,function(A,B,q){var U=de(d,function(te){return te(A)});return{criteria:U,index:++y,value:A}});return wa(E,function(A,B){return y0e(A,B,m)})}s(WW,"baseOrderBy");function s0e(c,d){return zW(c,d,function(m,y){return LN(c,y)})}s(s0e,"basePick");function zW(c,d,m){for(var y=-1,E=d.length,A={};++y<E;){var B=d[y],q=Rl(c,B);m(q,B)&&Wy(A,Ju(B,c),q)}return A}s(zW,"basePickBy");function o0e(c){return function(d){return Rl(d,c)}}s(o0e,"basePropertyDeep");function dN(c,d,m,y){var E=y?Ke:we,A=-1,B=d.length,q=c;for(c===d&&(d=$i(d)),m&&(q=de(c,ss(m)));++A<B;)for(var U=0,te=d[A],re=m?m(te):te;(U=E(q,re,U,y))>-1;)q!==c&&jC.call(q,U,1),jC.call(c,U,1);return c}s(dN,"basePullAll");function HW(c,d){for(var m=c?d.length:0,y=m-1;m--;){var E=d[m];if(m==y||E!==A){var A=E;Ra(E)?jC.call(c,E,1):mN(c,E)}}return c}s(HW,"basePullAt");function fN(c,d){return c+GC(TW()*(d-c+1))}s(fN,"baseRandom");function a0e(c,d,m,y){for(var E=-1,A=mn(kC((d-c)/(m||1)),0),B=H(A);A--;)B[y?A:++E]=c,c+=m;return B}s(a0e,"baseRange");function hN(c,d){var m="";if(!c||d<1||d>Ee)return m;do d%2&&(m+=c),d=GC(d/2),d&&(c+=c);while(d);return m}s(hN,"baseRepeat");function Et(c,d){return RN(Cz(c,d,Wi),c+"")}s(Et,"baseRest");function u0e(c){return DW(wf(c))}s(u0e,"baseSample");function c0e(c,d){var m=wf(c);return ow(m,Dl(d,0,m.length))}s(c0e,"baseSampleSize");function Wy(c,d,m,y){if(!Br(c))return c;d=Ju(d,c);for(var E=-1,A=d.length,B=A-1,q=c;q!=null&&++E<A;){var U=ko(d[E]),te=m;if(U==="__proto__"||U==="constructor"||U==="prototype")return c;if(E!=B){var re=q[U];te=y?y(re,U,q):e,te===e&&(te=Br(re)?re:Ra(d[E+1])?[]:{})}jy(q,U,te),q=q[U]}return c}s(Wy,"baseSet");var VW=WC?function(c,d){return WC.set(c,d),c}:Wi,l0e=$C?function(c,d){return $C(c,"toString",{configurable:!0,enumerable:!1,value:jN(d),writable:!0})}:Wi;function d0e(c){return ow(wf(c))}s(d0e,"baseShuffle");function Ts(c,d,m){var y=-1,E=c.length;d<0&&(d=-d>E?0:E+d),m=m>E?E:m,m<0&&(m+=E),E=d>m?0:m-d>>>0,d>>>=0;for(var A=H(E);++y<E;)A[y]=c[y+d];return A}s(Ts,"baseSlice");function f0e(c,d){var m;return Ku(c,function(y,E,A){return m=d(y,E,A),!m}),!!m}s(f0e,"baseSome");function JC(c,d,m){var y=0,E=c==null?y:c.length;if(typeof d=="number"&&d===d&&E<=Kn){for(;y<E;){var A=y+E>>>1,B=c[A];B!==null&&!as(B)&&(m?B<=d:B<d)?y=A+1:E=A}return E}return pN(c,d,Wi,m)}s(JC,"baseSortedIndex");function pN(c,d,m,y){var E=0,A=c==null?0:c.length;if(A===0)return 0;d=m(d);for(var B=d!==d,q=d===null,U=as(d),te=d===e;E<A;){var re=GC((E+A)/2),se=m(c[re]),ge=se!==e,xe=se===null,Qe=se===se,vt=as(se);if(B)var Ze=y||Qe;else te?Ze=Qe&&(y||ge):q?Ze=Qe&&ge&&(y||!xe):U?Ze=Qe&&ge&&!xe&&(y||!vt):xe||vt?Ze=!1:Ze=y?se<=d:se<d;Ze?E=re+1:A=re}return Zn(A,rt)}s(pN,"baseSortedIndexBy");function YW(c,d){for(var m=-1,y=c.length,E=0,A=[];++m<y;){var B=c[m],q=d?d(B):B;if(!m||!po(q,U)){var U=q;A[E++]=B===0?0:B}}return A}s(YW,"baseSortedUniq");function KW(c){return typeof c=="number"?c:as(c)?dt:+c}s(KW,"baseToNumber");function os(c){if(typeof c=="string")return c;if(ct(c))return de(c,os)+"";if(as(c))return AW?AW.call(c):"";var d=c+"";return d=="0"&&1/c==-Pe?"-0":d}s(os,"baseToString");function Xu(c,d,m){var y=-1,E=J,A=c.length,B=!0,q=[],U=q;if(m)B=!1,E=ie;else if(A>=r){var te=d?null:w0e(c);if(te)return xC(te);B=!1,E=By,U=new Il}else U=d?[]:q;e:for(;++y<A;){var re=c[y],se=d?d(re):re;if(re=m||re!==0?re:0,B&&se===se){for(var ge=U.length;ge--;)if(U[ge]===se)continue e;d&&U.push(se),q.push(re)}else E(U,se,m)||(U!==q&&U.push(se),q.push(re))}return q}s(Xu,"baseUniq");function mN(c,d){return d=Ju(d,c),c=wz(c,d),c==null||delete c[ko(As(d))]}s(mN,"baseUnset");function XW(c,d,m,y){return Wy(c,d,m(Rl(c,d)),y)}s(XW,"baseUpdate");function QC(c,d,m,y){for(var E=c.length,A=y?E:-1;(y?A--:++A<E)&&d(c[A],A,c););return m?Ts(c,y?0:A,y?A+1:E):Ts(c,y?A+1:0,y?E:A)}s(QC,"baseWhile");function JW(c,d){var m=c;return m instanceof xt&&(m=m.value()),Rt(d,function(y,E){return E.func.apply(E.thisArg,at([y],E.args))},m)}s(JW,"baseWrapperValue");function gN(c,d,m){var y=c.length;if(y<2)return y?Xu(c[0]):[];for(var E=-1,A=H(y);++E<y;)for(var B=c[E],q=-1;++q<y;)q!=E&&(A[E]=$y(A[E]||B,c[q],d,m));return Xu(Bn(A,1),d,m)}s(gN,"baseXor");function QW(c,d,m){for(var y=-1,E=c.length,A=d.length,B={};++y<E;){var q=y<A?d[y]:e;m(B,c[y],q)}return B}s(QW,"baseZipObject");function yN(c){return Vr(c)?c:[]}s(yN,"castArrayLikeObject");function vN(c){return typeof c=="function"?c:Wi}s(vN,"castFunction");function Ju(c,d){return ct(c)?c:AN(c,d)?[c]:Az(Qt(c))}s(Ju,"castPath");var h0e=Et;function Qu(c,d,m){var y=c.length;return m=m===e?y:m,!d&&m>=y?c:Ts(c,d,m)}s(Qu,"castSlice");var ZW=eSe||function(c){return sn.clearTimeout(c)};function ez(c,d){if(d)return c.slice();var m=c.length,y=EW?EW(m):new c.constructor(m);return c.copy(y),y}s(ez,"cloneBuffer");function _N(c){var d=new c.constructor(c.byteLength);return new LC(d).set(new LC(c)),d}s(_N,"cloneArrayBuffer");function p0e(c,d){var m=d?_N(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}s(p0e,"cloneDataView");function m0e(c){var d=new c.constructor(c.source,Sl.exec(c));return d.lastIndex=c.lastIndex,d}s(m0e,"cloneRegExp");function g0e(c){return Uy?cr(Uy.call(c)):{}}s(g0e,"cloneSymbol");function tz(c,d){var m=d?_N(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}s(tz,"cloneTypedArray");function rz(c,d){if(c!==d){var m=c!==e,y=c===null,E=c===c,A=as(c),B=d!==e,q=d===null,U=d===d,te=as(d);if(!q&&!te&&!A&&c>d||A&&B&&U&&!q&&!te||y&&B&&U||!m&&U||!E)return 1;if(!y&&!A&&!te&&c<d||te&&m&&E&&!y&&!A||q&&m&&E||!B&&E||!U)return-1}return 0}s(rz,"compareAscending");function y0e(c,d,m){for(var y=-1,E=c.criteria,A=d.criteria,B=E.length,q=m.length;++y<B;){var U=rz(E[y],A[y]);if(U){if(y>=q)return U;var te=m[y];return U*(te=="desc"?-1:1)}}return c.index-d.index}s(y0e,"compareMultiple");function nz(c,d,m,y){for(var E=-1,A=c.length,B=m.length,q=-1,U=d.length,te=mn(A-B,0),re=H(U+te),se=!y;++q<U;)re[q]=d[q];for(;++E<B;)(se||E<A)&&(re[m[E]]=c[E]);for(;te--;)re[q++]=c[E++];return re}s(nz,"composeArgs");function iz(c,d,m,y){for(var E=-1,A=c.length,B=-1,q=m.length,U=-1,te=d.length,re=mn(A-q,0),se=H(re+te),ge=!y;++E<re;)se[E]=c[E];for(var xe=E;++U<te;)se[xe+U]=d[U];for(;++B<q;)(ge||E<A)&&(se[xe+m[B]]=c[E++]);return se}s(iz,"composeArgsRight");function $i(c,d){var m=-1,y=c.length;for(d||(d=H(y));++m<y;)d[m]=c[m];return d}s($i,"copyArray");function $o(c,d,m,y){var E=!m;m||(m={});for(var A=-1,B=d.length;++A<B;){var q=d[A],U=y?y(m[q],c[q],q,m,c):e;U===e&&(U=c[q]),E?Aa(m,q,U):jy(m,q,U)}return m}s($o,"copyObject");function v0e(c,d){return $o(c,TN(c),d)}s(v0e,"copySymbols");function _0e(c,d){return $o(c,yz(c),d)}s(_0e,"copySymbolsIn");function ZC(c,d){return function(m,y){var E=ct(m)?R:$Se,A=d?d():{};return E(m,c,Je(y,2),A)}}s(ZC,"createAggregator");function _f(c){return Et(function(d,m){var y=-1,E=m.length,A=E>1?m[E-1]:e,B=E>2?m[2]:e;for(A=c.length>3&&typeof A=="function"?(E--,A):e,B&&_i(m[0],m[1],B)&&(A=E<3?e:A,E=1),d=cr(d);++y<E;){var q=m[y];q&&c(d,q,y,A)}return d})}s(_f,"createAssigner");function sz(c,d){return function(m,y){if(m==null)return m;if(!ki(m))return c(m,y);for(var E=m.length,A=d?E:-1,B=cr(m);(d?A--:++A<E)&&y(B[A],A,B)!==!1;);return m}}s(sz,"createBaseEach");function oz(c){return function(d,m,y){for(var E=-1,A=cr(d),B=y(d),q=B.length;q--;){var U=B[c?q:++E];if(m(A[U],U,A)===!1)break}return d}}s(oz,"createBaseFor");function S0e(c,d,m){var y=d&C,E=zy(c);function A(){var B=this&&this!==sn&&this instanceof A?E:c;return B.apply(y?m:this,arguments)}return s(A,"wrapper"),A}s(S0e,"createBind");function az(c){return function(d){d=Qt(d);var m=hf(d)?fo(d):e,y=m?m[0]:d.charAt(0),E=m?Qu(m,1).join(""):d.slice(1);return y[c]()+E}}s(az,"createCaseFirst");function Sf(c){return function(d){return Rt(sH(iH(d).replace(sf,"")),c,"")}}s(Sf,"createCompounder");function zy(c){return function(){var d=arguments;switch(d.length){case 0:return new c;case 1:return new c(d[0]);case 2:return new c(d[0],d[1]);case 3:return new c(d[0],d[1],d[2]);case 4:return new c(d[0],d[1],d[2],d[3]);case 5:return new c(d[0],d[1],d[2],d[3],d[4]);case 6:return new c(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new c(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var m=vf(c.prototype),y=c.apply(m,d);return Br(y)?y:m}}s(zy,"createCtor");function E0e(c,d,m){var y=zy(c);function E(){for(var A=arguments.length,B=H(A),q=A,U=Ef(E);q--;)B[q]=arguments[q];var te=A<3&&B[0]!==U&&B[A-1]!==U?[]:Hu(B,U);if(A-=te.length,A<m)return fz(c,d,ew,E.placeholder,e,B,te,e,e,m-A);var re=this&&this!==sn&&this instanceof E?y:c;return b(re,this,B)}return s(E,"wrapper"),E}s(E0e,"createCurry");function uz(c){return function(d,m,y){var E=cr(d);if(!ki(d)){var A=Je(m,3);d=_n(d),m=s(function(q){return A(E[q],q,E)},"predicate")}var B=c(d,m,y);return B>-1?E[A?d[B]:B]:e}}s(uz,"createFind");function cz(c){return Da(function(d){var m=d.length,y=m,E=bs.prototype.thru;for(c&&d.reverse();y--;){var A=d[y];if(typeof A!="function")throw new ws(i);if(E&&!B&&iw(A)=="wrapper")var B=new bs([],!0)}for(y=B?y:m;++y<m;){A=d[y];var q=iw(A),U=q=="wrapper"?bN(A):e;U&&IN(U[0])&&U[1]==(X|N|x|G)&&!U[4].length&&U[9]==1?B=B[iw(U[0])].apply(B,U[3]):B=A.length==1&&IN(A)?B[q]():B.thru(A)}return function(){var te=arguments,re=te[0];if(B&&te.length==1&&ct(re))return B.plant(re).value();for(var se=0,ge=m?d[se].apply(this,te):re;++se<m;)ge=d[se].call(this,ge);return ge}})}s(cz,"createFlow");function ew(c,d,m,y,E,A,B,q,U,te){var re=d&X,se=d&C,ge=d&D,xe=d&(N|F),Qe=d&ue,vt=ge?e:zy(c);function Ze(){for(var It=arguments.length,Ft=H(It),us=It;us--;)Ft[us]=arguments[us];if(xe)var Si=Ef(Ze),cs=P_e(Ft,Si);if(y&&(Ft=nz(Ft,y,E,xe)),A&&(Ft=iz(Ft,A,B,xe)),It-=cs,xe&&It<te){var Yr=Hu(Ft,Si);return fz(c,d,ew,Ze.placeholder,m,Ft,Yr,q,U,te-It)}var mo=se?m:this,Pa=ge?mo[c]:c;return It=Ft.length,q?Ft=$0e(Ft,q):Qe&&It>1&&Ft.reverse(),re&&U<It&&(Ft.length=U),this&&this!==sn&&this instanceof Ze&&(Pa=vt||zy(Pa)),Pa.apply(mo,Ft)}return s(Ze,"wrapper"),Ze}s(ew,"createHybrid");function lz(c,d){return function(m,y){return KSe(m,c,d(y),{})}}s(lz,"createInverter");function tw(c,d){return function(m,y){var E;if(m===e&&y===e)return d;if(m!==e&&(E=m),y!==e){if(E===e)return y;typeof m=="string"||typeof y=="string"?(m=os(m),y=os(y)):(m=KW(m),y=KW(y)),E=c(m,y)}return E}}s(tw,"createMathOperation");function SN(c){return Da(function(d){return d=de(d,ss(Je())),Et(function(m){var y=this;return c(d,function(E){return b(E,y,m)})})})}s(SN,"createOver");function rw(c,d){d=d===e?" ":os(d);var m=d.length;if(m<2)return m?hN(d,c):d;var y=hN(d,kC(c/pf(d)));return hf(d)?Qu(fo(y),0,c).join(""):y.slice(0,c)}s(rw,"createPadding");function C0e(c,d,m,y){var E=d&C,A=zy(c);function B(){for(var q=-1,U=arguments.length,te=-1,re=y.length,se=H(re+U),ge=this&&this!==sn&&this instanceof B?A:c;++te<re;)se[te]=y[te];for(;U--;)se[te++]=arguments[++q];return b(ge,E?m:this,se)}return s(B,"wrapper"),B}s(C0e,"createPartial");function dz(c){return function(d,m,y){return y&&typeof y!="number"&&_i(d,m,y)&&(m=y=e),d=xa(d),m===e?(m=d,d=0):m=xa(m),y=y===e?d<m?1:-1:xa(y),a0e(d,m,y,c)}}s(dz,"createRange");function nw(c){return function(d,m){return typeof d=="string"&&typeof m=="string"||(d=Is(d),m=Is(m)),c(d,m)}}s(nw,"createRelationalOperation");function fz(c,d,m,y,E,A,B,q,U,te){var re=d&N,se=re?B:e,ge=re?e:B,xe=re?A:e,Qe=re?e:A;d|=re?x:P,d&=~(re?P:x),d&O||(d&=~(C|D));var vt=[c,d,E,xe,se,Qe,ge,q,U,te],Ze=m.apply(e,vt);return IN(c)&&bz(Ze,vt),Ze.placeholder=y,Oz(Ze,c,d)}s(fz,"createRecurry");function EN(c){var d=pn[c];return function(m,y){if(m=Is(m),y=y==null?0:Zn(pt(y),292),y&&OW(m)){var E=(Qt(m)+"e").split("e"),A=d(E[0]+"e"+(+E[1]+y));return E=(Qt(A)+"e").split("e"),+(E[0]+"e"+(+E[1]-y))}return d(m)}}s(EN,"createRound");var w0e=gf&&1/xC(new gf([,-0]))[1]==Pe?function(c){return new gf(c)}:GN;function hz(c){return function(d){var m=ei(d);return m==Pr?JR(d):m==hn?j_e(d):x_e(d,c(d))}}s(hz,"createToPairs");function Ia(c,d,m,y,E,A,B,q){var U=d&D;if(!U&&typeof c!="function")throw new ws(i);var te=y?y.length:0;if(te||(d&=~(x|P),y=E=e),B=B===e?B:mn(pt(B),0),q=q===e?q:pt(q),te-=E?E.length:0,d&P){var re=y,se=E;y=E=e}var ge=U?e:bN(c),xe=[c,d,m,y,E,re,se,A,B,q];if(ge&&L0e(xe,ge),c=xe[0],d=xe[1],m=xe[2],y=xe[3],E=xe[4],q=xe[9]=xe[9]===e?U?0:c.length:mn(xe[9]-te,0),!q&&d&(N|F)&&(d&=~(N|F)),!d||d==C)var Qe=S0e(c,d,m);else d==N||d==F?Qe=E0e(c,d,q):(d==x||d==(C|x))&&!E.length?Qe=C0e(c,d,m,y):Qe=ew.apply(e,xe);var vt=ge?VW:bz;return Oz(vt(Qe,xe),c,d)}s(Ia,"createWrap");function pz(c,d,m,y){return c===e||po(c,mf[m])&&!Zt.call(y,m)?d:c}s(pz,"customDefaultsAssignIn");function mz(c,d,m,y,E,A){return Br(c)&&Br(d)&&(A.set(d,c),XC(c,d,e,mz,A),A.delete(d)),c}s(mz,"customDefaultsMerge");function b0e(c){return Yy(c)?e:c}s(b0e,"customOmitClone");function gz(c,d,m,y,E,A){var B=m&g,q=c.length,U=d.length;if(q!=U&&!(B&&U>q))return!1;var te=A.get(c),re=A.get(d);if(te&&re)return te==d&&re==c;var se=-1,ge=!0,xe=m&_?new Il:e;for(A.set(c,d),A.set(d,c);++se<q;){var Qe=c[se],vt=d[se];if(y)var Ze=B?y(vt,Qe,se,d,c,A):y(Qe,vt,se,c,d,A);if(Ze!==e){if(Ze)continue;ge=!1;break}if(xe){if(!Jn(d,function(It,Ft){if(!By(xe,Ft)&&(Qe===It||E(Qe,It,m,y,A)))return xe.push(Ft)})){ge=!1;break}}else if(!(Qe===vt||E(Qe,vt,m,y,A))){ge=!1;break}}return A.delete(c),A.delete(d),ge}s(gz,"equalArrays");function O0e(c,d,m,y,E,A,B){switch(m){case qo:if(c.byteLength!=d.byteLength||c.byteOffset!=d.byteOffset)return!1;c=c.buffer,d=d.buffer;case ji:return!(c.byteLength!=d.byteLength||!A(new LC(c),new LC(d)));case Li:case fn:case Cs:return po(+c,+d);case vn:return c.name==d.name&&c.message==d.message;case Xn:case co:return c==d+"";case Pr:var q=JR;case hn:var U=y&g;if(q||(q=xC),c.size!=d.size&&!U)return!1;var te=B.get(c);if(te)return te==d;y|=_,B.set(c,d);var re=gz(q(c),q(d),y,E,A,B);return B.delete(c),re;case Fo:if(Uy)return Uy.call(c)==Uy.call(d)}return!1}s(O0e,"equalByTag");function T0e(c,d,m,y,E,A){var B=m&g,q=CN(c),U=q.length,te=CN(d),re=te.length;if(U!=re&&!B)return!1;for(var se=U;se--;){var ge=q[se];if(!(B?ge in d:Zt.call(d,ge)))return!1}var xe=A.get(c),Qe=A.get(d);if(xe&&Qe)return xe==d&&Qe==c;var vt=!0;A.set(c,d),A.set(d,c);for(var Ze=B;++se<U;){ge=q[se];var It=c[ge],Ft=d[ge];if(y)var us=B?y(Ft,It,ge,d,c,A):y(It,Ft,ge,c,d,A);if(!(us===e?It===Ft||E(It,Ft,m,y,A):us)){vt=!1;break}Ze||(Ze=ge=="constructor")}if(vt&&!Ze){var Si=c.constructor,cs=d.constructor;Si!=cs&&"constructor"in c&&"constructor"in d&&!(typeof Si=="function"&&Si instanceof Si&&typeof cs=="function"&&cs instanceof cs)&&(vt=!1)}return A.delete(c),A.delete(d),vt}s(T0e,"equalObjects");function Da(c){return RN(Cz(c,e,Nz),c+"")}s(Da,"flatRest");function CN(c){return FW(c,_n,TN)}s(CN,"getAllKeys");function wN(c){return FW(c,Gi,yz)}s(wN,"getAllKeysIn");var bN=WC?function(c){return WC.get(c)}:GN;function iw(c){for(var d=c.name+"",m=yf[d],y=Zt.call(yf,d)?m.length:0;y--;){var E=m[y],A=E.func;if(A==null||A==c)return E.name}return d}s(iw,"getFuncName");function Ef(c){var d=Zt.call(T,"placeholder")?T:c;return d.placeholder}s(Ef,"getHolder");function Je(){var c=T.iteratee||$N;return c=c===$N?UW:c,arguments.length?c(arguments[0],arguments[1]):c}s(Je,"getIteratee");function sw(c,d){var m=c.__data__;return B0e(d)?m[typeof d=="string"?"string":"hash"]:m.map}s(sw,"getMapData");function ON(c){for(var d=_n(c),m=d.length;m--;){var y=d[m],E=c[y];d[m]=[y,E,Sz(E)]}return d}s(ON,"getMatchData");function Nl(c,d){var m=q_e(c,d);return LW(m)?m:e}s(Nl,"getNative");function A0e(c){var d=Zt.call(c,Tl),m=c[Tl];try{c[Tl]=e;var y=!0}catch{}var E=FC.call(c);return y&&(d?c[Tl]=m:delete c[Tl]),E}s(A0e,"getRawTag");var TN=ZR?function(c){return c==null?[]:(c=cr(c),V(ZR(c),function(d){return wW.call(c,d)}))}:WN,yz=ZR?function(c){for(var d=[];c;)at(d,TN(c)),c=UC(c);return d}:WN,ei=vi;(eN&&ei(new eN(new ArrayBuffer(1)))!=qo||Fy&&ei(new Fy)!=Pr||tN&&ei(tN.resolve())!=ma||gf&&ei(new gf)!=hn||qy&&ei(new qy)!=is)&&(ei=s(function(c){var d=vi(c),m=d==Pn?c.constructor:e,y=m?xl(m):"";if(y)switch(y){case cSe:return qo;case lSe:return Pr;case dSe:return ma;case fSe:return hn;case hSe:return is}return d},"getTag"));function I0e(c,d,m){for(var y=-1,E=m.length;++y<E;){var A=m[y],B=A.size;switch(A.type){case"drop":c+=B;break;case"dropRight":d-=B;break;case"take":d=Zn(d,c+B);break;case"takeRight":c=mn(c,d-B);break}}return{start:c,end:d}}s(I0e,"getView");function D0e(c){var d=c.match(xR);return d?d[1].split(_l):[]}s(D0e,"getWrapDetails");function vz(c,d,m){d=Ju(d,c);for(var y=-1,E=d.length,A=!1;++y<E;){var B=ko(d[y]);if(!(A=c!=null&&m(c,B)))break;c=c[B]}return A||++y!=E?A:(E=c==null?0:c.length,!!E&&fw(E)&&Ra(B,E)&&(ct(c)||Pl(c)))}s(vz,"hasPath");function R0e(c){var d=c.length,m=new c.constructor(d);return d&&typeof c[0]=="string"&&Zt.call(c,"index")&&(m.index=c.index,m.input=c.input),m}s(R0e,"initCloneArray");function _z(c){return typeof c.constructor=="function"&&!Hy(c)?vf(UC(c)):{}}s(_z,"initCloneObject");function N0e(c,d,m){var y=c.constructor;switch(d){case ji:return _N(c);case Li:case fn:return new y(+c);case qo:return p0e(c,m);case Gd:case gy:case ga:case yy:case Lo:case vy:case $u:case _y:case ku:return tz(c,m);case Pr:return new y;case Cs:case co:return new y(c);case Xn:return m0e(c);case hn:return new y;case Fo:return g0e(c)}}s(N0e,"initCloneByTag");function x0e(c,d){var m=d.length;if(!m)return c;var y=m-1;return d[y]=(m>1?"& ":"")+d[y],d=d.join(m>2?", ":" "),c.replace(vl,`{
/* [wrapped with `+d+`] */
`)}s(x0e,"insertWrapDetails");function P0e(c){return ct(c)||Pl(c)||!!(bW&&c&&c[bW])}s(P0e,"isFlattenable");function Ra(c,d){var m=typeof c;return d=d??Ee,!!d&&(m=="number"||m!="symbol"&&Kd.test(c))&&c>-1&&c%1==0&&c<d}s(Ra,"isIndex");function _i(c,d,m){if(!Br(m))return!1;var y=typeof d;return(y=="number"?ki(m)&&Ra(d,m.length):y=="string"&&d in m)?po(m[d],c):!1}s(_i,"isIterateeCall");function AN(c,d){if(ct(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||as(c)?!0:yl.test(c)||!DR.test(c)||d!=null&&c in cr(d)}s(AN,"isKey");function B0e(c){var d=typeof c;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?c!=="__proto__":c===null}s(B0e,"isKeyable");function IN(c){var d=iw(c),m=T[d];if(typeof m!="function"||!(d in xt.prototype))return!1;if(c===m)return!0;var y=bN(m);return!!y&&c===y[0]}s(IN,"isLaziable");function M0e(c){return!!SW&&SW in c}s(M0e,"isMasked");var F0e=BC?Na:zN;function Hy(c){var d=c&&c.constructor,m=typeof d=="function"&&d.prototype||mf;return c===m}s(Hy,"isPrototype");function Sz(c){return c===c&&!Br(c)}s(Sz,"isStrictComparable");function Ez(c,d){return function(m){return m==null?!1:m[c]===d&&(d!==e||c in cr(m))}}s(Ez,"matchesStrictComparable");function q0e(c){var d=lw(c,function(y){return m.size===u&&m.clear(),y}),m=d.cache;return d}s(q0e,"memoizeCapped");function L0e(c,d){var m=c[1],y=d[1],E=m|y,A=E<(C|D|X),B=y==X&&m==N||y==X&&m==G&&c[7].length<=d[8]||y==(X|G)&&d[7].length<=d[8]&&m==N;if(!(A||B))return c;y&C&&(c[2]=d[2],E|=m&C?0:O);var q=d[3];if(q){var U=c[3];c[3]=U?nz(U,q,d[4]):q,c[4]=U?Hu(c[3],l):d[4]}return q=d[5],q&&(U=c[5],c[5]=U?iz(U,q,d[6]):q,c[6]=U?Hu(c[5],l):d[6]),q=d[7],q&&(c[7]=q),y&X&&(c[8]=c[8]==null?d[8]:Zn(c[8],d[8])),c[9]==null&&(c[9]=d[9]),c[0]=d[0],c[1]=E,c}s(L0e,"mergeData");function U0e(c){var d=[];if(c!=null)for(var m in cr(c))d.push(m);return d}s(U0e,"nativeKeysIn");function j0e(c){return FC.call(c)}s(j0e,"objectToString");function Cz(c,d,m){return d=mn(d===e?c.length-1:d,0),function(){for(var y=arguments,E=-1,A=mn(y.length-d,0),B=H(A);++E<A;)B[E]=y[d+E];E=-1;for(var q=H(d+1);++E<d;)q[E]=y[E];return q[d]=m(B),b(c,this,q)}}s(Cz,"overRest");function wz(c,d){return d.length<2?c:Rl(c,Ts(d,0,-1))}s(wz,"parent");function $0e(c,d){for(var m=c.length,y=Zn(d.length,m),E=$i(c);y--;){var A=d[y];c[y]=Ra(A,m)?E[A]:e}return c}s($0e,"reorder");function DN(c,d){if(!(d==="constructor"&&typeof c[d]=="function")&&d!="__proto__")return c[d]}s(DN,"safeGet");var bz=Tz(VW),Vy=rSe||function(c,d){return sn.setTimeout(c,d)},RN=Tz(l0e);function Oz(c,d,m){var y=d+"";return RN(c,x0e(y,k0e(D0e(y),m)))}s(Oz,"setWrapToString");function Tz(c){var d=0,m=0;return function(){var y=oSe(),E=Ce-(y-m);if(m=y,E>0){if(++d>=Se)return arguments[0]}else d=0;return c.apply(e,arguments)}}s(Tz,"shortOut");function ow(c,d){var m=-1,y=c.length,E=y-1;for(d=d===e?y:d;++m<d;){var A=fN(m,E),B=c[A];c[A]=c[m],c[m]=B}return c.length=d,c}s(ow,"shuffleSelf");var Az=q0e(function(c){var d=[];return c.charCodeAt(0)===46&&d.push(""),c.replace(dC,function(m,y,E,A){d.push(E?A.replace(Vd,"$1"):y||m)}),d});function ko(c){if(typeof c=="string"||as(c))return c;var d=c+"";return d=="0"&&1/c==-Pe?"-0":d}s(ko,"toKey");function xl(c){if(c!=null){try{return MC.call(c)}catch{}try{return c+""}catch{}}return""}s(xl,"toSource");function k0e(c,d){return M(Cr,function(m){var y="_."+m[0];d&m[1]&&!J(c,y)&&c.push(y)}),c.sort()}s(k0e,"updateWrapDetails");function Iz(c){if(c instanceof xt)return c.clone();var d=new bs(c.__wrapped__,c.__chain__);return d.__actions__=$i(c.__actions__),d.__index__=c.__index__,d.__values__=c.__values__,d}s(Iz,"wrapperClone");function G0e(c,d,m){(m?_i(c,d,m):d===e)?d=1:d=mn(pt(d),0);var y=c==null?0:c.length;if(!y||d<1)return[];for(var E=0,A=0,B=H(kC(y/d));E<y;)B[A++]=Ts(c,E,E+=d);return B}s(G0e,"chunk");function W0e(c){for(var d=-1,m=c==null?0:c.length,y=0,E=[];++d<m;){var A=c[d];A&&(E[y++]=A)}return E}s(W0e,"compact");function z0e(){var c=arguments.length;if(!c)return[];for(var d=H(c-1),m=arguments[0],y=c;y--;)d[y-1]=arguments[y];return at(ct(m)?$i(m):[m],Bn(d,1))}s(z0e,"concat");var H0e=Et(function(c,d){return Vr(c)?$y(c,Bn(d,1,Vr,!0)):[]}),V0e=Et(function(c,d){var m=As(d);return Vr(m)&&(m=e),Vr(c)?$y(c,Bn(d,1,Vr,!0),Je(m,2)):[]}),Y0e=Et(function(c,d){var m=As(d);return Vr(m)&&(m=e),Vr(c)?$y(c,Bn(d,1,Vr,!0),e,m):[]});function K0e(c,d,m){var y=c==null?0:c.length;return y?(d=m||d===e?1:pt(d),Ts(c,d<0?0:d,y)):[]}s(K0e,"drop");function X0e(c,d,m){var y=c==null?0:c.length;return y?(d=m||d===e?1:pt(d),d=y-d,Ts(c,0,d<0?0:d)):[]}s(X0e,"dropRight");function J0e(c,d){return c&&c.length?QC(c,Je(d,3),!0,!0):[]}s(J0e,"dropRightWhile");function Q0e(c,d){return c&&c.length?QC(c,Je(d,3),!0):[]}s(Q0e,"dropWhile");function Z0e(c,d,m,y){var E=c==null?0:c.length;return E?(m&&typeof m!="number"&&_i(c,d,m)&&(m=0,y=E),zSe(c,d,m,y)):[]}s(Z0e,"fill");function Dz(c,d,m){var y=c==null?0:c.length;if(!y)return-1;var E=m==null?0:pt(m);return E<0&&(E=mn(y+E,0)),qe(c,Je(d,3),E)}s(Dz,"findIndex");function Rz(c,d,m){var y=c==null?0:c.length;if(!y)return-1;var E=y-1;return m!==e&&(E=pt(m),E=m<0?mn(y+E,0):Zn(E,y-1)),qe(c,Je(d,3),E,!0)}s(Rz,"findLastIndex");function Nz(c){var d=c==null?0:c.length;return d?Bn(c,1):[]}s(Nz,"flatten");function eEe(c){var d=c==null?0:c.length;return d?Bn(c,Pe):[]}s(eEe,"flattenDeep");function tEe(c,d){var m=c==null?0:c.length;return m?(d=d===e?1:pt(d),Bn(c,d)):[]}s(tEe,"flattenDepth");function rEe(c){for(var d=-1,m=c==null?0:c.length,y={};++d<m;){var E=c[d];y[E[0]]=E[1]}return y}s(rEe,"fromPairs");function xz(c){return c&&c.length?c[0]:e}s(xz,"head");function nEe(c,d,m){var y=c==null?0:c.length;if(!y)return-1;var E=m==null?0:pt(m);return E<0&&(E=mn(y+E,0)),we(c,d,E)}s(nEe,"indexOf");function iEe(c){var d=c==null?0:c.length;return d?Ts(c,0,-1):[]}s(iEe,"initial");var sEe=Et(function(c){var d=de(c,yN);return d.length&&d[0]===c[0]?aN(d):[]}),oEe=Et(function(c){var d=As(c),m=de(c,yN);return d===As(m)?d=e:m.pop(),m.length&&m[0]===c[0]?aN(m,Je(d,2)):[]}),aEe=Et(function(c){var d=As(c),m=de(c,yN);return d=typeof d=="function"?d:e,d&&m.pop(),m.length&&m[0]===c[0]?aN(m,e,d):[]});function uEe(c,d){return c==null?"":iSe.call(c,d)}s(uEe,"join");function As(c){var d=c==null?0:c.length;return d?c[d-1]:e}s(As,"last");function cEe(c,d,m){var y=c==null?0:c.length;if(!y)return-1;var E=y;return m!==e&&(E=pt(m),E=E<0?mn(y+E,0):Zn(E,y-1)),d===d?k_e(c,d,E):qe(c,At,E,!0)}s(cEe,"lastIndexOf");function lEe(c,d){return c&&c.length?GW(c,pt(d)):e}s(lEe,"nth");var dEe=Et(Pz);function Pz(c,d){return c&&c.length&&d&&d.length?dN(c,d):c}s(Pz,"pullAll");function fEe(c,d,m){return c&&c.length&&d&&d.length?dN(c,d,Je(m,2)):c}s(fEe,"pullAllBy");function hEe(c,d,m){return c&&c.length&&d&&d.length?dN(c,d,e,m):c}s(hEe,"pullAllWith");var pEe=Da(function(c,d){var m=c==null?0:c.length,y=nN(c,d);return HW(c,de(d,function(E){return Ra(E,m)?+E:E}).sort(rz)),y});function mEe(c,d){var m=[];if(!(c&&c.length))return m;var y=-1,E=[],A=c.length;for(d=Je(d,3);++y<A;){var B=c[y];d(B,y,c)&&(m.push(B),E.push(y))}return HW(c,E),m}s(mEe,"remove");function NN(c){return c==null?c:uSe.call(c)}s(NN,"reverse");function gEe(c,d,m){var y=c==null?0:c.length;return y?(m&&typeof m!="number"&&_i(c,d,m)?(d=0,m=y):(d=d==null?0:pt(d),m=m===e?y:pt(m)),Ts(c,d,m)):[]}s(gEe,"slice");function yEe(c,d){return JC(c,d)}s(yEe,"sortedIndex");function vEe(c,d,m){return pN(c,d,Je(m,2))}s(vEe,"sortedIndexBy");function _Ee(c,d){var m=c==null?0:c.length;if(m){var y=JC(c,d);if(y<m&&po(c[y],d))return y}return-1}s(_Ee,"sortedIndexOf");function SEe(c,d){return JC(c,d,!0)}s(SEe,"sortedLastIndex");function EEe(c,d,m){return pN(c,d,Je(m,2),!0)}s(EEe,"sortedLastIndexBy");function CEe(c,d){var m=c==null?0:c.length;if(m){var y=JC(c,d,!0)-1;if(po(c[y],d))return y}return-1}s(CEe,"sortedLastIndexOf");function wEe(c){return c&&c.length?YW(c):[]}s(wEe,"sortedUniq");function bEe(c,d){return c&&c.length?YW(c,Je(d,2)):[]}s(bEe,"sortedUniqBy");function OEe(c){var d=c==null?0:c.length;return d?Ts(c,1,d):[]}s(OEe,"tail");function TEe(c,d,m){return c&&c.length?(d=m||d===e?1:pt(d),Ts(c,0,d<0?0:d)):[]}s(TEe,"take");function AEe(c,d,m){var y=c==null?0:c.length;return y?(d=m||d===e?1:pt(d),d=y-d,Ts(c,d<0?0:d,y)):[]}s(AEe,"takeRight");function IEe(c,d){return c&&c.length?QC(c,Je(d,3),!1,!0):[]}s(IEe,"takeRightWhile");function DEe(c,d){return c&&c.length?QC(c,Je(d,3)):[]}s(DEe,"takeWhile");var REe=Et(function(c){return Xu(Bn(c,1,Vr,!0))}),NEe=Et(function(c){var d=As(c);return Vr(d)&&(d=e),Xu(Bn(c,1,Vr,!0),Je(d,2))}),xEe=Et(function(c){var d=As(c);return d=typeof d=="function"?d:e,Xu(Bn(c,1,Vr,!0),e,d)});function PEe(c){return c&&c.length?Xu(c):[]}s(PEe,"uniq");function BEe(c,d){return c&&c.length?Xu(c,Je(d,2)):[]}s(BEe,"uniqBy");function MEe(c,d){return d=typeof d=="function"?d:e,c&&c.length?Xu(c,e,d):[]}s(MEe,"uniqWith");function xN(c){if(!(c&&c.length))return[];var d=0;return c=V(c,function(m){if(Vr(m))return d=mn(m.length,d),!0}),KR(d,function(m){return de(c,Ur(m))})}s(xN,"unzip");function Bz(c,d){if(!(c&&c.length))return[];var m=xN(c);return d==null?m:de(m,function(y){return b(d,e,y)})}s(Bz,"unzipWith");var FEe=Et(function(c,d){return Vr(c)?$y(c,d):[]}),qEe=Et(function(c){return gN(V(c,Vr))}),LEe=Et(function(c){var d=As(c);return Vr(d)&&(d=e),gN(V(c,Vr),Je(d,2))}),UEe=Et(function(c){var d=As(c);return d=typeof d=="function"?d:e,gN(V(c,Vr),e,d)}),jEe=Et(xN);function $Ee(c,d){return QW(c||[],d||[],jy)}s($Ee,"zipObject");function kEe(c,d){return QW(c||[],d||[],Wy)}s(kEe,"zipObjectDeep");var GEe=Et(function(c){var d=c.length,m=d>1?c[d-1]:e;return m=typeof m=="function"?(c.pop(),m):e,Bz(c,m)});function Mz(c){var d=T(c);return d.__chain__=!0,d}s(Mz,"chain");function WEe(c,d){return d(c),c}s(WEe,"tap");function aw(c,d){return d(c)}s(aw,"thru");var zEe=Da(function(c){var d=c.length,m=d?c[0]:0,y=this.__wrapped__,E=s(function(A){return nN(A,c)},"interceptor");return d>1||this.__actions__.length||!(y instanceof xt)||!Ra(m)?this.thru(E):(y=y.slice(m,+m+(d?1:0)),y.__actions__.push({func:aw,args:[E],thisArg:e}),new bs(y,this.__chain__).thru(function(A){return d&&!A.length&&A.push(e),A}))});function HEe(){return Mz(this)}s(HEe,"wrapperChain");function VEe(){return new bs(this.value(),this.__chain__)}s(VEe,"wrapperCommit");function YEe(){this.__values__===e&&(this.__values__=Kz(this.value()));var c=this.__index__>=this.__values__.length,d=c?e:this.__values__[this.__index__++];return{done:c,value:d}}s(YEe,"wrapperNext");function KEe(){return this}s(KEe,"wrapperToIterator");function XEe(c){for(var d,m=this;m instanceof HC;){var y=Iz(m);y.__index__=0,y.__values__=e,d?E.__wrapped__=y:d=y;var E=y;m=m.__wrapped__}return E.__wrapped__=c,d}s(XEe,"wrapperPlant");function JEe(){var c=this.__wrapped__;if(c instanceof xt){var d=c;return this.__actions__.length&&(d=new xt(this)),d=d.reverse(),d.__actions__.push({func:aw,args:[NN],thisArg:e}),new bs(d,this.__chain__)}return this.thru(NN)}s(JEe,"wrapperReverse");function QEe(){return JW(this.__wrapped__,this.__actions__)}s(QEe,"wrapperValue");var ZEe=ZC(function(c,d,m){Zt.call(c,m)?++c[m]:Aa(c,m,1)});function eCe(c,d,m){var y=ct(c)?W:WSe;return m&&_i(c,d,m)&&(d=e),y(c,Je(d,3))}s(eCe,"every");function tCe(c,d){var m=ct(c)?V:BW;return m(c,Je(d,3))}s(tCe,"filter");var rCe=uz(Dz),nCe=uz(Rz);function iCe(c,d){return Bn(uw(c,d),1)}s(iCe,"flatMap");function sCe(c,d){return Bn(uw(c,d),Pe)}s(sCe,"flatMapDeep");function oCe(c,d,m){return m=m===e?1:pt(m),Bn(uw(c,d),m)}s(oCe,"flatMapDepth");function Fz(c,d){var m=ct(c)?M:Ku;return m(c,Je(d,3))}s(Fz,"forEach");function qz(c,d){var m=ct(c)?k:PW;return m(c,Je(d,3))}s(qz,"forEachRight");var aCe=ZC(function(c,d,m){Zt.call(c,m)?c[m].push(d):Aa(c,m,[d])});function uCe(c,d,m,y){c=ki(c)?c:wf(c),m=m&&!y?pt(m):0;var E=c.length;return m<0&&(m=mn(E+m,0)),hw(c)?m<=E&&c.indexOf(d,m)>-1:!!E&&we(c,d,m)>-1}s(uCe,"includes");var cCe=Et(function(c,d,m){var y=-1,E=typeof d=="function",A=ki(c)?H(c.length):[];return Ku(c,function(B){A[++y]=E?b(d,B,m):ky(B,d,m)}),A}),lCe=ZC(function(c,d,m){Aa(c,m,d)});function uw(c,d){var m=ct(c)?de:jW;return m(c,Je(d,3))}s(uw,"map");function dCe(c,d,m,y){return c==null?[]:(ct(d)||(d=d==null?[]:[d]),m=y?e:m,ct(m)||(m=m==null?[]:[m]),WW(c,d,m))}s(dCe,"orderBy");var fCe=ZC(function(c,d,m){c[m?0:1].push(d)},function(){return[[],[]]});function hCe(c,d,m){var y=ct(c)?Rt:Ca,E=arguments.length<3;return y(c,Je(d,4),m,E,Ku)}s(hCe,"reduce");function pCe(c,d,m){var y=ct(c)?Nt:Ca,E=arguments.length<3;return y(c,Je(d,4),m,E,PW)}s(pCe,"reduceRight");function mCe(c,d){var m=ct(c)?V:BW;return m(c,dw(Je(d,3)))}s(mCe,"reject");function gCe(c){var d=ct(c)?DW:u0e;return d(c)}s(gCe,"sample");function yCe(c,d,m){(m?_i(c,d,m):d===e)?d=1:d=pt(d);var y=ct(c)?USe:c0e;return y(c,d)}s(yCe,"sampleSize");function vCe(c){var d=ct(c)?jSe:d0e;return d(c)}s(vCe,"shuffle");function _Ce(c){if(c==null)return 0;if(ki(c))return hw(c)?pf(c):c.length;var d=ei(c);return d==Pr||d==hn?c.size:cN(c).length}s(_Ce,"size");function SCe(c,d,m){var y=ct(c)?Jn:f0e;return m&&_i(c,d,m)&&(d=e),y(c,Je(d,3))}s(SCe,"some");var ECe=Et(function(c,d){if(c==null)return[];var m=d.length;return m>1&&_i(c,d[0],d[1])?d=[]:m>2&&_i(d[0],d[1],d[2])&&(d=[d[0]]),WW(c,Bn(d,1),[])}),cw=tSe||function(){return sn.Date.now()};function CCe(c,d){if(typeof d!="function")throw new ws(i);return c=pt(c),function(){if(--c<1)return d.apply(this,arguments)}}s(CCe,"after");function Lz(c,d,m){return d=m?e:d,d=c&&d==null?c.length:d,Ia(c,X,e,e,e,e,d)}s(Lz,"ary");function Uz(c,d){var m;if(typeof d!="function")throw new ws(i);return c=pt(c),function(){return--c>0&&(m=d.apply(this,arguments)),c<=1&&(d=e),m}}s(Uz,"before");var PN=Et(function(c,d,m){var y=C;if(m.length){var E=Hu(m,Ef(PN));y|=x}return Ia(c,y,d,m,E)}),jz=Et(function(c,d,m){var y=C|D;if(m.length){var E=Hu(m,Ef(jz));y|=x}return Ia(d,y,c,m,E)});function $z(c,d,m){d=m?e:d;var y=Ia(c,N,e,e,e,e,e,d);return y.placeholder=$z.placeholder,y}s($z,"curry");function kz(c,d,m){d=m?e:d;var y=Ia(c,F,e,e,e,e,e,d);return y.placeholder=kz.placeholder,y}s(kz,"curryRight");function Gz(c,d,m){var y,E,A,B,q,U,te=0,re=!1,se=!1,ge=!0;if(typeof c!="function")throw new ws(i);d=Is(d)||0,Br(m)&&(re=!!m.leading,se="maxWait"in m,A=se?mn(Is(m.maxWait)||0,d):A,ge="trailing"in m?!!m.trailing:ge);function xe(Yr){var mo=y,Pa=E;return y=E=e,te=Yr,B=c.apply(Pa,mo),B}s(xe,"invokeFunc");function Qe(Yr){return te=Yr,q=Vy(It,d),re?xe(Yr):B}s(Qe,"leadingEdge");function vt(Yr){var mo=Yr-U,Pa=Yr-te,uH=d-mo;return se?Zn(uH,A-Pa):uH}s(vt,"remainingWait");function Ze(Yr){var mo=Yr-U,Pa=Yr-te;return U===e||mo>=d||mo<0||se&&Pa>=A}s(Ze,"shouldInvoke");function It(){var Yr=cw();if(Ze(Yr))return Ft(Yr);q=Vy(It,vt(Yr))}s(It,"timerExpired");function Ft(Yr){return q=e,ge&&y?xe(Yr):(y=E=e,B)}s(Ft,"trailingEdge");function us(){q!==e&&ZW(q),te=0,y=U=E=q=e}s(us,"cancel");function Si(){return q===e?B:Ft(cw())}s(Si,"flush");function cs(){var Yr=cw(),mo=Ze(Yr);if(y=arguments,E=this,U=Yr,mo){if(q===e)return Qe(U);if(se)return ZW(q),q=Vy(It,d),xe(U)}return q===e&&(q=Vy(It,d)),B}return s(cs,"debounced"),cs.cancel=us,cs.flush=Si,cs}s(Gz,"debounce");var wCe=Et(function(c,d){return xW(c,1,d)}),bCe=Et(function(c,d,m){return xW(c,Is(d)||0,m)});function OCe(c){return Ia(c,ue)}s(OCe,"flip");function lw(c,d){if(typeof c!="function"||d!=null&&typeof d!="function")throw new ws(i);var m=s(function(){var y=arguments,E=d?d.apply(this,y):y[0],A=m.cache;if(A.has(E))return A.get(E);var B=c.apply(this,y);return m.cache=A.set(E,B)||A,B},"memoized");return m.cache=new(lw.Cache||Ta),m}s(lw,"memoize"),lw.Cache=Ta;function dw(c){if(typeof c!="function")throw new ws(i);return function(){var d=arguments;switch(d.length){case 0:return!c.call(this);case 1:return!c.call(this,d[0]);case 2:return!c.call(this,d[0],d[1]);case 3:return!c.call(this,d[0],d[1],d[2])}return!c.apply(this,d)}}s(dw,"negate");function TCe(c){return Uz(2,c)}s(TCe,"once");var ACe=h0e(function(c,d){d=d.length==1&&ct(d[0])?de(d[0],ss(Je())):de(Bn(d,1),ss(Je()));var m=d.length;return Et(function(y){for(var E=-1,A=Zn(y.length,m);++E<A;)y[E]=d[E].call(this,y[E]);return b(c,this,y)})}),BN=Et(function(c,d){var m=Hu(d,Ef(BN));return Ia(c,x,e,d,m)}),Wz=Et(function(c,d){var m=Hu(d,Ef(Wz));return Ia(c,P,e,d,m)}),ICe=Da(function(c,d){return Ia(c,G,e,e,e,d)});function DCe(c,d){if(typeof c!="function")throw new ws(i);return d=d===e?d:pt(d),Et(c,d)}s(DCe,"rest");function RCe(c,d){if(typeof c!="function")throw new ws(i);return d=d==null?0:mn(pt(d),0),Et(function(m){var y=m[d],E=Qu(m,0,d);return y&&at(E,y),b(c,this,E)})}s(RCe,"spread");function NCe(c,d,m){var y=!0,E=!0;if(typeof c!="function")throw new ws(i);return Br(m)&&(y="leading"in m?!!m.leading:y,E="trailing"in m?!!m.trailing:E),Gz(c,d,{leading:y,maxWait:d,trailing:E})}s(NCe,"throttle");function xCe(c){return Lz(c,1)}s(xCe,"unary");function PCe(c,d){return BN(vN(d),c)}s(PCe,"wrap");function BCe(){if(!arguments.length)return[];var c=arguments[0];return ct(c)?c:[c]}s(BCe,"castArray");function MCe(c){return Os(c,p)}s(MCe,"clone");function FCe(c,d){return d=typeof d=="function"?d:e,Os(c,p,d)}s(FCe,"cloneWith");function qCe(c){return Os(c,f|p)}s(qCe,"cloneDeep");function LCe(c,d){return d=typeof d=="function"?d:e,Os(c,f|p,d)}s(LCe,"cloneDeepWith");function UCe(c,d){return d==null||NW(c,d,_n(d))}s(UCe,"conformsTo");function po(c,d){return c===d||c!==c&&d!==d}s(po,"eq");var jCe=nw(oN),$Ce=nw(function(c,d){return c>=d}),Pl=qW(function(){return arguments}())?qW:function(c){return jr(c)&&Zt.call(c,"callee")&&!wW.call(c,"callee")},ct=H.isArray,kCe=RC?ss(RC):XSe;function ki(c){return c!=null&&fw(c.length)&&!Na(c)}s(ki,"isArrayLike");function Vr(c){return jr(c)&&ki(c)}s(Vr,"isArrayLikeObject");function GCe(c){return c===!0||c===!1||jr(c)&&vi(c)==Li}s(GCe,"isBoolean");var Zu=nSe||zN,WCe=Py?ss(Py):JSe;function zCe(c){return jr(c)&&c.nodeType===1&&!Yy(c)}s(zCe,"isElement");function HCe(c){if(c==null)return!0;if(ki(c)&&(ct(c)||typeof c=="string"||typeof c.splice=="function"||Zu(c)||Cf(c)||Pl(c)))return!c.length;var d=ei(c);if(d==Pr||d==hn)return!c.size;if(Hy(c))return!cN(c).length;for(var m in c)if(Zt.call(c,m))return!1;return!0}s(HCe,"isEmpty");function VCe(c,d){return Gy(c,d)}s(VCe,"isEqual");function YCe(c,d,m){m=typeof m=="function"?m:e;var y=m?m(c,d):e;return y===e?Gy(c,d,e,m):!!y}s(YCe,"isEqualWith");function MN(c){if(!jr(c))return!1;var d=vi(c);return d==vn||d==Mo||typeof c.message=="string"&&typeof c.name=="string"&&!Yy(c)}s(MN,"isError");function KCe(c){return typeof c=="number"&&OW(c)}s(KCe,"isFinite");function Na(c){if(!Br(c))return!1;var d=vi(c);return d==$t||d==Ui||d==or||d==kd}s(Na,"isFunction");function zz(c){return typeof c=="number"&&c==pt(c)}s(zz,"isInteger");function fw(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=Ee}s(fw,"isLength");function Br(c){var d=typeof c;return c!=null&&(d=="object"||d=="function")}s(Br,"isObject");function jr(c){return c!=null&&typeof c=="object"}s(jr,"isObjectLike");var Hz=NC?ss(NC):ZSe;function XCe(c,d){return c===d||uN(c,d,ON(d))}s(XCe,"isMatch");function JCe(c,d,m){return m=typeof m=="function"?m:e,uN(c,d,ON(d),m)}s(JCe,"isMatchWith");function QCe(c){return Vz(c)&&c!=+c}s(QCe,"isNaN");function ZCe(c){if(F0e(c))throw new ut(n);return LW(c)}s(ZCe,"isNative");function ewe(c){return c===null}s(ewe,"isNull");function twe(c){return c==null}s(twe,"isNil");function Vz(c){return typeof c=="number"||jr(c)&&vi(c)==Cs}s(Vz,"isNumber");function Yy(c){if(!jr(c)||vi(c)!=Pn)return!1;var d=UC(c);if(d===null)return!0;var m=Zt.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&MC.call(m)==J_e}s(Yy,"isPlainObject");var FN=df?ss(df):e0e;function rwe(c){return zz(c)&&c>=-Ee&&c<=Ee}s(rwe,"isSafeInteger");var Yz=ff?ss(ff):t0e;function hw(c){return typeof c=="string"||!ct(c)&&jr(c)&&vi(c)==co}s(hw,"isString");function as(c){return typeof c=="symbol"||jr(c)&&vi(c)==Fo}s(as,"isSymbol");var Cf=I?ss(I):r0e;function nwe(c){return c===e}s(nwe,"isUndefined");function iwe(c){return jr(c)&&ei(c)==is}s(iwe,"isWeakMap");function swe(c){return jr(c)&&vi(c)==ml}s(swe,"isWeakSet");var owe=nw(lN),awe=nw(function(c,d){return c<=d});function Kz(c){if(!c)return[];if(ki(c))return hw(c)?fo(c):$i(c);if(My&&c[My])return U_e(c[My]());var d=ei(c),m=d==Pr?JR:d==hn?xC:wf;return m(c)}s(Kz,"toArray");function xa(c){if(!c)return c===0?c:0;if(c=Is(c),c===Pe||c===-Pe){var d=c<0?-1:1;return d*Oe}return c===c?c:0}s(xa,"toFinite");function pt(c){var d=xa(c),m=d%1;return d===d?m?d-m:d:0}s(pt,"toInteger");function Xz(c){return c?Dl(pt(c),0,Fe):0}s(Xz,"toLength");function Is(c){if(typeof c=="number")return c;if(as(c))return dt;if(Br(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=Br(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=mW(c);var m=Yd.test(c);return m||qR.test(c)?AC(c.slice(2),m?2:8):MR.test(c)?dt:+c}s(Is,"toNumber");function Jz(c){return $o(c,Gi(c))}s(Jz,"toPlainObject");function uwe(c){return c?Dl(pt(c),-Ee,Ee):c===0?c:0}s(uwe,"toSafeInteger");function Qt(c){return c==null?"":os(c)}s(Qt,"toString");var cwe=_f(function(c,d){if(Hy(d)||ki(d)){$o(d,_n(d),c);return}for(var m in d)Zt.call(d,m)&&jy(c,m,d[m])}),Qz=_f(function(c,d){$o(d,Gi(d),c)}),pw=_f(function(c,d,m,y){$o(d,Gi(d),c,y)}),lwe=_f(function(c,d,m,y){$o(d,_n(d),c,y)}),dwe=Da(nN);function fwe(c,d){var m=vf(c);return d==null?m:RW(m,d)}s(fwe,"create");var hwe=Et(function(c,d){c=cr(c);var m=-1,y=d.length,E=y>2?d[2]:e;for(E&&_i(d[0],d[1],E)&&(y=1);++m<y;)for(var A=d[m],B=Gi(A),q=-1,U=B.length;++q<U;){var te=B[q],re=c[te];(re===e||po(re,mf[te])&&!Zt.call(c,te))&&(c[te]=A[te])}return c}),pwe=Et(function(c){return c.push(e,mz),b(Zz,e,c)});function mwe(c,d){return Mt(c,Je(d,3),jo)}s(mwe,"findKey");function gwe(c,d){return Mt(c,Je(d,3),sN)}s(gwe,"findLastKey");function ywe(c,d){return c==null?c:iN(c,Je(d,3),Gi)}s(ywe,"forIn");function vwe(c,d){return c==null?c:MW(c,Je(d,3),Gi)}s(vwe,"forInRight");function _we(c,d){return c&&jo(c,Je(d,3))}s(_we,"forOwn");function Swe(c,d){return c&&sN(c,Je(d,3))}s(Swe,"forOwnRight");function Ewe(c){return c==null?[]:KC(c,_n(c))}s(Ewe,"functions");function Cwe(c){return c==null?[]:KC(c,Gi(c))}s(Cwe,"functionsIn");function qN(c,d,m){var y=c==null?e:Rl(c,d);return y===e?m:y}s(qN,"get");function wwe(c,d){return c!=null&&vz(c,d,HSe)}s(wwe,"has");function LN(c,d){return c!=null&&vz(c,d,VSe)}s(LN,"hasIn");var bwe=lz(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=FC.call(d)),c[d]=m},jN(Wi)),Owe=lz(function(c,d,m){d!=null&&typeof d.toString!="function"&&(d=FC.call(d)),Zt.call(c,d)?c[d].push(m):c[d]=[m]},Je),Twe=Et(ky);function _n(c){return ki(c)?IW(c):cN(c)}s(_n,"keys");function Gi(c){return ki(c)?IW(c,!0):n0e(c)}s(Gi,"keysIn");function Awe(c,d){var m={};return d=Je(d,3),jo(c,function(y,E,A){Aa(m,d(y,E,A),y)}),m}s(Awe,"mapKeys");function Iwe(c,d){var m={};return d=Je(d,3),jo(c,function(y,E,A){Aa(m,E,d(y,E,A))}),m}s(Iwe,"mapValues");var Dwe=_f(function(c,d,m){XC(c,d,m)}),Zz=_f(function(c,d,m,y){XC(c,d,m,y)}),Rwe=Da(function(c,d){var m={};if(c==null)return m;var y=!1;d=de(d,function(A){return A=Ju(A,c),y||(y=A.length>1),A}),$o(c,wN(c),m),y&&(m=Os(m,f|h|p,b0e));for(var E=d.length;E--;)mN(m,d[E]);return m});function Nwe(c,d){return eH(c,dw(Je(d)))}s(Nwe,"omitBy");var xwe=Da(function(c,d){return c==null?{}:s0e(c,d)});function eH(c,d){if(c==null)return{};var m=de(wN(c),function(y){return[y]});return d=Je(d),zW(c,m,function(y,E){return d(y,E[0])})}s(eH,"pickBy");function Pwe(c,d,m){d=Ju(d,c);var y=-1,E=d.length;for(E||(E=1,c=e);++y<E;){var A=c==null?e:c[ko(d[y])];A===e&&(y=E,A=m),c=Na(A)?A.call(c):A}return c}s(Pwe,"result");function Bwe(c,d,m){return c==null?c:Wy(c,d,m)}s(Bwe,"set");function Mwe(c,d,m,y){return y=typeof y=="function"?y:e,c==null?c:Wy(c,d,m,y)}s(Mwe,"setWith");var tH=hz(_n),rH=hz(Gi);function Fwe(c,d,m){var y=ct(c),E=y||Zu(c)||Cf(c);if(d=Je(d,4),m==null){var A=c&&c.constructor;E?m=y?new A:[]:Br(c)?m=Na(A)?vf(UC(c)):{}:m={}}return(E?M:jo)(c,function(B,q,U){return d(m,B,q,U)}),m}s(Fwe,"transform");function qwe(c,d){return c==null?!0:mN(c,d)}s(qwe,"unset");function Lwe(c,d,m){return c==null?c:XW(c,d,vN(m))}s(Lwe,"update");function Uwe(c,d,m,y){return y=typeof y=="function"?y:e,c==null?c:XW(c,d,vN(m),y)}s(Uwe,"updateWith");function wf(c){return c==null?[]:XR(c,_n(c))}s(wf,"values");function jwe(c){return c==null?[]:XR(c,Gi(c))}s(jwe,"valuesIn");function $we(c,d,m){return m===e&&(m=d,d=e),m!==e&&(m=Is(m),m=m===m?m:0),d!==e&&(d=Is(d),d=d===d?d:0),Dl(Is(c),d,m)}s($we,"clamp");function kwe(c,d,m){return d=xa(d),m===e?(m=d,d=0):m=xa(m),c=Is(c),YSe(c,d,m)}s(kwe,"inRange");function Gwe(c,d,m){if(m&&typeof m!="boolean"&&_i(c,d,m)&&(d=m=e),m===e&&(typeof d=="boolean"?(m=d,d=e):typeof c=="boolean"&&(m=c,c=e)),c===e&&d===e?(c=0,d=1):(c=xa(c),d===e?(d=c,c=0):d=xa(d)),c>d){var y=c;c=d,d=y}if(m||c%1||d%1){var E=TW();return Zn(c+E*(d-c+cf("1e-"+((E+"").length-1))),d)}return fN(c,d)}s(Gwe,"random");var Wwe=Sf(function(c,d,m){return d=d.toLowerCase(),c+(m?nH(d):d)});function nH(c){return UN(Qt(c).toLowerCase())}s(nH,"capitalize");function iH(c){return c=Qt(c),c&&c.replace(LR,B_e).replace(WR,"")}s(iH,"deburr");function zwe(c,d,m){c=Qt(c),d=os(d);var y=c.length;m=m===e?y:Dl(pt(m),0,y);var E=m;return m-=d.length,m>=0&&c.slice(m,E)==d}s(zwe,"endsWith");function Hwe(c){return c=Qt(c),c&&IR.test(c)?c.replace(cC,M_e):c}s(Hwe,"escape");function Vwe(c){return c=Qt(c),c&&RR.test(c)?c.replace(Hd,"\\$&"):c}s(Vwe,"escapeRegExp");var Ywe=Sf(function(c,d,m){return c+(m?"-":"")+d.toLowerCase()}),Kwe=Sf(function(c,d,m){return c+(m?" ":"")+d.toLowerCase()}),Xwe=az("toLowerCase");function Jwe(c,d,m){c=Qt(c),d=pt(d);var y=d?pf(c):0;if(!d||y>=d)return c;var E=(d-y)/2;return rw(GC(E),m)+c+rw(kC(E),m)}s(Jwe,"pad");function Qwe(c,d,m){c=Qt(c),d=pt(d);var y=d?pf(c):0;return d&&y<d?c+rw(d-y,m):c}s(Qwe,"padEnd");function Zwe(c,d,m){c=Qt(c),d=pt(d);var y=d?pf(c):0;return d&&y<d?rw(d-y,m)+c:c}s(Zwe,"padStart");function ebe(c,d,m){return m||d==null?d=0:d&&(d=+d),aSe(Qt(c).replace(Gu,""),d||0)}s(ebe,"parseInt");function tbe(c,d,m){return(m?_i(c,d,m):d===e)?d=1:d=pt(d),hN(Qt(c),d)}s(tbe,"repeat");function rbe(){var c=arguments,d=Qt(c[0]);return c.length<3?d:d.replace(c[1],c[2])}s(rbe,"replace");var nbe=Sf(function(c,d,m){return c+(m?"_":"")+d.toLowerCase()});function ibe(c,d,m){return m&&typeof m!="number"&&_i(c,d,m)&&(d=m=e),m=m===e?Fe:m>>>0,m?(c=Qt(c),c&&(typeof d=="string"||d!=null&&!FN(d))&&(d=os(d),!d&&hf(c))?Qu(fo(c),0,m):c.split(d,m)):[]}s(ibe,"split");var sbe=Sf(function(c,d,m){return c+(m?" ":"")+UN(d)});function obe(c,d,m){return c=Qt(c),m=m==null?0:Dl(pt(m),0,c.length),d=os(d),c.slice(m,m+d.length)==d}s(obe,"startsWith");function abe(c,d,m){var y=T.templateSettings;m&&_i(c,d,m)&&(d=e),c=Qt(c),d=pw({},d,y,pz);var E=pw({},d.imports,y.imports,pz),A=_n(E),B=XR(E,A),q,U,te=0,re=d.interpolate||ya,se="__p += '",ge=QR((d.escape||ya).source+"|"+re.source+"|"+(re===Sy?BR:ya).source+"|"+(d.evaluate||ya).source+"|$","g"),xe="//# sourceURL="+(Zt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uf+"]")+`
`;c.replace(ge,function(Ze,It,Ft,us,Si,cs){return Ft||(Ft=us),se+=c.slice(te,cs).replace(UR,F_e),It&&(q=!0,se+=`' +
__e(`+It+`) +
'`),Si&&(U=!0,se+=`';
`+Si+`;
__p += '`),Ft&&(se+=`' +
((__t = (`+Ft+`)) == null ? '' : __t) +
'`),te=cs+Ze.length,Ze}),se+=`';
`;var Qe=Zt.call(d,"variable")&&d.variable;if(!Qe)se=`with (obj) {
`+se+`
}
`;else if(PR.test(Qe))throw new ut(o);se=(U?se.replace(uC,""):se).replace(lo,"$1").replace(AR,"$1;"),se="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(U?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var vt=oH(function(){return Kt(A,xe+"return "+se).apply(e,B)});if(vt.source=se,MN(vt))throw vt;return vt}s(abe,"template");function ube(c){return Qt(c).toLowerCase()}s(ube,"toLower");function cbe(c){return Qt(c).toUpperCase()}s(cbe,"toUpper");function lbe(c,d,m){if(c=Qt(c),c&&(m||d===e))return mW(c);if(!c||!(d=os(d)))return c;var y=fo(c),E=fo(d),A=gW(y,E),B=yW(y,E)+1;return Qu(y,A,B).join("")}s(lbe,"trim");function dbe(c,d,m){if(c=Qt(c),c&&(m||d===e))return c.slice(0,_W(c)+1);if(!c||!(d=os(d)))return c;var y=fo(c),E=yW(y,fo(d))+1;return Qu(y,0,E).join("")}s(dbe,"trimEnd");function fbe(c,d,m){if(c=Qt(c),c&&(m||d===e))return c.replace(Gu,"");if(!c||!(d=os(d)))return c;var y=fo(c),E=gW(y,fo(d));return Qu(y,E).join("")}s(fbe,"trimStart");function hbe(c,d){var m=be,y=Q;if(Br(d)){var E="separator"in d?d.separator:E;m="length"in d?pt(d.length):m,y="omission"in d?os(d.omission):y}c=Qt(c);var A=c.length;if(hf(c)){var B=fo(c);A=B.length}if(m>=A)return c;var q=m-pf(y);if(q<1)return y;var U=B?Qu(B,0,q).join(""):c.slice(0,q);if(E===e)return U+y;if(B&&(q+=U.length-q),FN(E)){if(c.slice(q).search(E)){var te,re=U;for(E.global||(E=QR(E.source,Qt(Sl.exec(E))+"g")),E.lastIndex=0;te=E.exec(re);)var se=te.index;U=U.slice(0,se===e?q:se)}}else if(c.indexOf(os(E),q)!=q){var ge=U.lastIndexOf(E);ge>-1&&(U=U.slice(0,ge))}return U+y}s(hbe,"truncate");function pbe(c){return c=Qt(c),c&&Wd.test(c)?c.replace(gl,G_e):c}s(pbe,"unescape");var mbe=Sf(function(c,d,m){return c+(m?" ":"")+d.toUpperCase()}),UN=az("toUpperCase");function sH(c,d,m){return c=Qt(c),d=m?e:d,d===e?L_e(c)?H_e(c):Ol(c):c.match(d)||[]}s(sH,"words");var oH=Et(function(c,d){try{return b(c,e,d)}catch(m){return MN(m)?m:new ut(m)}}),gbe=Da(function(c,d){return M(d,function(m){m=ko(m),Aa(c,m,PN(c[m],c))}),c});function ybe(c){var d=c==null?0:c.length,m=Je();return c=d?de(c,function(y){if(typeof y[1]!="function")throw new ws(i);return[m(y[0]),y[1]]}):[],Et(function(y){for(var E=-1;++E<d;){var A=c[E];if(b(A[0],this,y))return b(A[1],this,y)}})}s(ybe,"cond");function vbe(c){return GSe(Os(c,f))}s(vbe,"conforms");function jN(c){return function(){return c}}s(jN,"constant");function _be(c,d){return c==null||c!==c?d:c}s(_be,"defaultTo");var Sbe=cz(),Ebe=cz(!0);function Wi(c){return c}s(Wi,"identity");function $N(c){return UW(typeof c=="function"?c:Os(c,f))}s($N,"iteratee");function Cbe(c){return $W(Os(c,f))}s(Cbe,"matches");function wbe(c,d){return kW(c,Os(d,f))}s(wbe,"matchesProperty");var bbe=Et(function(c,d){return function(m){return ky(m,c,d)}}),Obe=Et(function(c,d){return function(m){return ky(c,m,d)}});function kN(c,d,m){var y=_n(d),E=KC(d,y);m==null&&!(Br(d)&&(E.length||!y.length))&&(m=d,d=c,c=this,E=KC(d,_n(d)));var A=!(Br(m)&&"chain"in m)||!!m.chain,B=Na(c);return M(E,function(q){var U=d[q];c[q]=U,B&&(c.prototype[q]=function(){var te=this.__chain__;if(A||te){var re=c(this.__wrapped__),se=re.__actions__=$i(this.__actions__);return se.push({func:U,args:arguments,thisArg:c}),re.__chain__=te,re}return U.apply(c,at([this.value()],arguments))})}),c}s(kN,"mixin");function Tbe(){return sn._===this&&(sn._=Q_e),this}s(Tbe,"noConflict");function GN(){}s(GN,"noop");function Abe(c){return c=pt(c),Et(function(d){return GW(d,c)})}s(Abe,"nthArg");var Ibe=SN(de),Dbe=SN(W),Rbe=SN(Jn);function aH(c){return AN(c)?Ur(ko(c)):o0e(c)}s(aH,"property");function Nbe(c){return function(d){return c==null?e:Rl(c,d)}}s(Nbe,"propertyOf");var xbe=dz(),Pbe=dz(!0);function WN(){return[]}s(WN,"stubArray");function zN(){return!1}s(zN,"stubFalse");function Bbe(){return{}}s(Bbe,"stubObject");function Mbe(){return""}s(Mbe,"stubString");function Fbe(){return!0}s(Fbe,"stubTrue");function qbe(c,d){if(c=pt(c),c<1||c>Ee)return[];var m=Fe,y=Zn(c,Fe);d=Je(d),c-=Fe;for(var E=KR(y,d);++m<c;)d(m);return E}s(qbe,"times");function Lbe(c){return ct(c)?de(c,ko):as(c)?[c]:$i(Az(Qt(c)))}s(Lbe,"toPath");function Ube(c){var d=++X_e;return Qt(c)+d}s(Ube,"uniqueId");var jbe=tw(function(c,d){return c+d},0),$be=EN("ceil"),kbe=tw(function(c,d){return c/d},1),Gbe=EN("floor");function Wbe(c){return c&&c.length?YC(c,Wi,oN):e}s(Wbe,"max");function zbe(c,d){return c&&c.length?YC(c,Je(d,2),oN):e}s(zbe,"maxBy");function Hbe(c){return ur(c,Wi)}s(Hbe,"mean");function Vbe(c,d){return ur(c,Je(d,2))}s(Vbe,"meanBy");function Ybe(c){return c&&c.length?YC(c,Wi,lN):e}s(Ybe,"min");function Kbe(c,d){return c&&c.length?YC(c,Je(d,2),lN):e}s(Kbe,"minBy");var Xbe=tw(function(c,d){return c*d},1),Jbe=EN("round"),Qbe=tw(function(c,d){return c-d},0);function Zbe(c){return c&&c.length?ba(c,Wi):0}s(Zbe,"sum");function eOe(c,d){return c&&c.length?ba(c,Je(d,2)):0}return s(eOe,"sumBy"),T.after=CCe,T.ary=Lz,T.assign=cwe,T.assignIn=Qz,T.assignInWith=pw,T.assignWith=lwe,T.at=dwe,T.before=Uz,T.bind=PN,T.bindAll=gbe,T.bindKey=jz,T.castArray=BCe,T.chain=Mz,T.chunk=G0e,T.compact=W0e,T.concat=z0e,T.cond=ybe,T.conforms=vbe,T.constant=jN,T.countBy=ZEe,T.create=fwe,T.curry=$z,T.curryRight=kz,T.debounce=Gz,T.defaults=hwe,T.defaultsDeep=pwe,T.defer=wCe,T.delay=bCe,T.difference=H0e,T.differenceBy=V0e,T.differenceWith=Y0e,T.drop=K0e,T.dropRight=X0e,T.dropRightWhile=J0e,T.dropWhile=Q0e,T.fill=Z0e,T.filter=tCe,T.flatMap=iCe,T.flatMapDeep=sCe,T.flatMapDepth=oCe,T.flatten=Nz,T.flattenDeep=eEe,T.flattenDepth=tEe,T.flip=OCe,T.flow=Sbe,T.flowRight=Ebe,T.fromPairs=rEe,T.functions=Ewe,T.functionsIn=Cwe,T.groupBy=aCe,T.initial=iEe,T.intersection=sEe,T.intersectionBy=oEe,T.intersectionWith=aEe,T.invert=bwe,T.invertBy=Owe,T.invokeMap=cCe,T.iteratee=$N,T.keyBy=lCe,T.keys=_n,T.keysIn=Gi,T.map=uw,T.mapKeys=Awe,T.mapValues=Iwe,T.matches=Cbe,T.matchesProperty=wbe,T.memoize=lw,T.merge=Dwe,T.mergeWith=Zz,T.method=bbe,T.methodOf=Obe,T.mixin=kN,T.negate=dw,T.nthArg=Abe,T.omit=Rwe,T.omitBy=Nwe,T.once=TCe,T.orderBy=dCe,T.over=Ibe,T.overArgs=ACe,T.overEvery=Dbe,T.overSome=Rbe,T.partial=BN,T.partialRight=Wz,T.partition=fCe,T.pick=xwe,T.pickBy=eH,T.property=aH,T.propertyOf=Nbe,T.pull=dEe,T.pullAll=Pz,T.pullAllBy=fEe,T.pullAllWith=hEe,T.pullAt=pEe,T.range=xbe,T.rangeRight=Pbe,T.rearg=ICe,T.reject=mCe,T.remove=mEe,T.rest=DCe,T.reverse=NN,T.sampleSize=yCe,T.set=Bwe,T.setWith=Mwe,T.shuffle=vCe,T.slice=gEe,T.sortBy=ECe,T.sortedUniq=wEe,T.sortedUniqBy=bEe,T.split=ibe,T.spread=RCe,T.tail=OEe,T.take=TEe,T.takeRight=AEe,T.takeRightWhile=IEe,T.takeWhile=DEe,T.tap=WEe,T.throttle=NCe,T.thru=aw,T.toArray=Kz,T.toPairs=tH,T.toPairsIn=rH,T.toPath=Lbe,T.toPlainObject=Jz,T.transform=Fwe,T.unary=xCe,T.union=REe,T.unionBy=NEe,T.unionWith=xEe,T.uniq=PEe,T.uniqBy=BEe,T.uniqWith=MEe,T.unset=qwe,T.unzip=xN,T.unzipWith=Bz,T.update=Lwe,T.updateWith=Uwe,T.values=wf,T.valuesIn=jwe,T.without=FEe,T.words=sH,T.wrap=PCe,T.xor=qEe,T.xorBy=LEe,T.xorWith=UEe,T.zip=jEe,T.zipObject=$Ee,T.zipObjectDeep=kEe,T.zipWith=GEe,T.entries=tH,T.entriesIn=rH,T.extend=Qz,T.extendWith=pw,kN(T,T),T.add=jbe,T.attempt=oH,T.camelCase=Wwe,T.capitalize=nH,T.ceil=$be,T.clamp=$we,T.clone=MCe,T.cloneDeep=qCe,T.cloneDeepWith=LCe,T.cloneWith=FCe,T.conformsTo=UCe,T.deburr=iH,T.defaultTo=_be,T.divide=kbe,T.endsWith=zwe,T.eq=po,T.escape=Hwe,T.escapeRegExp=Vwe,T.every=eCe,T.find=rCe,T.findIndex=Dz,T.findKey=mwe,T.findLast=nCe,T.findLastIndex=Rz,T.findLastKey=gwe,T.floor=Gbe,T.forEach=Fz,T.forEachRight=qz,T.forIn=ywe,T.forInRight=vwe,T.forOwn=_we,T.forOwnRight=Swe,T.get=qN,T.gt=jCe,T.gte=$Ce,T.has=wwe,T.hasIn=LN,T.head=xz,T.identity=Wi,T.includes=uCe,T.indexOf=nEe,T.inRange=kwe,T.invoke=Twe,T.isArguments=Pl,T.isArray=ct,T.isArrayBuffer=kCe,T.isArrayLike=ki,T.isArrayLikeObject=Vr,T.isBoolean=GCe,T.isBuffer=Zu,T.isDate=WCe,T.isElement=zCe,T.isEmpty=HCe,T.isEqual=VCe,T.isEqualWith=YCe,T.isError=MN,T.isFinite=KCe,T.isFunction=Na,T.isInteger=zz,T.isLength=fw,T.isMap=Hz,T.isMatch=XCe,T.isMatchWith=JCe,T.isNaN=QCe,T.isNative=ZCe,T.isNil=twe,T.isNull=ewe,T.isNumber=Vz,T.isObject=Br,T.isObjectLike=jr,T.isPlainObject=Yy,T.isRegExp=FN,T.isSafeInteger=rwe,T.isSet=Yz,T.isString=hw,T.isSymbol=as,T.isTypedArray=Cf,T.isUndefined=nwe,T.isWeakMap=iwe,T.isWeakSet=swe,T.join=uEe,T.kebabCase=Ywe,T.last=As,T.lastIndexOf=cEe,T.lowerCase=Kwe,T.lowerFirst=Xwe,T.lt=owe,T.lte=awe,T.max=Wbe,T.maxBy=zbe,T.mean=Hbe,T.meanBy=Vbe,T.min=Ybe,T.minBy=Kbe,T.stubArray=WN,T.stubFalse=zN,T.stubObject=Bbe,T.stubString=Mbe,T.stubTrue=Fbe,T.multiply=Xbe,T.nth=lEe,T.noConflict=Tbe,T.noop=GN,T.now=cw,T.pad=Jwe,T.padEnd=Qwe,T.padStart=Zwe,T.parseInt=ebe,T.random=Gwe,T.reduce=hCe,T.reduceRight=pCe,T.repeat=tbe,T.replace=rbe,T.result=Pwe,T.round=Jbe,T.runInContext=L,T.sample=gCe,T.size=_Ce,T.snakeCase=nbe,T.some=SCe,T.sortedIndex=yEe,T.sortedIndexBy=vEe,T.sortedIndexOf=_Ee,T.sortedLastIndex=SEe,T.sortedLastIndexBy=EEe,T.sortedLastIndexOf=CEe,T.startCase=sbe,T.startsWith=obe,T.subtract=Qbe,T.sum=Zbe,T.sumBy=eOe,T.template=abe,T.times=qbe,T.toFinite=xa,T.toInteger=pt,T.toLength=Xz,T.toLower=ube,T.toNumber=Is,T.toSafeInteger=uwe,T.toString=Qt,T.toUpper=cbe,T.trim=lbe,T.trimEnd=dbe,T.trimStart=fbe,T.truncate=hbe,T.unescape=pbe,T.uniqueId=Ube,T.upperCase=mbe,T.upperFirst=UN,T.each=Fz,T.eachRight=qz,T.first=xz,kN(T,function(){var c={};return jo(T,function(d,m){Zt.call(T.prototype,m)||(c[m]=d)}),c}(),{chain:!1}),T.VERSION=t,M(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){T[c].placeholder=T}),M(["drop","take"],function(c,d){xt.prototype[c]=function(m){m=m===e?1:mn(pt(m),0);var y=this.__filtered__&&!d?new xt(this):this.clone();return y.__filtered__?y.__takeCount__=Zn(m,y.__takeCount__):y.__views__.push({size:Zn(m,Fe),type:c+(y.__dir__<0?"Right":"")}),y},xt.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),M(["filter","map","takeWhile"],function(c,d){var m=d+1,y=m==le||m==ve;xt.prototype[c]=function(E){var A=this.clone();return A.__iteratees__.push({iteratee:Je(E,3),type:m}),A.__filtered__=A.__filtered__||y,A}}),M(["head","last"],function(c,d){var m="take"+(d?"Right":"");xt.prototype[c]=function(){return this[m](1).value()[0]}}),M(["initial","tail"],function(c,d){var m="drop"+(d?"":"Right");xt.prototype[c]=function(){return this.__filtered__?new xt(this):this[m](1)}}),xt.prototype.compact=function(){return this.filter(Wi)},xt.prototype.find=function(c){return this.filter(c).head()},xt.prototype.findLast=function(c){return this.reverse().find(c)},xt.prototype.invokeMap=Et(function(c,d){return typeof c=="function"?new xt(this):this.map(function(m){return ky(m,c,d)})}),xt.prototype.reject=function(c){return this.filter(dw(Je(c)))},xt.prototype.slice=function(c,d){c=pt(c);var m=this;return m.__filtered__&&(c>0||d<0)?new xt(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),d!==e&&(d=pt(d),m=d<0?m.dropRight(-d):m.take(d-c)),m)},xt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},xt.prototype.toArray=function(){return this.take(Fe)},jo(xt.prototype,function(c,d){var m=/^(?:filter|find|map|reject)|While$/.test(d),y=/^(?:head|last)$/.test(d),E=T[y?"take"+(d=="last"?"Right":""):d],A=y||/^find/.test(d);E&&(T.prototype[d]=function(){var B=this.__wrapped__,q=y?[1]:arguments,U=B instanceof xt,te=q[0],re=U||ct(B),se=s(function(It){var Ft=E.apply(T,at([It],q));return y&&ge?Ft[0]:Ft},"interceptor");re&&m&&typeof te=="function"&&te.length!=1&&(U=re=!1);var ge=this.__chain__,xe=!!this.__actions__.length,Qe=A&&!ge,vt=U&&!xe;if(!A&&re){B=vt?B:new xt(this);var Ze=c.apply(B,q);return Ze.__actions__.push({func:aw,args:[se],thisArg:e}),new bs(Ze,ge)}return Qe&&vt?c.apply(this,q):(Ze=this.thru(se),Qe?y?Ze.value()[0]:Ze.value():Ze)})}),M(["pop","push","shift","sort","splice","unshift"],function(c){var d=PC[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",y=/^(?:pop|shift)$/.test(c);T.prototype[c]=function(){var E=arguments;if(y&&!this.__chain__){var A=this.value();return d.apply(ct(A)?A:[],E)}return this[m](function(B){return d.apply(ct(B)?B:[],E)})}}),jo(xt.prototype,function(c,d){var m=T[d];if(m){var y=m.name+"";Zt.call(yf,y)||(yf[y]=[]),yf[y].push({name:d,func:m})}}),yf[ew(e,D).name]=[{name:"wrapper",func:e}],xt.prototype.clone=pSe,xt.prototype.reverse=mSe,xt.prototype.value=gSe,T.prototype.at=zEe,T.prototype.chain=HEe,T.prototype.commit=VEe,T.prototype.next=YEe,T.prototype.plant=XEe,T.prototype.reverse=JEe,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=QEe,T.prototype.first=T.prototype.head,My&&(T.prototype[My]=KEe),T},"runInContext"),Vu=V_e();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(sn._=Vu,define(function(){return Vu})):Uo?((Uo.exports=Vu)._=Vu,lf._=Vu):sn._=Vu}).call(Jh)});var ia=w((sIt,VZ)=>{var TA=Object.defineProperty,v8e=Object.getOwnPropertyDescriptor,_8e=Object.getOwnPropertyNames,S8e=Object.prototype.hasOwnProperty,AA=s((e,t)=>TA(e,"name",{value:t,configurable:!0}),"__name"),E8e=s((e,t)=>{for(var r in t)TA(e,r,{get:t[r],enumerable:!0})},"__export"),C8e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _8e(t))!S8e.call(e,i)&&i!==r&&TA(e,i,{get:()=>t[i],enumerable:!(n=v8e(t,i))||n.enumerable});return e},"__copyProps"),w8e=s(e=>C8e(TA({},"__esModule",{value:!0}),e),"__toCommonJS"),UZ={};E8e(UZ,{AlgorithmId:()=>GZ,EndpointURLScheme:()=>kZ,FieldPosition:()=>WZ,HttpApiKeyAuthLocation:()=>$Z,HttpAuthLocation:()=>jZ,IniSectionType:()=>zZ,RequestHandlerProtocol:()=>HZ,SMITHY_CONTEXT_KEY:()=>I8e,getDefaultClientConfiguration:()=>T8e,resolveDefaultRuntimeConfig:()=>A8e});VZ.exports=w8e(UZ);var jZ=(e=>(e.HEADER="header",e.QUERY="query",e))(jZ||{}),$Z=(e=>(e.HEADER="header",e.QUERY="query",e))($Z||{}),kZ=(e=>(e.HTTP="http",e.HTTPS="https",e))(kZ||{}),GZ=(e=>(e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256",e))(GZ||{}),b8e=AA(e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>"sha256",checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>"md5",checksumConstructor:()=>e.md5}),{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),O8e=AA(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),T8e=AA(e=>({...b8e(e)}),"getDefaultClientConfiguration"),A8e=AA(e=>({...O8e(e)}),"resolveDefaultRuntimeConfig"),WZ=(e=>(e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER",e))(WZ||{}),I8e="__smithy_context",zZ=(e=>(e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services",e))(zZ||{}),HZ=(e=>(e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0",e))(HZ||{})});var Or=w((aIt,ree)=>{var IA=Object.defineProperty,D8e=Object.getOwnPropertyDescriptor,R8e=Object.getOwnPropertyNames,N8e=Object.prototype.hasOwnProperty,qc=s((e,t)=>IA(e,"name",{value:t,configurable:!0}),"__name"),x8e=s((e,t)=>{for(var r in t)IA(e,r,{get:t[r],enumerable:!0})},"__export"),P8e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of R8e(t))!N8e.call(e,i)&&i!==r&&IA(e,i,{get:()=>t[i],enumerable:!(n=D8e(t,i))||n.enumerable});return e},"__copyProps"),B8e=s(e=>P8e(IA({},"__esModule",{value:!0}),e),"__toCommonJS"),YZ={};x8e(YZ,{Field:()=>q8e,Fields:()=>L8e,HttpRequest:()=>U8e,HttpResponse:()=>j8e,IHttpRequest:()=>KZ.HttpRequest,getHttpHandlerExtensionConfiguration:()=>M8e,isValidHostname:()=>tee,resolveHttpHandlerRuntimeConfig:()=>F8e});ree.exports=B8e(YZ);var M8e=qc(e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),F8e=qc(e=>({httpHandler:e.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),KZ=ia(),G_,XZ=(G_=class{constructor({name:t,kind:r=KZ.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},s(G_,"_Field"),G_);qc(XZ,"Field");var q8e=XZ,W_,JZ=(W_=class{constructor({fields:t=[],encoding:r="utf-8"}){this.entries={},t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},s(W_,"_Fields"),W_);qc(JZ,"Fields");var L8e=JZ,Cd,QZ=(Cd=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new Cd({...t,headers:{...t.headers}});return r.query&&(r.query=ZZ(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Cd.clone(this)}},s(Cd,"_HttpRequest"),Cd);qc(QZ,"HttpRequest");var U8e=QZ;function ZZ(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}s(ZZ,"cloneQuery");qc(ZZ,"cloneQuery");var z_,eee=(z_=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}},s(z_,"_HttpResponse"),z_);qc(eee,"HttpResponse");var j8e=eee;function tee(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}s(tee,"isValidHostname");qc(tee,"isValidHostname")});var H_=w((cIt,aee)=>{"use strict";var DA=Object.defineProperty,$8e=Object.getOwnPropertyDescriptor,k8e=Object.getOwnPropertyNames,G8e=Object.prototype.hasOwnProperty,oj=s((e,t)=>DA(e,"name",{value:t,configurable:!0}),"__name"),W8e=s((e,t)=>{for(var r in t)DA(e,r,{get:t[r],enumerable:!0})},"__export"),z8e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of k8e(t))!G8e.call(e,i)&&i!==r&&DA(e,i,{get:()=>t[i],enumerable:!(n=$8e(t,i))||n.enumerable});return e},"__copyProps"),H8e=s(e=>z8e(DA({},"__esModule",{value:!0}),e),"__toCommonJS"),nee={};W8e(nee,{getHostHeaderPlugin:()=>Y8e,hostHeaderMiddleware:()=>see,hostHeaderMiddlewareOptions:()=>oee,resolveHostHeaderConfig:()=>iee});aee.exports=H8e(nee);var V8e=Or();function iee(e){return e}s(iee,"resolveHostHeaderConfig");oj(iee,"resolveHostHeaderConfig");var see=oj(e=>t=>async r=>{if(!V8e.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:i=""}=e.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return t(r)},"hostHeaderMiddleware"),oee={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Y8e=oj(e=>({applyToStack:t=>{t.add(see(e),oee)}}),"getHostHeaderPlugin")});var V_=w((dIt,fee)=>{"use strict";var RA=Object.defineProperty,K8e=Object.getOwnPropertyDescriptor,X8e=Object.getOwnPropertyNames,J8e=Object.prototype.hasOwnProperty,uee=s((e,t)=>RA(e,"name",{value:t,configurable:!0}),"__name"),Q8e=s((e,t)=>{for(var r in t)RA(e,r,{get:t[r],enumerable:!0})},"__export"),Z8e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of X8e(t))!J8e.call(e,i)&&i!==r&&RA(e,i,{get:()=>t[i],enumerable:!(n=K8e(t,i))||n.enumerable});return e},"__copyProps"),e4e=s(e=>Z8e(RA({},"__esModule",{value:!0}),e),"__toCommonJS"),cee={};Q8e(cee,{getLoggerPlugin:()=>t4e,loggerMiddleware:()=>lee,loggerMiddlewareOptions:()=>dee});fee.exports=e4e(cee);var lee=uee(()=>(e,t)=>async r=>{var n,i;try{let o=await e(r),{clientName:a,commandName:u,logger:l,dynamoDbDocumentClientOptions:f={}}=t,{overrideInputFilterSensitiveLog:h,overrideOutputFilterSensitiveLog:p}=f,g=h??t.inputFilterSensitiveLog,_=p??t.outputFilterSensitiveLog,{$metadata:C,...D}=o.output;return(n=l==null?void 0:l.info)==null||n.call(l,{clientName:a,commandName:u,input:g(r.input),output:_(D),metadata:C}),o}catch(o){let{clientName:a,commandName:u,logger:l,dynamoDbDocumentClientOptions:f={}}=t,{overrideInputFilterSensitiveLog:h}=f,p=h??t.inputFilterSensitiveLog;throw(i=l==null?void 0:l.error)==null||i.call(l,{clientName:a,commandName:u,input:p(r.input),error:o,metadata:o.$metadata}),o}},"loggerMiddleware"),dee={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},t4e=uee(e=>({applyToStack:t=>{t.add(lee(),dee)}}),"getLoggerPlugin")});var Y_=w((hIt,yee)=>{"use strict";var NA=Object.defineProperty,r4e=Object.getOwnPropertyDescriptor,n4e=Object.getOwnPropertyNames,i4e=Object.prototype.hasOwnProperty,aj=s((e,t)=>NA(e,"name",{value:t,configurable:!0}),"__name"),s4e=s((e,t)=>{for(var r in t)NA(e,r,{get:t[r],enumerable:!0})},"__export"),o4e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of n4e(t))!i4e.call(e,i)&&i!==r&&NA(e,i,{get:()=>t[i],enumerable:!(n=r4e(t,i))||n.enumerable});return e},"__copyProps"),a4e=s(e=>o4e(NA({},"__esModule",{value:!0}),e),"__toCommonJS"),pee={};s4e(pee,{addRecursionDetectionMiddlewareOptions:()=>gee,getRecursionDetectionPlugin:()=>d4e,recursionDetectionMiddleware:()=>mee});yee.exports=a4e(pee);var u4e=Or(),hee="X-Amzn-Trace-Id",c4e="AWS_LAMBDA_FUNCTION_NAME",l4e="_X_AMZN_TRACE_ID",mee=aj(e=>t=>async r=>{let{request:n}=r;if(!u4e.HttpRequest.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(hee))return t(r);let i=process.env[c4e],o=process.env[l4e],a=aj(u=>typeof u=="string"&&u.length>0,"nonEmptyString");return a(i)&&a(o)&&(n.headers[hee]=o),t({...r,request:n})},"recursionDetectionMiddleware"),gee={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},d4e=aj(e=>({applyToStack:t=>{t.add(mee(e),gee)}}),"getRecursionDetectionPlugin")});var uj,f4e,vee=De(()=>{uj=_r(ia()),f4e=s(e=>e[uj.SMITHY_CONTEXT_KEY]||(e[uj.SMITHY_CONTEXT_KEY]={}),"getSmithyContext")});var wo=w((yIt,Cee)=>{var xA=Object.defineProperty,h4e=Object.getOwnPropertyDescriptor,p4e=Object.getOwnPropertyNames,m4e=Object.prototype.hasOwnProperty,See=s((e,t)=>xA(e,"name",{value:t,configurable:!0}),"__name"),g4e=s((e,t)=>{for(var r in t)xA(e,r,{get:t[r],enumerable:!0})},"__export"),y4e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of p4e(t))!m4e.call(e,i)&&i!==r&&xA(e,i,{get:()=>t[i],enumerable:!(n=h4e(t,i))||n.enumerable});return e},"__copyProps"),v4e=s(e=>y4e(xA({},"__esModule",{value:!0}),e),"__toCommonJS"),Eee={};g4e(Eee,{getSmithyContext:()=>_4e,normalizeProvider:()=>S4e});Cee.exports=v4e(Eee);var _ee=ia(),_4e=See(e=>e[_ee.SMITHY_CONTEXT_KEY]||(e[_ee.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),S4e=See(e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t},"normalizeProvider")});function E4e(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var _It,wee,K_,PA=De(()=>{_It=_r(ia()),wee=_r(wo());s(E4e,"convertHttpAuthSchemesToMap");K_=s((e,t)=>(r,n)=>async i=>{var f;let o=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,i.input)),a=E4e(e.httpAuthSchemes),u=(0,wee.getSmithyContext)(n),l=[];for(let h of o){let p=a.get(h.schemeId);if(!p){l.push(`HttpAuthScheme \`${h.schemeId}\` was not enabled for this service.`);continue}let g=p.identityProvider(await t.identityProviderConfigProvider(e));if(!g){l.push(`HttpAuthScheme \`${h.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:_={},signingProperties:C={}}=((f=h.propertiesExtractor)==null?void 0:f.call(h,e,n))||{};h.identityProperties=Object.assign(h.identityProperties||{},_),h.signingProperties=Object.assign(h.signingProperties||{},C),u.selectedHttpAuthScheme={httpAuthOption:h,identity:await g(h.identityProperties),signer:p.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(i)},"httpAuthSchemeMiddleware")});var bee,C4e,Oee=De(()=>{PA();bee={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},C4e=s((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(K_(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),bee)}}),"getHttpAuthSchemeEndpointRuleSetPlugin")});var wd=w((TIt,xee)=>{var BA=Object.defineProperty,w4e=Object.getOwnPropertyDescriptor,b4e=Object.getOwnPropertyNames,O4e=Object.prototype.hasOwnProperty,cj=s((e,t)=>BA(e,"name",{value:t,configurable:!0}),"__name"),T4e=s((e,t)=>{for(var r in t)BA(e,r,{get:t[r],enumerable:!0})},"__export"),A4e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of b4e(t))!O4e.call(e,i)&&i!==r&&BA(e,i,{get:()=>t[i],enumerable:!(n=w4e(t,i))||n.enumerable});return e},"__copyProps"),I4e=s(e=>A4e(BA({},"__esModule",{value:!0}),e),"__toCommonJS"),Tee={};T4e(Tee,{deserializerMiddleware:()=>Aee,deserializerMiddlewareOption:()=>Dee,getSerdePlugin:()=>Nee,serializerMiddleware:()=>Iee,serializerMiddlewareOption:()=>Ree});xee.exports=I4e(Tee);var Aee=cj((e,t)=>r=>async n=>{let{response:i}=await r(n);try{let o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},"deserializerMiddleware"),Iee=cj((e,t)=>(r,n)=>async i=>{var o;let a=(o=n.endpointV2)!=null&&o.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!a)throw new Error("No valid endpoint provider available.");let u=await t(i.input,{...e,endpoint:a});return r({...i,request:u})},"serializerMiddleware"),Dee={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Ree={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Nee(e,t,r){return{applyToStack:n=>{n.add(Aee(e,r),Dee),n.add(Iee(e,t),Ree)}}}s(Nee,"getSerdePlugin");cj(Nee,"getSerdePlugin")});var Pee,Bee,D4e,Mee=De(()=>{Pee=_r(wd());PA();Bee={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Pee.serializerMiddlewareOption.name},D4e=s((e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(K_(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),Bee)}}),"getHttpAuthSchemePlugin")});var Fee=De(()=>{PA();Oee();Mee()});var qee,MIt,Lee,R4e,N4e,lj,dj=De(()=>{qee=_r(Or()),MIt=_r(ia()),Lee=_r(wo()),R4e=s(e=>t=>{throw t},"defaultErrorHandler"),N4e=s((e,t)=>{},"defaultSuccessHandler"),lj=s(e=>(t,r)=>async n=>{if(!qee.HttpRequest.isInstance(n.request))return t(n);let o=(0,Lee.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:a={}},identity:u,signer:l}=o,f=await t({...n,request:await l.sign(n.request,u,a)}).catch((l.errorHandler||R4e)(a));return(l.successHandler||N4e)(f.response,a),f},"httpSigningMiddleware")});var Uee,x4e,jee=De(()=>{dj();Uee={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},x4e=s(e=>({applyToStack:t=>{t.addRelativeTo(lj(e),Uee)}}),"getHttpSigningPlugin")});var $ee=De(()=>{dj();jee()});var Lc,kee=De(()=>{Lc=s(e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t},"normalizeProvider")});function Gee(e,t,r,n,i){return s(async function*(a,u,...l){let f=a.startingToken||void 0,h=!0,p;for(;h;){if(u[r]=f,i&&(u[i]=u[i]??a.pageSize),a.client instanceof e)p=await P4e(t,a.client,u,...l);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield p;let g=f;f=B4e(p,n),h=!!(f&&(!a.stopOnSameToken||f!==g))}return void 0},"paginateOperation")}var P4e,B4e,Wee=De(()=>{P4e=s(async(e,t,r,...n)=>await t.send(new e(r),...n),"makePagedClientRequest");s(Gee,"createPaginator");B4e=s((e,t)=>{let r=e,n=t.split(".");for(let i of n){if(!r||typeof r!="object")return;r=r[i]}return r},"get")});var fj=w((KIt,Hee)=>{var MA=Object.defineProperty,M4e=Object.getOwnPropertyDescriptor,F4e=Object.getOwnPropertyNames,q4e=Object.prototype.hasOwnProperty,L4e=s((e,t)=>MA(e,"name",{value:t,configurable:!0}),"__name"),U4e=s((e,t)=>{for(var r in t)MA(e,r,{get:t[r],enumerable:!0})},"__export"),j4e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of F4e(t))!q4e.call(e,i)&&i!==r&&MA(e,i,{get:()=>t[i],enumerable:!(n=M4e(t,i))||n.enumerable});return e},"__copyProps"),$4e=s(e=>j4e(MA({},"__esModule",{value:!0}),e),"__toCommonJS"),zee={};U4e(zee,{isArrayBuffer:()=>k4e});Hee.exports=$4e(zee);var k4e=L4e(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var Qh=w((JIt,Kee)=>{var FA=Object.defineProperty,G4e=Object.getOwnPropertyDescriptor,W4e=Object.getOwnPropertyNames,z4e=Object.prototype.hasOwnProperty,Vee=s((e,t)=>FA(e,"name",{value:t,configurable:!0}),"__name"),H4e=s((e,t)=>{for(var r in t)FA(e,r,{get:t[r],enumerable:!0})},"__export"),V4e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of W4e(t))!z4e.call(e,i)&&i!==r&&FA(e,i,{get:()=>t[i],enumerable:!(n=G4e(t,i))||n.enumerable});return e},"__copyProps"),Y4e=s(e=>V4e(FA({},"__esModule",{value:!0}),e),"__toCommonJS"),Yee={};H4e(Yee,{fromArrayBuffer:()=>X4e,fromString:()=>J4e});Kee.exports=Y4e(Yee);var K4e=fj(),hj=require("buffer"),X4e=Vee((e,t=0,r=e.byteLength-t)=>{if(!(0,K4e.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return hj.Buffer.from(e,t,r)},"fromArrayBuffer"),J4e=Vee((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?hj.Buffer.from(e,t):hj.Buffer.from(e)},"fromString")});var Xee=w(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});qA.fromBase64=void 0;var Q4e=Qh(),Z4e=/^[A-Za-z0-9+/]*={0,2}$/,eYe=s(e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Z4e.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,Q4e.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},"fromBase64");qA.fromBase64=eYe});var _s=w((tDt,ete)=>{var LA=Object.defineProperty,tYe=Object.getOwnPropertyDescriptor,rYe=Object.getOwnPropertyNames,nYe=Object.prototype.hasOwnProperty,pj=s((e,t)=>LA(e,"name",{value:t,configurable:!0}),"__name"),iYe=s((e,t)=>{for(var r in t)LA(e,r,{get:t[r],enumerable:!0})},"__export"),sYe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of rYe(t))!nYe.call(e,i)&&i!==r&&LA(e,i,{get:()=>t[i],enumerable:!(n=tYe(t,i))||n.enumerable});return e},"__copyProps"),oYe=s(e=>sYe(LA({},"__esModule",{value:!0}),e),"__toCommonJS"),Jee={};iYe(Jee,{fromUtf8:()=>Zee,toUint8Array:()=>aYe,toUtf8:()=>uYe});ete.exports=oYe(Jee);var Qee=Qh(),Zee=pj(e=>{let t=(0,Qee.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),aYe=pj(e=>typeof e=="string"?Zee(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),uYe=pj(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,Qee.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var tte=w(UA=>{"use strict";Object.defineProperty(UA,"__esModule",{value:!0});UA.toBase64=void 0;var cYe=Qh(),lYe=_s(),dYe=s(e=>{let t;if(typeof e=="string"?t=(0,lYe.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,cYe.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")},"toBase64");UA.toBase64=dYe});var fu=w((sDt,jA)=>{var rte=Object.defineProperty,fYe=Object.getOwnPropertyDescriptor,hYe=Object.getOwnPropertyNames,pYe=Object.prototype.hasOwnProperty,mj=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of hYe(t))!pYe.call(e,i)&&i!==r&&rte(e,i,{get:()=>t[i],enumerable:!(n=fYe(t,i))||n.enumerable});return e},"__copyProps"),nte=s((e,t,r)=>(mj(e,t,"default"),r&&mj(r,t,"default")),"__reExport"),mYe=s(e=>mj(rte({},"__esModule",{value:!0}),e),"__toCommonJS"),gj={};jA.exports=mYe(gj);nte(gj,Xee(),jA.exports);nte(gj,tte(),jA.exports)});var ite=w($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0});$A.getAwsChunkedEncodingStream=void 0;var gYe=require("stream"),yYe=s((e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:i,checksumLocationName:o,streamHasher:a}=t,u=r!==void 0&&i!==void 0&&o!==void 0&&a!==void 0,l=u?a(i,e):void 0,f=new gYe.Readable({read:()=>{}});return e.on("data",h=>{let p=n(h)||0;f.push(`${p.toString(16)}\r
`),f.push(h),f.push(`\r
`)}),e.on("end",async()=>{if(f.push(`0\r
`),u){let h=r(await l);f.push(`${o}:${h}\r
`),f.push(`\r
`)}f.push(null)}),f},"getAwsChunkedEncodingStream");$A.getAwsChunkedEncodingStream=yYe});var vj=w((cDt,ate)=>{var kA=Object.defineProperty,vYe=Object.getOwnPropertyDescriptor,_Ye=Object.getOwnPropertyNames,SYe=Object.prototype.hasOwnProperty,yj=s((e,t)=>kA(e,"name",{value:t,configurable:!0}),"__name"),EYe=s((e,t)=>{for(var r in t)kA(e,r,{get:t[r],enumerable:!0})},"__export"),CYe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _Ye(t))!SYe.call(e,i)&&i!==r&&kA(e,i,{get:()=>t[i],enumerable:!(n=vYe(t,i))||n.enumerable});return e},"__copyProps"),wYe=s(e=>CYe(kA({},"__esModule",{value:!0}),e),"__toCommonJS"),ste={};EYe(ste,{escapeUri:()=>ote,escapeUriPath:()=>OYe});ate.exports=wYe(ste);var ote=yj(e=>encodeURIComponent(e).replace(/[!'()*]/g,bYe),"escapeUri"),bYe=yj(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),OYe=yj(e=>e.split("/").map(ote).join("/"),"escapeUriPath")});var X_=w((dDt,lte)=>{var GA=Object.defineProperty,TYe=Object.getOwnPropertyDescriptor,AYe=Object.getOwnPropertyNames,IYe=Object.prototype.hasOwnProperty,DYe=s((e,t)=>GA(e,"name",{value:t,configurable:!0}),"__name"),RYe=s((e,t)=>{for(var r in t)GA(e,r,{get:t[r],enumerable:!0})},"__export"),NYe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of AYe(t))!IYe.call(e,i)&&i!==r&&GA(e,i,{get:()=>t[i],enumerable:!(n=TYe(t,i))||n.enumerable});return e},"__copyProps"),xYe=s(e=>NYe(GA({},"__esModule",{value:!0}),e),"__toCommonJS"),ute={};RYe(ute,{buildQueryString:()=>cte});lte.exports=xYe(ute);var _j=vj();function cte(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,_j.escapeUri)(r),Array.isArray(n))for(let i=0,o=n.length;i<o;i++)t.push(`${r}=${(0,_j.escapeUri)(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${(0,_j.escapeUri)(n)}`),t.push(i)}}return t.join("&")}s(cte,"buildQueryString");DYe(cte,"buildQueryString")});var Od=w((hDt,Ite)=>{var PYe=Object.create,eS=Object.defineProperty,BYe=Object.getOwnPropertyDescriptor,MYe=Object.getOwnPropertyNames,FYe=Object.getPrototypeOf,qYe=Object.prototype.hasOwnProperty,gr=s((e,t)=>eS(e,"name",{value:t,configurable:!0}),"__name"),LYe=s((e,t)=>{for(var r in t)eS(e,r,{get:t[r],enumerable:!0})},"__export"),mte=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of MYe(t))!qYe.call(e,i)&&i!==r&&eS(e,i,{get:()=>t[i],enumerable:!(n=BYe(t,i))||n.enumerable});return e},"__copyProps"),UYe=s((e,t,r)=>(r=e!=null?PYe(FYe(e)):{},mte(t||!e||!e.__esModule?eS(r,"default",{value:e,enumerable:!0}):r,e)),"__toESM"),jYe=s(e=>mte(eS({},"__esModule",{value:!0}),e),"__toCommonJS"),gte={};LYe(gte,{DEFAULT_REQUEST_TIMEOUT:()=>HYe,NodeHttp2Handler:()=>JYe,NodeHttpHandler:()=>VYe,streamCollector:()=>ZYe});Ite.exports=jYe(gte);var yte=Or(),vte=X_(),Sj=require("http"),Ej=require("https"),$Ye=["ECONNRESET","EPIPE","ETIMEDOUT"],_te=gr(e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},"getTransformedHeaders"),dte=1e3,kYe=gr((e,t,r=0)=>{if(!r)return-1;let n=gr(i=>{let o=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-i),a=gr(u=>{u!=null&&u.connecting?u.on("connect",()=>{clearTimeout(o)}):clearTimeout(o)},"doWithSocket");e.socket?a(e.socket):e.on("socket",a)},"registerTimeout");return r<2e3?(n(0),0):setTimeout(n.bind(null,dte),dte)},"setConnectionTimeout"),GYe=3e3,WYe=gr((e,{keepAlive:t,keepAliveMsecs:r},n=GYe)=>{if(t!==!0)return-1;let i=gr(()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",o=>{o.setKeepAlive(t,r||0)})},"registerListener");return n===0?(i(),0):setTimeout(i,n)},"setSocketKeepAlive"),fte=3e3,zYe=gr((e,t,r=0)=>{let n=gr(i=>{e.setTimeout(r-i,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})},"registerTimeout");return 0<r&&r<6e3?(n(0),0):setTimeout(n.bind(null,r===0?0:fte),fte)},"setSocketTimeout"),Ste=require("stream"),hte=1e3;async function Cj(e,t,r=hte){let n=t.headers??{},i=n.Expect||n.expect,o=-1,a=!1;i==="100-continue"&&await Promise.race([new Promise(u=>{o=Number(setTimeout(u,Math.max(hte,r)))}),new Promise(u=>{e.on("continue",()=>{clearTimeout(o),u()}),e.on("error",()=>{a=!0,clearTimeout(o),u()})})]),a||Ete(e,t.body)}s(Cj,"writeRequestBody");gr(Cj,"writeRequestBody");function Ete(e,t){if(t instanceof Ste.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}s(Ete,"writeBody");gr(Ete,"writeBody");var HYe=0,bd,Cte=(bd=class{constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(this.resolveDefaultConfig(i))}).catch(n):r(this.resolveDefaultConfig(t))})}static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new bd(t)}static checkSocketUsage(t,r,n=console){var i,o,a;let{sockets:u,requests:l,maxSockets:f}=t;if(typeof f!="number"||f===1/0||Date.now()-15e3<r)return r;if(u&&l)for(let p in u){let g=((i=u[p])==null?void 0:i.length)??0,_=((o=l[p])==null?void 0:o.length)??0;if(g>=f&&_>=2*f)return(a=n==null?void 0:n.warn)==null||a.call(n,`@smithy/node-http-handler:WARN - socket usage at capacity=${g} and ${_} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:i,httpAgent:o,httpsAgent:a}=t||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r??i,httpAgent:o instanceof Sj.Agent||typeof(o==null?void 0:o.destroy)=="function"?o:new Sj.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof Ej.Agent||typeof(a==null?void 0:a.destroy)=="function"?a:new Ej.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){var t,r,n,i;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(i=(n=this.config)==null?void 0:n.httpsAgent)==null||i.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,i)=>{let o,a=[],u=gr(async x=>{await o,a.forEach(clearTimeout),n(x)},"resolve"),l=gr(async x=>{await o,a.forEach(clearTimeout),i(x)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let x=new Error("Request aborted");x.name="AbortError",l(x);return}let f=t.protocol==="https:",h=f?this.config.httpsAgent:this.config.httpAgent;a.push(setTimeout(()=>{this.socketWarningTimestamp=bd.checkSocketUsage(h,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let p=(0,vte.buildQueryString)(t.query||{}),g;if(t.username!=null||t.password!=null){let x=t.username??"",P=t.password??"";g=`${x}:${P}`}let _=t.path;p&&(_+=`?${p}`),t.fragment&&(_+=`#${t.fragment}`);let C=t.hostname??"";C[0]==="["&&C.endsWith("]")?C=t.hostname.slice(1,-1):C=t.hostname;let D={headers:t.headers,host:C,method:t.method,path:_,port:t.port,agent:h,auth:g},N=(f?Ej.request:Sj.request)(D,x=>{let P=new yte.HttpResponse({statusCode:x.statusCode||-1,reason:x.statusMessage,headers:_te(x.headers),body:x});u({response:P})});if(N.on("error",x=>{$Ye.includes(x.code)?l(Object.assign(x,{name:"TimeoutError"})):l(x)}),r){let x=gr(()=>{N.destroy();let P=new Error("Request aborted");P.name="AbortError",l(P)},"onAbort");if(typeof r.addEventListener=="function"){let P=r;P.addEventListener("abort",x,{once:!0}),N.once("close",()=>P.removeEventListener("abort",x))}else r.onabort=x}a.push(kYe(N,l,this.config.connectionTimeout)),a.push(zYe(N,l,this.config.requestTimeout));let F=D.agent;typeof F=="object"&&"keepAlive"in F&&a.push(WYe(N,{keepAlive:F.keepAlive,keepAliveMsecs:F.keepAliveMsecs})),o=Cj(N,t,this.config.requestTimeout).catch(x=>(a.forEach(clearTimeout),i(x)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},s(bd,"_NodeHttpHandler"),bd);gr(Cte,"NodeHttpHandler");var VYe=Cte,pte=require("http2"),YYe=UYe(require("http2")),J_,wte=(J_=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},s(J_,"_NodeHttp2ConnectionPool"),J_);gr(wte,"NodeHttp2ConnectionPool");var KYe=wte,Q_,bte=(Q_=class{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){let n=this.getUrlString(t),i=this.sessionCache.get(n);if(i){let l=i.poll();if(l&&!this.config.disableConcurrency)return l}let o=YYe.default.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},l=>{if(l)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),o.unref();let a=gr(()=>{o.destroy(),this.deleteSession(n,o)},"destroySessionCb");o.on("goaway",a),o.on("error",a),o.on("frameError",a),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,a);let u=this.sessionCache.get(n)||new KYe;return u.offerLast(o),this.sessionCache.set(n,u),o}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){var n;let i=this.getUrlString(t);(n=this.sessionCache.get(i))==null||n.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},s(Q_,"_NodeHttp2ConnectionManager"),Q_);gr(bte,"NodeHttp2ConnectionManager");var XYe=bte,Zh,Ote=(Zh=class{constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new XYe({}),this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(i=>{r(i||{})}).catch(n):r(t||{})})}static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new Zh(t)}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:i}=this.config;return new Promise((o,a)=>{var u;let l=!1,f,h=gr(async Q=>{await f,o(Q)},"resolve"),p=gr(async Q=>{await f,a(Q)},"reject");if(r!=null&&r.aborted){l=!0;let Q=new Error("Request aborted");Q.name="AbortError",p(Q);return}let{hostname:g,method:_,port:C,protocol:D,query:O}=t,N="";if(t.username!=null||t.password!=null){let Q=t.username??"",Se=t.password??"";N=`${Q}:${Se}@`}let F=`${D}//${N}${g}${C?`:${C}`:""}`,x={destination:new URL(F)},P=this.connectionManager.lease(x,{requestTimeout:(u=this.config)==null?void 0:u.sessionTimeout,disableConcurrentStreams:i||!1}),X=gr(Q=>{i&&this.destroySession(P),l=!0,p(Q)},"rejectWithDestroy"),G=(0,vte.buildQueryString)(O||{}),ue=t.path;G&&(ue+=`?${G}`),t.fragment&&(ue+=`#${t.fragment}`);let be=P.request({...t.headers,[pte.constants.HTTP2_HEADER_PATH]:ue,[pte.constants.HTTP2_HEADER_METHOD]:_});if(P.ref(),be.on("response",Q=>{let Se=new yte.HttpResponse({statusCode:Q[":status"]||-1,headers:_te(Q),body:be});l=!0,h({response:Se}),i&&(P.close(),this.connectionManager.deleteSession(F,P))}),n&&be.setTimeout(n,()=>{be.close();let Q=new Error(`Stream timed out because of no activity for ${n} ms`);Q.name="TimeoutError",X(Q)}),r){let Q=gr(()=>{be.close();let Se=new Error("Request aborted");Se.name="AbortError",X(Se)},"onAbort");if(typeof r.addEventListener=="function"){let Se=r;Se.addEventListener("abort",Q,{once:!0}),be.once("close",()=>Se.removeEventListener("abort",Q))}else r.onabort=Q}be.on("frameError",(Q,Se,Ce)=>{X(new Error(`Frame type id ${Q} in stream id ${Ce} has failed with code ${Se}.`))}),be.on("error",X),be.on("aborted",()=>{X(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${be.rstCode}.`))}),be.on("close",()=>{P.unref(),i&&P.destroy(),l||X(new Error("Unexpected error: http2 request did not get a response"))}),f=Cj(be,t,n)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},s(Zh,"_NodeHttp2Handler"),Zh);gr(Ote,"NodeHttp2Handler");var JYe=Ote,Z_,Tte=(Z_=class extends Ste.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}},s(Z_,"_Collector"),Z_);gr(Tte,"Collector");var QYe=Tte,ZYe=gr(e=>eKe(e)?Ate(e):new Promise((t,r)=>{let n=new QYe;e.pipe(n),e.on("error",i=>{n.end(),r(i)}),n.on("error",r),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.bufferedBytes));t(i)})}),"streamCollector"),eKe=gr(e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,"isReadableStreamInstance");async function Ate(e){let t=[],r=e.getReader(),n=!1,i=0;for(;!n;){let{done:u,value:l}=await r.read();l&&(t.push(l),i+=l.length),n=u}let o=new Uint8Array(i),a=0;for(let u of t)o.set(u,a),a+=u.length;return o}s(Ate,"collectReadableStream");gr(Ate,"collectReadableStream")});var wj=w((mDt,Bte)=>{var zA=Object.defineProperty,tKe=Object.getOwnPropertyDescriptor,rKe=Object.getOwnPropertyNames,nKe=Object.prototype.hasOwnProperty,Td=s((e,t)=>zA(e,"name",{value:t,configurable:!0}),"__name"),iKe=s((e,t)=>{for(var r in t)zA(e,r,{get:t[r],enumerable:!0})},"__export"),sKe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of rKe(t))!nKe.call(e,i)&&i!==r&&zA(e,i,{get:()=>t[i],enumerable:!(n=tKe(t,i))||n.enumerable});return e},"__copyProps"),oKe=s(e=>sKe(zA({},"__esModule",{value:!0}),e),"__toCommonJS"),Rte={};iKe(Rte,{FetchHttpHandler:()=>uKe,keepAliveSupport:()=>WA,streamCollector:()=>cKe});Bte.exports=oKe(Rte);var Dte=Or(),aKe=X_();function Nte(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}s(Nte,"requestTimeout");Td(Nte,"requestTimeout");var WA={supported:void 0},ep,xte=(ep=class{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new ep(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),WA.supported===void 0&&(WA.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r}={}){var n;this.config||(this.config=await this.configProvider);let i=this.config.requestTimeout,o=this.config.keepAlive===!0,a=this.config.credentials;if(r!=null&&r.aborted){let F=new Error("Request aborted");return F.name="AbortError",Promise.reject(F)}let u=t.path,l=(0,aKe.buildQueryString)(t.query||{});l&&(u+=`?${l}`),t.fragment&&(u+=`#${t.fragment}`);let f="";if(t.username!=null||t.password!=null){let F=t.username??"",x=t.password??"";f=`${F}:${x}@`}let{port:h,method:p}=t,g=`${t.protocol}//${f}${t.hostname}${h?`:${h}`:""}${u}`,_=p==="GET"||p==="HEAD"?void 0:t.body,C={body:_,headers:new Headers(t.headers),method:p,credentials:a};(n=this.config)!=null&&n.cache&&(C.cache=this.config.cache),_&&(C.duplex="half"),typeof AbortController<"u"&&(C.signal=r),WA.supported&&(C.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(C,this.config.requestInit(t));let D=Td(()=>{},"removeSignalEventListener"),O=new Request(g,C),N=[fetch(O).then(F=>{let x=F.headers,P={};for(let G of x.entries())P[G[0]]=G[1];return F.body!=null?{response:new Dte.HttpResponse({headers:P,reason:F.statusText,statusCode:F.status,body:F.body})}:F.blob().then(G=>({response:new Dte.HttpResponse({headers:P,reason:F.statusText,statusCode:F.status,body:G})}))}),Nte(i)];return r&&N.push(new Promise((F,x)=>{let P=Td(()=>{let X=new Error("Request aborted");X.name="AbortError",x(X)},"onAbort");if(typeof r.addEventListener=="function"){let X=r;X.addEventListener("abort",P,{once:!0}),D=Td(()=>X.removeEventListener("abort",P),"removeSignalEventListener")}else r.onabort=P})),Promise.race(N).finally(D)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},s(ep,"_FetchHttpHandler"),ep);Td(xte,"FetchHttpHandler");var uKe=xte,cKe=Td(async e=>typeof Blob=="function"&&e instanceof Blob?new Uint8Array(await e.arrayBuffer()):Pte(e),"streamCollector");async function Pte(e){let t=[],r=e.getReader(),n=!1,i=0;for(;!n;){let{done:u,value:l}=await r.read();l&&(t.push(l),i+=l.length),n=u}let o=new Uint8Array(i),a=0;for(let u of t)o.set(u,a),a+=u.length;return o}s(Pte,"collectStream");Td(Pte,"collectStream")});var Oj=w((yDt,jte)=>{var HA=Object.defineProperty,lKe=Object.getOwnPropertyDescriptor,dKe=Object.getOwnPropertyNames,fKe=Object.prototype.hasOwnProperty,Mte=s((e,t)=>HA(e,"name",{value:t,configurable:!0}),"__name"),hKe=s((e,t)=>{for(var r in t)HA(e,r,{get:t[r],enumerable:!0})},"__export"),pKe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of dKe(t))!fKe.call(e,i)&&i!==r&&HA(e,i,{get:()=>t[i],enumerable:!(n=lKe(t,i))||n.enumerable});return e},"__copyProps"),mKe=s(e=>pKe(HA({},"__esModule",{value:!0}),e),"__toCommonJS"),Fte={};hKe(Fte,{fromHex:()=>Lte,toHex:()=>Ute});jte.exports=mKe(Fte);var qte={},bj={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),qte[e]=t,bj[t]=e}function Lte(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in bj)t[r/2]=bj[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}s(Lte,"fromHex");Mte(Lte,"fromHex");function Ute(e){let t="";for(let r=0;r<e.byteLength;r++)t+=qte[e[r]];return t}s(Ute,"toHex");Mte(Ute,"toHex")});var Ad=w(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});VA.isReadableStream=void 0;var gKe=s(e=>{var t;return typeof ReadableStream=="function"&&(((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)},"isReadableStream");VA.isReadableStream=gKe});var Wte=w(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});YA.sdkStreamMixin=void 0;var yKe=wj(),vKe=fu(),_Ke=Oj(),SKe=_s(),$te=Ad(),kte="The stream has already been transformed.",EKe=s(e=>{var t,r;if(!Gte(e)&&!(0,$te.isReadableStream)(e)){let a=((r=(t=e==null?void 0:e.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${a}`)}let n=!1,i=s(async()=>{if(n)throw new Error(kte);return n=!0,await(0,yKe.streamCollector)(e)},"transformToByteArray"),o=s(a=>{if(typeof a.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return a.stream()},"blobToWebStream");return Object.assign(e,{transformToByteArray:i,transformToString:async a=>{let u=await i();if(a==="base64")return(0,vKe.toBase64)(u);if(a==="hex")return(0,_Ke.toHex)(u);if(a===void 0||a==="utf8"||a==="utf-8")return(0,SKe.toUtf8)(u);if(typeof TextDecoder=="function")return new TextDecoder(a).decode(u);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(kte);if(n=!0,Gte(e))return o(e);if((0,$te.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},"sdkStreamMixin");YA.sdkStreamMixin=EKe;var Gte=s(e=>typeof Blob=="function"&&e instanceof Blob,"isBlobInstance")});var Hte=w(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0});KA.sdkStreamMixin=void 0;var CKe=Od(),wKe=Qh(),Tj=require("stream"),bKe=require("util"),OKe=Wte(),zte="The stream has already been transformed.",TKe=s(e=>{var t,r;if(!(e instanceof Tj.Readable))try{return(0,OKe.sdkStreamMixin)(e)}catch{let a=((r=(t=e==null?void 0:e.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${a}`)}let n=!1,i=s(async()=>{if(n)throw new Error(zte);return n=!0,await(0,CKe.streamCollector)(e)},"transformToByteArray");return Object.assign(e,{transformToByteArray:i,transformToString:async o=>{let a=await i();return o===void 0||Buffer.isEncoding(o)?(0,wKe.fromArrayBuffer)(a.buffer,a.byteOffset,a.byteLength).toString(o):new bKe.TextDecoder(o).decode(a)},transformToWebStream:()=>{if(n)throw new Error(zte);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Tj.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return n=!0,Tj.Readable.toWeb(e)}})},"sdkStreamMixin");KA.sdkStreamMixin=TKe});var Vte=w(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});XA.splitStream=void 0;async function AKe(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}s(AKe,"splitStream");XA.splitStream=AKe});var Kte=w(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0});JA.splitStream=void 0;var Yte=require("stream"),IKe=Vte(),DKe=Ad();async function RKe(e){if((0,DKe.isReadableStream)(e))return(0,IKe.splitStream)(e);let t=new Yte.PassThrough,r=new Yte.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}s(RKe,"splitStream");JA.splitStream=RKe});var Xte=w(QA=>{"use strict";Object.defineProperty(QA,"__esModule",{value:!0});QA.headStream=void 0;async function NKe(e,t){var r;let n=0,i=[],o=e.getReader(),a=!1;for(;!a;){let{done:f,value:h}=await o.read();if(h&&(i.push(h),n+=(r=h==null?void 0:h.byteLength)!==null&&r!==void 0?r:0),n>=t)break;a=f}o.releaseLock();let u=new Uint8Array(Math.min(t,n)),l=0;for(let f of i){if(f.byteLength>u.byteLength-l){u.set(f.subarray(0,u.byteLength-l),l);break}else u.set(f,l);l+=f.length}return u}s(NKe,"headStream");QA.headStream=NKe});var Jte=w(ZA=>{"use strict";Object.defineProperty(ZA,"__esModule",{value:!0});ZA.headStream=void 0;var xKe=require("stream"),PKe=Xte(),BKe=Ad(),MKe=s((e,t)=>(0,BKe.isReadableStream)(e)?(0,PKe.headStream)(e,t):new Promise((r,n)=>{let i=new Aj;i.limit=t,e.pipe(i),e.on("error",o=>{i.end(),n(o)}),i.on("error",n),i.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})}),"headStream");ZA.headStream=MKe;var Ij=class Ij extends xKe.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,r,n){var i;if(this.buffers.push(t),this.bytesBuffered+=(i=t.byteLength)!==null&&i!==void 0?i:0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,a=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=a.subarray(0,a.byteLength-o),this.emit("finish")}n()}};s(Ij,"Collector");var Aj=Ij});var Nj=w(eI=>{"use strict";Object.defineProperty(eI,"__esModule",{value:!0});eI.ChecksumStream=void 0;var FKe=fu(),qKe=require("stream"),Rj=class Rj extends qKe.Duplex{constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:i,base64Encoder:o}){var a,u;if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${(u=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name)!==null&&u!==void 0?u:n} in ChecksumStream.`);this.base64Encoder=o??FKe.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=i,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(i){return n(i)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};s(Rj,"ChecksumStream");var Dj=Rj;eI.ChecksumStream=Dj});var Qte=w(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0});tI.ChecksumStream=void 0;var LKe=typeof ReadableStream=="function"?ReadableStream:function(){},Pj=class Pj extends LKe{};s(Pj,"ChecksumStream");var xj=Pj;tI.ChecksumStream=xj});var Zte=w(rI=>{"use strict";Object.defineProperty(rI,"__esModule",{value:!0});rI.createChecksumStream=void 0;var UKe=fu(),jKe=Ad(),$Ke=Qte(),kKe=s(({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:i})=>{var o,a;if(!(0,jKe.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${(a=(o=r==null?void 0:r.constructor)===null||o===void 0?void 0:o.name)!==null&&a!==void 0?a:r} in ChecksumStream.`);let u=i??UKe.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let l=new TransformStream({start(){},async transform(h,p){t.update(h),p.enqueue(h)},async flush(h){let p=await t.digest(),g=u(p);if(e!==g){let _=new Error(`Checksum mismatch: expected "${e}" but received "${g}" in response header "${n}".`);h.error(_)}else h.terminate()}});r.pipeThrough(l);let f=l.readable;return Object.setPrototypeOf(f,$Ke.ChecksumStream.prototype),f},"createChecksumStream");rI.createChecksumStream=kKe});var ere=w(nI=>{"use strict";Object.defineProperty(nI,"__esModule",{value:!0});nI.createChecksumStream=void 0;var GKe=Ad(),WKe=Nj(),zKe=Zte();function HKe(e){return typeof ReadableStream=="function"&&(0,GKe.isReadableStream)(e.source)?(0,zKe.createChecksumStream)(e):new WKe.ChecksumStream(e)}s(HKe,"createChecksumStream");nI.createChecksumStream=HKe});var qj=w(($Dt,pu)=>{var iI=Object.defineProperty,VKe=Object.getOwnPropertyDescriptor,YKe=Object.getOwnPropertyNames,KKe=Object.prototype.hasOwnProperty,Fj=s((e,t)=>iI(e,"name",{value:t,configurable:!0}),"__name"),XKe=s((e,t)=>{for(var r in t)iI(e,r,{get:t[r],enumerable:!0})},"__export"),Bj=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of YKe(t))!KKe.call(e,i)&&i!==r&&iI(e,i,{get:()=>t[i],enumerable:!(n=VKe(t,i))||n.enumerable});return e},"__copyProps"),Id=s((e,t,r)=>(Bj(e,t,"default"),r&&Bj(r,t,"default")),"__reExport"),JKe=s(e=>Bj(iI({},"__esModule",{value:!0}),e),"__toCommonJS"),hu={};XKe(hu,{Uint8ArrayBlobAdapter:()=>Mj});pu.exports=JKe(hu);var tre=fu(),rre=_s();function nre(e,t="utf-8"){return t==="base64"?(0,tre.toBase64)(e):(0,rre.toUtf8)(e)}s(nre,"transformToString");Fj(nre,"transformToString");function ire(e,t){return t==="base64"?Mj.mutate((0,tre.fromBase64)(e)):Mj.mutate((0,rre.fromUtf8)(e))}s(ire,"transformFromString");Fj(ire,"transformFromString");var tp,sre=(tp=class extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return ire(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,tp.prototype),t}transformToString(t="utf-8"){return nre(this,t)}},s(tp,"_Uint8ArrayBlobAdapter"),tp);Fj(sre,"Uint8ArrayBlobAdapter");var Mj=sre;Id(hu,ite(),pu.exports);Id(hu,Hte(),pu.exports);Id(hu,Kte(),pu.exports);Id(hu,Jte(),pu.exports);Id(hu,Ad(),pu.exports);Id(hu,ere(),pu.exports);Id(hu,Nj(),pu.exports)});var sI,QKe,ore=De(()=>{sI=_r(qj()),QKe=s(async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return sI.Uint8ArrayBlobAdapter.mutate(e);if(!e)return sI.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return sI.Uint8ArrayBlobAdapter.mutate(await r)},"collectBody")});function oI(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Lj=De(()=>{s(oI,"extendedEncodeURIComponent")});function Uj(e,t){return new aI(e,t)}var are,jj,aI,ure=De(()=>{uI();are=_r(Or());s(Uj,"requestBuilder");jj=class jj{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:i}=await this.context.endpoint();this.path=i;for(let o of this.resolvePathStack)o(this.path);return new are.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,i){return this.resolvePathStack.push(o=>{this.path=$j(o,this.input,t,r,n,i)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}};s(jj,"RequestBuilder");aI=jj});var $j,cre=De(()=>{Lj();$j=s((e,t,r,n,i,o)=>{if(t!=null&&t[r]!==void 0){let a=n();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(i,o?a.split("/").map(u=>oI(u)).join("/"):oI(a))}else throw new Error("No value provided for input HTTP label: "+r+".");return e},"resolvedPath")});var lre={};bf(lre,{RequestBuilder:()=>aI,collectBody:()=>QKe,extendedEncodeURIComponent:()=>oI,requestBuilder:()=>Uj,resolvedPath:()=>$j});var uI=De(()=>{ore();Lj();ure();cre()});var dre=De(()=>{uI()});function ZKe(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var fre=De(()=>{s(ZKe,"setFeature")});var Gj,kj,hre=De(()=>{Gj=class Gj{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}};s(Gj,"DefaultIdentityProviderConfig");kj=Gj});var pre,Wj,Hj,zj,mre=De(()=>{pre=_r(Or()),Wj=_r(ia()),Hj=class Hj{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let i=pre.HttpRequest.clone(t);if(n.in===Wj.HttpApiKeyAuthLocation.QUERY)i.query[n.name]=r.apiKey;else if(n.in===Wj.HttpApiKeyAuthLocation.HEADER)i.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return i}};s(Hj,"HttpApiKeyAuthSigner");zj=Hj});var gre,Yj,Vj,yre=De(()=>{gre=_r(Or()),Yj=class Yj{async sign(t,r,n){let i=gre.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return i.headers.Authorization=`Bearer ${r.token}`,i}};s(Yj,"HttpBearerAuthSigner");Vj=Yj});var Xj,Kj,vre=De(()=>{Xj=class Xj{async sign(t,r,n){return t}};s(Xj,"NoAuthSigner");Kj=Xj});var _re=De(()=>{mre();yre();vre()});var Sre,Ere,Jj,cI,Qj,Cre=De(()=>{Sre=s(e=>t=>cI(t)&&t.expiration.getTime()-Date.now()<e,"createIsIdentityExpiredFunction"),Ere=3e5,Jj=Sre(Ere),cI=s(e=>e.expiration!==void 0,"doesIdentityRequireRefresh"),Qj=s((e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,i,o,a,u=!1,l=s(async f=>{o||(o=n(f));try{i=await o,a=!0,u=!1}finally{o=void 0}return i},"coalesceProvider");return t===void 0?async f=>((!a||f!=null&&f.forceRefresh)&&(i=await l(f)),i):async f=>((!a||f!=null&&f.forceRefresh)&&(i=await l(f)),u?i:r(i)?(t(i)&&await l(f),i):(u=!0,i))},"memoizeIdentityProvider")});var wre=De(()=>{hre();_re();Cre()});var bo={};bf(bo,{DefaultIdentityProviderConfig:()=>kj,EXPIRATION_MS:()=>Ere,HttpApiKeyAuthSigner:()=>zj,HttpBearerAuthSigner:()=>Vj,NoAuthSigner:()=>Kj,createIsIdentityExpiredFunction:()=>Sre,createPaginator:()=>Gee,doesIdentityRequireRefresh:()=>cI,getHttpAuthSchemeEndpointRuleSetPlugin:()=>C4e,getHttpAuthSchemePlugin:()=>D4e,getHttpSigningPlugin:()=>x4e,getSmithyContext:()=>f4e,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>bee,httpAuthSchemeMiddleware:()=>K_,httpAuthSchemeMiddlewareOptions:()=>Bee,httpSigningMiddleware:()=>lj,httpSigningMiddlewareOptions:()=>Uee,isIdentityExpired:()=>Jj,memoizeIdentityProvider:()=>Qj,normalizeProvider:()=>Lc,requestBuilder:()=>Uj,setFeature:()=>ZKe});var Ss=De(()=>{vee();Fee();$ee();kee();Wee();dre();fre();wre()});var rp=w((PRt,Bre)=>{var lI=Object.defineProperty,e5e=Object.getOwnPropertyDescriptor,t5e=Object.getOwnPropertyNames,r5e=Object.prototype.hasOwnProperty,rr=s((e,t)=>lI(e,"name",{value:t,configurable:!0}),"__name"),n5e=s((e,t)=>{for(var r in t)lI(e,r,{get:t[r],enumerable:!0})},"__export"),i5e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of t5e(t))!r5e.call(e,i)&&i!==r&&lI(e,i,{get:()=>t[i],enumerable:!(n=e5e(t,i))||n.enumerable});return e},"__copyProps"),s5e=s(e=>i5e(lI({},"__esModule",{value:!0}),e),"__toCommonJS"),bre={};n5e(bre,{EndpointCache:()=>o5e,EndpointError:()=>es,customEndpointFunctions:()=>e2,isIpAddress:()=>Tre,isValidHostLabel:()=>r2,resolveEndpoint:()=>O5e});Bre.exports=s5e(bre);var rS,Ore=(rS=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let i=this.data.keys(),o=0;for(;;){let{value:a,done:u}=i.next();if(this.data.delete(a),u||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let i of n){let o=String(t[i]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}},s(rS,"_EndpointCache"),rS);rr(Ore,"EndpointCache");var o5e=Ore,a5e=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Tre=rr(e=>a5e.test(e)||e.startsWith("[")&&e.endsWith("]"),"isIpAddress"),u5e=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),r2=rr((e,t=!1)=>{if(!t)return u5e.test(e);let r=e.split(".");for(let n of r)if(!r2(n))return!1;return!0},"isValidHostLabel"),e2={},tS="endpoints";function mu(e){return typeof e!="object"||e==null?e:"ref"in e?`$${mu(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(mu).join(", ")})`:JSON.stringify(e,null,2)}s(mu,"toDebugString");rr(mu,"toDebugString");var nS,Are=(nS=class extends Error{constructor(t){super(t),this.name="EndpointError"}},s(nS,"_EndpointError"),nS);rr(Are,"EndpointError");var es=Are,c5e=rr((e,t)=>e===t,"booleanEquals"),l5e=rr(e=>{let t=e.split("."),r=[];for(let n of t){let i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new es(`Path: '${e}' does not end with ']'`);let o=n.slice(i+1,-1);if(Number.isNaN(parseInt(o)))throw new es(`Invalid array index: '${o}' in path: '${e}'`);i!==0&&r.push(n.slice(0,i)),r.push(o)}else r.push(n)}return r},"getAttrPathList"),Ire=rr((e,t)=>l5e(t).reduce((r,n)=>{if(typeof r!="object")throw new es(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),"getAttr"),d5e=rr(e=>e!=null,"isSet"),f5e=rr(e=>!e,"not"),t2=ia(),Zj={[t2.EndpointURLScheme.HTTP]:80,[t2.EndpointURLScheme.HTTPS]:443},h5e=rr(e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:g,port:_,protocol:C="",path:D="",query:O={}}=e,N=new URL(`${C}//${g}${_?`:${_}`:""}${D}`);return N.search=Object.entries(O).map(([F,x])=>`${F}=${x}`).join("&"),N}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:i,pathname:o,protocol:a,search:u}=t;if(u)return null;let l=a.slice(0,-1);if(!Object.values(t2.EndpointURLScheme).includes(l))return null;let f=Tre(i),h=r.includes(`${n}:${Zj[l]}`)||typeof e=="string"&&e.includes(`${n}:${Zj[l]}`),p=`${n}${h?`:${Zj[l]}`:""}`;return{scheme:l,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:f}},"parseURL"),p5e=rr((e,t)=>e===t,"stringEquals"),m5e=rr((e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),"substring"),g5e=rr(e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),y5e={booleanEquals:c5e,getAttr:Ire,isSet:d5e,isValidHostLabel:r2,not:f5e,parseURL:h5e,stringEquals:p5e,substring:m5e,uriEncode:g5e},Dre=rr((e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},i=0;for(;i<e.length;){let o=e.indexOf("{",i);if(o===-1){r.push(e.slice(i));break}r.push(e.slice(i,o));let a=e.indexOf("}",o);if(a===-1){r.push(e.slice(o));break}e[o+1]==="{"&&e[a+1]==="}"&&(r.push(e.slice(o+1,a)),i=a+2);let u=e.substring(o+1,a);if(u.includes("#")){let[l,f]=u.split("#");r.push(Ire(n[l],f))}else r.push(n[u]);i=a+1}return r.join("")},"evaluateTemplate"),v5e=rr(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],"getReferenceValue"),dI=rr((e,t,r)=>{if(typeof e=="string")return Dre(e,r);if(e.fn)return Rre(e,r);if(e.ref)return v5e(e,r);throw new es(`'${t}': ${String(e)} is not a string, function or reference.`)},"evaluateExpression"),Rre=rr(({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:dI(o,"arg",r)),i=e.split(".");return i[0]in e2&&i[1]!=null?e2[i[0]][i[1]](...n):y5e[e](...n)},"callFunction"),_5e=rr(({assign:e,...t},r)=>{var n,i;if(e&&e in r.referenceRecord)throw new es(`'${e}' is already defined in Reference Record.`);let o=Rre(t,r);return(i=(n=r.logger)==null?void 0:n.debug)==null||i.call(n,`${tS} evaluateCondition: ${mu(t)} = ${mu(o)}`),{result:o===""?!0:!!o,...e!=null&&{toAssign:{name:e,value:o}}}},"evaluateCondition"),n2=rr((e=[],t)=>{var r,n;let i={};for(let o of e){let{result:a,toAssign:u}=_5e(o,{...t,referenceRecord:{...t.referenceRecord,...i}});if(!a)return{result:a};u&&(i[u.name]=u.value,(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,`${tS} assign: ${u.name} := ${mu(u.value)}`))}return{result:!0,referenceRecord:i}},"evaluateConditions"),S5e=rr((e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:i.map(o=>{let a=dI(o,"Header value entry",t);if(typeof a!="string")throw new es(`Header '${n}' value '${a}' is not a string`);return a})}),{}),"getEndpointHeaders"),Nre=rr((e,t)=>{if(Array.isArray(e))return e.map(r=>Nre(r,t));switch(typeof e){case"string":return Dre(e,t);case"object":if(e===null)throw new es(`Unexpected endpoint property: ${e}`);return xre(e,t);case"boolean":return e;default:throw new es(`Unexpected endpoint property type: ${typeof e}`)}},"getEndpointProperty"),xre=rr((e,t)=>Object.entries(e).reduce((r,[n,i])=>({...r,[n]:Nre(i,t)}),{}),"getEndpointProperties"),E5e=rr((e,t)=>{let r=dI(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new es(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),C5e=rr((e,t)=>{var r,n;let{conditions:i,endpoint:o}=e,{result:a,referenceRecord:u}=n2(i,t);if(!a)return;let l={...t,referenceRecord:{...t.referenceRecord,...u}},{url:f,properties:h,headers:p}=o;return(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,`${tS} Resolving endpoint from template: ${mu(o)}`),{...p!=null&&{headers:S5e(p,l)},...h!=null&&{properties:xre(h,l)},url:E5e(f,l)}},"evaluateEndpointRule"),w5e=rr((e,t)=>{let{conditions:r,error:n}=e,{result:i,referenceRecord:o}=n2(r,t);if(i)throw new es(dI(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},"evaluateErrorRule"),b5e=rr((e,t)=>{let{conditions:r,rules:n}=e,{result:i,referenceRecord:o}=n2(r,t);if(i)return Pre(n,{...t,referenceRecord:{...t.referenceRecord,...o}})},"evaluateTreeRule"),Pre=rr((e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=C5e(r,t);if(n)return n}else if(r.type==="error")w5e(r,t);else if(r.type==="tree"){let n=b5e(r,t);if(n)return n}else throw new es(`Unknown endpoint rule: ${r}`);throw new es("Rules evaluation failed")},"evaluateRules"),O5e=rr((e,t)=>{var r,n,i,o;let{endpointParams:a,logger:u}=t,{parameters:l,rules:f}=e;(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,`${tS} Initial EndpointParams: ${mu(a)}`);let h=Object.entries(l).filter(([,_])=>_.default!=null).map(([_,C])=>[_,C.default]);if(h.length>0)for(let[_,C]of h)a[_]=a[_]??C;let p=Object.entries(l).filter(([,_])=>_.required).map(([_])=>_);for(let _ of p)if(a[_]==null)throw new es(`Missing required parameter: '${_}'`);let g=Pre(f,{endpointParams:a,logger:u,referenceRecord:{}});return(o=(i=t.logger)==null?void 0:i.debug)==null||o.call(i,`${tS} Resolved endpoint: ${mu(g)}`),g},"resolveEndpoint")});var ip=w((MRt,Wre)=>{"use strict";var fI=Object.defineProperty,T5e=Object.getOwnPropertyDescriptor,A5e=Object.getOwnPropertyNames,I5e=Object.prototype.hasOwnProperty,np=s((e,t)=>fI(e,"name",{value:t,configurable:!0}),"__name"),D5e=s((e,t)=>{for(var r in t)fI(e,r,{get:t[r],enumerable:!0})},"__export"),R5e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of A5e(t))!I5e.call(e,i)&&i!==r&&fI(e,i,{get:()=>t[i],enumerable:!(n=T5e(t,i))||n.enumerable});return e},"__copyProps"),N5e=s(e=>R5e(fI({},"__esModule",{value:!0}),e),"__toCommonJS"),Fre={};D5e(Fre,{ConditionObject:()=>yr.ConditionObject,DeprecatedObject:()=>yr.DeprecatedObject,EndpointError:()=>yr.EndpointError,EndpointObject:()=>yr.EndpointObject,EndpointObjectHeaders:()=>yr.EndpointObjectHeaders,EndpointObjectProperties:()=>yr.EndpointObjectProperties,EndpointParams:()=>yr.EndpointParams,EndpointResolverOptions:()=>yr.EndpointResolverOptions,EndpointRuleObject:()=>yr.EndpointRuleObject,ErrorRuleObject:()=>yr.ErrorRuleObject,EvaluateOptions:()=>yr.EvaluateOptions,Expression:()=>yr.Expression,FunctionArgv:()=>yr.FunctionArgv,FunctionObject:()=>yr.FunctionObject,FunctionReturn:()=>yr.FunctionReturn,ParameterObject:()=>yr.ParameterObject,ReferenceObject:()=>yr.ReferenceObject,ReferenceRecord:()=>yr.ReferenceRecord,RuleSetObject:()=>yr.RuleSetObject,RuleSetRules:()=>yr.RuleSetRules,TreeRuleObject:()=>yr.TreeRuleObject,awsEndpointFunctions:()=>Gre,getUserAgentPrefix:()=>M5e,isIpAddress:()=>yr.isIpAddress,partition:()=>$re,resolveEndpoint:()=>yr.resolveEndpoint,setPartitionInfo:()=>kre,useDefaultPartitionInfo:()=>B5e});Wre.exports=N5e(Fre);var yr=rp(),qre=np((e,t=!1)=>{if(t){for(let r of e.split("."))if(!qre(r))return!1;return!0}return!(!(0,yr.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,yr.isIpAddress)(e))},"isVirtualHostableS3Bucket"),Mre=":",x5e="/",P5e=np(e=>{let t=e.split(Mre);if(t.length<6)return null;let[r,n,i,o,a,...u]=t;if(r!=="arn"||n===""||i===""||u.join(Mre)==="")return null;let l=u.map(f=>f.split(x5e)).flat();return{partition:n,service:i,region:o,accountId:a,resourceId:l}},"parseArn"),Lre={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"},Ure=Lre,jre="",$re=np(e=>{let{partitions:t}=Ure;for(let n of t){let{regions:i,outputs:o}=n;for(let[a,u]of Object.entries(i))if(a===e)return{...o,...u}}for(let n of t){let{regionRegex:i,outputs:o}=n;if(new RegExp(i).test(e))return{...o}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),kre=np((e,t="")=>{Ure=e,jre=t},"setPartitionInfo"),B5e=np(()=>{kre(Lre,"")},"useDefaultPartitionInfo"),M5e=np(()=>jre,"getUserAgentPrefix"),Gre={isVirtualHostableS3Bucket:qre,parseArn:P5e,partition:$re};yr.customEndpointFunctions.aws=Gre});var hI,zre,Hre=De(()=>{hI={warningEmitted:!1},zre=s(e=>{e&&!hI.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(hI.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))},"emitWarningIfUnsupportedVersion")});function pI(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var Vre=De(()=>{s(pI,"setCredentialFeature")});function Yre(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var Kre=De(()=>{s(Yre,"setFeature")});var Uc={};bf(Uc,{emitWarningIfUnsupportedVersion:()=>zre,setCredentialFeature:()=>pI,setFeature:()=>Yre,state:()=>hI});var sa=De(()=>{Hre();Vre();Kre()});var Xre,i2,Jre=De(()=>{Xre=_r(Or()),i2=s(e=>{var t,r;return Xre.HttpResponse.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},"getDateHeader")});var sp,s2=De(()=>{sp=s(e=>new Date(Date.now()+e),"getSkewCorrectedDate")});var Qre,Zre=De(()=>{s2();Qre=s((e,t)=>Math.abs(sp(t).getTime()-e)>=3e5,"isClockSkewed")});var o2,ene=De(()=>{Zre();o2=s((e,t)=>{let r=Date.parse(e);return Qre(r,t)?r-Date.now():t},"getUpdatedSystemClockOffset")});var a2=De(()=>{Jre();s2();ene()});var tne,iS,sS,u2,Dd,rne,c2=De(()=>{tne=_r(Or());a2();iS=s((e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},"throwSigningPropertyError"),sS=s(async e=>{var f,h,p;let t=iS("context",e.context),r=iS("config",e.config),n=(p=(h=(f=t.endpointV2)==null?void 0:f.properties)==null?void 0:h.authSchemes)==null?void 0:p[0],o=await iS("signer",r.signer)(n),a=e==null?void 0:e.signingRegion,u=e==null?void 0:e.signingRegionSet,l=e==null?void 0:e.signingName;return{config:r,signer:o,signingRegion:a,signingRegionSet:u,signingName:l}},"validateSigningProperties"),u2=class u2{async sign(t,r,n){var p;if(!tne.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let i=await sS(n),{config:o,signer:a}=i,{signingRegion:u,signingName:l}=i,f=n.context;if(((p=f==null?void 0:f.authSchemes)==null?void 0:p.length)??!1){let[g,_]=f.authSchemes;(g==null?void 0:g.name)==="sigv4a"&&(_==null?void 0:_.name)==="sigv4"&&(u=(_==null?void 0:_.signingRegion)??u,l=(_==null?void 0:_.signingName)??l)}return await a.sign(t,{signingDate:sp(o.systemClockOffset),signingRegion:u,signingService:l})}errorHandler(t){return r=>{let n=r.ServerTime??i2(r.$response);if(n){let i=iS("config",t.config),o=i.systemClockOffset;i.systemClockOffset=o2(n,i.systemClockOffset),i.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=i2(t);if(n){let i=iS("config",r.config);i.systemClockOffset=o2(n,i.systemClockOffset)}}};s(u2,"AwsSdkSigV4Signer");Dd=u2,rne=Dd});var nne,l2,mI,ine=De(()=>{nne=_r(Or());a2();c2();l2=class l2 extends Dd{async sign(t,r,n){var g;if(!nne.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:i,signer:o,signingRegion:a,signingRegionSet:u,signingName:l}=await sS(n),h=(await((g=i.sigv4aSigningRegionSet)==null?void 0:g.call(i))??u??[a]).join(",");return await o.sign(t,{signingDate:sp(i.systemClockOffset),signingRegion:h,signingService:l})}};s(l2,"AwsSdkSigV4ASigner");mI=l2});var xi=w((hNt,cne)=>{var gI=Object.defineProperty,F5e=Object.getOwnPropertyDescriptor,q5e=Object.getOwnPropertyNames,L5e=Object.prototype.hasOwnProperty,Rd=s((e,t)=>gI(e,"name",{value:t,configurable:!0}),"__name"),U5e=s((e,t)=>{for(var r in t)gI(e,r,{get:t[r],enumerable:!0})},"__export"),j5e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of q5e(t))!L5e.call(e,i)&&i!==r&&gI(e,i,{get:()=>t[i],enumerable:!(n=F5e(t,i))||n.enumerable});return e},"__copyProps"),$5e=s(e=>j5e(gI({},"__esModule",{value:!0}),e),"__toCommonJS"),sne={};U5e(sne,{CredentialsProviderError:()=>k5e,ProviderError:()=>yI,TokenProviderError:()=>G5e,chain:()=>W5e,fromStatic:()=>z5e,memoize:()=>H5e});cne.exports=$5e(sne);var op,one=(op=class extends Error{constructor(t,r=!0){var n;let i,o=!0;typeof r=="boolean"?(i=void 0,o=r):r!=null&&typeof r=="object"&&(i=r.logger,o=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,op.prototype),(n=i==null?void 0:i.debug)==null||n.call(i,`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},s(op,"_ProviderError"),op);Rd(one,"ProviderError");var yI=one,ap,ane=(ap=class extends yI{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,ap.prototype)}},s(ap,"_CredentialsProviderError"),ap);Rd(ane,"CredentialsProviderError");var k5e=ane,up,une=(up=class extends yI{constructor(t,r=!0){super(t,r),this.name="TokenProviderError",Object.setPrototypeOf(this,up.prototype)}},s(up,"_TokenProviderError"),up);Rd(une,"TokenProviderError");var G5e=une,W5e=Rd((...e)=>async()=>{if(e.length===0)throw new yI("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n!=null&&n.tryNextLink)continue;throw n}throw t},"chain"),z5e=Rd(e=>()=>Promise.resolve(e),"fromStatic"),H5e=Rd((e,t,r)=>{let n,i,o,a=!1,u=Rd(async()=>{i||(i=e());try{n=await i,o=!0,a=!1}finally{i=void 0}return n},"coalesceProvider");return t===void 0?async l=>((!o||l!=null&&l.forceRefresh)&&(n=await u()),n):async l=>((!o||l!=null&&l.forceRefresh)&&(n=await u()),a?n:r&&!r(n)?(a=!0,n):(t(n)&&await u(),n))},"memoize")});var d2,V5e,Y5e,lne=De(()=>{Ss();d2=_r(xi()),V5e=s(e=>(e.sigv4aSigningRegionSet=Lc(e.sigv4aSigningRegionSet),e),"resolveAwsSdkSigV4AConfig"),Y5e={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new d2.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new d2.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var v2=w((vNt,Dne)=>{var wI=Object.defineProperty,K5e=Object.getOwnPropertyDescriptor,X5e=Object.getOwnPropertyNames,J5e=Object.prototype.hasOwnProperty,Cn=s((e,t)=>wI(e,"name",{value:t,configurable:!0}),"__name"),Q5e=s((e,t)=>{for(var r in t)wI(e,r,{get:t[r],enumerable:!0})},"__export"),Z5e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of X5e(t))!J5e.call(e,i)&&i!==r&&wI(e,i,{get:()=>t[i],enumerable:!(n=K5e(t,i))||n.enumerable});return e},"__copyProps"),e9e=s(e=>Z5e(wI({},"__esModule",{value:!0}),e),"__toCommonJS"),mne={};Q5e(mne,{SignatureV4:()=>T9e,clearCredentialCache:()=>y9e,createScope:()=>SI,getCanonicalHeaders:()=>m2,getCanonicalQuery:()=>wne,getPayloadHash:()=>CI,getSigningKey:()=>Cne,moveHeadersToQuery:()=>Ane,prepareRequest:()=>y2});Dne.exports=e9e(mne);var dne=wo(),f2=_s(),t9e="X-Amz-Algorithm",r9e="X-Amz-Credential",gne="X-Amz-Date",n9e="X-Amz-SignedHeaders",i9e="X-Amz-Expires",yne="X-Amz-Signature",vne="X-Amz-Security-Token",_ne="authorization",Sne=gne.toLowerCase(),s9e="date",o9e=[_ne,Sne,s9e],a9e=yne.toLowerCase(),p2="x-amz-content-sha256",u9e=vne.toLowerCase(),c9e={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},l9e=/^proxy-/,d9e=/^sec-/,h2="AWS4-HMAC-SHA256",f9e="AWS4-HMAC-SHA256-PAYLOAD",h9e="UNSIGNED-PAYLOAD",p9e=50,Ene="aws4_request",m9e=60*60*24*7,jc=Oj(),g9e=_s(),cp={},_I=[],SI=Cn((e,t,r)=>`${e}/${t}/${r}/${Ene}`,"createScope"),Cne=Cn(async(e,t,r,n,i)=>{let o=await fne(e,t.secretAccessKey,t.accessKeyId),a=`${r}:${n}:${i}:${(0,jc.toHex)(o)}:${t.sessionToken}`;if(a in cp)return cp[a];for(_I.push(a);_I.length>p9e;)delete cp[_I.shift()];let u=`AWS4${t.secretAccessKey}`;for(let l of[r,n,i,Ene])u=await fne(e,u,l);return cp[a]=u},"getSigningKey"),y9e=Cn(()=>{_I.length=0,Object.keys(cp).forEach(e=>{delete cp[e]})},"clearCredentialCache"),fne=Cn((e,t,r)=>{let n=new e(t);return n.update((0,g9e.toUint8Array)(r)),n.digest()},"hmac"),m2=Cn(({headers:e},t,r)=>{let n={};for(let i of Object.keys(e).sort()){if(e[i]==null)continue;let o=i.toLowerCase();(o in c9e||t!=null&&t.has(o)||l9e.test(o)||d9e.test(o))&&(!r||r&&!r.has(o))||(n[o]=e[i].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),EI=vj(),wne=Cn(({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===a9e)continue;let i=(0,EI.escapeUri)(n);t.push(i);let o=e[n];typeof o=="string"?r[i]=`${i}=${(0,EI.escapeUri)(o)}`:Array.isArray(o)&&(r[i]=o.slice(0).reduce((a,u)=>a.concat([`${i}=${(0,EI.escapeUri)(u)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),v9e=fj(),_9e=_s(),CI=Cn(async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===p2)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,v9e.isArrayBuffer)(t)){let n=new r;return n.update((0,_9e.toUint8Array)(t)),(0,jc.toHex)(await n.digest())}return h9e},"getPayloadHash"),hne=_s(),oS,bne=(oS=class{format(t){let r=[];for(let o of Object.keys(t)){let a=(0,hne.fromUtf8)(o);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(t[o]))}let n=new Uint8Array(r.reduce((o,a)=>o+a.byteLength,0)),i=0;for(let o of r)n.set(o,i),i+=o.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(t.value.bytes,1),i;case"binary":let o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);let a=new Uint8Array(o.buffer);return a.set(t.value,3),a;case"string":let u=(0,hne.fromUtf8)(t.value),l=new DataView(new ArrayBuffer(3+u.byteLength));l.setUint8(0,7),l.setUint16(1,u.byteLength,!1);let f=new Uint8Array(l.buffer);return f.set(u,3),f;case"timestamp":let h=new Uint8Array(9);return h[0]=8,h.set(C9e.fromNumber(t.value.valueOf()).bytes,1),h;case"uuid":if(!E9e.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let p=new Uint8Array(17);return p[0]=9,p.set((0,jc.fromHex)(t.value.replace(/\-/g,"")),1),p}}},s(oS,"_HeaderFormatter"),oS);Cn(bne,"HeaderFormatter");var S9e=bne,E9e=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,lp,One=(lp=class{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(t));n>-1&&i>0;n--,i/=256)r[n]=i;return t<0&&g2(r),new lp(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&g2(t),parseInt((0,jc.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}},s(lp,"_Int64"),lp);Cn(One,"Int64");var C9e=One;function g2(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}s(g2,"negate");Cn(g2,"negate");var w9e=Cn((e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},"hasHeader"),Tne=Or(),Ane=Cn((e,t={})=>{var r,n;let{headers:i,query:o={}}=Tne.HttpRequest.clone(e);for(let a of Object.keys(i)){let u=a.toLowerCase();(u.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(u))||(n=t.hoistableHeaders)!=null&&n.has(u))&&(o[a]=i[a],delete i[a])}return{...e,headers:i,query:o}},"moveHeadersToQuery"),y2=Cn(e=>{e=Tne.HttpRequest.clone(e);for(let t of Object.keys(e.headers))o9e.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},"prepareRequest"),b9e=Cn(e=>O9e(e).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),O9e=Cn(e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,"toDate"),aS,Ine=(aS=class{constructor({applyChecksum:t,credentials:r,region:n,service:i,sha256:o,uriEscapePath:a=!0}){this.headerFormatter=new S9e,this.service=i,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=(0,dne.normalizeProvider)(n),this.credentialProvider=(0,dne.normalizeProvider)(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:u,hoistableHeaders:l,signingRegion:f,signingService:h}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let g=f??await this.regionProvider(),{longDate:_,shortDate:C}=vI(n);if(i>m9e)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let D=SI(C,g,h??this.service),O=Ane(y2(t),{unhoistableHeaders:a,hoistableHeaders:l});p.sessionToken&&(O.query[vne]=p.sessionToken),O.query[t9e]=h2,O.query[r9e]=`${p.accessKeyId}/${D}`,O.query[gne]=_,O.query[i9e]=i.toString(10);let N=m2(O,o,u);return O.query[n9e]=pne(N),O.query[yne]=await this.getSignature(_,D,this.getSigningKey(p,g,C,h),this.createCanonicalRequest(O,N,await CI(t,this.sha256))),O}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:a}){let u=o??await this.regionProvider(),{shortDate:l,longDate:f}=vI(n),h=SI(l,u,a??this.service),p=await CI({headers:{},body:r},this.sha256),g=new this.sha256;g.update(t);let _=(0,jc.toHex)(await g.digest()),C=[f9e,f,h,i,_,p].join(`
`);return this.signString(C,{signingDate:n,signingRegion:u,signingService:a})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:t.priorSignature}).then(a=>({message:t.message,signature:a}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=n??await this.regionProvider(),{shortDate:u}=vI(r),l=new this.sha256(await this.getSigningKey(o,a,u,i));return l.update((0,f2.toUint8Array)(t)),(0,jc.toHex)(await l.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:o,signingService:a}={}){let u=await this.credentialProvider();this.validateResolvedCredentials(u);let l=o??await this.regionProvider(),f=y2(t),{longDate:h,shortDate:p}=vI(r),g=SI(p,l,a??this.service);f.headers[Sne]=h,u.sessionToken&&(f.headers[u9e]=u.sessionToken);let _=await CI(f,this.sha256);!w9e(p2,f.headers)&&this.applyChecksum&&(f.headers[p2]=_);let C=m2(f,i,n),D=await this.getSignature(h,g,this.getSigningKey(u,l,p,a),this.createCanonicalRequest(f,C,_));return f.headers[_ne]=`${h2} Credential=${u.accessKeyId}/${g}, SignedHeaders=${pne(C)}, Signature=${D}`,f}createCanonicalRequest(t,r,n){let i=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${wne(t)}
${i.map(o=>`${o}:${r[o]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(t,r,n){let i=new this.sha256;i.update((0,f2.toUint8Array)(n));let o=await i.digest();return`${h2}
${t}
${r}
${(0,jc.toHex)(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return(0,EI.escapeUri)(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,i){let o=await this.createStringToSign(t,r,i),a=new this.sha256(await n);return a.update((0,f2.toUint8Array)(o)),(0,jc.toHex)(await a.digest())}getSigningKey(t,r,n,i){return Cne(this.sha256,t,n,r,i||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},s(aS,"_SignatureV4"),aS);Cn(Ine,"SignatureV4");var T9e=Ine,vI=Cn(e=>{let t=b9e(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},"formatDate"),pne=Cn(e=>Object.keys(e).sort().join(";"),"getCanonicalHeaderList")});var _2,Rne,A9e,Nne=De(()=>{sa();Ss();_2=_r(v2()),Rne=s(e=>{let t=!1,r;e.credentials&&(t=!0,r=Qj(e.credentials,Jj,cI)),r||(e.credentialDefaultProvider?r=Lc(e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e}))):r=s(async()=>{throw new Error("`credentials` is missing")},"normalizedCreds"));let{signingEscapePath:n=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:o}=e,a;return e.signer?a=Lc(e.signer):e.regionInfoProvider?a=s(()=>Lc(e.region)().then(async u=>[await e.regionInfoProvider(u,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:f,signingService:h}=u;e.signingRegion=e.signingRegion||f||l,e.signingName=e.signingName||h||e.serviceId;let p={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:n},g=e.signerConstructor||_2.SignatureV4;return new g(p)}),"signer"):a=s(async u=>{u=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Lc(e.region)(),properties:{}},u);let l=u.signingRegion,f=u.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||f||e.serviceId;let h={...e,credentials:r,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:n},p=e.signerConstructor||_2.SignatureV4;return new p(h)},"signer"),{...e,systemClockOffset:i,signingEscapePath:n,credentials:t?async()=>r().then(u=>pI(u,"CREDENTIALS_CODE","e")):r,signer:a}},"resolveAwsSdkSigV4Config"),A9e=Rne});var xne=De(()=>{c2();ine();lne();Nne()});var Pne=De(()=>{xne()});var I9e,D9e,R9e,Bne=De(()=>{I9e=s(e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},"_toStr"),D9e=s(e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},"_toBool"),R9e=s(e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e},"_toNum")});var Une=w((PNt,Lne)=>{var bI=Object.defineProperty,N9e=Object.getOwnPropertyDescriptor,x9e=Object.getOwnPropertyNames,P9e=Object.prototype.hasOwnProperty,ks=s((e,t)=>bI(e,"name",{value:t,configurable:!0}),"__name"),B9e=s((e,t)=>{for(var r in t)bI(e,r,{get:t[r],enumerable:!0})},"__export"),M9e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of x9e(t))!P9e.call(e,i)&&i!==r&&bI(e,i,{get:()=>t[i],enumerable:!(n=N9e(t,i))||n.enumerable});return e},"__copyProps"),F9e=s(e=>M9e(bI({},"__esModule",{value:!0}),e),"__toCommonJS"),qne={};B9e(qne,{constructStack:()=>S2});Lne.exports=F9e(qne);var Nd=ks((e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},"getAllAliases"),$c=ks((e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,"getMiddlewareNameWithAliases"),S2=ks(()=>{let e=[],t=[],r=!1,n=new Set,i=ks(p=>p.sort((g,_)=>Mne[_.step]-Mne[g.step]||Fne[_.priority||"normal"]-Fne[g.priority||"normal"]),"sort"),o=ks(p=>{let g=!1,_=ks(C=>{let D=Nd(C.name,C.aliases);if(D.includes(p)){g=!0;for(let O of D)n.delete(O);return!1}return!0},"filterCb");return e=e.filter(_),t=t.filter(_),g},"removeByName"),a=ks(p=>{let g=!1,_=ks(C=>{if(C.middleware===p){g=!0;for(let D of Nd(C.name,C.aliases))n.delete(D);return!1}return!0},"filterCb");return e=e.filter(_),t=t.filter(_),g},"removeByReference"),u=ks(p=>{var g;return e.forEach(_=>{p.add(_.middleware,{..._})}),t.forEach(_=>{p.addRelativeTo(_.middleware,{..._})}),(g=p.identifyOnResolve)==null||g.call(p,h.identifyOnResolve()),p},"cloneTo"),l=ks(p=>{let g=[];return p.before.forEach(_=>{_.before.length===0&&_.after.length===0?g.push(_):g.push(...l(_))}),g.push(p),p.after.reverse().forEach(_=>{_.before.length===0&&_.after.length===0?g.push(_):g.push(...l(_))}),g},"expandRelativeMiddlewareList"),f=ks((p=!1)=>{let g=[],_=[],C={};return e.forEach(O=>{let N={...O,before:[],after:[]};for(let F of Nd(N.name,N.aliases))C[F]=N;g.push(N)}),t.forEach(O=>{let N={...O,before:[],after:[]};for(let F of Nd(N.name,N.aliases))C[F]=N;_.push(N)}),_.forEach(O=>{if(O.toMiddleware){let N=C[O.toMiddleware];if(N===void 0){if(p)return;throw new Error(`${O.toMiddleware} is not found when adding ${$c(O.name,O.aliases)} middleware ${O.relation} ${O.toMiddleware}`)}O.relation==="after"&&N.after.push(O),O.relation==="before"&&N.before.push(O)}}),i(g).map(l).reduce((O,N)=>(O.push(...N),O),[])},"getMiddlewareList"),h={add:(p,g={})=>{let{name:_,override:C,aliases:D}=g,O={step:"initialize",priority:"normal",middleware:p,...g},N=Nd(_,D);if(N.length>0){if(N.some(F=>n.has(F))){if(!C)throw new Error(`Duplicate middleware name '${$c(_,D)}'`);for(let F of N){let x=e.findIndex(X=>{var G;return X.name===F||((G=X.aliases)==null?void 0:G.some(ue=>ue===F))});if(x===-1)continue;let P=e[x];if(P.step!==O.step||O.priority!==P.priority)throw new Error(`"${$c(P.name,P.aliases)}" middleware with ${P.priority} priority in ${P.step} step cannot be overridden by "${$c(_,D)}" middleware with ${O.priority} priority in ${O.step} step.`);e.splice(x,1)}}for(let F of N)n.add(F)}e.push(O)},addRelativeTo:(p,g)=>{let{name:_,override:C,aliases:D}=g,O={middleware:p,...g},N=Nd(_,D);if(N.length>0){if(N.some(F=>n.has(F))){if(!C)throw new Error(`Duplicate middleware name '${$c(_,D)}'`);for(let F of N){let x=t.findIndex(X=>{var G;return X.name===F||((G=X.aliases)==null?void 0:G.some(ue=>ue===F))});if(x===-1)continue;let P=t[x];if(P.toMiddleware!==O.toMiddleware||P.relation!==O.relation)throw new Error(`"${$c(P.name,P.aliases)}" middleware ${P.relation} "${P.toMiddleware}" middleware cannot be overridden by "${$c(_,D)}" middleware ${O.relation} "${O.toMiddleware}" middleware.`);t.splice(x,1)}}for(let F of N)n.add(F)}t.push(O)},clone:()=>u(S2()),use:p=>{p.applyToStack(h)},remove:p=>typeof p=="string"?o(p):a(p),removeByTag:p=>{let g=!1,_=ks(C=>{let{tags:D,name:O,aliases:N}=C;if(D&&D.includes(p)){let F=Nd(O,N);for(let x of F)n.delete(x);return g=!0,!1}return!0},"filterCb");return e=e.filter(_),t=t.filter(_),g},concat:p=>{var g;let _=u(S2());return _.use(p),_.identifyOnResolve(r||_.identifyOnResolve()||(((g=p.identifyOnResolve)==null?void 0:g.call(p))??!1)),_},applyToStack:u,identify:()=>f(!0).map(p=>{let g=p.step??p.relation+" "+p.toMiddleware;return $c(p.name,p.aliases)+" - "+g}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,g)=>{for(let _ of f().map(C=>C.middleware).reverse())p=_(p,g);return r&&console.log(h.identify()),p}};return h},"constructStack"),Mne={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fne={high:3,normal:2,low:1}});var Tr=w((MNt,cie)=>{var AI=Object.defineProperty,q9e=Object.getOwnPropertyDescriptor,L9e=Object.getOwnPropertyNames,U9e=Object.prototype.hasOwnProperty,me=s((e,t)=>AI(e,"name",{value:t,configurable:!0}),"__name"),j9e=s((e,t)=>{for(var r in t)AI(e,r,{get:t[r],enumerable:!0})},"__export"),$9e=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of L9e(t))!U9e.call(e,i)&&i!==r&&AI(e,i,{get:()=>t[i],enumerable:!(n=q9e(t,i))||n.enumerable});return e},"__copyProps"),k9e=s(e=>$9e(AI({},"__esModule",{value:!0}),e),"__toCommonJS"),$ne={};j9e($ne,{Client:()=>G9e,Command:()=>zne,LazyJsonString:()=>UXe,NoOpLogger:()=>jXe,SENSITIVE_STRING:()=>z9e,ServiceException:()=>TXe,StringWrapper:()=>fS,_json:()=>A2,collectBody:()=>E2.collectBody,convertMap:()=>$Xe,createAggregatedClient:()=>H9e,dateToUtcString:()=>Qne,decorateServiceException:()=>eie,emitWarningIfUnsupportedVersion:()=>RXe,expectBoolean:()=>Y9e,expectByte:()=>T2,expectFloat32:()=>OI,expectInt:()=>X9e,expectInt32:()=>b2,expectLong:()=>lS,expectNonNull:()=>Q9e,expectNumber:()=>cS,expectObject:()=>Vne,expectShort:()=>O2,expectString:()=>Z9e,expectUnion:()=>eXe,extendedEncodeURIComponent:()=>E2.extendedEncodeURIComponent,getArrayIfSingleItem:()=>qXe,getDefaultClientConfiguration:()=>MXe,getDefaultExtensionConfiguration:()=>rie,getValueFromTextNode:()=>nie,handleFloat:()=>nXe,isSerializableHeaderValue:()=>LXe,limitedParseDouble:()=>R2,limitedParseFloat:()=>iXe,limitedParseFloat32:()=>sXe,loadConfigsForDefaultMode:()=>DXe,logger:()=>dS,map:()=>x2,parseBoolean:()=>V9e,parseEpochTimestamp:()=>yXe,parseRfc3339DateTime:()=>lXe,parseRfc3339DateTimeWithOffset:()=>fXe,parseRfc7231DateTime:()=>gXe,quoteHeader:()=>aie,resolveDefaultRuntimeConfig:()=>FXe,resolvedPath:()=>E2.resolvedPath,serializeDateTime:()=>VXe,serializeFloat:()=>HXe,splitEvery:()=>uie,splitHeader:()=>YXe,strictParseByte:()=>Jne,strictParseDouble:()=>D2,strictParseFloat:()=>tXe,strictParseFloat32:()=>Yne,strictParseInt:()=>oXe,strictParseInt32:()=>aXe,strictParseLong:()=>Xne,strictParseShort:()=>dp,take:()=>kXe,throwDefaultError:()=>tie,withBaseException:()=>AXe});cie.exports=k9e($ne);var kne=Une(),hS,Gne=(hS=class{constructor(t){this.config=t,this.middlewareStack=(0,kne.constructStack)()}send(t,r,n){let i=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,a=i===void 0&&this.config.cacheMiddleware===!0,u;if(a){this.handlers||(this.handlers=new WeakMap);let l=this.handlers;l.has(t.constructor)?u=l.get(t.constructor):(u=t.resolveMiddleware(this.middlewareStack,this.config,i),l.set(t.constructor,u))}else delete this.handlers,u=t.resolveMiddleware(this.middlewareStack,this.config,i);if(o)u(t).then(l=>o(null,l.output),l=>o(l)).catch(()=>{});else return u(t).then(l=>l.output)}destroy(){var t,r,n;(n=(r=(t=this.config)==null?void 0:t.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}},s(hS,"_Client"),hS);me(Gne,"Client");var G9e=Gne,E2=(uI(),mt(lre)),w2=ia(),pS,Wne=(pS=class{constructor(){this.middlewareStack=(0,kne.constructStack)()}static classBuilder(){return new W9e}resolveMiddlewareWithContext(t,r,n,{middlewareFn:i,clientName:o,commandName:a,inputFilterSensitiveLog:u,outputFilterSensitiveLog:l,smithyContext:f,additionalContext:h,CommandCtor:p}){for(let O of i.bind(this)(p,t,r,n))this.middlewareStack.use(O);let g=t.concat(this.middlewareStack),{logger:_}=r,C={logger:_,clientName:o,commandName:a,inputFilterSensitiveLog:u,outputFilterSensitiveLog:l,[w2.SMITHY_CONTEXT_KEY]:{commandInstance:this,...f},...h},{requestHandler:D}=r;return g.resolve(O=>D.handle(O.request,n||{}),C)}},s(pS,"_Command"),pS);me(Wne,"Command");var zne=Wne,mS,Hne=(mS=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){var i;var t;let r=this,n;return n=(t=(i=class extends zne{constructor(...[a]){super(),this.serialize=r._serializer,this.deserialize=r._deserializer,this.input=a??{},r._init(this)}static getEndpointParameterInstructions(){return r._ep}resolveMiddleware(a,u,l){return this.resolveMiddlewareWithContext(a,u,l,{CommandCtor:n,middlewareFn:r._middlewareFn,clientName:r._clientName,commandName:r._commandName,inputFilterSensitiveLog:r._inputFilterSensitiveLog,outputFilterSensitiveLog:r._outputFilterSensitiveLog,smithyContext:r._smithyContext,additionalContext:r._additionalContext})}},s(i,"_a"),i),me(t,"CommandRef"),t)}},s(mS,"_ClassBuilder"),mS);me(Hne,"ClassBuilder");var W9e=Hne,z9e="***SensitiveInformation***",H9e=me((e,t)=>{for(let r of Object.keys(e)){let n=e[r],i=me(async function(a,u,l){let f=new n(a);if(typeof u=="function")this.send(f,u);else if(typeof l=="function"){if(typeof u!="object")throw new Error(`Expected http options but got ${typeof u}`);this.send(f,u||{},l)}else return this.send(f,u)},"methodImpl"),o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[o]=i}},"createAggregatedClient"),V9e=me(e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},"parseBoolean"),Y9e=me(e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&dS.warn(TI(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&dS.warn(TI(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},"expectBoolean"),cS=me(e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&dS.warn(TI(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},"expectNumber"),K9e=Math.ceil(2**127*(2-2**-23)),OI=me(e=>{let t=cS(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>K9e)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},"expectFloat32"),lS=me(e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},"expectLong"),X9e=lS,b2=me(e=>I2(e,32),"expectInt32"),O2=me(e=>I2(e,16),"expectShort"),T2=me(e=>I2(e,8),"expectByte"),I2=me((e,t)=>{let r=lS(e);if(r!==void 0&&J9e(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},"expectSizedInt"),J9e=me((e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},"castInt"),Q9e=me((e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},"expectNonNull"),Vne=me(e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},"expectObject"),Z9e=me(e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return dS.warn(TI(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},"expectString"),eXe=me(e=>{if(e==null)return;let t=Vne(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},"expectUnion"),D2=me(e=>cS(typeof e=="string"?pp(e):e),"strictParseDouble"),tXe=D2,Yne=me(e=>OI(typeof e=="string"?pp(e):e),"strictParseFloat32"),rXe=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,pp=me(e=>{let t=e.match(rXe);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},"parseNumber"),R2=me(e=>typeof e=="string"?Kne(e):cS(e),"limitedParseDouble"),nXe=R2,iXe=R2,sXe=me(e=>typeof e=="string"?Kne(e):OI(e),"limitedParseFloat32"),Kne=me(e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},"parseFloatString"),Xne=me(e=>lS(typeof e=="string"?pp(e):e),"strictParseLong"),oXe=Xne,aXe=me(e=>b2(typeof e=="string"?pp(e):e),"strictParseInt32"),dp=me(e=>O2(typeof e=="string"?pp(e):e),"strictParseShort"),Jne=me(e=>T2(typeof e=="string"?pp(e):e),"strictParseByte"),TI=me(e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),dS={warn:console.warn},uXe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],N2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Qne(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),u=e.getUTCSeconds(),l=i<10?`0${i}`:`${i}`,f=o<10?`0${o}`:`${o}`,h=a<10?`0${a}`:`${a}`,p=u<10?`0${u}`:`${u}`;return`${uXe[n]}, ${l} ${N2[r]} ${t} ${f}:${h}:${p} GMT`}s(Qne,"dateToUtcString");me(Qne,"dateToUtcString");var cXe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),lXe=me(e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=cXe.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,a,u,l,f]=t,h=dp(fp(n)),p=oa(i,"month",1,12),g=oa(o,"day",1,31);return uS(h,p,g,{hours:a,minutes:u,seconds:l,fractionalMilliseconds:f})},"parseRfc3339DateTime"),dXe=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),fXe=me(e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=dXe.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,a,u,l,f,h]=t,p=dp(fp(n)),g=oa(i,"month",1,12),_=oa(o,"day",1,31),C=uS(p,g,_,{hours:a,minutes:u,seconds:l,fractionalMilliseconds:f});return h.toUpperCase()!="Z"&&C.setTime(C.getTime()-OXe(h)),C},"parseRfc3339DateTimeWithOffset"),hXe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),pXe=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),mXe=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),gXe=me(e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=hXe.exec(e);if(t){let[r,n,i,o,a,u,l,f]=t;return uS(dp(fp(o)),C2(i),oa(n,"day",1,31),{hours:a,minutes:u,seconds:l,fractionalMilliseconds:f})}if(t=pXe.exec(e),t){let[r,n,i,o,a,u,l,f]=t;return SXe(uS(vXe(o),C2(i),oa(n,"day",1,31),{hours:a,minutes:u,seconds:l,fractionalMilliseconds:f}))}if(t=mXe.exec(e),t){let[r,n,i,o,a,u,l,f]=t;return uS(dp(fp(f)),C2(n),oa(i.trimLeft(),"day",1,31),{hours:o,minutes:a,seconds:u,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),yXe=me(e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=D2(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},"parseEpochTimestamp"),uS=me((e,t,r,n)=>{let i=t-1;return CXe(e,i,r),new Date(Date.UTC(e,i,r,oa(n.hours,"hour",0,23),oa(n.minutes,"minute",0,59),oa(n.seconds,"seconds",0,60),bXe(n.fractionalMilliseconds)))},"buildDate"),vXe=me(e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+dp(fp(e));return r<t?r+100:r},"parseTwoDigitYear"),_Xe=50*365*24*60*60*1e3,SXe=me(e=>e.getTime()-new Date().getTime()>_Xe?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,"adjustRfc850Year"),C2=me(e=>{let t=N2.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},"parseMonthByShortName"),EXe=[31,28,31,30,31,30,31,31,30,31,30,31],CXe=me((e,t,r)=>{let n=EXe[t];if(t===1&&wXe(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${N2[t]} in ${e}: ${r}`)},"validateDayOfMonth"),wXe=me(e=>e%4===0&&(e%100!==0||e%400===0),"isLeapYear"),oa=me((e,t,r,n)=>{let i=Jne(fp(e));if(i<r||i>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return i},"parseDateValue"),bXe=me(e=>e==null?0:Yne("0."+e)*1e3,"parseMilliseconds"),OXe=me(e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),i=Number(e.substring(4,6));return r*(n*60+i)*60*1e3},"parseOffsetToMilliseconds"),fp=me(e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)},"stripLeadingZeroes"),hp,Zne=(hp=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,hp.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},s(hp,"_ServiceException"),hp);me(Zne,"ServiceException");var TXe=Zne,eie=me((e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(e[n]==null||e[n]==="")&&(e[n]=i)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},"decorateServiceException"),tie=me(({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let i=IXe(e),o=i.httpStatusCode?i.httpStatusCode+"":void 0,a=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||o||"UnknownError",$fault:"client",$metadata:i});throw eie(a,t)},"throwDefaultError"),AXe=me(e=>({output:t,parsedBody:r,errorCode:n})=>{tie({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},"withBaseException"),IXe=me(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),DXe=me(e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),jne=!1,RXe=me(e=>{e&&!jne&&parseInt(e.substring(1,e.indexOf(".")))<16&&(jne=!0)},"emitWarningIfUnsupportedVersion"),NXe=me(e=>{let t=[];for(let r in w2.AlgorithmId){let n=w2.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),xXe=me(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),PXe=me(e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},"getRetryConfiguration"),BXe=me(e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},"resolveRetryRuntimeConfig"),rie=me(e=>({...NXe(e),...PXe(e)}),"getDefaultExtensionConfiguration"),MXe=rie,FXe=me(e=>({...xXe(e),...BXe(e)}),"resolveDefaultRuntimeConfig"),qXe=me(e=>Array.isArray(e)?e:[e],"getArrayIfSingleItem"),nie=me(e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=nie(e[r]));return e},"getValueFromTextNode"),LXe=me(e=>e!=null,"isSerializableHeaderValue"),fS=me(function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r},"StringWrapper");fS.prototype=Object.create(String.prototype,{constructor:{value:fS,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(fS,String);var kc,iie=(kc=class extends fS{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(t){return t instanceof kc?t:t instanceof String||typeof t=="string"?new kc(t):new kc(JSON.stringify(t))}},s(kc,"_LazyJsonString"),kc);me(iie,"LazyJsonString");var UXe=iie,gS,sie=(gS=class{trace(){}debug(){}info(){}warn(){}error(){}},s(gS,"_NoOpLogger"),gS);me(sie,"NoOpLogger");var jXe=sie;function x2(e,t,r){let n,i,o;if(typeof t>"u"&&typeof r>"u")n={},o=e;else{if(n=e,typeof t=="function")return i=t,o=r,GXe(n,i,o);o=t}for(let a of Object.keys(o)){if(!Array.isArray(o[a])){n[a]=o[a];continue}oie(n,null,o,a)}return n}s(x2,"map");me(x2,"map");var $Xe=me(e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},"convertMap"),kXe=me((e,t)=>{let r={};for(let n in t)oie(r,e,t,n);return r},"take"),GXe=me((e,t,r)=>x2(e,Object.entries(r).reduce((n,[i,o])=>(Array.isArray(o)?n[i]=o:typeof o=="function"?n[i]=[t,o()]:n[i]=[t,o],n),{})),"mapWithFilter"),oie=me((e,t,r,n)=>{if(t!==null){let a=r[n];typeof a=="function"&&(a=[,a]);let[u=WXe,l=zXe,f=n]=a;(typeof u=="function"&&u(t[f])||typeof u!="function"&&u)&&(e[n]=l(t[f]));return}let[i,o]=r[n];if(typeof o=="function"){let a,u=i===void 0&&(a=o())!=null,l=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;u?e[n]=a:l&&(e[n]=o())}else{let a=i===void 0&&o!=null,u=typeof i=="function"&&!!i(o)||typeof i!="function"&&!!i;(a||u)&&(e[n]=o)}},"applyInstruction"),WXe=me(e=>e!=null,"nonNullish"),zXe=me(e=>e,"pass");function aie(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}s(aie,"quoteHeader");me(aie,"quoteHeader");var HXe=me(e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},"serializeFloat"),VXe=me(e=>e.toISOString().replace(".000Z","Z"),"serializeDateTime"),A2=me(e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(A2);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=A2(e[r]));return t}return e},"_json");function uie(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let i=[],o="";for(let a=0;a<n.length;a++)o===""?o=n[a]:o+=t+n[a],(a+1)%r===0&&(i.push(o),o="");return o!==""&&i.push(o),i}s(uie,"splitEvery");me(uie,"splitEvery");var YXe=me(e=>{let t=e.length,r=[],n=!1,i,o=0;for(let a=0;a<t;++a){let u=e[a];switch(u){case'"':i!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(o,a)),o=a+1);break;default:}i=u}return r.push(e.slice(o)),r.map(a=>{a=a.trim();let u=a.length;return u<2?a:(a[0]==='"'&&a[u-1]==='"'&&(a=a.slice(1,u-1)),a.replace(/\\"/g,'"'))})},"splitHeader")});var lie,KXe,die=De(()=>{lie=_r(Tr()),KXe=s(e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,lie.expectUnion)(e)},"awsExpectUnion")});var fie,II,P2=De(()=>{fie=_r(Tr()),II=s((e,t)=>(0,fie.collectBody)(e,t).then(r=>t.utf8Encoder(r)),"collectBodyString")});var hie,XXe,JXe,pie=De(()=>{P2();hie=s((e,t)=>II(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),"parseJsonBody"),XXe=s(async(e,t)=>{let r=await hie(e,t);return r.message=r.message??r.Message,r},"parseJsonErrorBody"),JXe=s((e,t)=>{let r=s((o,a)=>Object.keys(o).find(u=>u.toLowerCase()===a.toLowerCase()),"findKey"),n=s(o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},"sanitizeErrorCode"),i=r(e.headers,"x-amzn-errortype");if(i!==void 0)return n(e.headers[i]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},"loadRestJsonErrorCode")});var DI=w(gu=>{"use strict";var mie=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",QXe=mie+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",gie="["+mie+"]["+QXe+"]*",ZXe=new RegExp("^"+gie+"$"),e7e=s(function(e,t){let r=[],n=t.exec(e);for(;n;){let i=[];i.startIndex=t.lastIndex-n[0].length;let o=n.length;for(let a=0;a<o;a++)i.push(n[a]);r.push(i),n=t.exec(e)}return r},"getAllMatches"),t7e=s(function(e){let t=ZXe.exec(e);return!(t===null||typeof t>"u")},"isName");gu.isExist=function(e){return typeof e<"u"};gu.isEmptyObject=function(e){return Object.keys(e).length===0};gu.merge=function(e,t,r){if(t){let n=Object.keys(t),i=n.length;for(let o=0;o<i;o++)r==="strict"?e[n[o]]=[t[n[o]]]:e[n[o]]=t[n[o]]}};gu.getValue=function(e){return gu.isExist(e)?e:""};gu.isName=t7e;gu.getAllMatches=e7e;gu.nameRegexp=gie});var M2=w(Eie=>{"use strict";var B2=DI(),r7e={allowBooleanAttributes:!1,unpairedTags:[]};Eie.validate=function(e,t){t=Object.assign({},r7e,t);let r=[],n=!1,i=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=vie(e,o),o.err)return o}else if(e[o]==="<"){let a=o;if(o++,e[o]==="!"){o=_ie(e,o);continue}else{let u=!1;e[o]==="/"&&(u=!0,o++);let l="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)l+=e[o];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),o--),!l7e(l)){let p;return l.trim().length===0?p="Invalid space after '<'.":p="Tag '"+l+"' is an invalid name.",Qr("InvalidTag",p,Pi(e,o))}let f=s7e(e,o);if(f===!1)return Qr("InvalidAttr","Attributes for '"+l+"' have open quote.",Pi(e,o));let h=f.value;if(o=f.index,h[h.length-1]==="/"){let p=o-h.length;h=h.substring(0,h.length-1);let g=Sie(h,t);if(g===!0)n=!0;else return Qr(g.err.code,g.err.msg,Pi(e,p+g.err.line))}else if(u)if(f.tagClosed){if(h.trim().length>0)return Qr("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Pi(e,a));if(r.length===0)return Qr("InvalidTag","Closing tag '"+l+"' has not been opened.",Pi(e,a));{let p=r.pop();if(l!==p.tagName){let g=Pi(e,p.tagStartPos);return Qr("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+g.line+", col "+g.col+") instead of closing tag '"+l+"'.",Pi(e,a))}r.length==0&&(i=!0)}}else return Qr("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Pi(e,o));else{let p=Sie(h,t);if(p!==!0)return Qr(p.err.code,p.err.msg,Pi(e,o-h.length+p.err.line));if(i===!0)return Qr("InvalidXml","Multiple possible root nodes found.",Pi(e,o));t.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:a}),n=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=_ie(e,o);continue}else if(e[o+1]==="?"){if(o=vie(e,++o),o.err)return o}else break;else if(e[o]==="&"){let p=u7e(e,o);if(p==-1)return Qr("InvalidChar","char '&' is not expected.",Pi(e,o));o=p}else if(i===!0&&!yie(e[o]))return Qr("InvalidXml","Extra text at the end",Pi(e,o));e[o]==="<"&&o--}}else{if(yie(e[o]))continue;return Qr("InvalidChar","char '"+e[o]+"' is not expected.",Pi(e,o))}if(n){if(r.length==1)return Qr("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Pi(e,r[0].tagStartPos));if(r.length>0)return Qr("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Qr("InvalidXml","Start tag expected.",1);return!0};function yie(e){return e===" "||e==="	"||e===`
`||e==="\r"}s(yie,"isWhiteSpace");function vie(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Qr("InvalidXml","XML declaration allowed only at the start of the document.",Pi(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}s(vie,"readPI");function _ie(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}s(_ie,"readCommentAndCDATA");var n7e='"',i7e="'";function s7e(e,t){let r="",n="",i=!1;for(;t<e.length;t++){if(e[t]===n7e||e[t]===i7e)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){i=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:i}}s(s7e,"readAttributeStr");var o7e=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Sie(e,t){let r=B2.getAllMatches(e,o7e),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return Qr("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",yS(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return Qr("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",yS(r[i]));if(r[i][3]===void 0&&!t.allowBooleanAttributes)return Qr("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",yS(r[i]));let o=r[i][2];if(!c7e(o))return Qr("InvalidAttr","Attribute '"+o+"' is an invalid name.",yS(r[i]));if(!n.hasOwnProperty(o))n[o]=1;else return Qr("InvalidAttr","Attribute '"+o+"' is repeated.",yS(r[i]))}return!0}s(Sie,"validateAttributeString");function a7e(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}s(a7e,"validateNumberAmpersand");function u7e(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,a7e(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}s(u7e,"validateAmpersand");function Qr(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}s(Qr,"getErrorObject");function c7e(e){return B2.isName(e)}s(c7e,"validateAttrName");function l7e(e){return B2.isName(e)}s(l7e,"validateTagName");function Pi(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}s(Pi,"getLineNumberForPosition");function yS(e){return e.startIndex+e[1].length}s(yS,"getPositionFromMatch")});var wie=w(F2=>{var Cie={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},d7e=s(function(e){return Object.assign({},Cie,e)},"buildOptions");F2.buildOptions=d7e;F2.defaultOptions=Cie});var Oie=w((XNt,bie)=>{"use strict";var L2=class L2{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};s(L2,"XmlNode");var q2=L2;bie.exports=q2});var Aie=w((QNt,Tie)=>{var f7e=DI();function h7e(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,i=!1,o=!1,a="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(i&&g7e(e,t))t+=7,[entityName,val,t]=p7e(e,t+1),val.indexOf("&")===-1&&(r[S7e(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&y7e(e,t))t+=8;else if(i&&v7e(e,t))t+=8;else if(i&&_7e(e,t))t+=9;else if(m7e)o=!0;else throw new Error("Invalid DOCTYPE");n++,a=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,n--):n--,n===0)break}else e[t]==="["?i=!0:a+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}s(h7e,"readDocType");function p7e(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],i="";for(;t<e.length&&e[t]!==n;t++)i+=e[t];return[r,i,t]}s(p7e,"readEntityExp");function m7e(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}s(m7e,"isComment");function g7e(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}s(g7e,"isEntity");function y7e(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}s(y7e,"isElement");function v7e(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}s(v7e,"isAttlist");function _7e(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}s(_7e,"isNotation");function S7e(e){if(f7e.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}s(S7e,"validateEntityName");Tie.exports=h7e});var Die=w((ext,Iie)=>{var E7e=/^[-+]?0x[a-fA-F0-9]+$/,C7e=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var w7e={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function b7e(e,t={}){if(t=Object.assign({},w7e,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&E7e.test(r))return Number.parseInt(r,16);{let n=C7e.exec(r);if(n){let i=n[1],o=n[2],a=O7e(n[3]),u=n[4]||n[6];if(!t.leadingZeros&&o.length>0&&i&&r[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!i&&r[1]!==".")return e;{let l=Number(r),f=""+l;return f.search(/[eE]/)!==-1||u?t.eNotation?l:e:r.indexOf(".")!==-1?f==="0"&&a===""||f===a||i&&f==="-"+a?l:e:o?a===f||i+a===f?l:e:r===f||r===i+f?l:e}}else return e}}s(b7e,"toNumber");function O7e(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}s(O7e,"trimZeros");Iie.exports=b7e});var xie=w((rxt,Nie)=>{"use strict";var Rie=DI(),vS=Oie(),T7e=Aie(),A7e=Die(),k2=class k2{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=I7e,this.parseXml=P7e,this.parseTextData=D7e,this.resolveNameSpace=R7e,this.buildAttributesMap=x7e,this.isItStopNode=q7e,this.replaceEntitiesValue=M7e,this.readStopNodeData=U7e,this.saveTextToParentTag=F7e,this.addChild=B7e}};s(k2,"OrderedObjParser");var U2=k2;function I7e(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}s(I7e,"addExternalEntities");function D7e(e,t,r,n,i,o,a){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let u=this.options.tagValueProcessor(t,e,r,i,o);return u==null?e:typeof u!=typeof e||u!==e?u:this.options.trimValues?$2(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?$2(e,this.options.parseTagValue,this.options.numberParseOptions):e}}s(D7e,"parseTextData");function R7e(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}s(R7e,"resolveNameSpace");var N7e=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function x7e(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Rie.getAllMatches(e,N7e),i=n.length,o={};for(let a=0;a<i;a++){let u=this.resolveNameSpace(n[a][1]),l=n[a][4],f=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),f==="__proto__"&&(f="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);let h=this.options.attributeValueProcessor(u,l,t);h==null?o[f]=l:typeof h!=typeof l||h!==l?o[f]=h:o[f]=$2(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[f]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let a={};return a[this.options.attributesGroupName]=o,a}return o}}s(x7e,"buildAttributesMap");var P7e=s(function(e){e=e.replace(/\r\n?/g,`
`);let t=new vS("!xml"),r=t,n="",i="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){let u=xd(e,">",o,"Closing Tag is not closed."),l=e.substring(o+2,u).trim();if(this.options.removeNSPrefix){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(n=this.saveTextToParentTag(n,r,i));let f=i.substring(i.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let h=0;f&&this.options.unpairedTags.indexOf(f)!==-1?(h=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=i.lastIndexOf("."),i=i.substring(0,h),r=this.tagsNodeStack.pop(),n="",o=u}else if(e[o+1]==="?"){let u=j2(e,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){let l=new vS(u.tagName);l.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(l[":@"]=this.buildAttributesMap(u.tagExp,i,u.tagName)),this.addChild(r,l,i)}o=u.closeIndex+1}else if(e.substr(o+1,3)==="!--"){let u=xd(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let l=e.substring(o+4,u-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}o=u}else if(e.substr(o+1,2)==="!D"){let u=T7e(e,o);this.docTypeEntities=u.entities,o=u.i}else if(e.substr(o+1,2)==="!["){let u=xd(e,"]]>",o,"CDATA is not closed.")-2,l=e.substring(o+9,u);n=this.saveTextToParentTag(n,r,i);let f=this.parseTextData(l,r.tagname,i,!0,!1,!0,!0);f==null&&(f=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,f),o=u+2}else{let u=j2(e,o,this.options.removeNSPrefix),l=u.tagName,f=u.rawTagName,h=u.tagExp,p=u.attrExpPresent,g=u.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1));let _=r;if(_&&this.options.unpairedTags.indexOf(_.tagname)!==-1&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),l!==t.tagname&&(i+=i?"."+l:l),this.isItStopNode(this.options.stopNodes,i,l)){let C="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),i=i.substr(0,i.length-1),h=l):h=h.substr(0,h.length-1),o=u.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)o=u.closeIndex;else{let O=this.readStopNodeData(e,f,g+1);if(!O)throw new Error(`Unexpected end of ${f}`);o=O.i,C=O.tagContent}let D=new vS(l);l!==h&&p&&(D[":@"]=this.buildAttributesMap(h,i,l)),C&&(C=this.parseTextData(C,l,i,!0,p,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),D.add(this.options.textNodeName,C),this.addChild(r,D,i)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),i=i.substr(0,i.length-1),h=l):h=h.substr(0,h.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));let C=new vS(l);l!==h&&p&&(C[":@"]=this.buildAttributesMap(h,i,l)),this.addChild(r,C,i),i=i.substr(0,i.lastIndexOf("."))}else{let C=new vS(l);this.tagsNodeStack.push(r),l!==h&&p&&(C[":@"]=this.buildAttributesMap(h,i,l)),this.addChild(r,C,i),r=C}n="",o=g}}else n+=e[o];return t.child},"parseXml");function B7e(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}s(B7e,"addChild");var M7e=s(function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e},"replaceEntitiesValue");function F7e(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}s(F7e,"saveTextToParentTag");function q7e(e,t,r){let n="*."+r;for(let i in e){let o=e[i];if(n===o||t===o)return!0}return!1}s(q7e,"isItStopNode");function L7e(e,t,r=">"){let n,i="";for(let o=t;o<e.length;o++){let a=e[o];if(n)a===n&&(n="");else if(a==='"'||a==="'")n=a;else if(a===r[0])if(r[1]){if(e[o+1]===r[1])return{data:i,index:o}}else return{data:i,index:o};else a==="	"&&(a=" ");i+=a}}s(L7e,"tagExpWithClosingIndex");function xd(e,t,r,n){let i=e.indexOf(t,r);if(i===-1)throw new Error(n);return i+t.length-1}s(xd,"findClosingIndex");function j2(e,t,r,n=">"){let i=L7e(e,t+1,n);if(!i)return;let o=i.data,a=i.index,u=o.search(/\s/),l=o,f=!0;u!==-1&&(l=o.substring(0,u),o=o.substring(u+1).trimStart());let h=l;if(r){let p=l.indexOf(":");p!==-1&&(l=l.substr(p+1),f=l!==i.data.substr(p+1))}return{tagName:l,tagExp:o,closeIndex:a,attrExpPresent:f,rawTagName:h}}s(j2,"readTagExp");function U7e(e,t,r){let n=r,i=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let o=xd(e,">",r,`${t} is not closed`);if(e.substring(r+2,o).trim()===t&&(i--,i===0))return{tagContent:e.substring(n,r),i:o};r=o}else if(e[r+1]==="?")r=xd(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=xd(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=xd(e,"]]>",r,"StopNode is not closed.")-2;else{let o=j2(e,r,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&i++,r=o.closeIndex)}}s(U7e,"readStopNodeData");function $2(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:A7e(e,r)}else return Rie.isExist(e)?e:""}s($2,"parseValue");Nie.exports=U2});var Mie=w(Bie=>{"use strict";function j7e(e,t){return Pie(e,t)}s(j7e,"prettify");function Pie(e,t,r){let n,i={};for(let o=0;o<e.length;o++){let a=e[o],u=$7e(a),l="";if(r===void 0?l=u:l=r+"."+u,u===t.textNodeName)n===void 0?n=a[u]:n+=""+a[u];else{if(u===void 0)continue;if(a[u]){let f=Pie(a[u],t,l),h=G7e(f,t);a[":@"]?k7e(f,a[":@"],l,t):Object.keys(f).length===1&&f[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?f=f[t.textNodeName]:Object.keys(f).length===0&&(t.alwaysCreateTextNode?f[t.textNodeName]="":f=""),i[u]!==void 0&&i.hasOwnProperty(u)?(Array.isArray(i[u])||(i[u]=[i[u]]),i[u].push(f)):t.isArray(u,l,h)?i[u]=[f]:i[u]=f}}}return typeof n=="string"?n.length>0&&(i[t.textNodeName]=n):n!==void 0&&(i[t.textNodeName]=n),i}s(Pie,"compress");function $7e(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}s($7e,"propName");function k7e(e,t,r,n){if(t){let i=Object.keys(t),o=i.length;for(let a=0;a<o;a++){let u=i[a];n.isArray(u,r+"."+u,!0,!0)?e[u]=[t[u]]:e[u]=t[u]}}}s(k7e,"assignAttributes");function G7e(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}s(G7e,"isLeafTag");Bie.prettify=j7e});var qie=w((oxt,Fie)=>{var{buildOptions:W7e}=wie(),z7e=xie(),{prettify:H7e}=Mie(),V7e=M2(),W2=class W2{constructor(t){this.externalEntities={},this.options=W7e(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=V7e.validate(t,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new z7e(this.options);n.addExternalEntities(this.externalEntities);let i=n.parseXml(t);return this.options.preserveOrder||i===void 0?i:H7e(i,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};s(W2,"XMLParser");var G2=W2;Fie.exports=G2});var kie=w((uxt,$ie)=>{var Y7e=`
`;function K7e(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=Y7e),Uie(e,t,"",r)}s(K7e,"toXml");function Uie(e,t,r,n){let i="",o=!1;for(let a=0;a<e.length;a++){let u=e[a],l=X7e(u);if(l===void 0)continue;let f="";if(r.length===0?f=l:f=`${r}.${l}`,l===t.textNodeName){let C=u[l];J7e(f,t)||(C=t.tagValueProcessor(l,C),C=jie(C,t)),o&&(i+=n),i+=C,o=!1;continue}else if(l===t.cdataPropName){o&&(i+=n),i+=`<![CDATA[${u[l][0][t.textNodeName]}]]>`,o=!1;continue}else if(l===t.commentPropName){i+=n+`<!--${u[l][0][t.textNodeName]}-->`,o=!0;continue}else if(l[0]==="?"){let C=Lie(u[":@"],t),D=l==="?xml"?"":n,O=u[l][0][t.textNodeName];O=O.length!==0?" "+O:"",i+=D+`<${l}${O}${C}?>`,o=!0;continue}let h=n;h!==""&&(h+=t.indentBy);let p=Lie(u[":@"],t),g=n+`<${l}${p}`,_=Uie(u[l],t,f,h);t.unpairedTags.indexOf(l)!==-1?t.suppressUnpairedNode?i+=g+">":i+=g+"/>":(!_||_.length===0)&&t.suppressEmptyNode?i+=g+"/>":_&&_.endsWith(">")?i+=g+`>${_}${n}</${l}>`:(i+=g+">",_&&n!==""&&(_.includes("/>")||_.includes("</"))?i+=n+t.indentBy+_+n:i+=_,i+=`</${l}>`),o=!0}return i}s(Uie,"arrToStr");function X7e(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(e.hasOwnProperty(n)&&n!==":@")return n}}s(X7e,"propName");function Lie(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){if(!e.hasOwnProperty(n))continue;let i=t.attributeValueProcessor(n,e[n]);i=jie(i,t),i===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${i}"`}return r}s(Lie,"attr_to_str");function J7e(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}s(J7e,"isStopNode");function jie(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}s(jie,"replaceEntitiesValue");$ie.exports=K7e});var Wie=w((lxt,Gie)=>{"use strict";var Q7e=kie(),Z7e={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Gc(e){this.options=Object.assign({},Z7e,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=rJe),this.processTextOrObjNode=eJe,this.options.format?(this.indentate=tJe,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}s(Gc,"Builder");Gc.prototype.build=function(e){return this.options.preserveOrder?Q7e(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Gc.prototype.j2x=function(e,t){let r="",n="";for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))if(typeof e[i]>"u")this.isAttribute(i)&&(n+="");else if(e[i]===null)this.isAttribute(i)?n+="":i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)n+=this.buildTextValNode(e[i],i,"",t);else if(typeof e[i]!="object"){let o=this.isAttribute(i);if(o)r+=this.buildAttrPairStr(o,""+e[i]);else if(i===this.options.textNodeName){let a=this.options.tagValueProcessor(i,""+e[i]);n+=this.replaceEntitiesValue(a)}else n+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){let o=e[i].length,a="",u="";for(let l=0;l<o;l++){let f=e[i][l];if(!(typeof f>"u"))if(f===null)i[0]==="?"?n+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){let h=this.j2x(f,t+1);a+=h.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(u+=h.attrStr)}else a+=this.processTextOrObjNode(f,i,t);else if(this.options.oneListGroup){let h=this.options.tagValueProcessor(i,f);h=this.replaceEntitiesValue(h),a+=h}else a+=this.buildTextValNode(f,i,"",t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,i,u,t)),n+=a}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let o=Object.keys(e[i]),a=o.length;for(let u=0;u<a;u++)r+=this.buildAttrPairStr(o[u],""+e[i][o[u]])}else n+=this.processTextOrObjNode(e[i],i,t);return{attrStr:r,val:n}};Gc.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function eJe(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}s(eJe,"processTextOrObjNode");Gc.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let i="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",i=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+o+">"+e+i:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+o+this.tagEndChar+e+this.indentate(n)+i}};Gc.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Gc.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(t,e);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+i+"</"+t+this.tagEndChar}};Gc.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function tJe(e){return this.options.indentBy.repeat(e)}s(tJe,"indentate");function rJe(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}s(rJe,"isAttribute");Gie.exports=Gc});var Hie=w((fxt,zie)=>{"use strict";var nJe=M2(),iJe=qie(),sJe=Wie();zie.exports={XMLParser:iJe,XMLValidator:nJe,XMLBuilder:sJe}});var Vie,Yie,Kie,oJe,aJe,Xie=De(()=>{Vie=_r(Tr()),Yie=_r(Hie());P2();Kie=s((e,t)=>II(e,t).then(r=>{if(r.length){let n=new Yie.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,f)=>f.trim()===""&&f.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i;try{i=n.parse(r,!0)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:r}),l}let o="#text",a=Object.keys(i)[0],u=i[a];return u[o]&&(u[a]=u[o],delete u[o]),(0,Vie.getValueFromTextNode)(u)}return{}}),"parseXmlBody"),oJe=s(async(e,t)=>{let r=await Kie(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},"parseXmlErrorBody"),aJe=s((e,t)=>{var r;if(((r=t==null?void 0:t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"},"loadRestXmlErrorCode")});var Jie=De(()=>{Bne();die();pie();Xie()});var wn={};bf(wn,{AWSSDKSigV4Signer:()=>rne,AwsSdkSigV4ASigner:()=>mI,AwsSdkSigV4Signer:()=>Dd,NODE_SIGV4A_CONFIG_OPTIONS:()=>Y5e,_toBool:()=>D9e,_toNum:()=>R9e,_toStr:()=>I9e,awsExpectUnion:()=>KXe,emitWarningIfUnsupportedVersion:()=>zre,loadRestJsonErrorCode:()=>JXe,loadRestXmlErrorCode:()=>aJe,parseJsonBody:()=>hie,parseJsonErrorBody:()=>XXe,parseXmlBody:()=>Kie,parseXmlErrorBody:()=>oJe,resolveAWSSDKSigV4Config:()=>A9e,resolveAwsSdkSigV4AConfig:()=>V5e,resolveAwsSdkSigV4Config:()=>Rne,setCredentialFeature:()=>pI,setFeature:()=>Yre,state:()=>hI,validateSigningProperties:()=>sS});var bn=De(()=>{sa();Pne();Jie()});var mp=w((bxt,cse)=>{"use strict";var NI=Object.defineProperty,uJe=Object.getOwnPropertyDescriptor,cJe=Object.getOwnPropertyNames,lJe=Object.prototype.hasOwnProperty,Pd=s((e,t)=>NI(e,"name",{value:t,configurable:!0}),"__name"),dJe=s((e,t)=>{for(var r in t)NI(e,r,{get:t[r],enumerable:!0})},"__export"),fJe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cJe(t))!lJe.call(e,i)&&i!==r&&NI(e,i,{get:()=>t[i],enumerable:!(n=uJe(t,i))||n.enumerable});return e},"__copyProps"),hJe=s(e=>fJe(NI({},"__esModule",{value:!0}),e),"__toCommonJS"),tse={};dJe(tse,{DEFAULT_UA_APP_ID:()=>rse,getUserAgentMiddlewareOptions:()=>use,getUserAgentPlugin:()=>EJe,resolveUserAgentConfig:()=>ise,userAgentMiddleware:()=>ase});cse.exports=hJe(tse);var pJe=(Ss(),mt(bo)),rse=void 0;function nse(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}s(nse,"isValidUserAgentAppId");Pd(nse,"isValidUserAgentAppId");function ise(e){let t=(0,pJe.normalizeProvider)(e.userAgentAppId??rse);return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent,userAgentAppId:async()=>{var r,n;let i=await t();if(!nse(i)){let o=((n=(r=e.logger)==null?void 0:r.constructor)==null?void 0:n.name)==="NoOpLogger"||!e.logger?console:e.logger;typeof i!="string"?o==null||o.warn("userAgentAppId must be a string or undefined."):i.length>50&&(o==null||o.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return i}}}s(ise,"resolveUserAgentConfig");Pd(ise,"resolveUserAgentConfig");var mJe=ip(),gJe=Or(),aa=(bn(),mt(wn)),yJe=/\d{12}\.ddb/;async function sse(e,t,r){var n,i,o,a,u,l,f;let h=r.request;if(((n=h==null?void 0:h.headers)==null?void 0:n["smithy-protocol"])==="rpc-v2-cbor"&&(0,aa.setFeature)(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let g=await t.retryStrategy();typeof g.acquireInitialRetryToken=="function"?(o=(i=g.constructor)==null?void 0:i.name)!=null&&o.includes("Adaptive")?(0,aa.setFeature)(e,"RETRY_MODE_ADAPTIVE","F"):(0,aa.setFeature)(e,"RETRY_MODE_STANDARD","E"):(0,aa.setFeature)(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let g=e.endpointV2;switch(String((a=g==null?void 0:g.url)==null?void 0:a.hostname).match(yJe)&&(0,aa.setFeature)(e,"ACCOUNT_ID_ENDPOINT","O"),await((u=t.accountIdEndpointMode)==null?void 0:u.call(t))){case"disabled":(0,aa.setFeature)(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":(0,aa.setFeature)(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":(0,aa.setFeature)(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let p=(f=(l=e.__smithy_context)==null?void 0:l.selectedHttpAuthScheme)==null?void 0:f.identity;if(p!=null&&p.$source){let g=p;g.accountId&&(0,aa.setFeature)(e,"RESOLVED_ACCOUNT_ID","T");for(let[_,C]of Object.entries(g.$source??{}))(0,aa.setFeature)(e,_,C)}}s(sse,"checkFeatures");Pd(sse,"checkFeatures");var Qie="user-agent",z2="x-amz-user-agent",Zie=" ",H2="/",vJe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,_Je=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,ese="-",SJe=1024;function ose(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=SJe){t.length?t+=","+n:t+=n;continue}break}return t}s(ose,"encodeFeatures");Pd(ose,"encodeFeatures");var ase=Pd(e=>(t,r)=>async n=>{var i,o,a,u;let{request:l}=n;if(!gJe.HttpRequest.isInstance(l))return t(n);let{headers:f}=l,h=((i=r==null?void 0:r.userAgent)==null?void 0:i.map(RI))||[],p=(await e.defaultUserAgentProvider()).map(RI);await sse(r,e,n);let g=r;p.push(`m/${ose(Object.assign({},(o=r.__smithy_context)==null?void 0:o.features,(a=g.__aws_sdk_context)==null?void 0:a.features))}`);let _=((u=e==null?void 0:e.customUserAgent)==null?void 0:u.map(RI))||[],C=await e.userAgentAppId();C&&p.push(RI([`app/${C}`]));let D=(0,mJe.getUserAgentPrefix)(),O=(D?[D]:[]).concat([...p,...h,..._]).join(Zie),N=[...p.filter(F=>F.startsWith("aws-sdk-")),..._].join(Zie);return e.runtime!=="browser"?(N&&(f[z2]=f[z2]?`${f[Qie]} ${N}`:N),f[Qie]=O):f[z2]=O,t({...n,request:l})},"userAgentMiddleware"),RI=Pd(e=>{var t;let r=e[0].split(H2).map(u=>u.replace(vJe,ese)).join(H2),n=(t=e[1])==null?void 0:t.replace(_Je,ese),i=r.indexOf(H2),o=r.substring(0,i),a=r.substring(i+1);return o==="api"&&(a=a.toLowerCase()),[o,a,n].filter(u=>u&&u.length>0).reduce((u,l,f)=>{switch(f){case 0:return l;case 1:return`${u}/${l}`;default:return`${u}#${l}`}},"")},"escapeUserAgent"),use={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},EJe=Pd(e=>({applyToStack:t=>{t.add(ase(e),use)}}),"getUserAgentPlugin")});var pse=w((Txt,hse)=>{var xI=Object.defineProperty,CJe=Object.getOwnPropertyDescriptor,wJe=Object.getOwnPropertyNames,bJe=Object.prototype.hasOwnProperty,lse=s((e,t)=>xI(e,"name",{value:t,configurable:!0}),"__name"),OJe=s((e,t)=>{for(var r in t)xI(e,r,{get:t[r],enumerable:!0})},"__export"),TJe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of wJe(t))!bJe.call(e,i)&&i!==r&&xI(e,i,{get:()=>t[i],enumerable:!(n=CJe(t,i))||n.enumerable});return e},"__copyProps"),AJe=s(e=>TJe(xI({},"__esModule",{value:!0}),e),"__toCommonJS"),dse={};OJe(dse,{SelectorType:()=>fse,booleanSelector:()=>IJe,numberSelector:()=>DJe});hse.exports=AJe(dse);var IJe=lse((e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},"booleanSelector"),DJe=lse((e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n},"numberSelector"),fse=(e=>(e.ENV="env",e.CONFIG="shared config entry",e))(fse||{})});var ua=w((Ixt,Ose)=>{var BI=Object.defineProperty,RJe=Object.getOwnPropertyDescriptor,NJe=Object.getOwnPropertyNames,xJe=Object.prototype.hasOwnProperty,Oo=s((e,t)=>BI(e,"name",{value:t,configurable:!0}),"__name"),PJe=s((e,t)=>{for(var r in t)BI(e,r,{get:t[r],enumerable:!0})},"__export"),BJe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of NJe(t))!xJe.call(e,i)&&i!==r&&BI(e,i,{get:()=>t[i],enumerable:!(n=RJe(t,i))||n.enumerable});return e},"__copyProps"),MJe=s(e=>BJe(BI({},"__esModule",{value:!0}),e),"__toCommonJS"),yse={};PJe(yse,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>_se,CONFIG_USE_FIPS_ENDPOINT:()=>Ese,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>FJe,DEFAULT_USE_FIPS_ENDPOINT:()=>LJe,ENV_USE_DUALSTACK_ENDPOINT:()=>vse,ENV_USE_FIPS_ENDPOINT:()=>Sse,NODE_REGION_CONFIG_FILE_OPTIONS:()=>WJe,NODE_REGION_CONFIG_OPTIONS:()=>GJe,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>qJe,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>UJe,REGION_ENV_NAME:()=>Cse,REGION_INI_NAME:()=>wse,getRegionInfo:()=>KJe,resolveCustomEndpointsConfig:()=>jJe,resolveEndpointsConfig:()=>kJe,resolveRegionConfig:()=>zJe});Ose.exports=MJe(yse);var Wc=pse(),vse="AWS_USE_DUALSTACK_ENDPOINT",_se="use_dualstack_endpoint",FJe=!1,qJe={environmentVariableSelector:e=>(0,Wc.booleanSelector)(e,vse,Wc.SelectorType.ENV),configFileSelector:e=>(0,Wc.booleanSelector)(e,_se,Wc.SelectorType.CONFIG),default:!1},Sse="AWS_USE_FIPS_ENDPOINT",Ese="use_fips_endpoint",LJe=!1,UJe={environmentVariableSelector:e=>(0,Wc.booleanSelector)(e,Sse,Wc.SelectorType.ENV),configFileSelector:e=>(0,Wc.booleanSelector)(e,Ese,Wc.SelectorType.CONFIG),default:!1},PI=wo(),jJe=Oo(e=>{let{endpoint:t,urlParser:r}=e;return{...e,tls:e.tls??!0,endpoint:(0,PI.normalizeProvider)(typeof t=="string"?r(t):t),isCustomEndpoint:!0,useDualstackEndpoint:(0,PI.normalizeProvider)(e.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),$Je=Oo(async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let i=await e.useDualstackEndpoint(),o=await e.useFipsEndpoint(),{hostname:a}=await e.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})??{};if(!a)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${a}`)},"getEndpointFromRegion"),kJe=Oo(e=>{let t=(0,PI.normalizeProvider)(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:i}=e;return{...e,tls:e.tls??!0,endpoint:r?(0,PI.normalizeProvider)(typeof r=="string"?i(r):r):()=>$Je({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t}},"resolveEndpointsConfig"),Cse="AWS_REGION",wse="region",GJe={environmentVariableSelector:e=>e[Cse],configFileSelector:e=>e[wse],default:()=>{throw new Error("Region is missing")}},WJe={preferredFile:"credentials"},bse=Oo(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),mse=Oo(e=>bse(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),zJe=Oo(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return mse(t);let n=await t();return mse(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return bse(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig"),gse=Oo((e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>{var n;return(n=e.find(({tags:i})=>t===i.includes("fips")&&r===i.includes("dualstack")))==null?void 0:n.hostname},"getHostnameFromVariants"),HJe=Oo((e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),"getResolvedHostname"),VJe=Oo((e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws","getResolvedPartition"),YJe=Oo((e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let i=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=e.match(i);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion"),KJe=Oo((e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:i,partitionHash:o})=>{var a,u,l,f,h;let p=VJe(e,{partitionHash:o}),g=e in i?e:((a=o[p])==null?void 0:a.endpoint)??e,_={useFipsEndpoint:t,useDualstackEndpoint:r},C=gse((u=i[g])==null?void 0:u.variants,_),D=gse((l=o[p])==null?void 0:l.variants,_),O=HJe(g,{regionHostname:C,partitionHostname:D});if(O===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:g,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let N=YJe(O,{signingRegion:(f=i[g])==null?void 0:f.signingRegion,regionRegex:o[p].regionRegex,useFipsEndpoint:t});return{partition:p,signingService:n,hostname:O,...N&&{signingRegion:N},...((h=i[g])==null?void 0:h.signingService)&&{signingService:i[g].signingService}}},"getRegionInfo")});var _S=w((Rxt,Rse)=>{var MI=Object.defineProperty,XJe=Object.getOwnPropertyDescriptor,JJe=Object.getOwnPropertyNames,QJe=Object.prototype.hasOwnProperty,Ase=s((e,t)=>MI(e,"name",{value:t,configurable:!0}),"__name"),ZJe=s((e,t)=>{for(var r in t)MI(e,r,{get:t[r],enumerable:!0})},"__export"),eQe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of JJe(t))!QJe.call(e,i)&&i!==r&&MI(e,i,{get:()=>t[i],enumerable:!(n=XJe(t,i))||n.enumerable});return e},"__copyProps"),tQe=s(e=>eQe(MI({},"__esModule",{value:!0}),e),"__toCommonJS"),Ise={};ZJe(Ise,{contentLengthMiddleware:()=>V2,contentLengthMiddlewareOptions:()=>Dse,getContentLengthPlugin:()=>nQe});Rse.exports=tQe(Ise);var rQe=Or(),Tse="content-length";function V2(e){return t=>async r=>{let n=r.request;if(rQe.HttpRequest.isInstance(n)){let{body:i,headers:o}=n;if(i&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(Tse)===-1)try{let a=e(i);n.headers={...n.headers,[Tse]:String(a)}}catch{}}return t({...r,request:n})}}s(V2,"contentLengthMiddleware");Ase(V2,"contentLengthMiddleware");var Dse={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},nQe=Ase(e=>({applyToStack:t=>{t.add(V2(e.bodyLengthChecker),Dse)}}),"getContentLengthPlugin")});var gp=w(FI=>{"use strict";Object.defineProperty(FI,"__esModule",{value:!0});FI.getHomeDir=void 0;var iQe=require("os"),sQe=require("path"),Y2={},oQe=s(()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT","getHomeDirCacheKey"),aQe=s(()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${sQe.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let i=oQe();return Y2[i]||(Y2[i]=(0,iQe.homedir)()),Y2[i]},"getHomeDir");FI.getHomeDir=aQe});var K2=w(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});qI.getSSOTokenFilepath=void 0;var uQe=require("crypto"),cQe=require("path"),lQe=gp(),dQe=s(e=>{let r=(0,uQe.createHash)("sha1").update(e).digest("hex");return(0,cQe.join)((0,lQe.getHomeDir)(),".aws","sso","cache",`${r}.json`)},"getSSOTokenFilepath");qI.getSSOTokenFilepath=dQe});var Nse=w(LI=>{"use strict";Object.defineProperty(LI,"__esModule",{value:!0});LI.getSSOTokenFromFile=void 0;var fQe=require("fs"),hQe=K2(),{readFile:pQe}=fQe.promises,mQe=s(async e=>{let t=(0,hQe.getSSOTokenFilepath)(e),r=await pQe(t,"utf8");return JSON.parse(r)},"getSSOTokenFromFile");LI.getSSOTokenFromFile=mQe});var J2=w(UI=>{"use strict";Object.defineProperty(UI,"__esModule",{value:!0});UI.slurpFile=void 0;var gQe=require("fs"),{readFile:yQe}=gQe.promises,X2={},vQe=s((e,t)=>((!X2[e]||t!=null&&t.ignoreCache)&&(X2[e]=yQe(e,"utf8")),X2[e]),"slurpFile");UI.slurpFile=vQe});var zc=w((jxt,ES)=>{var kI=Object.defineProperty,_Qe=Object.getOwnPropertyDescriptor,SQe=Object.getOwnPropertyNames,EQe=Object.prototype.hasOwnProperty,Gs=s((e,t)=>kI(e,"name",{value:t,configurable:!0}),"__name"),CQe=s((e,t)=>{for(var r in t)kI(e,r,{get:t[r],enumerable:!0})},"__export"),Q2=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of SQe(t))!EQe.call(e,i)&&i!==r&&kI(e,i,{get:()=>t[i],enumerable:!(n=_Qe(t,i))||n.enumerable});return e},"__copyProps"),e$=s((e,t,r)=>(Q2(e,t,"default"),r&&Q2(r,t,"default")),"__reExport"),wQe=s(e=>Q2(kI({},"__esModule",{value:!0}),e),"__toCommonJS"),SS={};CQe(SS,{CONFIG_PREFIX_SEPARATOR:()=>Bd,DEFAULT_PROFILE:()=>Mse,ENV_PROFILE:()=>Bse,getProfileName:()=>bQe,loadSharedConfigFiles:()=>qse,loadSsoSessionData:()=>qQe,parseKnownFiles:()=>UQe});ES.exports=wQe(SS);e$(SS,gp(),ES.exports);var Bse="AWS_PROFILE",Mse="default",bQe=Gs(e=>e.profile||process.env[Bse]||Mse,"getProfileName");e$(SS,K2(),ES.exports);e$(SS,Nse(),ES.exports);var jI=ia(),OQe=Gs(e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Bd);return r===-1?!1:Object.values(jI.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let i=r.indexOf(Bd),o=r.substring(0,i)===jI.IniSectionType.PROFILE?r.substring(i+1):r;return t[o]=n,t},{...e.default&&{default:e.default}}),"getConfigData"),$I=require("path"),TQe=gp(),AQe="AWS_CONFIG_FILE",Fse=Gs(()=>process.env[AQe]||(0,$I.join)((0,TQe.getHomeDir)(),".aws","config"),"getConfigFilepath"),IQe=gp(),DQe="AWS_SHARED_CREDENTIALS_FILE",RQe=Gs(()=>process.env[DQe]||(0,$I.join)((0,IQe.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),NQe=gp(),xQe=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,PQe=["__proto__","profile __proto__"],Z2=Gs(e=>{let t={},r,n;for(let i of e.split(/\r?\n/)){let o=i.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let u=o.substring(1,o.length-1),l=xQe.exec(u);if(l){let[,f,,h]=l;Object.values(jI.IniSectionType).includes(f)&&(r=[f,h].join(Bd))}else r=u;if(PQe.includes(u))throw new Error(`Found invalid profile name "${u}"`)}else if(r){let u=o.indexOf("=");if(![0,-1].includes(u)){let[l,f]=[o.substring(0,u).trim(),o.substring(u+1).trim()];if(f==="")n=l;else{n&&i.trimStart()===i&&(n=void 0),t[r]=t[r]||{};let h=n?[n,l].join(Bd):l;t[r][h]=f}}}}return t},"parseIni"),xse=J2(),Pse=Gs(()=>({}),"swallowError"),Bd=".",qse=Gs(async(e={})=>{let{filepath:t=RQe(),configFilepath:r=Fse()}=e,n=(0,NQe.getHomeDir)(),i="~/",o=t;t.startsWith(i)&&(o=(0,$I.join)(n,t.slice(2)));let a=r;r.startsWith(i)&&(a=(0,$I.join)(n,r.slice(2)));let u=await Promise.all([(0,xse.slurpFile)(a,{ignoreCache:e.ignoreCache}).then(Z2).then(OQe).catch(Pse),(0,xse.slurpFile)(o,{ignoreCache:e.ignoreCache}).then(Z2).catch(Pse)]);return{configFile:u[0],credentialsFile:u[1]}},"loadSharedConfigFiles"),BQe=Gs(e=>Object.entries(e).filter(([t])=>t.startsWith(jI.IniSectionType.SSO_SESSION+Bd)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Bd)+1)]:n}),{}),"getSsoSessionData"),MQe=J2(),FQe=Gs(()=>({}),"swallowError"),qQe=Gs(async(e={})=>(0,MQe.slurpFile)(e.configFilepath??Fse()).then(Z2).then(BQe).catch(FQe),"loadSsoSessionData"),LQe=Gs((...e)=>{let t={};for(let r of e)for(let[n,i]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],i):t[n]=i;return t},"mergeConfigFiles"),UQe=Gs(async e=>{let t=await qse(e);return LQe(t.configFile,t.credentialsFile)},"parseKnownFiles")});var Hc=w((kxt,jse)=>{var GI=Object.defineProperty,jQe=Object.getOwnPropertyDescriptor,$Qe=Object.getOwnPropertyNames,kQe=Object.prototype.hasOwnProperty,yp=s((e,t)=>GI(e,"name",{value:t,configurable:!0}),"__name"),GQe=s((e,t)=>{for(var r in t)GI(e,r,{get:t[r],enumerable:!0})},"__export"),WQe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of $Qe(t))!kQe.call(e,i)&&i!==r&&GI(e,i,{get:()=>t[i],enumerable:!(n=jQe(t,i))||n.enumerable});return e},"__copyProps"),zQe=s(e=>WQe(GI({},"__esModule",{value:!0}),e),"__toCommonJS"),Use={};GQe(Use,{loadConfig:()=>XQe});jse.exports=zQe(Use);var CS=xi();function t$(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}s(t$,"getSelectorName");yp(t$,"getSelectorName");var HQe=yp((e,t)=>async()=>{try{let r=e(process.env);if(r===void 0)throw new Error;return r}catch(r){throw new CS.CredentialsProviderError(r.message||`Not found in ENV: ${t$(e.toString())}`,{logger:t})}},"fromEnv"),Lse=zc(),VQe=yp((e,{preferredFile:t="config",...r}={})=>async()=>{let n=(0,Lse.getProfileName)(r),{configFile:i,credentialsFile:o}=await(0,Lse.loadSharedConfigFiles)(r),a=o[n]||{},u=i[n]||{},l=t==="config"?{...a,...u}:{...u,...a};try{let h=e(l,t==="config"?i:o);if(h===void 0)throw new Error;return h}catch(f){throw new CS.CredentialsProviderError(f.message||`Not found in config files w/ profile [${n}]: ${t$(e.toString())}`,{logger:r.logger})}},"fromSharedConfigFiles"),YQe=yp(e=>typeof e=="function","isFunction"),KQe=yp(e=>YQe(e)?async()=>await e():(0,CS.fromStatic)(e),"fromStatic"),XQe=yp(({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>(0,CS.memoize)((0,CS.chain)(HQe(e),VQe(t,n),KQe(r))),"loadConfig")});var Wse=w(WI=>{"use strict";Object.defineProperty(WI,"__esModule",{value:!0});WI.getEndpointUrlConfig=void 0;var $se=zc(),kse="AWS_ENDPOINT_URL",Gse="endpoint_url",JQe=s(e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(o=>o.toUpperCase()),n=t[[kse,...r].join("_")];if(n)return n;let i=t[kse];if(i)return i},configFileSelector:(t,r)=>{if(r&&t.services){let i=r[["services",t.services].join($se.CONFIG_PREFIX_SEPARATOR)];if(i){let o=e.split(" ").map(u=>u.toLowerCase()),a=i[[o.join("_"),Gse].join($se.CONFIG_PREFIX_SEPARATOR)];if(a)return a}}let n=t[Gse];if(n)return n},default:void 0}),"getEndpointUrlConfig");WI.getEndpointUrlConfig=JQe});var r$=w(zI=>{"use strict";Object.defineProperty(zI,"__esModule",{value:!0});zI.getEndpointFromConfig=void 0;var QQe=Hc(),ZQe=Wse(),eZe=s(async e=>(0,QQe.loadConfig)((0,ZQe.getEndpointUrlConfig)(e??""))(),"getEndpointFromConfig");zI.getEndpointFromConfig=eZe});var Yse=w((Yxt,Vse)=>{var HI=Object.defineProperty,tZe=Object.getOwnPropertyDescriptor,rZe=Object.getOwnPropertyNames,nZe=Object.prototype.hasOwnProperty,iZe=s((e,t)=>HI(e,"name",{value:t,configurable:!0}),"__name"),sZe=s((e,t)=>{for(var r in t)HI(e,r,{get:t[r],enumerable:!0})},"__export"),oZe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of rZe(t))!nZe.call(e,i)&&i!==r&&HI(e,i,{get:()=>t[i],enumerable:!(n=tZe(t,i))||n.enumerable});return e},"__copyProps"),aZe=s(e=>oZe(HI({},"__esModule",{value:!0}),e),"__toCommonJS"),zse={};sZe(zse,{parseQueryString:()=>Hse});Vse.exports=aZe(zse);function Hse(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in t?Array.isArray(t[n])?t[n].push(i):t[n]=[t[n],i]:t[n]=i}return t}s(Hse,"parseQueryString");iZe(Hse,"parseQueryString")});var Md=w((Xxt,Jse)=>{var VI=Object.defineProperty,uZe=Object.getOwnPropertyDescriptor,cZe=Object.getOwnPropertyNames,lZe=Object.prototype.hasOwnProperty,dZe=s((e,t)=>VI(e,"name",{value:t,configurable:!0}),"__name"),fZe=s((e,t)=>{for(var r in t)VI(e,r,{get:t[r],enumerable:!0})},"__export"),hZe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of cZe(t))!lZe.call(e,i)&&i!==r&&VI(e,i,{get:()=>t[i],enumerable:!(n=uZe(t,i))||n.enumerable});return e},"__copyProps"),pZe=s(e=>hZe(VI({},"__esModule",{value:!0}),e),"__toCommonJS"),Kse={};fZe(Kse,{parseUrl:()=>Xse});Jse.exports=pZe(Kse);var mZe=Yse(),Xse=dZe(e=>{if(typeof e=="string")return Xse(new URL(e));let{hostname:t,pathname:r,port:n,protocol:i,search:o}=e,a;return o&&(a=(0,mZe.parseQueryString)(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:i,path:r,query:a}},"parseUrl")});var Fd=w((Qxt,ioe)=>{var KI=Object.defineProperty,gZe=Object.getOwnPropertyDescriptor,yZe=Object.getOwnPropertyNames,vZe=Object.prototype.hasOwnProperty,To=s((e,t)=>KI(e,"name",{value:t,configurable:!0}),"__name"),_Ze=s((e,t)=>{for(var r in t)KI(e,r,{get:t[r],enumerable:!0})},"__export"),SZe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of yZe(t))!vZe.call(e,i)&&i!==r&&KI(e,i,{get:()=>t[i],enumerable:!(n=gZe(t,i))||n.enumerable});return e},"__copyProps"),EZe=s(e=>SZe(KI({},"__esModule",{value:!0}),e),"__toCommonJS"),Zse={};_Ze(Zse,{endpointMiddleware:()=>roe,endpointMiddlewareOptions:()=>noe,getEndpointFromInstructions:()=>eoe,getEndpointPlugin:()=>xZe,resolveEndpointConfig:()=>BZe,resolveParams:()=>toe,toEndpointV1:()=>n$});ioe.exports=EZe(Zse);var CZe=To(async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),AZe(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!TZe(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},"resolveParamsForS3"),wZe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,bZe=/(\d+\.){3}\d+/,OZe=/\.\./,TZe=To(e=>wZe.test(e)&&!bZe.test(e)&&!OZe.test(e),"isDnsCompatibleBucketName"),AZe=To(e=>{let[t,r,n,,,i]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,a=!!(o&&r&&n&&i);if(o&&!a)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return a},"isArnBucketName"),IZe=To((e,t,r)=>{let n=To(async()=>{let i=r[e]??r[t];return typeof i=="function"?i():i},"configProvider");return e==="credentialScope"||t==="CredentialScope"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return(i==null?void 0:i.credentialScope)??(i==null?void 0:i.CredentialScope)}:e==="accountId"||t==="AccountId"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return(i==null?void 0:i.accountId)??(i==null?void 0:i.AccountId)}:e==="endpoint"||t==="endpoint"?async()=>{let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:o,hostname:a,port:u,path:l}=i;return`${o}//${a}${u?":"+u:""}${l}`}}return i}:n},"createConfigValueProvider"),DZe=r$(),Qse=Md(),n$=To(e=>typeof e=="object"?"url"in e?(0,Qse.parseUrl)(e.url):e:(0,Qse.parseUrl)(e),"toEndpointV1"),eoe=To(async(e,t,r,n)=>{if(!r.endpoint){let a;r.serviceConfiguredEndpoint?a=await r.serviceConfiguredEndpoint():a=await(0,DZe.getEndpointFromConfig)(r.serviceId),a&&(r.endpoint=()=>Promise.resolve(n$(a)))}let i=await toe(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},"getEndpointFromInstructions"),toe=To(async(e,t,r)=>{var n;let i={},o=((n=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:n.call(t))||{};for(let[a,u]of Object.entries(o))switch(u.type){case"staticContextParams":i[a]=u.value;break;case"contextParams":i[a]=e[u.name];break;case"clientContextParams":case"builtInParams":i[a]=await IZe(u.name,a,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(u))}return Object.keys(o).length===0&&Object.assign(i,r),String(r.serviceId).toLowerCase()==="s3"&&await CZe(i),i},"resolveParams"),RZe=(Ss(),mt(bo)),YI=wo(),roe=To(({config:e,instructions:t})=>(r,n)=>async i=>{var o,a,u;e.endpoint&&(0,RZe.setFeature)(n,"ENDPOINT_OVERRIDE","N");let l=await eoe(i.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=l,n.authSchemes=(o=l.properties)==null?void 0:o.authSchemes;let f=(a=n.authSchemes)==null?void 0:a[0];if(f){n.signing_region=f.signingRegion,n.signing_service=f.signingName;let h=(0,YI.getSmithyContext)(n),p=(u=h==null?void 0:h.selectedHttpAuthScheme)==null?void 0:u.httpAuthOption;p&&(p.signingProperties=Object.assign(p.signingProperties||{},{signing_region:f.signingRegion,signingRegion:f.signingRegion,signing_service:f.signingName,signingName:f.signingName,signingRegionSet:f.signingRegionSet},f.properties))}return r({...i})},"endpointMiddleware"),NZe=wd(),noe={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:NZe.serializerMiddlewareOption.name},xZe=To((e,t)=>({applyToStack:r=>{r.addRelativeTo(roe({config:e,instructions:t}),noe)}}),"getEndpointPlugin"),PZe=r$(),BZe=To(e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>n$(await(0,YI.normalizeProvider)(r)()):void 0,o={...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:(0,YI.normalizeProvider)(e.useDualstackEndpoint??!1),useFipsEndpoint:(0,YI.normalizeProvider)(e.useFipsEndpoint??!1)},a;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!a&&(a=(0,PZe.getEndpointFromConfig)(e.serviceId)),a),o},"resolveEndpointConfig")});function wS(){return XI>JI.length-16&&(soe.default.randomFillSync(JI),XI=0),JI.slice(XI,XI+=16)}var soe,JI,XI,i$=De(()=>{soe=_r(require("crypto")),JI=new Uint8Array(256),XI=JI.length;s(wS,"rng")});var ooe,aoe=De(()=>{ooe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function MZe(e){return typeof e=="string"&&ooe.test(e)}var Vc,bS=De(()=>{aoe();s(MZe,"validate");Vc=MZe});function qd(e,t=0){return Wn[e[t+0]]+Wn[e[t+1]]+Wn[e[t+2]]+Wn[e[t+3]]+"-"+Wn[e[t+4]]+Wn[e[t+5]]+"-"+Wn[e[t+6]]+Wn[e[t+7]]+"-"+Wn[e[t+8]]+Wn[e[t+9]]+"-"+Wn[e[t+10]]+Wn[e[t+11]]+Wn[e[t+12]]+Wn[e[t+13]]+Wn[e[t+14]]+Wn[e[t+15]]}function FZe(e,t=0){let r=qd(e,t);if(!Vc(r))throw TypeError("Stringified UUID is invalid");return r}var Wn,uoe,OS=De(()=>{bS();Wn=[];for(let e=0;e<256;++e)Wn.push((e+256).toString(16).slice(1));s(qd,"unsafeStringify");s(FZe,"stringify");uoe=FZe});function qZe(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||coe,a=e.clockseq!==void 0?e.clockseq:s$;if(o==null||a==null){let g=e.random||(e.rng||wS)();o==null&&(o=coe=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),a==null&&(a=s$=(g[6]<<8|g[7])&16383)}let u=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:a$+1,f=u-o$+(l-a$)/1e4;if(f<0&&e.clockseq===void 0&&(a=a+1&16383),(f<0||u>o$)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o$=u,a$=l,s$=a,u+=122192928e5;let h=((u&268435455)*1e4+l)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=h&255;let p=u/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return t||qd(i)}var coe,s$,o$,a$,loe,doe=De(()=>{i$();OS();o$=0,a$=0;s(qZe,"v1");loe=qZe});function LZe(e){if(!Vc(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var QI,u$=De(()=>{bS();s(LZe,"parse");QI=LZe});function UZe(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function TS(e,t,r){function n(i,o,a,u){var l;if(typeof i=="string"&&(i=UZe(i)),typeof o=="string"&&(o=QI(o)),((l=o)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+i.length);if(f.set(o),f.set(i,o.length),f=r(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,a){u=u||0;for(let h=0;h<16;++h)a[u+h]=f[h];return a}return qd(f)}s(n,"generateUUID");try{n.name=e}catch{}return n.DNS=jZe,n.URL=$Ze,n}var jZe,$Ze,c$=De(()=>{OS();u$();s(UZe,"stringToBytes");jZe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",$Ze="6ba7b811-9dad-11d1-80b4-00c04fd430c8";s(TS,"v35")});function kZe(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),foe.default.createHash("md5").update(e).digest()}var foe,hoe,poe=De(()=>{foe=_r(require("crypto"));s(kZe,"md5");hoe=kZe});var GZe,moe,goe=De(()=>{c$();poe();GZe=TS("v3",48,hoe),moe=GZe});var yoe,l$,voe=De(()=>{yoe=_r(require("crypto")),l$={randomUUID:yoe.default.randomUUID}});function WZe(e,t,r){if(l$.randomUUID&&!t&&!e)return l$.randomUUID();e=e||{};let n=e.random||(e.rng||wS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return qd(n)}var _oe,Soe=De(()=>{voe();i$();OS();s(WZe,"v4");_oe=WZe});function zZe(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Eoe.default.createHash("sha1").update(e).digest()}var Eoe,Coe,woe=De(()=>{Eoe=_r(require("crypto"));s(zZe,"sha1");Coe=zZe});var HZe,boe,Ooe=De(()=>{c$();woe();HZe=TS("v5",80,Coe),boe=HZe});var Toe,Aoe=De(()=>{Toe="00000000-0000-0000-0000-000000000000"});function VZe(e){if(!Vc(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var Ioe,Doe=De(()=>{bS();s(VZe,"version");Ioe=VZe});var Roe={};bf(Roe,{NIL:()=>Toe,parse:()=>QI,stringify:()=>uoe,v1:()=>loe,v3:()=>moe,v4:()=>_oe,v5:()=>boe,validate:()=>Vc,version:()=>Ioe});var Noe=De(()=>{doe();goe();Soe();Ooe();Aoe();Doe();bS();OS();u$()});var d$=w((KPt,Moe)=>{var ZI=Object.defineProperty,YZe=Object.getOwnPropertyDescriptor,KZe=Object.getOwnPropertyNames,XZe=Object.prototype.hasOwnProperty,vp=s((e,t)=>ZI(e,"name",{value:t,configurable:!0}),"__name"),JZe=s((e,t)=>{for(var r in t)ZI(e,r,{get:t[r],enumerable:!0})},"__export"),QZe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of KZe(t))!XZe.call(e,i)&&i!==r&&ZI(e,i,{get:()=>t[i],enumerable:!(n=YZe(t,i))||n.enumerable});return e},"__copyProps"),ZZe=s(e=>QZe(ZI({},"__esModule",{value:!0}),e),"__toCommonJS"),xoe={};JZe(xoe,{isClockSkewCorrectedError:()=>Poe,isClockSkewError:()=>oet,isRetryableByTrait:()=>set,isServerError:()=>uet,isThrottlingError:()=>aet,isTransientError:()=>Boe});Moe.exports=ZZe(xoe);var eet=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],tet=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],ret=["TimeoutError","RequestTimeout","RequestTimeoutException"],net=[500,502,503,504],iet=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],set=vp(e=>e.$retryable!==void 0,"isRetryableByTrait"),oet=vp(e=>eet.includes(e.name),"isClockSkewError"),Poe=vp(e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},"isClockSkewCorrectedError"),aet=vp(e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||tet.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),Boe=vp(e=>{var t;return Poe(e)||ret.includes(e.name)||iet.includes((e==null?void 0:e.code)||"")||net.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},"isTransientError"),uet=vp(e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Boe(e)}return!1},"isServerError")});var _p=w((JPt,Yoe)=>{var eD=Object.defineProperty,cet=Object.getOwnPropertyDescriptor,det=Object.getOwnPropertyNames,fet=Object.prototype.hasOwnProperty,Ao=s((e,t)=>eD(e,"name",{value:t,configurable:!0}),"__name"),het=s((e,t)=>{for(var r in t)eD(e,r,{get:t[r],enumerable:!0})},"__export"),pet=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of det(t))!fet.call(e,i)&&i!==r&&eD(e,i,{get:()=>t[i],enumerable:!(n=cet(t,i))||n.enumerable});return e},"__copyProps"),met=s(e=>pet(eD({},"__esModule",{value:!0}),e),"__toCommonJS"),qoe={};het(qoe,{AdaptiveRetryStrategy:()=>Cet,ConfiguredRetryStrategy:()=>wet,DEFAULT_MAX_ATTEMPTS:()=>f$,DEFAULT_RETRY_DELAY_BASE:()=>AS,DEFAULT_RETRY_MODE:()=>get,DefaultRateLimiter:()=>joe,INITIAL_RETRY_TOKENS:()=>h$,INVOCATION_ID_HEADER:()=>vet,MAXIMUM_RETRY_DELAY:()=>p$,NO_RETRY_INCREMENT:()=>Woe,REQUEST_HEADER:()=>_et,RETRY_COST:()=>koe,RETRY_MODES:()=>Loe,StandardRetryStrategy:()=>m$,THROTTLING_RETRY_DELAY_BASE:()=>$oe,TIMEOUT_RETRY_COST:()=>Goe});Yoe.exports=met(qoe);var Loe=(e=>(e.STANDARD="standard",e.ADAPTIVE="adaptive",e))(Loe||{}),f$=3,get="standard",yet=d$(),IS,Uoe=(IS=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),(0,yet.isThrottlingError)(t)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},s(IS,"_DefaultRateLimiter"),IS);Ao(Uoe,"DefaultRateLimiter");var joe=Uoe,AS=100,p$=20*1e3,$oe=500,h$=500,koe=5,Goe=10,Woe=1,vet="amz-sdk-invocation-id",_et="amz-sdk-request",Eet=Ao(()=>{let e=AS;return{computeNextBackoffDelay:Ao(n=>Math.floor(Math.min(p$,Math.random()*2**n*e)),"computeNextBackoffDelay"),setDelayBase:Ao(n=>{e=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),Foe=Ao(({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:Ao(()=>t,"getRetryCount"),getRetryDelay:Ao(()=>Math.min(p$,e),"getRetryDelay"),getRetryCost:Ao(()=>r,"getRetryCost")}),"createDefaultRetryToken"),DS,zoe=(DS=class{constructor(t){this.maxAttempts=t,this.mode="standard",this.capacity=h$,this.retryBackoffStrategy=Eet(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Foe({retryDelay:AS,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let i=r.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?$oe:AS);let o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),a=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,u=this.getCapacityCost(i);return this.capacity-=u,Foe({retryDelay:a,retryCount:t.getRetryCount()+1,retryCost:u})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(h$,this.capacity+(t.getRetryCost()??Woe))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${f$}`),f$}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Goe:koe}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},s(DS,"_StandardRetryStrategy"),DS);Ao(zoe,"StandardRetryStrategy");var m$=zoe,RS,Hoe=(RS=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode="adaptive";let{rateLimiter:n}=r??{};this.rateLimiter=n??new joe,this.standardRetryStrategy=new m$(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},s(RS,"_AdaptiveRetryStrategy"),RS);Ao(Hoe,"AdaptiveRetryStrategy");var Cet=Hoe,NS,Voe=(NS=class extends m${constructor(t,r=AS){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}},s(NS,"_ConfiguredRetryStrategy"),NS);Ao(Voe,"ConfiguredRetryStrategy");var wet=Voe});var Koe=w(tD=>{"use strict";Object.defineProperty(tD,"__esModule",{value:!0});tD.isStreamingPayload=void 0;var bet=require("stream"),Oet=s(e=>(e==null?void 0:e.body)instanceof bet.Readable||typeof ReadableStream<"u"&&(e==null?void 0:e.body)instanceof ReadableStream,"isStreamingPayload");tD.isStreamingPayload=Oet});var yu=w((tBt,fae)=>{var rD=Object.defineProperty,Tet=Object.getOwnPropertyDescriptor,Aet=Object.getOwnPropertyNames,Iet=Object.prototype.hasOwnProperty,cn=s((e,t)=>rD(e,"name",{value:t,configurable:!0}),"__name"),Det=s((e,t)=>{for(var r in t)rD(e,r,{get:t[r],enumerable:!0})},"__export"),Ret=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Aet(t))!Iet.call(e,i)&&i!==r&&rD(e,i,{get:()=>t[i],enumerable:!(n=Tet(t,i))||n.enumerable});return e},"__copyProps"),Net=s(e=>Ret(rD({},"__esModule",{value:!0}),e),"__toCommonJS"),Joe={};Det(Joe,{AdaptiveRetryStrategy:()=>Bet,CONFIG_MAX_ATTEMPTS:()=>y$,CONFIG_RETRY_MODE:()=>oae,ENV_MAX_ATTEMPTS:()=>g$,ENV_RETRY_MODE:()=>sae,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>Met,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>qet,StandardRetryStrategy:()=>nae,defaultDelayDecider:()=>Zoe,defaultRetryDecider:()=>eae,getOmitRetryHeadersPlugin:()=>Let,getRetryAfterHint:()=>dae,getRetryPlugin:()=>Wet,omitRetryHeadersMiddleware:()=>aae,omitRetryHeadersMiddlewareOptions:()=>uae,resolveRetryConfig:()=>Fet,retryMiddleware:()=>cae,retryMiddlewareOptions:()=>lae});fae.exports=Net(Joe);var Sp=Or(),Qoe=(Noe(),mt(Roe)),qr=_p(),xet=cn((e,t)=>{let r=e,n=(t==null?void 0:t.noRetryIncrement)??qr.NO_RETRY_INCREMENT,i=(t==null?void 0:t.retryCost)??qr.RETRY_COST,o=(t==null?void 0:t.timeoutRetryCost)??qr.TIMEOUT_RETRY_COST,a=e,u=cn(p=>p.name==="TimeoutError"?o:i,"getCapacityAmount"),l=cn(p=>u(p)<=a,"hasRetryTokens");return Object.freeze({hasRetryTokens:l,retrieveRetryTokens:cn(p=>{if(!l(p))throw new Error("No retry token available");let g=u(p);return a-=g,g},"retrieveRetryTokens"),releaseRetryTokens:cn(p=>{a+=p??n,a=Math.min(a,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),Zoe=cn((e,t)=>Math.floor(Math.min(qr.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),"defaultDelayDecider"),Yc=d$(),eae=cn(e=>e?(0,Yc.isRetryableByTrait)(e)||(0,Yc.isClockSkewError)(e)||(0,Yc.isThrottlingError)(e)||(0,Yc.isTransientError)(e):!1,"defaultRetryDecider"),tae=cn(e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),"asSdkError"),xS,rae=(xS=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=qr.RETRY_MODES.STANDARD,this.retryDecider=(r==null?void 0:r.retryDecider)??eae,this.delayDecider=(r==null?void 0:r.delayDecider)??Zoe,this.retryQuota=(r==null?void 0:r.retryQuota)??xet(qr.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=qr.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let i,o=0,a=0,u=await this.getMaxAttempts(),{request:l}=r;for(Sp.HttpRequest.isInstance(l)&&(l.headers[qr.INVOCATION_ID_HEADER]=(0,Qoe.v4)());;)try{Sp.HttpRequest.isInstance(l)&&(l.headers[qr.REQUEST_HEADER]=`attempt=${o+1}; max=${u}`),n!=null&&n.beforeRequest&&await n.beforeRequest();let{response:f,output:h}=await t(r);return n!=null&&n.afterRequest&&n.afterRequest(f),this.retryQuota.releaseRetryTokens(i),h.$metadata.attempts=o+1,h.$metadata.totalRetryDelay=a,{response:f,output:h}}catch(f){let h=tae(f);if(o++,this.shouldRetry(h,o,u)){i=this.retryQuota.retrieveRetryTokens(h);let p=this.delayDecider((0,Yc.isThrottlingError)(h)?qr.THROTTLING_RETRY_DELAY_BASE:qr.DEFAULT_RETRY_DELAY_BASE,o),g=Pet(h.$response),_=Math.max(g||0,p);a+=_,await new Promise(C=>setTimeout(C,_));continue}throw h.$metadata||(h.$metadata={}),h.$metadata.attempts=o,h.$metadata.totalRetryDelay=a,h}}},s(xS,"_StandardRetryStrategy"),xS);cn(rae,"StandardRetryStrategy");var nae=rae,Pet=cn(e=>{if(!Sp.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),PS,iae=(PS=class extends nae{constructor(t,r){let{rateLimiter:n,...i}=r??{};super(t,i),this.rateLimiter=n??new qr.DefaultRateLimiter,this.mode=qr.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},s(PS,"_AdaptiveRetryStrategy"),PS);cn(iae,"AdaptiveRetryStrategy");var Bet=iae,Xoe=wo(),g$="AWS_MAX_ATTEMPTS",y$="max_attempts",Met={environmentVariableSelector:e=>{let t=e[g$];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${g$} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[y$];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${y$} mast be a number, got "${t}"`);return r},default:qr.DEFAULT_MAX_ATTEMPTS},Fet=cn(e=>{let{retryStrategy:t}=e,r=(0,Xoe.normalizeProvider)(e.maxAttempts??qr.DEFAULT_MAX_ATTEMPTS);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await(0,Xoe.normalizeProvider)(e.retryMode)()===qr.RETRY_MODES.ADAPTIVE?new qr.AdaptiveRetryStrategy(r):new qr.StandardRetryStrategy(r))}},"resolveRetryConfig"),sae="AWS_RETRY_MODE",oae="retry_mode",qet={environmentVariableSelector:e=>e[sae],configFileSelector:e=>e[oae],default:qr.DEFAULT_RETRY_MODE},aae=cn(()=>e=>async t=>{let{request:r}=t;return Sp.HttpRequest.isInstance(r)&&(delete r.headers[qr.INVOCATION_ID_HEADER],delete r.headers[qr.REQUEST_HEADER]),e(t)},"omitRetryHeadersMiddleware"),uae={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},Let=cn(e=>({applyToStack:t=>{t.addRelativeTo(aae(),uae)}}),"getOmitRetryHeadersPlugin"),Uet=Tr(),jet=Koe(),cae=cn(e=>(t,r)=>async n=>{var i;let o=await e.retryStrategy(),a=await e.maxAttempts();if($et(o)){o=o;let u=await o.acquireInitialRetryToken(r.partition_id),l=new Error,f=0,h=0,{request:p}=n,g=Sp.HttpRequest.isInstance(p);for(g&&(p.headers[qr.INVOCATION_ID_HEADER]=(0,Qoe.v4)());;)try{g&&(p.headers[qr.REQUEST_HEADER]=`attempt=${f+1}; max=${a}`);let{response:_,output:C}=await t(n);return o.recordSuccess(u),C.$metadata.attempts=f+1,C.$metadata.totalRetryDelay=h,{response:_,output:C}}catch(_){let C=ket(_);if(l=tae(_),g&&(0,jet.isStreamingPayload)(p))throw(i=r.logger instanceof Uet.NoOpLogger?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),l;try{u=await o.refreshRetryTokenForRetry(u,C)}catch{throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=f+1,l.$metadata.totalRetryDelay=h,l}f=u.getRetryCount();let D=u.getRetryDelay();h+=D,await new Promise(O=>setTimeout(O,D))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},"retryMiddleware"),$et=cn(e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u","isRetryStrategyV2"),ket=cn(e=>{let t={error:e,errorType:Get(e)},r=dae(e.$response);return r&&(t.retryAfterHint=r),t},"getRetryErrorInfo"),Get=cn(e=>(0,Yc.isThrottlingError)(e)?"THROTTLING":(0,Yc.isTransientError)(e)?"TRANSIENT":(0,Yc.isServerError)(e)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),lae={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Wet=cn(e=>({applyToStack:t=>{t.add(cae(e),lae)}}),"getRetryPlugin"),dae=cn(e=>{if(!Sp.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var v$=w(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.resolveHttpAuthSchemeConfig=Kc.defaultDocDBHttpAuthSchemeProvider=Kc.defaultDocDBHttpAuthSchemeParametersProvider=void 0;var zet=(bn(),mt(wn)),hae=wo(),Het=s(async(e,t,r)=>({operation:(0,hae.getSmithyContext)(t).operation,region:await(0,hae.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultDocDBHttpAuthSchemeParametersProvider");Kc.defaultDocDBHttpAuthSchemeParametersProvider=Het;function Vet(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"rds",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}s(Vet,"createAwsAuthSigv4HttpAuthOption");var Yet=s(e=>{let t=[];switch(e.operation){default:t.push(Vet(e))}return t},"defaultDocDBHttpAuthSchemeProvider");Kc.defaultDocDBHttpAuthSchemeProvider=Yet;var Ket=s(e=>({...(0,zet.resolveAwsSdkSigV4Config)(e)}),"resolveHttpAuthSchemeConfig");Kc.resolveHttpAuthSchemeConfig=Ket});var Cp={};bf(Cp,{__addDisposableResource:()=>Bae,__assign:()=>nD,__asyncDelegator:()=>Tae,__asyncGenerator:()=>Oae,__asyncValues:()=>Aae,__await:()=>Ep,__awaiter:()=>_ae,__classPrivateFieldGet:()=>Nae,__classPrivateFieldIn:()=>Pae,__classPrivateFieldSet:()=>xae,__createBinding:()=>sD,__decorate:()=>gae,__disposeResources:()=>Mae,__esDecorate:()=>Xet,__exportStar:()=>Eae,__extends:()=>pae,__generator:()=>Sae,__importDefault:()=>Rae,__importStar:()=>Dae,__makeTemplateObject:()=>Iae,__metadata:()=>vae,__param:()=>yae,__propKey:()=>Qet,__read:()=>S$,__rest:()=>mae,__runInitializers:()=>Jet,__setFunctionName:()=>Zet,__spread:()=>Cae,__spreadArray:()=>bae,__spreadArrays:()=>wae,__values:()=>iD,default:()=>rtt});function pae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_$(e,t);function r(){this.constructor=e}s(r,"__"),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function mae(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function gae(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}function yae(e,t){return function(r,n){t(r,n,e)}}function Xet(e,t,r,n,i,o){function a(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}s(a,"accept");for(var u=n.kind,l=u==="getter"?"get":u==="setter"?"set":"value",f=!t&&e?n.static?e:e.prototype:null,h=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),p,g=!1,_=r.length-1;_>=0;_--){var C={};for(var D in n)C[D]=D==="access"?{}:n[D];for(var D in n.access)C.access[D]=n.access[D];C.addInitializer=function(N){if(g)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(N||null))};var O=(0,r[_])(u==="accessor"?{get:h.get,set:h.set}:h[l],C);if(u==="accessor"){if(O===void 0)continue;if(O===null||typeof O!="object")throw new TypeError("Object expected");(p=a(O.get))&&(h.get=p),(p=a(O.set))&&(h.set=p),(p=a(O.init))&&i.unshift(p)}else(p=a(O))&&(u==="field"?i.unshift(p):h[l]=p)}f&&Object.defineProperty(f,n.name,h),g=!0}function Jet(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function Qet(e){return typeof e=="symbol"?e:"".concat(e)}function Zet(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function vae(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function _ae(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return s(i,"adopt"),new(r||(r=Promise))(function(o,a){function u(h){try{f(n.next(h))}catch(p){a(p)}}s(u,"fulfilled");function l(h){try{f(n.throw(h))}catch(p){a(p)}}s(l,"rejected");function f(h){h.done?o(h.value):i(h.value).then(u,l)}s(f,"step"),f((n=n.apply(e,t||[])).next())})}function Sae(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(h){return l([f,h])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Eae(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sD(t,e,r)}function iD(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S$(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function Cae(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S$(arguments[t]));return e}function wae(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,u=o.length;a<u;a++,i++)n[i]=o[a];return n}function bae(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function Ep(e){return this instanceof Ep?(this.v=e,this):new Ep(e)}function Oae(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(_){return function(C){return Promise.resolve(C).then(_,p)}}function u(_,C){n[_]&&(i[_]=function(D){return new Promise(function(O,N){o.push([_,D,O,N])>1||l(_,D)})},C&&(i[_]=C(i[_])))}function l(_,C){try{f(n[_](C))}catch(D){g(o[0][3],D)}}function f(_){_.value instanceof Ep?Promise.resolve(_.value.v).then(h,p):g(o[0][2],_)}function h(_){l("next",_)}function p(_){l("throw",_)}function g(_,C){_(C),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Tae(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,o){t[i]=e[i]?function(a){return(r=!r)?{value:Ep(e[i](a)),done:!1}:o?o(a):a}:o}}function Aae(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof iD=="function"?iD(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(u,l){a=e[o](a),i(u,l,a.done,a.value)})}}function i(o,a,u,l){Promise.resolve(l).then(function(f){o({value:f,done:u})},a)}}function Iae(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Dae(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&sD(t,e,r);return ett(t,e),t}function Rae(e){return e&&e.__esModule?e:{default:e}}function Nae(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function xae(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function Pae(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Bae(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=s(function(){try{i.call(this)}catch(o){return Promise.reject(o)}},"dispose")),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function Mae(e){function t(n){e.error=e.hasError?new ttt(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}s(t,"fail");function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(o){return t(o),r()})}catch(o){t(o)}}if(e.hasError)throw e.error}return s(r,"next"),r()}var _$,nD,sD,ett,ttt,rtt,wp=De(()=>{_$=s(function(e,t){return _$=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_$(e,t)},"extendStatics");s(pae,"__extends");nD=s(function(){return nD=Object.assign||s(function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},"__assign"),nD.apply(this,arguments)},"__assign");s(mae,"__rest");s(gae,"__decorate");s(yae,"__param");s(Xet,"__esDecorate");s(Jet,"__runInitializers");s(Qet,"__propKey");s(Zet,"__setFunctionName");s(vae,"__metadata");s(_ae,"__awaiter");s(Sae,"__generator");sD=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};s(Eae,"__exportStar");s(iD,"__values");s(S$,"__read");s(Cae,"__spread");s(wae,"__spreadArrays");s(bae,"__spreadArray");s(Ep,"__await");s(Oae,"__asyncGenerator");s(Tae,"__asyncDelegator");s(Aae,"__asyncValues");s(Iae,"__makeTemplateObject");ett=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};s(Dae,"__importStar");s(Rae,"__importDefault");s(Nae,"__classPrivateFieldGet");s(xae,"__classPrivateFieldSet");s(Pae,"__classPrivateFieldIn");s(Bae,"__addDisposableResource");ttt=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};s(Mae,"__disposeResources");rtt={__extends:pae,__assign:nD,__rest:mae,__decorate:gae,__param:yae,__metadata:vae,__awaiter:_ae,__generator:Sae,__createBinding:sD,__exportStar:Eae,__values:iD,__read:S$,__spread:Cae,__spreadArrays:wae,__spreadArray:bae,__await:Ep,__asyncGenerator:Oae,__asyncDelegator:Tae,__asyncValues:Aae,__makeTemplateObject:Iae,__importStar:Dae,__importDefault:Rae,__classPrivateFieldGet:Nae,__classPrivateFieldSet:xae,__classPrivateFieldIn:Pae,__addDisposableResource:Bae,__disposeResources:Mae}});var Fae=w((oBt,ntt)=>{ntt.exports={name:"@aws-sdk/client-docdb",description:"AWS SDK for JavaScript Docdb Client for Node.js, Browser and React Native",version:"3.687.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-docdb","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo docdb"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.687.0","@aws-sdk/client-sts":"3.687.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.687.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-sdk-rds":"3.686.0","@aws-sdk/middleware-user-agent":"3.687.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.687.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0","@smithy/util-waiter":"^3.1.7",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-docdb",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-docdb"}}});var E$=w((aBt,Wae)=>{"use strict";var oD=Object.defineProperty,itt=Object.getOwnPropertyDescriptor,stt=Object.getOwnPropertyNames,ott=Object.prototype.hasOwnProperty,att=s((e,t)=>oD(e,"name",{value:t,configurable:!0}),"__name"),utt=s((e,t)=>{for(var r in t)oD(e,r,{get:t[r],enumerable:!0})},"__export"),ctt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of stt(t))!ott.call(e,i)&&i!==r&&oD(e,i,{get:()=>t[i],enumerable:!(n=itt(t,i))||n.enumerable});return e},"__copyProps"),ltt=s(e=>ctt(oD({},"__esModule",{value:!0}),e),"__toCommonJS"),qae={};utt(qae,{ENV_ACCOUNT_ID:()=>Gae,ENV_CREDENTIAL_SCOPE:()=>kae,ENV_EXPIRATION:()=>$ae,ENV_KEY:()=>Lae,ENV_SECRET:()=>Uae,ENV_SESSION:()=>jae,fromEnv:()=>htt});Wae.exports=ltt(qae);var dtt=(sa(),mt(Uc)),ftt=xi(),Lae="AWS_ACCESS_KEY_ID",Uae="AWS_SECRET_ACCESS_KEY",jae="AWS_SESSION_TOKEN",$ae="AWS_CREDENTIAL_EXPIRATION",kae="AWS_CREDENTIAL_SCOPE",Gae="AWS_ACCOUNT_ID",htt=att(e=>async()=>{var t;(t=e==null?void 0:e.logger)==null||t.debug("@aws-sdk/credential-provider-env - fromEnv");let r=process.env[Lae],n=process.env[Uae],i=process.env[jae],o=process.env[$ae],a=process.env[kae],u=process.env[Gae];if(r&&n){let l={accessKeyId:r,secretAccessKey:n,...i&&{sessionToken:i},...o&&{expiration:new Date(o)},...a&&{credentialScope:a},...u&&{accountId:u}};return(0,dtt.setCredentialFeature)(l,"CREDENTIALS_ENV_VARS","g"),l}throw new ftt.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e==null?void 0:e.logger})},"fromEnv")});var BS=w((cBt,iue)=>{var cD=Object.defineProperty,ptt=Object.getOwnPropertyDescriptor,mtt=Object.getOwnPropertyNames,gtt=Object.prototype.hasOwnProperty,ln=s((e,t)=>cD(e,"name",{value:t,configurable:!0}),"__name"),ytt=s((e,t)=>{for(var r in t)cD(e,r,{get:t[r],enumerable:!0})},"__export"),vtt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of mtt(t))!gtt.call(e,i)&&i!==r&&cD(e,i,{get:()=>t[i],enumerable:!(n=ptt(t,i))||n.enumerable});return e},"__copyProps"),_tt=s(e=>vtt(cD({},"__esModule",{value:!0}),e),"__toCommonJS"),Yae={};ytt(Yae,{DEFAULT_MAX_RETRIES:()=>Qae,DEFAULT_TIMEOUT:()=>Jae,ENV_CMDS_AUTH_TOKEN:()=>b$,ENV_CMDS_FULL_URI:()=>aD,ENV_CMDS_RELATIVE_URI:()=>uD,Endpoint:()=>eue,fromContainerMetadata:()=>wtt,fromInstanceMetadata:()=>Wtt,getInstanceMetadataEndpoint:()=>rue,httpRequest:()=>Op,providerConfigFromInit:()=>O$});iue.exports=_tt(Yae);var Stt=require("url"),ca=xi(),Ett=require("buffer"),Ctt=require("http");function Op(e){return new Promise((t,r)=>{var n;let i=(0,Ctt.request)({method:"GET",...e,hostname:(n=e.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});i.on("error",o=>{r(Object.assign(new ca.ProviderError("Unable to connect to instance metadata service"),o)),i.destroy()}),i.on("timeout",()=>{r(new ca.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",o=>{let{statusCode:a=400}=o;(a<200||300<=a)&&(r(Object.assign(new ca.ProviderError("Error response received from instance metadata service"),{statusCode:a})),i.destroy());let u=[];o.on("data",l=>{u.push(l)}),o.on("end",()=>{t(Ett.Buffer.concat(u)),i.destroy()})}),i.end()})}s(Op,"httpRequest");ln(Op,"httpRequest");var Kae=ln(e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string","isImdsCredentials"),Xae=ln(e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),"fromImdsCredentials"),Jae=1e3,Qae=0,O$=ln(({maxRetries:e=Qae,timeout:t=Jae})=>({maxRetries:e,timeout:t}),"providerConfigFromInit"),w$=ln((e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},"retry"),aD="AWS_CONTAINER_CREDENTIALS_FULL_URI",uD="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",b$="AWS_CONTAINER_AUTHORIZATION_TOKEN",wtt=ln((e={})=>{let{timeout:t,maxRetries:r}=O$(e);return()=>w$(async()=>{let n=await Itt({logger:e.logger}),i=JSON.parse(await btt(t,n));if(!Kae(i))throw new ca.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return Xae(i)},r)},"fromContainerMetadata"),btt=ln(async(e,t)=>(process.env[b$]&&(t.headers={...t.headers,Authorization:process.env[b$]}),(await Op({...t,timeout:e})).toString()),"requestFromEcsImds"),Ott="169.254.170.2",Ttt={localhost:!0,"127.0.0.1":!0},Att={"http:":!0,"https:":!0},Itt=ln(async({logger:e})=>{if(process.env[uD])return{hostname:Ott,path:process.env[uD]};if(process.env[aD]){let t=(0,Stt.parse)(process.env[aD]);if(!t.hostname||!(t.hostname in Ttt))throw new ca.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in Att))throw new ca.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new ca.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${uD} or ${aD} environment variable is set`,{tryNextLink:!1,logger:e})},"getCmdsUri"),bp,Zae=(bp=class extends ca.CredentialsProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,bp.prototype)}},s(bp,"_InstanceMetadataV1FallbackError"),bp);ln(Zae,"InstanceMetadataV1FallbackError");var Dtt=Zae,T$=Hc(),Rtt=Md(),eue=(e=>(e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]",e))(eue||{}),Ntt="AWS_EC2_METADATA_SERVICE_ENDPOINT",xtt="ec2_metadata_service_endpoint",Ptt={environmentVariableSelector:e=>e[Ntt],configFileSelector:e=>e[xtt],default:void 0},tue=(e=>(e.IPv4="IPv4",e.IPv6="IPv6",e))(tue||{}),Btt="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Mtt="ec2_metadata_service_endpoint_mode",Ftt={environmentVariableSelector:e=>e[Btt],configFileSelector:e=>e[Mtt],default:"IPv4"},rue=ln(async()=>(0,Rtt.parseUrl)(await qtt()||await Ltt()),"getInstanceMetadataEndpoint"),qtt=ln(async()=>(0,T$.loadConfig)(Ptt)(),"getFromEndpointConfig"),Ltt=ln(async()=>{let e=await(0,T$.loadConfig)(Ftt)();switch(e){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(tue)}`)}},"getFromEndpointModeConfig"),Utt=5*60,jtt=5*60,$tt="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",zae=ln((e,t)=>{let r=Utt+Math.floor(Math.random()*jtt),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+$tt);let i=e.originalExpiration??e.expiration;return{...e,...i?{originalExpiration:i}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),ktt=ln((e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let i;try{i=await e(),i.expiration&&i.expiration.getTime()<Date.now()&&(i=zae(i,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),i=zae(n,r);else throw o}return n=i,i}},"staticStabilityProvider"),nue="/latest/meta-data/iam/security-credentials/",Gtt="/latest/api/token",C$="AWS_EC2_METADATA_V1_DISABLED",Hae="ec2_metadata_v1_disabled",Vae="x-aws-ec2-metadata-token",Wtt=ln((e={})=>ktt(ztt(e),{logger:e.logger}),"fromInstanceMetadata"),ztt=ln((e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:i,maxRetries:o}=O$(e),a=ln(async(u,l)=>{var f;if(t||((f=l.headers)==null?void 0:f[Vae])==null){let g=!1,_=!1,C=await(0,T$.loadConfig)({environmentVariableSelector:D=>{let O=D[C$];if(_=!!O&&O!=="false",O===void 0)throw new ca.CredentialsProviderError(`${C$} not set in env, checking config file next.`,{logger:e.logger});return _},configFileSelector:D=>{let O=D[Hae];return g=!!O&&O!=="false",g},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||C){let D=[];throw e.ec2MetadataV1Disabled&&D.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),g&&D.push(`config file profile (${Hae})`),_&&D.push(`process environment variable (${C$})`),new Dtt(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${D.join(", ")}].`)}}let p=(await w$(async()=>{let g;try{g=await Vtt(l)}catch(_){throw _.statusCode===401&&(t=!1),_}return g},u)).trim();return w$(async()=>{let g;try{g=await Ytt(p,l,e)}catch(_){throw _.statusCode===401&&(t=!1),_}return g},u)},"getCredentials");return async()=>{let u=await rue();if(t)return r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),a(o,{...u,timeout:i});{let l;try{l=(await Htt({...u,timeout:i})).toString()}catch(f){if((f==null?void 0:f.statusCode)===400)throw Object.assign(f,{message:"EC2 Metadata token request returned error"});return(f.message==="TimeoutError"||[403,404,405].includes(f.statusCode))&&(t=!0),r==null||r.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),a(o,{...u,timeout:i})}return a(o,{...u,headers:{[Vae]:l},timeout:i})}}},"getInstanceMetadataProvider"),Htt=ln(async e=>Op({...e,path:Gtt,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),Vtt=ln(async e=>(await Op({...e,path:nue})).toString(),"getProfile"),Ytt=ln(async(e,t,r)=>{let n=JSON.parse((await Op({...t,path:nue+e})).toString());if(!Kae(n))throw new ca.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return Xae(n)},"getCredentialsFromProfile")});var sue=w(lD=>{"use strict";Object.defineProperty(lD,"__esModule",{value:!0});lD.checkUrl=void 0;var Ktt=xi(),Xtt="169.254.170.2",Jtt="169.254.170.23",Qtt="[fd00:ec2::23]",Ztt=s((e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===Xtt||e.hostname===Jtt||e.hostname===Qtt)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=s(i=>{let o=parseInt(i,10);return 0<=o&&o<=255},"inRange");if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new Ktt.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}},"checkUrl");lD.checkUrl=Ztt});var oue=w(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.getCredentials=Tp.createGetRequest=void 0;var A$=xi(),ert=Or(),trt=Tr(),rrt=qj();function nrt(e){return new ert.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}s(nrt,"createGetRequest");Tp.createGetRequest=nrt;async function irt(e,t){let n=await(0,rrt.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let i=JSON.parse(n);if(typeof i.AccessKeyId!="string"||typeof i.SecretAccessKey!="string"||typeof i.Token!="string"||typeof i.Expiration!="string")throw new A$.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.Token,expiration:(0,trt.parseRfc3339DateTime)(i.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let i={};try{i=JSON.parse(n)}catch{}throw Object.assign(new A$.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:i.Code,Message:i.Message})}throw new A$.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}s(irt,"getCredentials");Tp.getCredentials=irt});var aue=w(dD=>{"use strict";Object.defineProperty(dD,"__esModule",{value:!0});dD.retryWrapper=void 0;var srt=s((e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(o=>setTimeout(o,r))}return await e()},"retryWrapper");dD.retryWrapper=srt});var lue=w(fD=>{"use strict";Object.defineProperty(fD,"__esModule",{value:!0});fD.fromHttp=void 0;var ort=(wp(),mt(Cp)),art=(sa(),mt(Uc)),urt=Od(),uue=xi(),crt=ort.__importDefault(require("fs/promises")),lrt=sue(),cue=oue(),drt=aue(),frt="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",hrt="http://169.254.170.2",prt="AWS_CONTAINER_CREDENTIALS_FULL_URI",mrt="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",grt="AWS_CONTAINER_AUTHORIZATION_TOKEN",yrt=s((e={})=>{var f,h,p;(f=e.logger)==null||f.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[frt],n=e.awsContainerCredentialsFullUri??process.env[prt],i=e.awsContainerAuthorizationToken??process.env[grt],o=e.awsContainerAuthorizationTokenFile??process.env[mrt],a=((p=(h=e.logger)==null?void 0:h.constructor)==null?void 0:p.name)==="NoOpLogger"||!e.logger?console.warn:e.logger.warn;if(r&&n&&(a("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),a("awsContainerCredentialsFullUri will take precedence.")),i&&o&&(a("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),a("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${hrt}${r}`;else throw new uue.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let u=new URL(t);(0,lrt.checkUrl)(u,e.logger);let l=new urt.NodeHttpHandler({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,drt.retryWrapper)(async()=>{let g=(0,cue.createGetRequest)(u);i?g.headers.Authorization=i:o&&(g.headers.Authorization=(await crt.default.readFile(o)).toString());try{let _=await l.handle(g);return(0,cue.getCredentials)(_.response).then(C=>(0,art.setCredentialFeature)(C,"CREDENTIALS_HTTP","z"))}catch(_){throw new uue.CredentialsProviderError(String(_),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)},"fromHttp");fD.fromHttp=yrt});var I$=w(hD=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});hD.fromHttp=void 0;var vrt=lue();Object.defineProperty(hD,"fromHttp",{enumerable:!0,get:function(){return vrt.fromHttp}})});var D$=w(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.resolveHttpAuthSchemeConfig=Xc.defaultSSOHttpAuthSchemeProvider=Xc.defaultSSOHttpAuthSchemeParametersProvider=void 0;var _rt=(bn(),mt(wn)),due=wo(),Srt=s(async(e,t,r)=>({operation:(0,due.getSmithyContext)(t).operation,region:await(0,due.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultSSOHttpAuthSchemeParametersProvider");Xc.defaultSSOHttpAuthSchemeParametersProvider=Srt;function Ert(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}s(Ert,"createAwsAuthSigv4HttpAuthOption");function pD(e){return{schemeId:"smithy.api#noAuth"}}s(pD,"createSmithyApiNoAuthHttpAuthOption");var Crt=s(e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(pD(e));break}case"ListAccountRoles":{t.push(pD(e));break}case"ListAccounts":{t.push(pD(e));break}case"Logout":{t.push(pD(e));break}default:t.push(Ert(e))}return t},"defaultSSOHttpAuthSchemeProvider");Xc.defaultSSOHttpAuthSchemeProvider=Crt;var wrt=s(e=>({...(0,_rt.resolveAwsSdkSigV4Config)(e)}),"resolveHttpAuthSchemeConfig");Xc.resolveHttpAuthSchemeConfig=wrt});var fue=w((CBt,brt)=>{brt.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.687.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.686.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.687.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.687.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var MS=w((wBt,Sue)=>{"use strict";var mD=Object.defineProperty,Ort=Object.getOwnPropertyDescriptor,Trt=Object.getOwnPropertyNames,Art=Object.prototype.hasOwnProperty,pue=s((e,t)=>mD(e,"name",{value:t,configurable:!0}),"__name"),Irt=s((e,t)=>{for(var r in t)mD(e,r,{get:t[r],enumerable:!0})},"__export"),Drt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Trt(t))!Art.call(e,i)&&i!==r&&mD(e,i,{get:()=>t[i],enumerable:!(n=Ort(t,i))||n.enumerable});return e},"__copyProps"),Rrt=s(e=>Drt(mD({},"__esModule",{value:!0}),e),"__toCommonJS"),mue={};Irt(mue,{NODE_APP_ID_CONFIG_OPTIONS:()=>Brt,UA_APP_ID_ENV_NAME:()=>vue,UA_APP_ID_INI_NAME:()=>_ue,createDefaultUserAgentProvider:()=>yue,crtAvailability:()=>gue,defaultUserAgent:()=>xrt});Sue.exports=Rrt(mue);var hue=require("os"),R$=require("process"),gue={isCrtAvailable:!1},Nrt=pue(()=>gue.isCrtAvailable?["md/crt-avail"]:null,"isCrtAvailable"),yue=pue(({serviceId:e,clientVersion:t})=>async r=>{var n;let i=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,hue.platform)()}`,(0,hue.release)()],["lang/js"],["md/nodejs",`${R$.versions.node}`]],o=Nrt();o&&i.push(o),e&&i.push([`api/${e}`,t]),R$.env.AWS_EXECUTION_ENV&&i.push([`exec-env/${R$.env.AWS_EXECUTION_ENV}`]);let a=await((n=r==null?void 0:r.userAgentAppId)==null?void 0:n.call(r));return a?[...i,[`app/${a}`]]:[...i]},"createDefaultUserAgentProvider"),xrt=yue,Prt=mp(),vue="AWS_SDK_UA_APP_ID",_ue="sdk-ua-app-id",Brt={environmentVariableSelector:e=>e[vue],configFileSelector:e=>e[_ue],default:Prt.DEFAULT_UA_APP_ID}});var qS=w((OBt,Oue)=>{var gD=Object.defineProperty,Mrt=Object.getOwnPropertyDescriptor,Frt=Object.getOwnPropertyNames,qrt=Object.prototype.hasOwnProperty,Cue=s((e,t)=>gD(e,"name",{value:t,configurable:!0}),"__name"),Lrt=s((e,t)=>{for(var r in t)gD(e,r,{get:t[r],enumerable:!0})},"__export"),Urt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Frt(t))!qrt.call(e,i)&&i!==r&&gD(e,i,{get:()=>t[i],enumerable:!(n=Mrt(t,i))||n.enumerable});return e},"__copyProps"),jrt=s(e=>Urt(gD({},"__esModule",{value:!0}),e),"__toCommonJS"),wue={};Lrt(wue,{Hash:()=>Grt});Oue.exports=jrt(wue);var N$=Qh(),$rt=_s(),krt=require("buffer"),Eue=require("crypto"),FS,bue=(FS=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update((0,$rt.toUint8Array)(x$(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Eue.createHmac)(this.algorithmIdentifier,x$(this.secret)):(0,Eue.createHash)(this.algorithmIdentifier)}},s(FS,"_Hash"),FS);Cue(bue,"Hash");var Grt=bue;function x$(e,t){return krt.Buffer.isBuffer(e)?e:typeof e=="string"?(0,N$.fromString)(e,t):ArrayBuffer.isView(e)?(0,N$.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength):(0,N$.fromArrayBuffer)(e)}s(x$,"castSourceData");Cue(x$,"castSourceData")});var LS=w((ABt,Iue)=>{var yD=Object.defineProperty,Wrt=Object.getOwnPropertyDescriptor,zrt=Object.getOwnPropertyNames,Hrt=Object.prototype.hasOwnProperty,Vrt=s((e,t)=>yD(e,"name",{value:t,configurable:!0}),"__name"),Yrt=s((e,t)=>{for(var r in t)yD(e,r,{get:t[r],enumerable:!0})},"__export"),Krt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of zrt(t))!Hrt.call(e,i)&&i!==r&&yD(e,i,{get:()=>t[i],enumerable:!(n=Wrt(t,i))||n.enumerable});return e},"__copyProps"),Xrt=s(e=>Krt(yD({},"__esModule",{value:!0}),e),"__toCommonJS"),Aue={};Yrt(Aue,{calculateBodyLength:()=>Jrt});Iue.exports=Xrt(Aue);var Tue=require("fs"),Jrt=Vrt(e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Tue.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Tue.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},"calculateBodyLength")});var Gue=w(vD=>{"use strict";Object.defineProperty(vD,"__esModule",{value:!0});vD.ruleSet=void 0;var Uue="required",zs="fn",Hs="argv",Dp="ref",Due=!0,Rue="isSet",US="booleanEquals",Ap="error",Ip="endpoint",vu="tree",P$="PartitionResult",B$="getAttr",Nue={[Uue]:!1,type:"String"},xue={[Uue]:!0,default:!1,type:"Boolean"},Pue={[Dp]:"Endpoint"},jue={[zs]:US,[Hs]:[{[Dp]:"UseFIPS"},!0]},$ue={[zs]:US,[Hs]:[{[Dp]:"UseDualStack"},!0]},Ws={},Bue={[zs]:B$,[Hs]:[{[Dp]:P$},"supportsFIPS"]},kue={[Dp]:P$},Mue={[zs]:US,[Hs]:[!0,{[zs]:B$,[Hs]:[kue,"supportsDualStack"]}]},Fue=[jue],que=[$ue],Lue=[{[Dp]:"Region"}],Qrt={version:"1.0",parameters:{Region:Nue,UseDualStack:xue,UseFIPS:xue,Endpoint:Nue},rules:[{conditions:[{[zs]:Rue,[Hs]:[Pue]}],rules:[{conditions:Fue,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ap},{conditions:que,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ap},{endpoint:{url:Pue,properties:Ws,headers:Ws},type:Ip}],type:vu},{conditions:[{[zs]:Rue,[Hs]:Lue}],rules:[{conditions:[{[zs]:"aws.partition",[Hs]:Lue,assign:P$}],rules:[{conditions:[jue,$ue],rules:[{conditions:[{[zs]:US,[Hs]:[Due,Bue]},Mue],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ws,headers:Ws},type:Ip}],type:vu},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ap}],type:vu},{conditions:Fue,rules:[{conditions:[{[zs]:US,[Hs]:[Bue,Due]}],rules:[{conditions:[{[zs]:"stringEquals",[Hs]:[{[zs]:B$,[Hs]:[kue,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ws,headers:Ws},type:Ip},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ws,headers:Ws},type:Ip}],type:vu},{error:"FIPS is enabled but this partition does not support FIPS",type:Ap}],type:vu},{conditions:que,rules:[{conditions:[Mue],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ws,headers:Ws},type:Ip}],type:vu},{error:"DualStack is enabled but this partition does not support DualStack",type:Ap}],type:vu},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ws,headers:Ws},type:Ip}],type:vu}],type:vu},{error:"Invalid Configuration: Missing Region",type:Ap}]};vD.ruleSet=Qrt});var Wue=w(_D=>{"use strict";Object.defineProperty(_D,"__esModule",{value:!0});_D.defaultEndpointResolver=void 0;var Zrt=ip(),M$=rp(),ent=Gue(),tnt=new M$.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),rnt=s((e,t={})=>tnt.get(e,()=>(0,M$.resolveEndpoint)(ent.ruleSet,{endpointParams:e,logger:t.logger})),"defaultEndpointResolver");_D.defaultEndpointResolver=rnt;M$.customEndpointFunctions.aws=Zrt.awsEndpointFunctions});var Vue=w(SD=>{"use strict";Object.defineProperty(SD,"__esModule",{value:!0});SD.getRuntimeConfig=void 0;var nnt=(bn(),mt(wn)),int=(Ss(),mt(bo)),snt=Tr(),ont=Md(),zue=fu(),Hue=_s(),ant=D$(),unt=Wue(),cnt=s(e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??zue.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??zue.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??unt.defaultEndpointResolver,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??ant.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new nnt.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new int.NoAuthSigner}],logger:(e==null?void 0:e.logger)??new snt.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??ont.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Hue.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Hue.toUtf8}),"getRuntimeConfig");SD.getRuntimeConfig=cnt});var $S=w((BBt,Zue)=>{var lnt=Object.create,jS=Object.defineProperty,dnt=Object.getOwnPropertyDescriptor,fnt=Object.getOwnPropertyNames,hnt=Object.getPrototypeOf,pnt=Object.prototype.hasOwnProperty,F$=s((e,t)=>jS(e,"name",{value:t,configurable:!0}),"__name"),mnt=s((e,t)=>{for(var r in t)jS(e,r,{get:t[r],enumerable:!0})},"__export"),Jue=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of fnt(t))!pnt.call(e,i)&&i!==r&&jS(e,i,{get:()=>t[i],enumerable:!(n=dnt(t,i))||n.enumerable});return e},"__copyProps"),gnt=s((e,t,r)=>(r=e!=null?lnt(hnt(e)):{},Jue(t||!e||!e.__esModule?jS(r,"default",{value:e,enumerable:!0}):r,e)),"__toESM"),ynt=s(e=>Jue(jS({},"__esModule",{value:!0}),e),"__toCommonJS"),Que={};mnt(Que,{resolveDefaultsModeConfig:()=>Ant});Zue.exports=ynt(Que);var vnt=ua(),Yue=Hc(),_nt=xi(),Snt="AWS_EXECUTION_ENV",Kue="AWS_REGION",Xue="AWS_DEFAULT_REGION",Ent="AWS_EC2_METADATA_DISABLED",Cnt=["in-region","cross-region","mobile","standard","legacy"],wnt="/latest/meta-data/placement/region",bnt="AWS_DEFAULTS_MODE",Ont="defaults_mode",Tnt={environmentVariableSelector:e=>e[bnt],configFileSelector:e=>e[Ont],default:"legacy"},Ant=F$(({region:e=(0,Yue.loadConfig)(vnt.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=(0,Yue.loadConfig)(Tnt)}={})=>(0,_nt.memoize)(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return Int(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Cnt.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),Int=F$(async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Dnt();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),Dnt=F$(async()=>{if(process.env[Snt]&&(process.env[Kue]||process.env[Xue]))return process.env[Kue]??process.env[Xue];if(!process.env[Ent])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>gnt(BS())),r=await e();return(await t({...r,path:wnt})).toString()}catch{}},"inferPhysicalRegion")});var nce=w(CD=>{"use strict";Object.defineProperty(CD,"__esModule",{value:!0});CD.getRuntimeConfig=void 0;var Rnt=(wp(),mt(Cp)),Nnt=Rnt.__importDefault(fue()),xnt=(bn(),mt(wn)),ece=MS(),ED=ua(),Pnt=qS(),tce=yu(),Rp=Hc(),rce=Od(),Bnt=LS(),Mnt=_p(),Fnt=Vue(),qnt=Tr(),Lnt=$S(),Unt=Tr(),jnt=s(e=>{(0,Unt.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Lnt.resolveDefaultsModeConfig)(e),r=s(()=>t().then(qnt.loadConfigsForDefaultMode),"defaultConfigProvider"),n=(0,Fnt.getRuntimeConfig)(e);return(0,xnt.emitWarningIfUnsupportedVersion)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Bnt.calculateBodyLength,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??(0,ece.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Nnt.default.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??(0,Rp.loadConfig)(tce.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(e==null?void 0:e.region)??(0,Rp.loadConfig)(ED.NODE_REGION_CONFIG_OPTIONS,ED.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:rce.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(0,Rp.loadConfig)({...tce.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Mnt.DEFAULT_RETRY_MODE}),sha256:(e==null?void 0:e.sha256)??Pnt.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??rce.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(0,Rp.loadConfig)(ED.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(0,Rp.loadConfig)(ED.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:(e==null?void 0:e.userAgentAppId)??(0,Rp.loadConfig)(ece.NODE_APP_ID_CONFIG_OPTIONS)}},"getRuntimeConfig");CD.getRuntimeConfig=jnt});var kS=w((LBt,cce)=>{"use strict";var wD=Object.defineProperty,$nt=Object.getOwnPropertyDescriptor,knt=Object.getOwnPropertyNames,Gnt=Object.prototype.hasOwnProperty,Np=s((e,t)=>wD(e,"name",{value:t,configurable:!0}),"__name"),Wnt=s((e,t)=>{for(var r in t)wD(e,r,{get:t[r],enumerable:!0})},"__export"),znt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of knt(t))!Gnt.call(e,i)&&i!==r&&wD(e,i,{get:()=>t[i],enumerable:!(n=$nt(t,i))||n.enumerable});return e},"__copyProps"),Hnt=s(e=>znt(wD({},"__esModule",{value:!0}),e),"__toCommonJS"),sce={};Wnt(sce,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>Xnt,NODE_REGION_CONFIG_OPTIONS:()=>Knt,REGION_ENV_NAME:()=>oce,REGION_INI_NAME:()=>ace,getAwsRegionExtensionConfiguration:()=>Vnt,resolveAwsRegionExtensionConfiguration:()=>Ynt,resolveRegionConfig:()=>Jnt});cce.exports=Hnt(sce);var Vnt=Np(e=>{let t=Np(async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()},"runtimeConfigRegion");return{setRegion(r){t=r},region(){return t}}},"getAwsRegionExtensionConfiguration"),Ynt=Np(e=>({region:e.region()}),"resolveAwsRegionExtensionConfiguration"),oce="AWS_REGION",ace="region",Knt={environmentVariableSelector:e=>e[oce],configFileSelector:e=>e[ace],default:()=>{throw new Error("Region is missing")}},Xnt={preferredFile:"credentials"},uce=Np(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),ice=Np(e=>uce(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),Jnt=Np(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return ice(t);let n=await t();return ice(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return uce(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig")});var Yce=w((jBt,Vce)=>{"use strict";var OD=Object.defineProperty,Qnt=Object.getOwnPropertyDescriptor,Znt=Object.getOwnPropertyNames,eit=Object.prototype.hasOwnProperty,Bt=s((e,t)=>OD(e,"name",{value:t,configurable:!0}),"__name"),tit=s((e,t)=>{for(var r in t)OD(e,r,{get:t[r],enumerable:!0})},"__export"),rit=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Znt(t))!eit.call(e,i)&&i!==r&&OD(e,i,{get:()=>t[i],enumerable:!(n=Qnt(t,i))||n.enumerable});return e},"__copyProps"),nit=s(e=>rit(OD({},"__esModule",{value:!0}),e),"__toCommonJS"),gce={};tit(gce,{GetRoleCredentialsCommand:()=>jce,GetRoleCredentialsRequestFilterSensitiveLog:()=>Ace,GetRoleCredentialsResponseFilterSensitiveLog:()=>Dce,InvalidRequestException:()=>Sce,ListAccountRolesCommand:()=>q$,ListAccountRolesRequestFilterSensitiveLog:()=>Rce,ListAccountsCommand:()=>L$,ListAccountsRequestFilterSensitiveLog:()=>Nce,LogoutCommand:()=>Wce,LogoutRequestFilterSensitiveLog:()=>xce,ResourceNotFoundException:()=>Cce,RoleCredentialsFilterSensitiveLog:()=>Ice,SSO:()=>Hce,SSOClient:()=>AD,SSOServiceException:()=>qp,TooManyRequestsException:()=>bce,UnauthorizedException:()=>Tce,__Client:()=>Ie.Client,paginateListAccountRoles:()=>Dit,paginateListAccounts:()=>Rit});Vce.exports=nit(gce);var lce=H_(),iit=V_(),sit=Y_(),dce=mp(),oit=ua(),_u=(Ss(),mt(bo)),ait=_S(),XS=Fd(),fce=yu(),hce=D$(),uit=Bt(e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters"),TD={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},cit=nce(),pce=kS(),mce=Or(),Ie=Tr(),lit=Bt(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(i){let o=t.findIndex(a=>a.schemeId===i.schemeId);o===-1?t.push(i):t.splice(o,1,i)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),dit=Bt(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),bD=Bt(e=>e,"asPartial"),fit=Bt((e,t)=>{let r={...bD((0,pce.getAwsRegionExtensionConfiguration)(e)),...bD((0,Ie.getDefaultExtensionConfiguration)(e)),...bD((0,mce.getHttpHandlerExtensionConfiguration)(e)),...bD(lit(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,pce.resolveAwsRegionExtensionConfiguration)(r),...(0,Ie.resolveDefaultRuntimeConfig)(r),...(0,mce.resolveHttpHandlerRuntimeConfig)(r),...dit(r)}},"resolveRuntimeExtensions"),WS,yce=(WS=class extends Ie.Client{constructor(...[t]){let r=(0,cit.getRuntimeConfig)(t||{}),n=uit(r),i=(0,dce.resolveUserAgentConfig)(n),o=(0,fce.resolveRetryConfig)(i),a=(0,oit.resolveRegionConfig)(o),u=(0,lce.resolveHostHeaderConfig)(a),l=(0,XS.resolveEndpointConfig)(u),f=(0,hce.resolveHttpAuthSchemeConfig)(l),h=fit(f,(t==null?void 0:t.extensions)||[]);super(h),this.config=h,this.middlewareStack.use((0,dce.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,fce.getRetryPlugin)(this.config)),this.middlewareStack.use((0,ait.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,lce.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,iit.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,sit.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,_u.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:hce.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new _u.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,_u.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},s(WS,"_SSOClient"),WS);Bt(yce,"SSOClient");var AD=yce,ID=wd(),xp,vce=(xp=class extends Ie.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,xp.prototype)}},s(xp,"_SSOServiceException"),xp);Bt(vce,"SSOServiceException");var qp=vce,Pp,_ce=(Pp=class extends qp{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Pp.prototype)}},s(Pp,"_InvalidRequestException"),Pp);Bt(_ce,"InvalidRequestException");var Sce=_ce,Bp,Ece=(Bp=class extends qp{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Bp.prototype)}},s(Bp,"_ResourceNotFoundException"),Bp);Bt(Ece,"ResourceNotFoundException");var Cce=Ece,Mp,wce=(Mp=class extends qp{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Mp.prototype)}},s(Mp,"_TooManyRequestsException"),Mp);Bt(wce,"TooManyRequestsException");var bce=wce,Fp,Oce=(Fp=class extends qp{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Fp.prototype)}},s(Fp,"_UnauthorizedException"),Fp);Bt(Oce,"UnauthorizedException");var Tce=Oce,Ace=Bt(e=>({...e,...e.accessToken&&{accessToken:Ie.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog"),Ice=Bt(e=>({...e,...e.secretAccessKey&&{secretAccessKey:Ie.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:Ie.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog"),Dce=Bt(e=>({...e,...e.roleCredentials&&{roleCredentials:Ice(e.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog"),Rce=Bt(e=>({...e,...e.accessToken&&{accessToken:Ie.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog"),Nce=Bt(e=>({...e,...e.accessToken&&{accessToken:Ie.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog"),xce=Bt(e=>({...e,...e.accessToken&&{accessToken:Ie.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog"),GS=(bn(),mt(wn)),hit=Bt(async(e,t)=>{let r=(0,_u.requestBuilder)(e,t),n=(0,Ie.map)({},Ie.isSerializableHeaderValue,{[ND]:e[RD]});r.bp("/federation/credentials");let i=(0,Ie.map)({[Ait]:[,(0,Ie.expectNonNull)(e[Tit],"roleName")],[Bce]:[,(0,Ie.expectNonNull)(e[Pce],"accountId")]});return r.m("GET").h(n).q(i).b(void 0),r.build()},"se_GetRoleCredentialsCommand"),pit=Bt(async(e,t)=>{let r=(0,_u.requestBuilder)(e,t),n=(0,Ie.map)({},Ie.isSerializableHeaderValue,{[ND]:e[RD]});r.bp("/assignment/roles");let i=(0,Ie.map)({[Lce]:[,e[qce]],[Fce]:[()=>e.maxResults!==void 0,()=>e[Mce].toString()],[Bce]:[,(0,Ie.expectNonNull)(e[Pce],"accountId")]});return r.m("GET").h(n).q(i).b(void 0),r.build()},"se_ListAccountRolesCommand"),mit=Bt(async(e,t)=>{let r=(0,_u.requestBuilder)(e,t),n=(0,Ie.map)({},Ie.isSerializableHeaderValue,{[ND]:e[RD]});r.bp("/assignment/accounts");let i=(0,Ie.map)({[Lce]:[,e[qce]],[Fce]:[()=>e.maxResults!==void 0,()=>e[Mce].toString()]});return r.m("GET").h(n).q(i).b(void 0),r.build()},"se_ListAccountsCommand"),git=Bt(async(e,t)=>{let r=(0,_u.requestBuilder)(e,t),n=(0,Ie.map)({},Ie.isSerializableHeaderValue,{[ND]:e[RD]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},"se_LogoutCommand"),yit=Bt(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return DD(e,t);let r=(0,Ie.map)({$metadata:Jc(e)}),n=(0,Ie.expectNonNull)((0,Ie.expectObject)(await(0,GS.parseJsonBody)(e.body,t)),"body"),i=(0,Ie.take)(n,{roleCredentials:Ie._json});return Object.assign(r,i),r},"de_GetRoleCredentialsCommand"),vit=Bt(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return DD(e,t);let r=(0,Ie.map)({$metadata:Jc(e)}),n=(0,Ie.expectNonNull)((0,Ie.expectObject)(await(0,GS.parseJsonBody)(e.body,t)),"body"),i=(0,Ie.take)(n,{nextToken:Ie.expectString,roleList:Ie._json});return Object.assign(r,i),r},"de_ListAccountRolesCommand"),_it=Bt(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return DD(e,t);let r=(0,Ie.map)({$metadata:Jc(e)}),n=(0,Ie.expectNonNull)((0,Ie.expectObject)(await(0,GS.parseJsonBody)(e.body,t)),"body"),i=(0,Ie.take)(n,{accountList:Ie._json,nextToken:Ie.expectString});return Object.assign(r,i),r},"de_ListAccountsCommand"),Sit=Bt(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return DD(e,t);let r=(0,Ie.map)({$metadata:Jc(e)});return await(0,Ie.collectBody)(e.body,t),r},"de_LogoutCommand"),DD=Bt(async(e,t)=>{let r={...e,body:await(0,GS.parseJsonErrorBody)(e.body,t)},n=(0,GS.loadRestJsonErrorCode)(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Cit(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await wit(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await bit(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Oit(r,t);default:let i=r.body;return Eit({output:e,parsedBody:i,errorCode:n})}},"de_CommandError"),Eit=(0,Ie.withBaseException)(qp),Cit=Bt(async(e,t)=>{let r=(0,Ie.map)({}),n=e.body,i=(0,Ie.take)(n,{message:Ie.expectString});Object.assign(r,i);let o=new Sce({$metadata:Jc(e),...r});return(0,Ie.decorateServiceException)(o,e.body)},"de_InvalidRequestExceptionRes"),wit=Bt(async(e,t)=>{let r=(0,Ie.map)({}),n=e.body,i=(0,Ie.take)(n,{message:Ie.expectString});Object.assign(r,i);let o=new Cce({$metadata:Jc(e),...r});return(0,Ie.decorateServiceException)(o,e.body)},"de_ResourceNotFoundExceptionRes"),bit=Bt(async(e,t)=>{let r=(0,Ie.map)({}),n=e.body,i=(0,Ie.take)(n,{message:Ie.expectString});Object.assign(r,i);let o=new bce({$metadata:Jc(e),...r});return(0,Ie.decorateServiceException)(o,e.body)},"de_TooManyRequestsExceptionRes"),Oit=Bt(async(e,t)=>{let r=(0,Ie.map)({}),n=e.body,i=(0,Ie.take)(n,{message:Ie.expectString});Object.assign(r,i);let o=new Tce({$metadata:Jc(e),...r});return(0,Ie.decorateServiceException)(o,e.body)},"de_UnauthorizedExceptionRes"),Jc=Bt(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),Pce="accountId",RD="accessToken",Bce="account_id",Mce="maxResults",Fce="max_result",qce="nextToken",Lce="next_token",Tit="roleName",Ait="role_name",ND="x-amz-sso_bearer_token",zS,Uce=(zS=class extends Ie.Command.classBuilder().ep(TD).m(function(t,r,n,i){return[(0,ID.getSerdePlugin)(n,this.serialize,this.deserialize),(0,XS.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Ace,Dce).ser(hit).de(yit).build(){},s(zS,"_GetRoleCredentialsCommand"),zS);Bt(Uce,"GetRoleCredentialsCommand");var jce=Uce,HS,$ce=(HS=class extends Ie.Command.classBuilder().ep(TD).m(function(t,r,n,i){return[(0,ID.getSerdePlugin)(n,this.serialize,this.deserialize),(0,XS.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(Rce,void 0).ser(pit).de(vit).build(){},s(HS,"_ListAccountRolesCommand"),HS);Bt($ce,"ListAccountRolesCommand");var q$=$ce,VS,kce=(VS=class extends Ie.Command.classBuilder().ep(TD).m(function(t,r,n,i){return[(0,ID.getSerdePlugin)(n,this.serialize,this.deserialize),(0,XS.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(Nce,void 0).ser(mit).de(_it).build(){},s(VS,"_ListAccountsCommand"),VS);Bt(kce,"ListAccountsCommand");var L$=kce,YS,Gce=(YS=class extends Ie.Command.classBuilder().ep(TD).m(function(t,r,n,i){return[(0,ID.getSerdePlugin)(n,this.serialize,this.deserialize),(0,XS.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(xce,void 0).ser(git).de(Sit).build(){},s(YS,"_LogoutCommand"),YS);Bt(Gce,"LogoutCommand");var Wce=Gce,Iit={GetRoleCredentialsCommand:jce,ListAccountRolesCommand:q$,ListAccountsCommand:L$,LogoutCommand:Wce},KS,zce=(KS=class extends AD{},s(KS,"_SSO"),KS);Bt(zce,"SSO");var Hce=zce;(0,Ie.createAggregatedClient)(Iit,Hce);var Dit=(0,_u.createPaginator)(AD,q$,"nextToken","nextToken","maxResults"),Rit=(0,_u.createPaginator)(AD,L$,"nextToken","nextToken","maxResults")});var j$=w(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.resolveHttpAuthSchemeConfig=Qc.defaultSSOOIDCHttpAuthSchemeProvider=Qc.defaultSSOOIDCHttpAuthSchemeParametersProvider=void 0;var Nit=(bn(),mt(wn)),Kce=wo(),xit=s(async(e,t,r)=>({operation:(0,Kce.getSmithyContext)(t).operation,region:await(0,Kce.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultSSOOIDCHttpAuthSchemeParametersProvider");Qc.defaultSSOOIDCHttpAuthSchemeParametersProvider=xit;function Pit(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}s(Pit,"createAwsAuthSigv4HttpAuthOption");function U$(e){return{schemeId:"smithy.api#noAuth"}}s(U$,"createSmithyApiNoAuthHttpAuthOption");var Bit=s(e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(U$(e));break}case"RegisterClient":{t.push(U$(e));break}case"StartDeviceAuthorization":{t.push(U$(e));break}default:t.push(Pit(e))}return t},"defaultSSOOIDCHttpAuthSchemeProvider");Qc.defaultSSOOIDCHttpAuthSchemeProvider=Bit;var Mit=s(e=>({...(0,Nit.resolveAwsSdkSigV4Config)(e)}),"resolveHttpAuthSchemeConfig");Qc.resolveHttpAuthSchemeConfig=Mit});var Xce=w((WBt,Fit)=>{Fit.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.687.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso-oidc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.687.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.687.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.687.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",peerDependencies:{"@aws-sdk/client-sts":"^3.687.0"},browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var dle=w(xD=>{"use strict";Object.defineProperty(xD,"__esModule",{value:!0});xD.ruleSet=void 0;var ale="required",Ys="fn",Ks="argv",jp="ref",Jce=!0,Qce="isSet",JS="booleanEquals",Lp="error",Up="endpoint",Su="tree",$$="PartitionResult",k$="getAttr",Zce={[ale]:!1,type:"String"},ele={[ale]:!0,default:!1,type:"Boolean"},tle={[jp]:"Endpoint"},ule={[Ys]:JS,[Ks]:[{[jp]:"UseFIPS"},!0]},cle={[Ys]:JS,[Ks]:[{[jp]:"UseDualStack"},!0]},Vs={},rle={[Ys]:k$,[Ks]:[{[jp]:$$},"supportsFIPS"]},lle={[jp]:$$},nle={[Ys]:JS,[Ks]:[!0,{[Ys]:k$,[Ks]:[lle,"supportsDualStack"]}]},ile=[ule],sle=[cle],ole=[{[jp]:"Region"}],qit={version:"1.0",parameters:{Region:Zce,UseDualStack:ele,UseFIPS:ele,Endpoint:Zce},rules:[{conditions:[{[Ys]:Qce,[Ks]:[tle]}],rules:[{conditions:ile,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Lp},{conditions:sle,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Lp},{endpoint:{url:tle,properties:Vs,headers:Vs},type:Up}],type:Su},{conditions:[{[Ys]:Qce,[Ks]:ole}],rules:[{conditions:[{[Ys]:"aws.partition",[Ks]:ole,assign:$$}],rules:[{conditions:[ule,cle],rules:[{conditions:[{[Ys]:JS,[Ks]:[Jce,rle]},nle],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vs,headers:Vs},type:Up}],type:Su},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Lp}],type:Su},{conditions:ile,rules:[{conditions:[{[Ys]:JS,[Ks]:[rle,Jce]}],rules:[{conditions:[{[Ys]:"stringEquals",[Ks]:[{[Ys]:k$,[Ks]:[lle,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:Vs,headers:Vs},type:Up},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Vs,headers:Vs},type:Up}],type:Su},{error:"FIPS is enabled but this partition does not support FIPS",type:Lp}],type:Su},{conditions:sle,rules:[{conditions:[nle],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Vs,headers:Vs},type:Up}],type:Su},{error:"DualStack is enabled but this partition does not support DualStack",type:Lp}],type:Su},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Vs,headers:Vs},type:Up}],type:Su}],type:Su},{error:"Invalid Configuration: Missing Region",type:Lp}]};xD.ruleSet=qit});var fle=w(PD=>{"use strict";Object.defineProperty(PD,"__esModule",{value:!0});PD.defaultEndpointResolver=void 0;var Lit=ip(),G$=rp(),Uit=dle(),jit=new G$.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),$it=s((e,t={})=>jit.get(e,()=>(0,G$.resolveEndpoint)(Uit.ruleSet,{endpointParams:e,logger:t.logger})),"defaultEndpointResolver");PD.defaultEndpointResolver=$it;G$.customEndpointFunctions.aws=Lit.awsEndpointFunctions});var mle=w(BD=>{"use strict";Object.defineProperty(BD,"__esModule",{value:!0});BD.getRuntimeConfig=void 0;var kit=(bn(),mt(wn)),Git=(Ss(),mt(bo)),Wit=Tr(),zit=Md(),hle=fu(),ple=_s(),Hit=j$(),Vit=fle(),Yit=s(e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??hle.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??hle.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Vit.defaultEndpointResolver,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Hit.defaultSSOOIDCHttpAuthSchemeProvider,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new kit.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Git.NoAuthSigner}],logger:(e==null?void 0:e.logger)??new Wit.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??zit.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ple.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??ple.toUtf8}),"getRuntimeConfig");BD.getRuntimeConfig=Yit});var _le=w(FD=>{"use strict";Object.defineProperty(FD,"__esModule",{value:!0});FD.getRuntimeConfig=void 0;var Kit=(wp(),mt(Cp)),Xit=Kit.__importDefault(Xce()),Jit=(bn(),mt(wn)),Qit=qD(),gle=MS(),MD=ua(),Zit=qS(),yle=yu(),$p=Hc(),vle=Od(),est=LS(),tst=_p(),rst=mle(),nst=Tr(),ist=$S(),sst=Tr(),ost=s(e=>{(0,sst.emitWarningIfUnsupportedVersion)(process.version);let t=(0,ist.resolveDefaultsModeConfig)(e),r=s(()=>t().then(nst.loadConfigsForDefaultMode),"defaultConfigProvider"),n=(0,rst.getRuntimeConfig)(e);return(0,Jit.emitWarningIfUnsupportedVersion)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??est.calculateBodyLength,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Qit.defaultProvider,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??(0,gle.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Xit.default.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??(0,$p.loadConfig)(yle.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(e==null?void 0:e.region)??(0,$p.loadConfig)(MD.NODE_REGION_CONFIG_OPTIONS,MD.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:vle.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(0,$p.loadConfig)({...yle.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||tst.DEFAULT_RETRY_MODE}),sha256:(e==null?void 0:e.sha256)??Zit.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??vle.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(0,$p.loadConfig)(MD.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(0,$p.loadConfig)(MD.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:(e==null?void 0:e.userAgentAppId)??(0,$p.loadConfig)(gle.NODE_APP_ID_CONFIG_OPTIONS)}},"getRuntimeConfig");FD.getRuntimeConfig=ost});var W$=w((QBt,Sde)=>{"use strict";var UD=Object.defineProperty,ast=Object.getOwnPropertyDescriptor,ust=Object.getOwnPropertyNames,cst=Object.prototype.hasOwnProperty,Ue=s((e,t)=>UD(e,"name",{value:t,configurable:!0}),"__name"),lst=s((e,t)=>{for(var r in t)UD(e,r,{get:t[r],enumerable:!0})},"__export"),dst=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ust(t))!cst.call(e,i)&&i!==r&&UD(e,i,{get:()=>t[i],enumerable:!(n=ast(t,i))||n.enumerable});return e},"__copyProps"),fst=s(e=>dst(UD({},"__esModule",{value:!0}),e),"__toCommonJS"),Tle={};lst(Tle,{AccessDeniedException:()=>Nle,AuthorizationPendingException:()=>Ple,CreateTokenCommand:()=>dde,CreateTokenRequestFilterSensitiveLog:()=>ide,CreateTokenResponseFilterSensitiveLog:()=>sde,CreateTokenWithIAMCommand:()=>hde,CreateTokenWithIAMRequestFilterSensitiveLog:()=>ode,CreateTokenWithIAMResponseFilterSensitiveLog:()=>ade,ExpiredTokenException:()=>Mle,InternalServerException:()=>qle,InvalidClientException:()=>Ule,InvalidClientMetadataException:()=>tde,InvalidGrantException:()=>$le,InvalidRedirectUriException:()=>nde,InvalidRequestException:()=>Gle,InvalidRequestRegionException:()=>Zle,InvalidScopeException:()=>zle,RegisterClientCommand:()=>mde,RegisterClientResponseFilterSensitiveLog:()=>ude,SSOOIDC:()=>_de,SSOOIDCClient:()=>Ile,SSOOIDCServiceException:()=>di,SlowDownException:()=>Vle,StartDeviceAuthorizationCommand:()=>yde,StartDeviceAuthorizationRequestFilterSensitiveLog:()=>cde,UnauthorizedClientException:()=>Kle,UnsupportedGrantTypeException:()=>Jle,__Client:()=>z.Client});Sde.exports=fst(Tle);var Sle=H_(),hst=V_(),pst=Y_(),Ele=mp(),mst=ua(),Ld=(Ss(),mt(bo)),gst=_S(),i0=Fd(),Cle=yu(),wle=j$(),yst=Ue(e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),"resolveClientEndpointParameters"),jD={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},vst=_le(),ble=kS(),Ole=Or(),z=Tr(),_st=Ue(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(i){let o=t.findIndex(a=>a.schemeId===i.schemeId);o===-1?t.push(i):t.splice(o,1,i)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),Sst=Ue(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),LD=Ue(e=>e,"asPartial"),Est=Ue((e,t)=>{let r={...LD((0,ble.getAwsRegionExtensionConfiguration)(e)),...LD((0,z.getDefaultExtensionConfiguration)(e)),...LD((0,Ole.getHttpHandlerExtensionConfiguration)(e)),...LD(_st(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,ble.resolveAwsRegionExtensionConfiguration)(r),...(0,z.resolveDefaultRuntimeConfig)(r),...(0,Ole.resolveHttpHandlerRuntimeConfig)(r),...Sst(r)}},"resolveRuntimeExtensions"),QS,Ale=(QS=class extends z.Client{constructor(...[t]){let r=(0,vst.getRuntimeConfig)(t||{}),n=yst(r),i=(0,Ele.resolveUserAgentConfig)(n),o=(0,Cle.resolveRetryConfig)(i),a=(0,mst.resolveRegionConfig)(o),u=(0,Sle.resolveHostHeaderConfig)(a),l=(0,i0.resolveEndpointConfig)(u),f=(0,wle.resolveHttpAuthSchemeConfig)(l),h=Est(f,(t==null?void 0:t.extensions)||[]);super(h),this.config=h,this.middlewareStack.use((0,Ele.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Cle.getRetryPlugin)(this.config)),this.middlewareStack.use((0,gst.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Sle.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,hst.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,pst.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Ld.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:wle.defaultSSOOIDCHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Ld.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,Ld.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},s(QS,"_SSOOIDCClient"),QS);Ue(Ale,"SSOOIDCClient");var Ile=Ale,$D=wd(),Gp,Dle=(Gp=class extends z.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,Gp.prototype)}},s(Gp,"_SSOOIDCServiceException"),Gp);Ue(Dle,"SSOOIDCServiceException");var di=Dle,Wp,Rle=(Wp=class extends di{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,Wp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Wp,"_AccessDeniedException"),Wp);Ue(Rle,"AccessDeniedException");var Nle=Rle,zp,xle=(zp=class extends di{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,zp.prototype),this.error=t.error,this.error_description=t.error_description}},s(zp,"_AuthorizationPendingException"),zp);Ue(xle,"AuthorizationPendingException");var Ple=xle,Hp,Ble=(Hp=class extends di{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Hp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Hp,"_ExpiredTokenException"),Hp);Ue(Ble,"ExpiredTokenException");var Mle=Ble,Vp,Fle=(Vp=class extends di{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Vp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Vp,"_InternalServerException"),Vp);Ue(Fle,"InternalServerException");var qle=Fle,Yp,Lle=(Yp=class extends di{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Yp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Yp,"_InvalidClientException"),Yp);Ue(Lle,"InvalidClientException");var Ule=Lle,Kp,jle=(Kp=class extends di{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Kp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Kp,"_InvalidGrantException"),Kp);Ue(jle,"InvalidGrantException");var $le=jle,Xp,kle=(Xp=class extends di{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Xp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Xp,"_InvalidRequestException"),Xp);Ue(kle,"InvalidRequestException");var Gle=kle,Jp,Wle=(Jp=class extends di{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Jp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Jp,"_InvalidScopeException"),Jp);Ue(Wle,"InvalidScopeException");var zle=Wle,Qp,Hle=(Qp=class extends di{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Qp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Qp,"_SlowDownException"),Qp);Ue(Hle,"SlowDownException");var Vle=Hle,Zp,Yle=(Zp=class extends di{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Zp.prototype),this.error=t.error,this.error_description=t.error_description}},s(Zp,"_UnauthorizedClientException"),Zp);Ue(Yle,"UnauthorizedClientException");var Kle=Yle,em,Xle=(em=class extends di{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,em.prototype),this.error=t.error,this.error_description=t.error_description}},s(em,"_UnsupportedGrantTypeException"),em);Ue(Xle,"UnsupportedGrantTypeException");var Jle=Xle,tm,Qle=(tm=class extends di{constructor(t){super({name:"InvalidRequestRegionException",$fault:"client",...t}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,tm.prototype),this.error=t.error,this.error_description=t.error_description,this.endpoint=t.endpoint,this.region=t.region}},s(tm,"_InvalidRequestRegionException"),tm);Ue(Qle,"InvalidRequestRegionException");var Zle=Qle,rm,ede=(rm=class extends di{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,rm.prototype),this.error=t.error,this.error_description=t.error_description}},s(rm,"_InvalidClientMetadataException"),rm);Ue(ede,"InvalidClientMetadataException");var tde=ede,nm,rde=(nm=class extends di{constructor(t){super({name:"InvalidRedirectUriException",$fault:"client",...t}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,nm.prototype),this.error=t.error,this.error_description=t.error_description}},s(nm,"_InvalidRedirectUriException"),nm);Ue(rde,"InvalidRedirectUriException");var nde=rde,ide=Ue(e=>({...e,...e.clientSecret&&{clientSecret:z.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:z.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:z.SENSITIVE_STRING}}),"CreateTokenRequestFilterSensitiveLog"),sde=Ue(e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:z.SENSITIVE_STRING},...e.idToken&&{idToken:z.SENSITIVE_STRING}}),"CreateTokenResponseFilterSensitiveLog"),ode=Ue(e=>({...e,...e.refreshToken&&{refreshToken:z.SENSITIVE_STRING},...e.assertion&&{assertion:z.SENSITIVE_STRING},...e.subjectToken&&{subjectToken:z.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:z.SENSITIVE_STRING}}),"CreateTokenWithIAMRequestFilterSensitiveLog"),ade=Ue(e=>({...e,...e.accessToken&&{accessToken:z.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:z.SENSITIVE_STRING},...e.idToken&&{idToken:z.SENSITIVE_STRING}}),"CreateTokenWithIAMResponseFilterSensitiveLog"),ude=Ue(e=>({...e,...e.clientSecret&&{clientSecret:z.SENSITIVE_STRING}}),"RegisterClientResponseFilterSensitiveLog"),cde=Ue(e=>({...e,...e.clientSecret&&{clientSecret:z.SENSITIVE_STRING}}),"StartDeviceAuthorizationRequestFilterSensitiveLog"),kp=(bn(),mt(wn)),Cst=Ue(async(e,t)=>{let r=(0,Ld.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/token");let i;return i=JSON.stringify((0,z.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,z._json)(o)})),r.m("POST").h(n).b(i),r.build()},"se_CreateTokenCommand"),wst=Ue(async(e,t)=>{let r=(0,Ld.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/token");let i=(0,z.map)({[zst]:[,"t"]}),o;return o=JSON.stringify((0,z.take)(e,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:a=>(0,z._json)(a),subjectToken:[],subjectTokenType:[]})),r.m("POST").h(n).q(i).b(o),r.build()},"se_CreateTokenWithIAMCommand"),bst=Ue(async(e,t)=>{let r=(0,Ld.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/client/register");let i;return i=JSON.stringify((0,z.take)(e,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:o=>(0,z._json)(o),issuerUrl:[],redirectUris:o=>(0,z._json)(o),scopes:o=>(0,z._json)(o)})),r.m("POST").h(n).b(i),r.build()},"se_RegisterClientCommand"),Ost=Ue(async(e,t)=>{let r=(0,Ld.requestBuilder)(e,t),n={"content-type":"application/json"};r.bp("/device_authorization");let i;return i=JSON.stringify((0,z.take)(e,{clientId:[],clientSecret:[],startUrl:[]})),r.m("POST").h(n).b(i),r.build()},"se_StartDeviceAuthorizationCommand"),Tst=Ue(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return kD(e,t);let r=(0,z.map)({$metadata:On(e)}),n=(0,z.expectNonNull)((0,z.expectObject)(await(0,kp.parseJsonBody)(e.body,t)),"body"),i=(0,z.take)(n,{accessToken:z.expectString,expiresIn:z.expectInt32,idToken:z.expectString,refreshToken:z.expectString,tokenType:z.expectString});return Object.assign(r,i),r},"de_CreateTokenCommand"),Ast=Ue(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return kD(e,t);let r=(0,z.map)({$metadata:On(e)}),n=(0,z.expectNonNull)((0,z.expectObject)(await(0,kp.parseJsonBody)(e.body,t)),"body"),i=(0,z.take)(n,{accessToken:z.expectString,expiresIn:z.expectInt32,idToken:z.expectString,issuedTokenType:z.expectString,refreshToken:z.expectString,scope:z._json,tokenType:z.expectString});return Object.assign(r,i),r},"de_CreateTokenWithIAMCommand"),Ist=Ue(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return kD(e,t);let r=(0,z.map)({$metadata:On(e)}),n=(0,z.expectNonNull)((0,z.expectObject)(await(0,kp.parseJsonBody)(e.body,t)),"body"),i=(0,z.take)(n,{authorizationEndpoint:z.expectString,clientId:z.expectString,clientIdIssuedAt:z.expectLong,clientSecret:z.expectString,clientSecretExpiresAt:z.expectLong,tokenEndpoint:z.expectString});return Object.assign(r,i),r},"de_RegisterClientCommand"),Dst=Ue(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return kD(e,t);let r=(0,z.map)({$metadata:On(e)}),n=(0,z.expectNonNull)((0,z.expectObject)(await(0,kp.parseJsonBody)(e.body,t)),"body"),i=(0,z.take)(n,{deviceCode:z.expectString,expiresIn:z.expectInt32,interval:z.expectInt32,userCode:z.expectString,verificationUri:z.expectString,verificationUriComplete:z.expectString});return Object.assign(r,i),r},"de_StartDeviceAuthorizationCommand"),kD=Ue(async(e,t)=>{let r={...e,body:await(0,kp.parseJsonErrorBody)(e.body,t)},n=(0,kp.loadRestJsonErrorCode)(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await Nst(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await xst(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await Pst(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await Bst(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await Mst(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await qst(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ust(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await $st(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await kst(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await Gst(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await Wst(r,t);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await jst(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await Fst(r,t);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await Lst(r,t);default:let i=r.body;return Rst({output:e,parsedBody:i,errorCode:n})}},"de_CommandError"),Rst=(0,z.withBaseException)(di),Nst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Nle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_AccessDeniedExceptionRes"),xst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Ple({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_AuthorizationPendingExceptionRes"),Pst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Mle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_ExpiredTokenExceptionRes"),Bst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new qle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InternalServerExceptionRes"),Mst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Ule({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidClientExceptionRes"),Fst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new tde({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidClientMetadataExceptionRes"),qst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new $le({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidGrantExceptionRes"),Lst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new nde({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidRedirectUriExceptionRes"),Ust=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Gle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidRequestExceptionRes"),jst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{endpoint:z.expectString,error:z.expectString,error_description:z.expectString,region:z.expectString});Object.assign(r,i);let o=new Zle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidRequestRegionExceptionRes"),$st=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new zle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_InvalidScopeExceptionRes"),kst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Vle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_SlowDownExceptionRes"),Gst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Kle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_UnauthorizedClientExceptionRes"),Wst=Ue(async(e,t)=>{let r=(0,z.map)({}),n=e.body,i=(0,z.take)(n,{error:z.expectString,error_description:z.expectString});Object.assign(r,i);let o=new Jle({$metadata:On(e),...r});return(0,z.decorateServiceException)(o,e.body)},"de_UnsupportedGrantTypeExceptionRes"),On=Ue(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),zst="aws_iam",ZS,lde=(ZS=class extends z.Command.classBuilder().ep(jD).m(function(t,r,n,i){return[(0,$D.getSerdePlugin)(n,this.serialize,this.deserialize),(0,i0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(ide,sde).ser(Cst).de(Tst).build(){},s(ZS,"_CreateTokenCommand"),ZS);Ue(lde,"CreateTokenCommand");var dde=lde,e0,fde=(e0=class extends z.Command.classBuilder().ep(jD).m(function(t,r,n,i){return[(0,$D.getSerdePlugin)(n,this.serialize,this.deserialize),(0,i0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateTokenWithIAM",{}).n("SSOOIDCClient","CreateTokenWithIAMCommand").f(ode,ade).ser(wst).de(Ast).build(){},s(e0,"_CreateTokenWithIAMCommand"),e0);Ue(fde,"CreateTokenWithIAMCommand");var hde=fde,t0,pde=(t0=class extends z.Command.classBuilder().ep(jD).m(function(t,r,n,i){return[(0,$D.getSerdePlugin)(n,this.serialize,this.deserialize),(0,i0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","RegisterClient",{}).n("SSOOIDCClient","RegisterClientCommand").f(void 0,ude).ser(bst).de(Ist).build(){},s(t0,"_RegisterClientCommand"),t0);Ue(pde,"RegisterClientCommand");var mde=pde,r0,gde=(r0=class extends z.Command.classBuilder().ep(jD).m(function(t,r,n,i){return[(0,$D.getSerdePlugin)(n,this.serialize,this.deserialize),(0,i0.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","StartDeviceAuthorization",{}).n("SSOOIDCClient","StartDeviceAuthorizationCommand").f(cde,void 0).ser(Ost).de(Dst).build(){},s(r0,"_StartDeviceAuthorizationCommand"),r0);Ue(gde,"StartDeviceAuthorizationCommand");var yde=gde,Hst={CreateTokenCommand:dde,CreateTokenWithIAMCommand:hde,RegisterClientCommand:mde,StartDeviceAuthorizationCommand:yde},n0,vde=(n0=class extends Ile{},s(n0,"_SSOOIDC"),n0);Ue(vde,"SSOOIDC");var _de=vde;(0,z.createAggregatedClient)(Hst,_de)});var Ide=w((e1t,Ade)=>{"use strict";var Vst=Object.create,o0=Object.defineProperty,Yst=Object.getOwnPropertyDescriptor,Kst=Object.getOwnPropertyNames,Xst=Object.getPrototypeOf,Jst=Object.prototype.hasOwnProperty,Zc=s((e,t)=>o0(e,"name",{value:t,configurable:!0}),"__name"),Qst=s((e,t)=>{for(var r in t)o0(e,r,{get:t[r],enumerable:!0})},"__export"),wde=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kst(t))!Jst.call(e,i)&&i!==r&&o0(e,i,{get:()=>t[i],enumerable:!(n=Yst(t,i))||n.enumerable});return e},"__copyProps"),bde=s((e,t,r)=>(r=e!=null?Vst(Xst(e)):{},wde(t||!e||!e.__esModule?o0(r,"default",{value:e,enumerable:!0}):r,e)),"__toESM"),Zst=s(e=>wde(o0({},"__esModule",{value:!0}),e),"__toCommonJS"),Ode={};Qst(Ode,{fromSso:()=>Tde,fromStatic:()=>oot,nodeProvider:()=>aot});Ade.exports=Zst(Ode);var eot=5*60*1e3,H$="To refresh this SSO session run 'aws sso login' with the corresponding profile.",z$={},tot=Zc(async e=>{let{SSOOIDCClient:t}=await Promise.resolve().then(()=>bde(W$()));if(z$[e])return z$[e];let r=new t({region:e});return z$[e]=r,r},"getSsoOidcClient"),rot=Zc(async(e,t)=>{let{CreateTokenCommand:r}=await Promise.resolve().then(()=>bde(W$()));return(await tot(t)).send(new r({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},"getNewSsoOidcToken"),Io=xi(),Ede=Zc(e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Io.TokenProviderError(`Token is expired. ${H$}`,!1)},"validateTokenExpiry"),Ud=Zc((e,t,r=!1)=>{if(typeof t>"u")throw new Io.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${H$}`,!1)},"validateTokenKey"),s0=zc(),not=require("fs"),{writeFile:iot}=not.promises,sot=Zc((e,t)=>{let r=(0,s0.getSSOTokenFilepath)(e),n=JSON.stringify(t,null,2);return iot(r,n)},"writeSSOTokenToFile"),Cde=new Date(0),Tde=Zc((e={})=>async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/token-providers - fromSso");let r=await(0,s0.parseKnownFiles)(e),n=(0,s0.getProfileName)(e),i=r[n];if(i){if(!i.sso_session)throw new Io.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Io.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=i.sso_session,u=(await(0,s0.loadSsoSessionData)(e))[o];if(!u)throw new Io.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let C of["sso_start_url","sso_region"])if(!u[C])throw new Io.TokenProviderError(`Sso session '${o}' is missing required property '${C}'.`,!1);let l=u.sso_start_url,f=u.sso_region,h;try{h=await(0,s0.getSSOTokenFromFile)(o)}catch{throw new Io.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${H$}`,!1)}Ud("accessToken",h.accessToken),Ud("expiresAt",h.expiresAt);let{accessToken:p,expiresAt:g}=h,_={token:p,expiration:new Date(g)};if(_.expiration.getTime()-Date.now()>eot)return _;if(Date.now()-Cde.getTime()<30*1e3)return Ede(_),_;Ud("clientId",h.clientId,!0),Ud("clientSecret",h.clientSecret,!0),Ud("refreshToken",h.refreshToken,!0);try{Cde.setTime(Date.now());let C=await rot(h,f);Ud("accessToken",C.accessToken),Ud("expiresIn",C.expiresIn);let D=new Date(Date.now()+C.expiresIn*1e3);try{await sot(o,{...h,accessToken:C.accessToken,expiresAt:D.toISOString(),refreshToken:C.refreshToken})}catch{}return{token:C.accessToken,expiration:D}}catch{return Ede(_),_}},"fromSso"),oot=Zc(({token:e,logger:t})=>async()=>{if(t==null||t.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new Io.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},"fromStatic"),aot=Zc((e={})=>(0,Io.memoize)((0,Io.chain)(Tde(e),async()=>{throw new Io.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0),"nodeProvider")});var Y$=w((r1t,qde)=>{"use strict";var WD=Object.defineProperty,uot=Object.getOwnPropertyDescriptor,Nde=Object.getOwnPropertyNames,cot=Object.prototype.hasOwnProperty,zD=s((e,t)=>WD(e,"name",{value:t,configurable:!0}),"__name"),lot=s((e,t)=>s(function(){return e&&(t=(0,e[Nde(e)[0]])(e=0)),t},"__init"),"__esm"),xde=s((e,t)=>{for(var r in t)WD(e,r,{get:t[r],enumerable:!0})},"__export"),dot=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Nde(t))!cot.call(e,i)&&i!==r&&WD(e,i,{get:()=>t[i],enumerable:!(n=uot(t,i))||n.enumerable});return e},"__copyProps"),fot=s(e=>dot(WD({},"__esModule",{value:!0}),e),"__toCommonJS"),Pde={};xde(Pde,{GetRoleCredentialsCommand:()=>V$.GetRoleCredentialsCommand,SSOClient:()=>V$.SSOClient});var V$,hot=lot({"src/loadSso.ts"(){"use strict";V$=Yce()}}),Bde={};xde(Bde,{fromSSO:()=>mot,isSsoProfile:()=>Mde,validateSsoProfile:()=>Fde});qde.exports=fot(Bde);var Mde=zD(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),Dde=(sa(),mt(Uc)),pot=Ide(),Do=xi(),GD=zc(),a0=!1,Rde=zD(async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,clientConfig:a,profile:u,logger:l})=>{let f,h="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let ue=await(0,pot.fromSso)({profile:u})();f={accessToken:ue.token,expiresAt:new Date(ue.expiration).toISOString()}}catch(ue){throw new Do.CredentialsProviderError(ue.message,{tryNextLink:a0,logger:l})}else try{f=await(0,GD.getSSOTokenFromFile)(e)}catch{throw new Do.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${h}`,{tryNextLink:a0,logger:l})}if(new Date(f.expiresAt).getTime()-Date.now()<=0)throw new Do.CredentialsProviderError(`The SSO session associated with this profile has expired. ${h}`,{tryNextLink:a0,logger:l});let{accessToken:p}=f,{SSOClient:g,GetRoleCredentialsCommand:_}=await Promise.resolve().then(()=>(hot(),Pde)),C=o||new g(Object.assign({},a??{},{region:(a==null?void 0:a.region)??n})),D;try{D=await C.send(new _({accountId:r,roleName:i,accessToken:p}))}catch(ue){throw new Do.CredentialsProviderError(ue,{tryNextLink:a0,logger:l})}let{roleCredentials:{accessKeyId:O,secretAccessKey:N,sessionToken:F,expiration:x,credentialScope:P,accountId:X}={}}=D;if(!O||!N||!F||!x)throw new Do.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:a0,logger:l});let G={accessKeyId:O,secretAccessKey:N,sessionToken:F,expiration:new Date(x),...P&&{credentialScope:P},...X&&{accountId:X}};return t?(0,Dde.setCredentialFeature)(G,"CREDENTIALS_SSO","s"):(0,Dde.setCredentialFeature)(G,"CREDENTIALS_SSO_LEGACY","u"),G},"resolveSSOCredentials"),Fde=zD((e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:i,sso_role_name:o}=e;if(!r||!n||!i||!o)throw new Do.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},"validateSsoProfile"),mot=zD((e={})=>async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoSession:a}=e,{ssoClient:u}=e,l=(0,GD.getProfileName)(e);if(!r&&!n&&!i&&!o&&!a){let h=(await(0,GD.parseKnownFiles)(e))[l];if(!h)throw new Do.CredentialsProviderError(`Profile ${l} was not found.`,{logger:e.logger});if(!Mde(h))throw new Do.CredentialsProviderError(`Profile ${l} is not configured with SSO credentials.`,{logger:e.logger});if(h!=null&&h.sso_session){let N=(await(0,GD.loadSsoSessionData)(e))[h.sso_session],F=` configurations in profile ${l} and sso-session ${h.sso_session}`;if(i&&i!==N.sso_region)throw new Do.CredentialsProviderError("Conflicting SSO region"+F,{tryNextLink:!1,logger:e.logger});if(r&&r!==N.sso_start_url)throw new Do.CredentialsProviderError("Conflicting SSO start_url"+F,{tryNextLink:!1,logger:e.logger});h.sso_region=N.sso_region,h.sso_start_url=N.sso_start_url}let{sso_start_url:p,sso_account_id:g,sso_region:_,sso_role_name:C,sso_session:D}=Fde(h,e.logger);return Rde({ssoStartUrl:p,ssoSession:D,ssoAccountId:g,ssoRegion:_,ssoRoleName:C,ssoClient:u,clientConfig:e.clientConfig,profile:l})}else{if(!r||!n||!i||!o)throw new Do.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return Rde({ssoStartUrl:r,ssoSession:a,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoClient:u,clientConfig:e.clientConfig,profile:l})}},"fromSSO")});var K$=w(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.resolveHttpAuthSchemeConfig=Ro.resolveStsAuthConfig=Ro.defaultSTSHttpAuthSchemeProvider=Ro.defaultSTSHttpAuthSchemeParametersProvider=void 0;var got=(bn(),mt(wn)),Lde=wo(),yot=u0(),vot=s(async(e,t,r)=>({operation:(0,Lde.getSmithyContext)(t).operation,region:await(0,Lde.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),"defaultSTSHttpAuthSchemeParametersProvider");Ro.defaultSTSHttpAuthSchemeParametersProvider=vot;function _ot(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}s(_ot,"createAwsAuthSigv4HttpAuthOption");function Ude(e){return{schemeId:"smithy.api#noAuth"}}s(Ude,"createSmithyApiNoAuthHttpAuthOption");var Sot=s(e=>{let t=[];switch(e.operation){case"AssumeRoleWithSAML":{t.push(Ude(e));break}case"AssumeRoleWithWebIdentity":{t.push(Ude(e));break}default:t.push(_ot(e))}return t},"defaultSTSHttpAuthSchemeProvider");Ro.defaultSTSHttpAuthSchemeProvider=Sot;var Eot=s(e=>({...e,stsClientCtor:yot.STSClient}),"resolveStsAuthConfig");Ro.resolveStsAuthConfig=Eot;var Cot=s(e=>{let t=(0,Ro.resolveStsAuthConfig)(e);return{...(0,got.resolveAwsSdkSigV4Config)(t)}},"resolveHttpAuthSchemeConfig");Ro.resolveHttpAuthSchemeConfig=Cot});var No=w(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.commonParams=im.resolveClientEndpointParameters=void 0;var wot=s(e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),"resolveClientEndpointParameters");im.resolveClientEndpointParameters=wot;im.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var jde=w((u1t,bot)=>{bot.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.687.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"vitest run","test:watch":"vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.687.0","@aws-sdk/core":"3.686.0","@aws-sdk/credential-provider-node":"3.687.0","@aws-sdk/middleware-host-header":"3.686.0","@aws-sdk/middleware-logger":"3.686.0","@aws-sdk/middleware-recursion-detection":"3.686.0","@aws-sdk/middleware-user-agent":"3.687.0","@aws-sdk/region-config-resolver":"3.686.0","@aws-sdk/types":"3.686.0","@aws-sdk/util-endpoints":"3.686.0","@aws-sdk/util-user-agent-browser":"3.686.0","@aws-sdk/util-user-agent-node":"3.687.0","@smithy/config-resolver":"^3.0.10","@smithy/core":"^2.5.1","@smithy/fetch-http-handler":"^4.0.0","@smithy/hash-node":"^3.0.8","@smithy/invalid-dependency":"^3.0.8","@smithy/middleware-content-length":"^3.0.10","@smithy/middleware-endpoint":"^3.2.1","@smithy/middleware-retry":"^3.0.25","@smithy/middleware-serde":"^3.0.8","@smithy/middleware-stack":"^3.0.8","@smithy/node-config-provider":"^3.1.9","@smithy/node-http-handler":"^3.2.5","@smithy/protocol-http":"^4.1.5","@smithy/smithy-client":"^3.4.2","@smithy/types":"^3.6.0","@smithy/url-parser":"^3.0.8","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.25","@smithy/util-defaults-mode-node":"^3.0.25","@smithy/util-endpoints":"^2.1.4","@smithy/util-middleware":"^3.0.8","@smithy/util-retry":"^3.0.8","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var ufe=w(HD=>{"use strict";Object.defineProperty(HD,"__esModule",{value:!0});HD.ruleSet=void 0;var Qde="required",yt="type",Ht="fn",Vt="argv",tl="ref",$de=!1,X$=!0,el="booleanEquals",zn="stringEquals",Zde="sigv4",efe="sts",tfe="us-east-1",Ar="endpoint",kde="https://sts.{Region}.{PartitionResult#dnsSuffix}",la="tree",sm="error",Q$="getAttr",Gde={[Qde]:!1,[yt]:"String"},J$={[Qde]:!0,default:!1,[yt]:"Boolean"},rfe={[tl]:"Endpoint"},Wde={[Ht]:"isSet",[Vt]:[{[tl]:"Region"}]},Hn={[tl]:"Region"},zde={[Ht]:"aws.partition",[Vt]:[Hn],assign:"PartitionResult"},nfe={[tl]:"UseFIPS"},ife={[tl]:"UseDualStack"},fi={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Zde,signingName:efe,signingRegion:tfe}]},headers:{}},Es={},Hde={conditions:[{[Ht]:zn,[Vt]:[Hn,"aws-global"]}],[Ar]:fi,[yt]:Ar},sfe={[Ht]:el,[Vt]:[nfe,!0]},ofe={[Ht]:el,[Vt]:[ife,!0]},Vde={[Ht]:Q$,[Vt]:[{[tl]:"PartitionResult"},"supportsFIPS"]},afe={[tl]:"PartitionResult"},Yde={[Ht]:el,[Vt]:[!0,{[Ht]:Q$,[Vt]:[afe,"supportsDualStack"]}]},Kde=[{[Ht]:"isSet",[Vt]:[rfe]}],Xde=[sfe],Jde=[ofe],Oot={version:"1.0",parameters:{Region:Gde,UseDualStack:J$,UseFIPS:J$,Endpoint:Gde,UseGlobalEndpoint:J$},rules:[{conditions:[{[Ht]:el,[Vt]:[{[tl]:"UseGlobalEndpoint"},X$]},{[Ht]:"not",[Vt]:Kde},Wde,zde,{[Ht]:el,[Vt]:[nfe,$de]},{[Ht]:el,[Vt]:[ife,$de]}],rules:[{conditions:[{[Ht]:zn,[Vt]:[Hn,"ap-northeast-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"ap-south-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"ap-southeast-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"ap-southeast-2"]}],endpoint:fi,[yt]:Ar},Hde,{conditions:[{[Ht]:zn,[Vt]:[Hn,"ca-central-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"eu-central-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"eu-north-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"eu-west-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"eu-west-2"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"eu-west-3"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"sa-east-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,tfe]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"us-east-2"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"us-west-1"]}],endpoint:fi,[yt]:Ar},{conditions:[{[Ht]:zn,[Vt]:[Hn,"us-west-2"]}],endpoint:fi,[yt]:Ar},{endpoint:{url:kde,properties:{authSchemes:[{name:Zde,signingName:efe,signingRegion:"{Region}"}]},headers:Es},[yt]:Ar}],[yt]:la},{conditions:Kde,rules:[{conditions:Xde,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[yt]:sm},{conditions:Jde,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[yt]:sm},{endpoint:{url:rfe,properties:Es,headers:Es},[yt]:Ar}],[yt]:la},{conditions:[Wde],rules:[{conditions:[zde],rules:[{conditions:[sfe,ofe],rules:[{conditions:[{[Ht]:el,[Vt]:[X$,Vde]},Yde],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Es,headers:Es},[yt]:Ar}],[yt]:la},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[yt]:sm}],[yt]:la},{conditions:Xde,rules:[{conditions:[{[Ht]:el,[Vt]:[Vde,X$]}],rules:[{conditions:[{[Ht]:zn,[Vt]:[{[Ht]:Q$,[Vt]:[afe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Es,headers:Es},[yt]:Ar},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Es,headers:Es},[yt]:Ar}],[yt]:la},{error:"FIPS is enabled but this partition does not support FIPS",[yt]:sm}],[yt]:la},{conditions:Jde,rules:[{conditions:[Yde],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Es,headers:Es},[yt]:Ar}],[yt]:la},{error:"DualStack is enabled but this partition does not support DualStack",[yt]:sm}],[yt]:la},Hde,{endpoint:{url:kde,properties:Es,headers:Es},[yt]:Ar}],[yt]:la}],[yt]:la},{error:"Invalid Configuration: Missing Region",[yt]:sm}]};HD.ruleSet=Oot});var cfe=w(VD=>{"use strict";Object.defineProperty(VD,"__esModule",{value:!0});VD.defaultEndpointResolver=void 0;var Tot=ip(),Z$=rp(),Aot=ufe(),Iot=new Z$.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),Dot=s((e,t={})=>Iot.get(e,()=>(0,Z$.resolveEndpoint)(Aot.ruleSet,{endpointParams:e,logger:t.logger})),"defaultEndpointResolver");VD.defaultEndpointResolver=Dot;Z$.customEndpointFunctions.aws=Tot.awsEndpointFunctions});var ffe=w(YD=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});YD.getRuntimeConfig=void 0;var Rot=(bn(),mt(wn)),Not=(Ss(),mt(bo)),xot=Tr(),Pot=Md(),lfe=fu(),dfe=_s(),Bot=K$(),Mot=cfe(),Fot=s(e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??lfe.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??lfe.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Mot.defaultEndpointResolver,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Bot.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Rot.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Not.NoAuthSigner}],logger:(e==null?void 0:e.logger)??new xot.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??Pot.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??dfe.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??dfe.toUtf8}),"getRuntimeConfig");YD.getRuntimeConfig=Fot});var vfe=w(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});XD.getRuntimeConfig=void 0;var qot=(wp(),mt(Cp)),Lot=qot.__importDefault(jde()),hfe=(bn(),mt(wn)),pfe=qD(),mfe=MS(),KD=ua(),Uot=(Ss(),mt(bo)),jot=qS(),gfe=yu(),om=Hc(),yfe=Od(),$ot=LS(),kot=_p(),Got=ffe(),Wot=Tr(),zot=$S(),Hot=Tr(),Vot=s(e=>{(0,Hot.emitWarningIfUnsupportedVersion)(process.version);let t=(0,zot.resolveDefaultsModeConfig)(e),r=s(()=>t().then(Wot.loadConfigsForDefaultMode),"defaultConfigProvider"),n=(0,Got.getRuntimeConfig)(e);return(0,hfe.emitWarningIfUnsupportedVersion)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??$ot.calculateBodyLength,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??pfe.defaultProvider,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??(0,mfe.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Lot.default.version}),httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await(0,pfe.defaultProvider)((o==null?void 0:o.__config)||{})()),signer:new hfe.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Uot.NoAuthSigner}],maxAttempts:(e==null?void 0:e.maxAttempts)??(0,om.loadConfig)(gfe.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(e==null?void 0:e.region)??(0,om.loadConfig)(KD.NODE_REGION_CONFIG_OPTIONS,KD.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:yfe.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(0,om.loadConfig)({...gfe.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||kot.DEFAULT_RETRY_MODE}),sha256:(e==null?void 0:e.sha256)??jot.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??yfe.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(0,om.loadConfig)(KD.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(0,om.loadConfig)(KD.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:(e==null?void 0:e.userAgentAppId)??(0,om.loadConfig)(mfe.NODE_APP_ID_CONFIG_OPTIONS)}},"getRuntimeConfig");XD.getRuntimeConfig=Vot});var _fe=w(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.resolveHttpAuthRuntimeConfig=am.getHttpAuthExtensionConfiguration=void 0;var Yot=s(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(i){let o=t.findIndex(a=>a.schemeId===i.schemeId);o===-1?t.push(i):t.splice(o,1,i)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration");am.getHttpAuthExtensionConfiguration=Yot;var Kot=s(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig");am.resolveHttpAuthRuntimeConfig=Kot});var bfe=w(QD=>{"use strict";Object.defineProperty(QD,"__esModule",{value:!0});QD.resolveRuntimeExtensions=void 0;var Sfe=kS(),Efe=Or(),Cfe=Tr(),wfe=_fe(),JD=s(e=>e,"asPartial"),Xot=s((e,t)=>{let r={...JD((0,Sfe.getAwsRegionExtensionConfiguration)(e)),...JD((0,Cfe.getDefaultExtensionConfiguration)(e)),...JD((0,Efe.getHttpHandlerExtensionConfiguration)(e)),...JD((0,wfe.getHttpAuthExtensionConfiguration)(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,Sfe.resolveAwsRegionExtensionConfiguration)(r),...(0,Cfe.resolveDefaultRuntimeConfig)(r),...(0,Efe.resolveHttpHandlerRuntimeConfig)(r),...(0,wfe.resolveHttpAuthRuntimeConfig)(r)}},"resolveRuntimeExtensions");QD.resolveRuntimeExtensions=Xot});var u0=w(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.STSClient=um.__Client=void 0;var Ofe=H_(),Jot=V_(),Qot=Y_(),Tfe=mp(),Zot=ua(),ek=(Ss(),mt(bo)),eat=_S(),tat=Fd(),Afe=yu(),Dfe=Tr();Object.defineProperty(um,"__Client",{enumerable:!0,get:function(){return Dfe.Client}});var Ife=K$(),rat=No(),nat=vfe(),iat=bfe(),rk=class rk extends Dfe.Client{constructor(...[t]){let r=(0,nat.getRuntimeConfig)(t||{}),n=(0,rat.resolveClientEndpointParameters)(r),i=(0,Tfe.resolveUserAgentConfig)(n),o=(0,Afe.resolveRetryConfig)(i),a=(0,Zot.resolveRegionConfig)(o),u=(0,Ofe.resolveHostHeaderConfig)(a),l=(0,tat.resolveEndpointConfig)(u),f=(0,Ife.resolveHttpAuthSchemeConfig)(l),h=(0,iat.resolveRuntimeExtensions)(f,(t==null?void 0:t.extensions)||[]);super(h),this.config=h,this.middlewareStack.use((0,Tfe.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Afe.getRetryPlugin)(this.config)),this.middlewareStack.use((0,eat.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Ofe.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Jot.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Qot.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,ek.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:Ife.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new ek.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,ek.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};s(rk,"STSClient");var tk=rk;um.STSClient=tk});var Lk=w((C1t,qk)=>{"use strict";var ZD=Object.defineProperty,sat=Object.getOwnPropertyDescriptor,oat=Object.getOwnPropertyNames,aat=Object.prototype.hasOwnProperty,ae=s((e,t)=>ZD(e,"name",{value:t,configurable:!0}),"__name"),uat=s((e,t)=>{for(var r in t)ZD(e,r,{get:t[r],enumerable:!0})},"__export"),Nk=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oat(t))!aat.call(e,i)&&i!==r&&ZD(e,i,{get:()=>t[i],enumerable:!(n=sat(t,i))||n.enumerable});return e},"__copyProps"),cat=s((e,t,r)=>(Nk(e,t,"default"),r&&Nk(r,t,"default")),"__reExport"),lat=s(e=>Nk(ZD({},"__esModule",{value:!0}),e),"__toCommonJS"),Pk={};uat(Pk,{AssumeRoleCommand:()=>Mk,AssumeRoleResponseFilterSensitiveLog:()=>Yfe,AssumeRoleWithSAMLCommand:()=>ihe,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>Kfe,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>Xfe,AssumeRoleWithWebIdentityCommand:()=>Fk,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Jfe,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Qfe,ClientInputEndpointParameters:()=>xut.ClientInputEndpointParameters,CredentialsFilterSensitiveLog:()=>Om,DecodeAuthorizationMessageCommand:()=>ahe,ExpiredTokenException:()=>Pfe,GetAccessKeyInfoCommand:()=>che,GetCallerIdentityCommand:()=>dhe,GetFederationTokenCommand:()=>hhe,GetFederationTokenResponseFilterSensitiveLog:()=>Zfe,GetSessionTokenCommand:()=>mhe,GetSessionTokenResponseFilterSensitiveLog:()=>ehe,IDPCommunicationErrorException:()=>zfe,IDPRejectedClaimException:()=>$fe,InvalidAuthorizationMessageException:()=>Vfe,InvalidIdentityTokenException:()=>Gfe,MalformedPolicyDocumentException:()=>Mfe,PackedPolicyTooLargeException:()=>qfe,RegionDisabledException:()=>Ufe,STS:()=>yhe,STSServiceException:()=>da,decorateDefaultCredentialProvider:()=>Mut,getDefaultRoleAssumer:()=>whe,getDefaultRoleAssumerWithWebIdentity:()=>bhe});qk.exports=lat(Pk);cat(Pk,u0(),qk.exports);var rl=Fd(),nl=wd(),dat=No(),Ne=Tr(),gm,Nfe=(gm=class extends Ne.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,gm.prototype)}},s(gm,"_STSServiceException"),gm);ae(Nfe,"STSServiceException");var da=Nfe,ym,xfe=(ym=class extends da{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ym.prototype)}},s(ym,"_ExpiredTokenException"),ym);ae(xfe,"ExpiredTokenException");var Pfe=xfe,vm,Bfe=(vm=class extends da{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,vm.prototype)}},s(vm,"_MalformedPolicyDocumentException"),vm);ae(Bfe,"MalformedPolicyDocumentException");var Mfe=Bfe,_m,Ffe=(_m=class extends da{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,_m.prototype)}},s(_m,"_PackedPolicyTooLargeException"),_m);ae(Ffe,"PackedPolicyTooLargeException");var qfe=Ffe,Sm,Lfe=(Sm=class extends da{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,Sm.prototype)}},s(Sm,"_RegionDisabledException"),Sm);ae(Lfe,"RegionDisabledException");var Ufe=Lfe,Em,jfe=(Em=class extends da{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,Em.prototype)}},s(Em,"_IDPRejectedClaimException"),Em);ae(jfe,"IDPRejectedClaimException");var $fe=jfe,Cm,kfe=(Cm=class extends da{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Cm.prototype)}},s(Cm,"_InvalidIdentityTokenException"),Cm);ae(kfe,"InvalidIdentityTokenException");var Gfe=kfe,wm,Wfe=(wm=class extends da{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,wm.prototype)}},s(wm,"_IDPCommunicationErrorException"),wm);ae(Wfe,"IDPCommunicationErrorException");var zfe=Wfe,bm,Hfe=(bm=class extends da{constructor(t){super({name:"InvalidAuthorizationMessageException",$fault:"client",...t}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,bm.prototype)}},s(bm,"_InvalidAuthorizationMessageException"),bm);ae(Hfe,"InvalidAuthorizationMessageException");var Vfe=Hfe,Om=ae(e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Ne.SENSITIVE_STRING}}),"CredentialsFilterSensitiveLog"),Yfe=ae(e=>({...e,...e.Credentials&&{Credentials:Om(e.Credentials)}}),"AssumeRoleResponseFilterSensitiveLog"),Kfe=ae(e=>({...e,...e.SAMLAssertion&&{SAMLAssertion:Ne.SENSITIVE_STRING}}),"AssumeRoleWithSAMLRequestFilterSensitiveLog"),Xfe=ae(e=>({...e,...e.Credentials&&{Credentials:Om(e.Credentials)}}),"AssumeRoleWithSAMLResponseFilterSensitiveLog"),Jfe=ae(e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Ne.SENSITIVE_STRING}}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog"),Qfe=ae(e=>({...e,...e.Credentials&&{Credentials:Om(e.Credentials)}}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog"),Zfe=ae(e=>({...e,...e.Credentials&&{Credentials:Om(e.Credentials)}}),"GetFederationTokenResponseFilterSensitiveLog"),ehe=ae(e=>({...e,...e.Credentials&&{Credentials:Om(e.Credentials)}}),"GetSessionTokenResponseFilterSensitiveLog"),bu=(bn(),mt(wn)),fat=Or(),hat=ae(async(e,t)=>{let r=ol,n;return n=ll({...qat(e,t),[ul]:put,[cl]:al}),sl(t,r,"/",void 0,n)},"se_AssumeRoleCommand"),pat=ae(async(e,t)=>{let r=ol,n;return n=ll({...Lat(e,t),[ul]:mut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_AssumeRoleWithSAMLCommand"),mat=ae(async(e,t)=>{let r=ol,n;return n=ll({...Uat(e,t),[ul]:gut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_AssumeRoleWithWebIdentityCommand"),gat=ae(async(e,t)=>{let r=ol,n;return n=ll({...jat(e,t),[ul]:yut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_DecodeAuthorizationMessageCommand"),yat=ae(async(e,t)=>{let r=ol,n;return n=ll({...$at(e,t),[ul]:vut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_GetAccessKeyInfoCommand"),vat=ae(async(e,t)=>{let r=ol,n;return n=ll({...kat(e,t),[ul]:_ut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_GetCallerIdentityCommand"),_at=ae(async(e,t)=>{let r=ol,n;return n=ll({...Gat(e,t),[ul]:Sut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_GetFederationTokenCommand"),Sat=ae(async(e,t)=>{let r=ol,n;return n=ll({...Wat(e,t),[ul]:Eut,[cl]:al}),sl(t,r,"/",void 0,n)},"se_GetSessionTokenCommand"),Eat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=Xat(r.AssumeRoleResult,t),{$metadata:hi(e),...n}},"de_AssumeRoleCommand"),Cat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=Jat(r.AssumeRoleWithSAMLResult,t),{$metadata:hi(e),...n}},"de_AssumeRoleWithSAMLCommand"),wat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=Qat(r.AssumeRoleWithWebIdentityResult,t),{$metadata:hi(e),...n}},"de_AssumeRoleWithWebIdentityCommand"),bat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=Zat(r.DecodeAuthorizationMessageResult,t),{$metadata:hi(e),...n}},"de_DecodeAuthorizationMessageCommand"),Oat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=rut(r.GetAccessKeyInfoResult,t),{$metadata:hi(e),...n}},"de_GetAccessKeyInfoCommand"),Tat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=nut(r.GetCallerIdentityResult,t),{$metadata:hi(e),...n}},"de_GetCallerIdentityCommand"),Aat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=iut(r.GetFederationTokenResult,t),{$metadata:hi(e),...n}},"de_GetFederationTokenCommand"),Iat=ae(async(e,t)=>{if(e.statusCode>=300)return il(e,t);let r=await(0,bu.parseXmlBody)(e.body,t),n={};return n=sut(r.GetSessionTokenResult,t),{$metadata:hi(e),...n}},"de_GetSessionTokenCommand"),il=ae(async(e,t)=>{let r={...e,body:await(0,bu.parseXmlErrorBody)(e.body,t)},n=Cut(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Dat(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Bat(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Mat(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Fat(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Nat(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Pat(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Rat(r,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await xat(r,t);default:let i=r.body;return hut({output:e,parsedBody:i.Error,errorCode:n})}},"de_CommandError"),Dat=ae(async(e,t)=>{let r=e.body,n=eut(r.Error,t),i=new Pfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_ExpiredTokenExceptionRes"),Rat=ae(async(e,t)=>{let r=e.body,n=out(r.Error,t),i=new zfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_IDPCommunicationErrorExceptionRes"),Nat=ae(async(e,t)=>{let r=e.body,n=aut(r.Error,t),i=new $fe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_IDPRejectedClaimExceptionRes"),xat=ae(async(e,t)=>{let r=e.body,n=uut(r.Error,t),i=new Vfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_InvalidAuthorizationMessageExceptionRes"),Pat=ae(async(e,t)=>{let r=e.body,n=cut(r.Error,t),i=new Gfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_InvalidIdentityTokenExceptionRes"),Bat=ae(async(e,t)=>{let r=e.body,n=lut(r.Error,t),i=new Mfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_MalformedPolicyDocumentExceptionRes"),Mat=ae(async(e,t)=>{let r=e.body,n=dut(r.Error,t),i=new qfe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_PackedPolicyTooLargeExceptionRes"),Fat=ae(async(e,t)=>{let r=e.body,n=fut(r.Error,t),i=new Ufe({$metadata:hi(e),...n});return(0,Ne.decorateServiceException)(i,r)},"de_RegionDisabledExceptionRes"),qat=ae((e,t)=>{var r,n,i,o;let a={};if(e[wu]!=null&&(a[wu]=e[wu]),e[fm]!=null&&(a[fm]=e[fm]),e[Js]!=null){let u=eR(e[Js],t);((r=e[Js])==null?void 0:r.length)===0&&(a.PolicyArns=[]),Object.entries(u).forEach(([l,f])=>{let h=`PolicyArns.${l}`;a[h]=f})}if(e[Xs]!=null&&(a[Xs]=e[Xs]),e[Mi]!=null&&(a[Mi]=e[Mi]),e[pm]!=null){let u=the(e[pm],t);((n=e[pm])==null?void 0:n.length)===0&&(a.Tags=[]),Object.entries(u).forEach(([l,f])=>{let h=`Tags.${l}`;a[h]=f})}if(e[Tk]!=null){let u=Kat(e[Tk],t);((i=e[Tk])==null?void 0:i.length)===0&&(a.TransitiveTagKeys=[]),Object.entries(u).forEach(([l,f])=>{let h=`TransitiveTagKeys.${l}`;a[h]=f})}if(e[ak]!=null&&(a[ak]=e[ak]),e[hm]!=null&&(a[hm]=e[hm]),e[mm]!=null&&(a[mm]=e[mm]),e[Zs]!=null&&(a[Zs]=e[Zs]),e[yk]!=null){let u=Vat(e[yk],t);((o=e[yk])==null?void 0:o.length)===0&&(a.ProvidedContexts=[]),Object.entries(u).forEach(([l,f])=>{let h=`ProvidedContexts.${l}`;a[h]=f})}return a},"se_AssumeRoleRequest"),Lat=ae((e,t)=>{var r;let n={};if(e[wu]!=null&&(n[wu]=e[wu]),e[mk]!=null&&(n[mk]=e[mk]),e[Ck]!=null&&(n[Ck]=e[Ck]),e[Js]!=null){let i=eR(e[Js],t);((r=e[Js])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(i).forEach(([o,a])=>{let u=`PolicyArns.${o}`;n[u]=a})}return e[Xs]!=null&&(n[Xs]=e[Xs]),e[Mi]!=null&&(n[Mi]=e[Mi]),n},"se_AssumeRoleWithSAMLRequest"),Uat=ae((e,t)=>{var r;let n={};if(e[wu]!=null&&(n[wu]=e[wu]),e[fm]!=null&&(n[fm]=e[fm]),e[Dk]!=null&&(n[Dk]=e[Dk]),e[vk]!=null&&(n[vk]=e[vk]),e[Js]!=null){let i=eR(e[Js],t);((r=e[Js])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(i).forEach(([o,a])=>{let u=`PolicyArns.${o}`;n[u]=a})}return e[Xs]!=null&&(n[Xs]=e[Xs]),e[Mi]!=null&&(n[Mi]=e[Mi]),n},"se_AssumeRoleWithWebIdentityRequest"),jat=ae((e,t)=>{let r={};return e[uk]!=null&&(r[uk]=e[uk]),r},"se_DecodeAuthorizationMessageRequest"),$at=ae((e,t)=>{let r={};return e[cm]!=null&&(r[cm]=e[cm]),r},"se_GetAccessKeyInfoRequest"),kat=ae((e,t)=>({}),"se_GetCallerIdentityRequest"),Gat=ae((e,t)=>{var r,n;let i={};if(e[hk]!=null&&(i[hk]=e[hk]),e[Xs]!=null&&(i[Xs]=e[Xs]),e[Js]!=null){let o=eR(e[Js],t);((r=e[Js])==null?void 0:r.length)===0&&(i.PolicyArns=[]),Object.entries(o).forEach(([a,u])=>{let l=`PolicyArns.${a}`;i[l]=u})}if(e[Mi]!=null&&(i[Mi]=e[Mi]),e[pm]!=null){let o=the(e[pm],t);((n=e[pm])==null?void 0:n.length)===0&&(i.Tags=[]),Object.entries(o).forEach(([a,u])=>{let l=`Tags.${a}`;i[l]=u})}return i},"se_GetFederationTokenRequest"),Wat=ae((e,t)=>{let r={};return e[Mi]!=null&&(r[Mi]=e[Mi]),e[hm]!=null&&(r[hm]=e[hm]),e[mm]!=null&&(r[mm]=e[mm]),r},"se_GetSessionTokenRequest"),eR=ae((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=zat(i,t);Object.entries(o).forEach(([a,u])=>{r[`member.${n}.${a}`]=u}),n++}return r},"se_policyDescriptorListType"),zat=ae((e,t)=>{let r={};return e[Rk]!=null&&(r[Rk]=e[Rk]),r},"se_PolicyDescriptorType"),Hat=ae((e,t)=>{let r={};return e[gk]!=null&&(r[gk]=e[gk]),e[ik]!=null&&(r[ik]=e[ik]),r},"se_ProvidedContext"),Vat=ae((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=Hat(i,t);Object.entries(o).forEach(([a,u])=>{r[`member.${n}.${a}`]=u}),n++}return r},"se_ProvidedContextsListType"),Yat=ae((e,t)=>{let r={};return e[fk]!=null&&(r[fk]=e[fk]),e[Ik]!=null&&(r[Ik]=e[Ik]),r},"se_Tag"),Kat=ae((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`member.${n}`]=i,n++);return r},"se_tagKeyListType"),the=ae((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=Yat(i,t);Object.entries(o).forEach(([a,u])=>{r[`member.${n}.${a}`]=u}),n++}return r},"se_tagListType"),Bk=ae((e,t)=>{let r={};return e[nk]!=null&&(r[nk]=(0,Ne.expectString)(e[nk])),e[Cu]!=null&&(r[Cu]=(0,Ne.expectString)(e[Cu])),r},"de_AssumedRoleUser"),Xat=ae((e,t)=>{let r={};return e[Bi]!=null&&(r[Bi]=v0(e[Bi],t)),e[Eu]!=null&&(r[Eu]=Bk(e[Eu],t)),e[Qs]!=null&&(r[Qs]=(0,Ne.strictParseInt32)(e[Qs])),e[Zs]!=null&&(r[Zs]=(0,Ne.expectString)(e[Zs])),r},"de_AssumeRoleResponse"),Jat=ae((e,t)=>{let r={};return e[Bi]!=null&&(r[Bi]=v0(e[Bi],t)),e[Eu]!=null&&(r[Eu]=Bk(e[Eu],t)),e[Qs]!=null&&(r[Qs]=(0,Ne.strictParseInt32)(e[Qs])),e[Sk]!=null&&(r[Sk]=(0,Ne.expectString)(e[Sk])),e[bk]!=null&&(r[bk]=(0,Ne.expectString)(e[bk])),e[dk]!=null&&(r[dk]=(0,Ne.expectString)(e[dk])),e[dm]!=null&&(r[dm]=(0,Ne.expectString)(e[dm])),e[pk]!=null&&(r[pk]=(0,Ne.expectString)(e[pk])),e[Zs]!=null&&(r[Zs]=(0,Ne.expectString)(e[Zs])),r},"de_AssumeRoleWithSAMLResponse"),Qat=ae((e,t)=>{let r={};return e[Bi]!=null&&(r[Bi]=v0(e[Bi],t)),e[wk]!=null&&(r[wk]=(0,Ne.expectString)(e[wk])),e[Eu]!=null&&(r[Eu]=Bk(e[Eu],t)),e[Qs]!=null&&(r[Qs]=(0,Ne.strictParseInt32)(e[Qs])),e[_k]!=null&&(r[_k]=(0,Ne.expectString)(e[_k])),e[dm]!=null&&(r[dm]=(0,Ne.expectString)(e[dm])),e[Zs]!=null&&(r[Zs]=(0,Ne.expectString)(e[Zs])),r},"de_AssumeRoleWithWebIdentityResponse"),v0=ae((e,t)=>{let r={};return e[cm]!=null&&(r[cm]=(0,Ne.expectString)(e[cm])),e[Ek]!=null&&(r[Ek]=(0,Ne.expectString)(e[Ek])),e[Ok]!=null&&(r[Ok]=(0,Ne.expectString)(e[Ok])),e[ok]!=null&&(r[ok]=(0,Ne.expectNonNull)((0,Ne.parseRfc3339DateTimeWithOffset)(e[ok]))),r},"de_Credentials"),Zat=ae((e,t)=>{let r={};return e[sk]!=null&&(r[sk]=(0,Ne.expectString)(e[sk])),r},"de_DecodeAuthorizationMessageResponse"),eut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_ExpiredTokenException"),tut=ae((e,t)=>{let r={};return e[lk]!=null&&(r[lk]=(0,Ne.expectString)(e[lk])),e[Cu]!=null&&(r[Cu]=(0,Ne.expectString)(e[Cu])),r},"de_FederatedUser"),rut=ae((e,t)=>{let r={};return e[lm]!=null&&(r[lm]=(0,Ne.expectString)(e[lm])),r},"de_GetAccessKeyInfoResponse"),nut=ae((e,t)=>{let r={};return e[Ak]!=null&&(r[Ak]=(0,Ne.expectString)(e[Ak])),e[lm]!=null&&(r[lm]=(0,Ne.expectString)(e[lm])),e[Cu]!=null&&(r[Cu]=(0,Ne.expectString)(e[Cu])),r},"de_GetCallerIdentityResponse"),iut=ae((e,t)=>{let r={};return e[Bi]!=null&&(r[Bi]=v0(e[Bi],t)),e[ck]!=null&&(r[ck]=tut(e[ck],t)),e[Qs]!=null&&(r[Qs]=(0,Ne.strictParseInt32)(e[Qs])),r},"de_GetFederationTokenResponse"),sut=ae((e,t)=>{let r={};return e[Bi]!=null&&(r[Bi]=v0(e[Bi],t)),r},"de_GetSessionTokenResponse"),out=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_IDPCommunicationErrorException"),aut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_IDPRejectedClaimException"),uut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_InvalidAuthorizationMessageException"),cut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_InvalidIdentityTokenException"),lut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_MalformedPolicyDocumentException"),dut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_PackedPolicyTooLargeException"),fut=ae((e,t)=>{let r={};return e[Ir]!=null&&(r[Ir]=(0,Ne.expectString)(e[Ir])),r},"de_RegionDisabledException"),hi=ae(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),hut=(0,Ne.withBaseException)(da),sl=ae(async(e,t,r,n,i)=>{let{hostname:o,protocol:a="https",port:u,path:l}=await e.endpoint(),f={protocol:a,hostname:o,port:u,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:t};return n!==void 0&&(f.hostname=n),i!==void 0&&(f.body=i),new fat.HttpRequest(f)},"buildHttpRpcRequest"),ol={"content-type":"application/x-www-form-urlencoded"},al="2011-06-15",ul="Action",cm="AccessKeyId",put="AssumeRole",nk="AssumedRoleId",Eu="AssumedRoleUser",mut="AssumeRoleWithSAML",gut="AssumeRoleWithWebIdentity",lm="Account",Cu="Arn",dm="Audience",Bi="Credentials",ik="ContextAssertion",yut="DecodeAuthorizationMessage",sk="DecodedMessage",Mi="DurationSeconds",ok="Expiration",ak="ExternalId",uk="EncodedMessage",ck="FederatedUser",lk="FederatedUserId",vut="GetAccessKeyInfo",_ut="GetCallerIdentity",Sut="GetFederationToken",Eut="GetSessionToken",dk="Issuer",fk="Key",hk="Name",pk="NameQualifier",Xs="Policy",Js="PolicyArns",mk="PrincipalArn",gk="ProviderArn",yk="ProvidedContexts",vk="ProviderId",Qs="PackedPolicySize",_k="Provider",wu="RoleArn",fm="RoleSessionName",Sk="Subject",Ek="SecretAccessKey",Ck="SAMLAssertion",wk="SubjectFromWebIdentityToken",Zs="SourceIdentity",hm="SerialNumber",bk="SubjectType",Ok="SessionToken",pm="Tags",mm="TokenCode",Tk="TransitiveTagKeys",Ak="UserId",cl="Version",Ik="Value",Dk="WebIdentityToken",Rk="arn",Ir="message",ll=ae(e=>Object.entries(e).map(([t,r])=>(0,Ne.extendedEncodeURIComponent)(t)+"="+(0,Ne.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),Cut=ae((e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"},"loadQueryErrorCode"),c0,rhe=(c0=class extends Ne.Command.classBuilder().ep(dat.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Yfe).ser(hat).de(Eat).build(){},s(c0,"_AssumeRoleCommand"),c0);ae(rhe,"AssumeRoleCommand");var Mk=rhe,wut=No(),l0,nhe=(l0=class extends Ne.Command.classBuilder().ep(wut.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(Kfe,Xfe).ser(pat).de(Cat).build(){},s(l0,"_AssumeRoleWithSAMLCommand"),l0);ae(nhe,"AssumeRoleWithSAMLCommand");var ihe=nhe,but=No(),d0,she=(d0=class extends Ne.Command.classBuilder().ep(but.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Jfe,Qfe).ser(mat).de(wat).build(){},s(d0,"_AssumeRoleWithWebIdentityCommand"),d0);ae(she,"AssumeRoleWithWebIdentityCommand");var Fk=she,Out=No(),f0,ohe=(f0=class extends Ne.Command.classBuilder().ep(Out.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(gat).de(bat).build(){},s(f0,"_DecodeAuthorizationMessageCommand"),f0);ae(ohe,"DecodeAuthorizationMessageCommand");var ahe=ohe,Tut=No(),h0,uhe=(h0=class extends Ne.Command.classBuilder().ep(Tut.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(yat).de(Oat).build(){},s(h0,"_GetAccessKeyInfoCommand"),h0);ae(uhe,"GetAccessKeyInfoCommand");var che=uhe,Aut=No(),p0,lhe=(p0=class extends Ne.Command.classBuilder().ep(Aut.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(vat).de(Tat).build(){},s(p0,"_GetCallerIdentityCommand"),p0);ae(lhe,"GetCallerIdentityCommand");var dhe=lhe,Iut=No(),m0,fhe=(m0=class extends Ne.Command.classBuilder().ep(Iut.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,Zfe).ser(_at).de(Aat).build(){},s(m0,"_GetFederationTokenCommand"),m0);ae(fhe,"GetFederationTokenCommand");var hhe=fhe,Dut=No(),g0,phe=(g0=class extends Ne.Command.classBuilder().ep(Dut.commonParams).m(function(t,r,n,i){return[(0,nl.getSerdePlugin)(n,this.serialize,this.deserialize),(0,rl.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,ehe).ser(Sat).de(Iat).build(){},s(g0,"_GetSessionTokenCommand"),g0);ae(phe,"GetSessionTokenCommand");var mhe=phe,Rut=u0(),Nut={AssumeRoleCommand:Mk,AssumeRoleWithSAMLCommand:ihe,AssumeRoleWithWebIdentityCommand:Fk,DecodeAuthorizationMessageCommand:ahe,GetAccessKeyInfoCommand:che,GetCallerIdentityCommand:dhe,GetFederationTokenCommand:hhe,GetSessionTokenCommand:mhe},y0,ghe=(y0=class extends Rut.STSClient{},s(y0,"_STS"),y0);ae(ghe,"STS");var yhe=ghe;(0,Ne.createAggregatedClient)(Nut,yhe);var xut=No(),xk=(sa(),mt(Uc)),Rfe="us-east-1",vhe=ae(e=>{if(typeof(e==null?void 0:e.Arn)=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},"getAccountIdFromAssumedRoleUser"),_he=ae(async(e,t,r)=>{var n;let i=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return(n=r==null?void 0:r.debug)==null||n.call(r,"@aws-sdk/client-sts::resolveRegion","accepting first of:",`${i} (provider)`,`${o} (parent client)`,`${Rfe} (STS default)`),i??o??Rfe},"resolveRegion"),Put=ae((e,t)=>{let r,n;return async(i,o)=>{var a,u,l;if(n=i,!r){let{logger:_=(a=e==null?void 0:e.parentClientConfig)==null?void 0:a.logger,region:C,requestHandler:D=(u=e==null?void 0:e.parentClientConfig)==null?void 0:u.requestHandler,credentialProviderLogger:O}=e,N=await _he(C,(l=e==null?void 0:e.parentClientConfig)==null?void 0:l.region,O),F=!She(D);r=new t({credentialDefaultProvider:()=>async()=>n,region:N,requestHandler:F?D:void 0,logger:_})}let{Credentials:f,AssumedRoleUser:h}=await r.send(new Mk(o));if(!f||!f.AccessKeyId||!f.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let p=vhe(h),g={accessKeyId:f.AccessKeyId,secretAccessKey:f.SecretAccessKey,sessionToken:f.SessionToken,expiration:f.Expiration,...f.CredentialScope&&{credentialScope:f.CredentialScope},...p&&{accountId:p}};return(0,xk.setCredentialFeature)(g,"CREDENTIALS_STS_ASSUME_ROLE","i"),g}},"getDefaultRoleAssumer"),But=ae((e,t)=>{let r;return async n=>{var i,o,a;if(!r){let{logger:p=(i=e==null?void 0:e.parentClientConfig)==null?void 0:i.logger,region:g,requestHandler:_=(o=e==null?void 0:e.parentClientConfig)==null?void 0:o.requestHandler,credentialProviderLogger:C}=e,D=await _he(g,(a=e==null?void 0:e.parentClientConfig)==null?void 0:a.region,C),O=!She(_);r=new t({region:D,requestHandler:O?_:void 0,logger:p})}let{Credentials:u,AssumedRoleUser:l}=await r.send(new Fk(n));if(!u||!u.AccessKeyId||!u.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let f=vhe(l),h={accessKeyId:u.AccessKeyId,secretAccessKey:u.SecretAccessKey,sessionToken:u.SessionToken,expiration:u.Expiration,...u.CredentialScope&&{credentialScope:u.CredentialScope},...f&&{accountId:f}};return f&&(0,xk.setCredentialFeature)(h,"RESOLVED_ACCOUNT_ID","T"),(0,xk.setCredentialFeature)(h,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),h}},"getDefaultRoleAssumerWithWebIdentity"),She=ae(e=>{var t;return((t=e==null?void 0:e.metadata)==null?void 0:t.handlerProtocol)==="h2"},"isH2"),Ehe=u0(),Che=ae((e,t)=>{var n;var r;return t?(r=(n=class extends e{constructor(o){super(o);for(let a of t)this.middlewareStack.use(a)}},s(n,"_a2"),n),ae(r,"CustomizableSTSClient"),r):e},"getCustomizableStsClientCtor"),whe=ae((e={},t)=>Put(e,Che(Ehe.STSClient,t)),"getDefaultRoleAssumer"),bhe=ae((e={},t)=>But(e,Che(Ehe.STSClient,t)),"getDefaultRoleAssumerWithWebIdentity"),Mut=ae(e=>t=>e({roleAssumer:whe(t),roleAssumerWithWebIdentity:bhe(t),...t}),"decorateDefaultCredentialProvider")});var $k=w((b1t,Ahe)=>{"use strict";var tR=Object.defineProperty,Fut=Object.getOwnPropertyDescriptor,qut=Object.getOwnPropertyNames,Lut=Object.prototype.hasOwnProperty,jk=s((e,t)=>tR(e,"name",{value:t,configurable:!0}),"__name"),Uut=s((e,t)=>{for(var r in t)tR(e,r,{get:t[r],enumerable:!0})},"__export"),jut=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of qut(t))!Lut.call(e,i)&&i!==r&&tR(e,i,{get:()=>t[i],enumerable:!(n=Fut(t,i))||n.enumerable});return e},"__copyProps"),$ut=s(e=>jut(tR({},"__esModule",{value:!0}),e),"__toCommonJS"),The={};Uut(The,{fromProcess:()=>Vut});Ahe.exports=$ut(The);var Ohe=zc(),Uk=xi(),kut=require("child_process"),Gut=require("util"),Wut=(sa(),mt(Uc)),zut=jk((e,t,r)=>{var n;if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let a=new Date;if(new Date(t.Expiration)<a)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let i=t.AccountId;!i&&((n=r==null?void 0:r[e])!=null&&n.aws_account_id)&&(i=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...i&&{accountId:i}};return(0,Wut.setCredentialFeature)(o,"CREDENTIALS_PROCESS","w"),o},"getValidatedProcessCredentials"),Hut=jk(async(e,t,r)=>{let n=t[e];if(t[e]){let i=n.credential_process;if(i!==void 0){let o=(0,Gut.promisify)(kut.exec);try{let{stdout:a}=await o(i),u;try{u=JSON.parse(a.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return zut(e,u,t)}catch(a){throw new Uk.CredentialsProviderError(a.message,{logger:r})}}else throw new Uk.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new Uk.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},"resolveProcessCredentials"),Vut=jk((e={})=>async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await(0,Ohe.parseKnownFiles)(e);return Hut((0,Ohe.getProfileName)(e),r,e.logger)},"fromProcess")});var kk=w(fa=>{"use strict";var Yut=fa&&fa.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Kut=fa&&fa.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Xut=fa&&fa.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Yut(t,e,r);return Kut(t,e),t};Object.defineProperty(fa,"__esModule",{value:!0});fa.fromWebToken=void 0;var Jut=s(e=>async()=>{var f;(f=e.logger)==null||f.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:o,policy:a,durationSeconds:u}=e,{roleAssumerWithWebIdentity:l}=e;if(!l){let{getDefaultRoleAssumerWithWebIdentity:h}=await Promise.resolve().then(()=>Xut(Lk()));l=h({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:e.parentClientConfig},e.clientPlugins)}return l({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:u})},"fromWebToken");fa.fromWebToken=Jut});var Dhe=w(rR=>{"use strict";Object.defineProperty(rR,"__esModule",{value:!0});rR.fromTokenFile=void 0;var Qut=(sa(),mt(Uc)),Zut=xi(),ect=require("fs"),tct=kk(),Ihe="AWS_WEB_IDENTITY_TOKEN_FILE",rct="AWS_ROLE_ARN",nct="AWS_ROLE_SESSION_NAME",ict=s((e={})=>async()=>{var o;(o=e.logger)==null||o.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[Ihe],r=(e==null?void 0:e.roleArn)??process.env[rct],n=(e==null?void 0:e.roleSessionName)??process.env[nct];if(!t||!r)throw new Zut.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let i=await(0,tct.fromWebToken)({...e,webIdentityToken:(0,ect.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[Ihe]&&(0,Qut.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i},"fromTokenFile");rR.fromTokenFile=ict});var zk=w((R1t,nR)=>{"use strict";var Rhe=Object.defineProperty,sct=Object.getOwnPropertyDescriptor,oct=Object.getOwnPropertyNames,act=Object.prototype.hasOwnProperty,Gk=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of oct(t))!act.call(e,i)&&i!==r&&Rhe(e,i,{get:()=>t[i],enumerable:!(n=sct(t,i))||n.enumerable});return e},"__copyProps"),Nhe=s((e,t,r)=>(Gk(e,t,"default"),r&&Gk(r,t,"default")),"__reExport"),uct=s(e=>Gk(Rhe({},"__esModule",{value:!0}),e),"__toCommonJS"),Wk={};nR.exports=uct(Wk);Nhe(Wk,Dhe(),nR.exports);Nhe(Wk,kk(),nR.exports)});var Uhe=w((x1t,Lhe)=>{"use strict";var cct=Object.create,S0=Object.defineProperty,lct=Object.getOwnPropertyDescriptor,dct=Object.getOwnPropertyNames,fct=Object.getPrototypeOf,hct=Object.prototype.hasOwnProperty,Vn=s((e,t)=>S0(e,"name",{value:t,configurable:!0}),"__name"),pct=s((e,t)=>{for(var r in t)S0(e,r,{get:t[r],enumerable:!0})},"__export"),Mhe=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of dct(t))!hct.call(e,i)&&i!==r&&S0(e,i,{get:()=>t[i],enumerable:!(n=lct(t,i))||n.enumerable});return e},"__copyProps"),dl=s((e,t,r)=>(r=e!=null?cct(fct(e)):{},Mhe(t||!e||!e.__esModule?S0(r,"default",{value:e,enumerable:!0}):r,e)),"__toESM"),mct=s(e=>Mhe(S0({},"__esModule",{value:!0}),e),"__toCommonJS"),Fhe={};pct(Fhe,{fromIni:()=>Act});Lhe.exports=mct(Fhe);var Vk=zc(),fl=(sa(),mt(Uc)),_0=xi(),gct=Vn((e,t,r)=>{let n={EcsContainer:async i=>{let{fromHttp:o}=await Promise.resolve().then(()=>dl(I$())),{fromContainerMetadata:a}=await Promise.resolve().then(()=>dl(BS()));return r==null||r.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,_0.chain)(o(i??{}),a(i))().then(Hk)},Ec2InstanceMetadata:async i=>{r==null||r.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>dl(BS()));return async()=>o(i)().then(Hk)},Environment:async i=>{r==null||r.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>dl(E$()));return async()=>o(i)().then(Hk)}};if(e in n)return n[e];throw new _0.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},"resolveCredentialSource"),Hk=Vn(e=>(0,fl.setCredentialFeature)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),"setNamedProvider"),yct=Vn((e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(vct(e,{profile:t,logger:r})||_ct(e,{profile:t,logger:r})),"isAssumeRoleProfile"),vct=Vn((e,{profile:t,logger:r})=>{var n;let i=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return i&&((n=r==null?void 0:r.debug)==null||n.call(r,`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`)),i},"isAssumeRoleWithSourceProfile"),_ct=Vn((e,{profile:t,logger:r})=>{var n;let i=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return i&&((n=r==null?void 0:r.debug)==null||n.call(r,`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`)),i},"isCredentialSourceProfile"),Sct=Vn(async(e,t,r,n={})=>{var i,o;(i=r.logger)==null||i.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let a=t[e];if(!r.roleAssumer){let{getDefaultRoleAssumer:f}=await Promise.resolve().then(()=>dl(Lk()));r.roleAssumer=f({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:r==null?void 0:r.parentClientConfig},r.clientPlugins)}let{source_profile:u}=a;if(u&&u in n)throw new _0.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,Vk.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});(o=r.logger)==null||o.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${u?`source_profile=[${u}]`:`profile=[${e}]`}`);let l=u?qhe(u,t,r,{...n,[u]:!0},xhe(t[u]??{})):(await gct(a.credential_source,e,r.logger)(r))();if(xhe(a))return l.then(f=>(0,fl.setCredentialFeature)(f,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let f={RoleArn:a.role_arn,RoleSessionName:a.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:a.external_id,DurationSeconds:parseInt(a.duration_seconds||"3600",10)},{mfa_serial:h}=a;if(h){if(!r.mfaCodeProvider)throw new _0.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});f.SerialNumber=h,f.TokenCode=await r.mfaCodeProvider(h)}let p=await l;return r.roleAssumer(p,f).then(g=>(0,fl.setCredentialFeature)(g,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},"resolveAssumeRoleCredentials"),xhe=Vn(e=>!e.role_arn&&!!e.credential_source,"isCredentialSourceWithoutRoleArn"),Ect=Vn(e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string","isProcessProfile"),Cct=Vn(async(e,t)=>Promise.resolve().then(()=>dl($k())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>(0,fl.setCredentialFeature)(n,"CREDENTIALS_PROFILE_PROCESS","v"))),"resolveProcessCredentials"),wct=Vn(async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>dl(Y$()));return n({profile:e,logger:r.logger})().then(i=>t.sso_session?(0,fl.setCredentialFeature)(i,"CREDENTIALS_PROFILE_SSO","r"):(0,fl.setCredentialFeature)(i,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},"resolveSsoCredentials"),bct=Vn(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),Phe=Vn(e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,"isStaticCredsProfile"),Bhe=Vn(async(e,t)=>{var r;(r=t==null?void 0:t.logger)==null||r.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let n={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,fl.setCredentialFeature)(n,"CREDENTIALS_PROFILE","n")},"resolveStaticCredentials"),Oct=Vn(e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,"isWebIdentityProfile"),Tct=Vn(async(e,t)=>Promise.resolve().then(()=>dl(zk())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>(0,fl.setCredentialFeature)(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),"resolveWebIdentityCredentials"),qhe=Vn(async(e,t,r,n={},i=!1)=>{let o=t[e];if(Object.keys(n).length>0&&Phe(o))return Bhe(o,r);if(i||yct(o,{profile:e,logger:r.logger}))return Sct(e,t,r,n);if(Phe(o))return Bhe(o,r);if(Oct(o))return Tct(o,r);if(Ect(o))return Cct(r,e);if(bct(o))return await wct(e,o,r);throw new _0.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},"resolveProfileData"),Act=Vn((e={})=>async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await(0,Vk.parseKnownFiles)(e);return qhe((0,Vk.getProfileName)(e),r,e)},"fromIni")});var qD=w((B1t,zhe)=>{"use strict";var Ict=Object.create,E0=Object.defineProperty,Dct=Object.getOwnPropertyDescriptor,Rct=Object.getOwnPropertyNames,Nct=Object.getPrototypeOf,xct=Object.prototype.hasOwnProperty,iR=s((e,t)=>E0(e,"name",{value:t,configurable:!0}),"__name"),Pct=s((e,t)=>{for(var r in t)E0(e,r,{get:t[r],enumerable:!0})},"__export"),$he=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Rct(t))!xct.call(e,i)&&i!==r&&E0(e,i,{get:()=>t[i],enumerable:!(n=Dct(t,i))||n.enumerable});return e},"__copyProps"),Tm=s((e,t,r)=>(r=e!=null?Ict(Nct(e)):{},$he(t||!e||!e.__esModule?E0(r,"default",{value:e,enumerable:!0}):r,e)),"__toESM"),Bct=s(e=>$he(E0({},"__esModule",{value:!0}),e),"__toCommonJS"),khe={};Pct(khe,{credentialsTreatedAsExpired:()=>Whe,credentialsWillNeedRefresh:()=>Ghe,defaultProvider:()=>Lct});zhe.exports=Bct(khe);var Yk=E$(),Mct=zc(),jd=xi(),Fct="AWS_EC2_METADATA_DISABLED",qct=iR(async e=>{var t,r;let{ENV_CMDS_FULL_URI:n,ENV_CMDS_RELATIVE_URI:i,fromContainerMetadata:o,fromInstanceMetadata:a}=await Promise.resolve().then(()=>Tm(BS()));if(process.env[i]||process.env[n]){(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:u}=await Promise.resolve().then(()=>Tm(I$()));return(0,jd.chain)(u(e),o(e))}return process.env[Fct]?async()=>{throw new jd.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:((r=e.logger)==null||r.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),a(e))},"remoteProvider"),jhe=!1,Lct=iR((e={})=>(0,jd.memoize)((0,jd.chain)(async()=>{var t,r,n,i;if(e.profile??process.env[Mct.ENV_PROFILE])throw process.env[Yk.ENV_KEY]&&process.env[Yk.ENV_SECRET]&&(jhe||(((t=e.logger)!=null&&t.warn&&((n=(r=e.logger)==null?void 0:r.constructor)==null?void 0:n.name)!=="NoOpLogger"?e.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),jhe=!0)),new jd.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return(i=e.logger)==null||i.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,Yk.fromEnv)(e)()},async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoSession:a}=e;if(!r&&!n&&!i&&!o&&!a)throw new jd.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:u}=await Promise.resolve().then(()=>Tm(Y$()));return u(e)()},async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>Tm(Uhe()));return r(e)()},async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>Tm($k()));return r(e)()},async()=>{var t;(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>Tm(zk()));return r(e)()},async()=>{var t;return(t=e.logger)==null||t.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await qct(e))()},async()=>{throw new jd.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),Whe,Ghe),"defaultProvider"),Ghe=iR(e=>(e==null?void 0:e.expiration)!==void 0,"credentialsWillNeedRefresh"),Whe=iR(e=>(e==null?void 0:e.expiration)!==void 0&&e.expiration.getTime()-Date.now()<3e5,"credentialsTreatedAsExpired")});var ope=w(sR=>{"use strict";Object.defineProperty(sR,"__esModule",{value:!0});sR.ruleSet=void 0;var rpe="required",to="fn",ro="argv",Dm="ref",Hhe=!0,Vhe="isSet",C0="booleanEquals",Am="error",Im="endpoint",Ou="tree",Kk="PartitionResult",Xk="getAttr",Yhe={[rpe]:!1,type:"String"},Khe={[rpe]:!0,default:!1,type:"Boolean"},Xhe={[Dm]:"Endpoint"},npe={[to]:C0,[ro]:[{[Dm]:"UseFIPS"},!0]},ipe={[to]:C0,[ro]:[{[Dm]:"UseDualStack"},!0]},eo={},Jhe={[to]:Xk,[ro]:[{[Dm]:Kk},"supportsFIPS"]},spe={[Dm]:Kk},Qhe={[to]:C0,[ro]:[!0,{[to]:Xk,[ro]:[spe,"supportsDualStack"]}]},Zhe=[npe],epe=[ipe],tpe=[{[Dm]:"Region"}],Uct={version:"1.0",parameters:{Region:Yhe,UseDualStack:Khe,UseFIPS:Khe,Endpoint:Yhe},rules:[{conditions:[{[to]:Vhe,[ro]:[Xhe]}],rules:[{conditions:Zhe,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Am},{conditions:epe,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Am},{endpoint:{url:Xhe,properties:eo,headers:eo},type:Im}],type:Ou},{conditions:[{[to]:Vhe,[ro]:tpe}],rules:[{conditions:[{[to]:"aws.partition",[ro]:tpe,assign:Kk}],rules:[{conditions:[npe,ipe],rules:[{conditions:[{[to]:C0,[ro]:[Hhe,Jhe]},Qhe],rules:[{endpoint:{url:"https://rds-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:eo,headers:eo},type:Im}],type:Ou},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Am}],type:Ou},{conditions:Zhe,rules:[{conditions:[{[to]:C0,[ro]:[Jhe,Hhe]}],rules:[{conditions:[{[to]:"stringEquals",[ro]:[{[to]:Xk,[ro]:[spe,"name"]},"aws-us-gov"]}],endpoint:{url:"https://rds.{Region}.amazonaws.com",properties:eo,headers:eo},type:Im},{endpoint:{url:"https://rds-fips.{Region}.{PartitionResult#dnsSuffix}",properties:eo,headers:eo},type:Im}],type:Ou},{error:"FIPS is enabled but this partition does not support FIPS",type:Am}],type:Ou},{conditions:epe,rules:[{conditions:[Qhe],rules:[{endpoint:{url:"https://rds.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:eo,headers:eo},type:Im}],type:Ou},{error:"DualStack is enabled but this partition does not support DualStack",type:Am}],type:Ou},{endpoint:{url:"https://rds.{Region}.{PartitionResult#dnsSuffix}",properties:eo,headers:eo},type:Im}],type:Ou}],type:Ou},{error:"Invalid Configuration: Missing Region",type:Am}]};sR.ruleSet=Uct});var ape=w(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});oR.defaultEndpointResolver=void 0;var jct=ip(),Jk=rp(),$ct=ope(),kct=new Jk.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Gct=s((e,t={})=>kct.get(e,()=>(0,Jk.resolveEndpoint)($ct.ruleSet,{endpointParams:e,logger:t.logger})),"defaultEndpointResolver");oR.defaultEndpointResolver=Gct;Jk.customEndpointFunctions.aws=jct.awsEndpointFunctions});var lpe=w(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});aR.getRuntimeConfig=void 0;var Wct=(bn(),mt(wn)),zct=Tr(),Hct=Md(),upe=fu(),cpe=_s(),Vct=v$(),Yct=ape(),Kct=s(e=>({apiVersion:"2014-10-31",base64Decoder:(e==null?void 0:e.base64Decoder)??upe.fromBase64,base64Encoder:(e==null?void 0:e.base64Encoder)??upe.toBase64,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Yct.defaultEndpointResolver,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Vct.defaultDocDBHttpAuthSchemeProvider,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Wct.AwsSdkSigV4Signer}],logger:(e==null?void 0:e.logger)??new zct.NoOpLogger,serviceId:(e==null?void 0:e.serviceId)??"DocDB",urlParser:(e==null?void 0:e.urlParser)??Hct.parseUrl,utf8Decoder:(e==null?void 0:e.utf8Decoder)??cpe.fromUtf8,utf8Encoder:(e==null?void 0:e.utf8Encoder)??cpe.toUtf8}),"getRuntimeConfig");aR.getRuntimeConfig=Kct});var ppe=w(cR=>{"use strict";Object.defineProperty(cR,"__esModule",{value:!0});cR.getRuntimeConfig=void 0;var Xct=(wp(),mt(Cp)),Jct=Xct.__importDefault(Fae()),Qct=(bn(),mt(wn)),Zct=qD(),dpe=MS(),uR=ua(),elt=qS(),fpe=yu(),Rm=Hc(),hpe=Od(),tlt=LS(),rlt=_p(),nlt=lpe(),ilt=Tr(),slt=$S(),olt=Tr(),alt=s(e=>{(0,olt.emitWarningIfUnsupportedVersion)(process.version);let t=(0,slt.resolveDefaultsModeConfig)(e),r=s(()=>t().then(ilt.loadConfigsForDefaultMode),"defaultConfigProvider"),n=(0,nlt.getRuntimeConfig)(e);return(0,Qct.emitWarningIfUnsupportedVersion)(process.version),{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??tlt.calculateBodyLength,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Zct.defaultProvider,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??(0,dpe.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Jct.default.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??(0,Rm.loadConfig)(fpe.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:(e==null?void 0:e.region)??(0,Rm.loadConfig)(uR.NODE_REGION_CONFIG_OPTIONS,uR.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:hpe.NodeHttpHandler.create((e==null?void 0:e.requestHandler)??r),retryMode:(e==null?void 0:e.retryMode)??(0,Rm.loadConfig)({...fpe.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||rlt.DEFAULT_RETRY_MODE}),sha256:(e==null?void 0:e.sha256)??elt.Hash.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??hpe.streamCollector,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(0,Rm.loadConfig)(uR.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(0,Rm.loadConfig)(uR.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:(e==null?void 0:e.userAgentAppId)??(0,Rm.loadConfig)(dpe.NODE_APP_ID_CONFIG_OPTIONS)}},"getRuntimeConfig");cR.getRuntimeConfig=alt});var vpe=w((G1t,ype)=>{"use strict";var lR=Object.defineProperty,ult=Object.getOwnPropertyDescriptor,clt=Object.getOwnPropertyNames,llt=Object.prototype.hasOwnProperty,dlt=s((e,t)=>lR(e,"name",{value:t,configurable:!0}),"__name"),flt=s((e,t)=>{for(var r in t)lR(e,r,{get:t[r],enumerable:!0})},"__export"),hlt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of clt(t))!llt.call(e,i)&&i!==r&&lR(e,i,{get:()=>t[i],enumerable:!(n=ult(t,i))||n.enumerable});return e},"__copyProps"),plt=s(e=>hlt(lR({},"__esModule",{value:!0}),e),"__toCommonJS"),mpe={};flt(mpe,{formatUrl:()=>gpe});ype.exports=plt(mpe);var mlt=X_();function gpe(e){let{port:t,query:r}=e,{protocol:n,path:i,hostname:o}=e;n&&n.slice(-1)!==":"&&(n+=":"),t&&(o+=`:${t}`),i&&i.charAt(0)!=="/"&&(i=`/${i}`);let a=r?(0,mlt.buildQueryString)(r):"";a&&a[0]!=="?"&&(a=`?${a}`);let u="";if(e.username!=null||e.password!=null){let f=e.username??"",h=e.password??"";u=`${f}:${h}@`}let l="";return e.fragment&&(l=`#${e.fragment}`),`${n}//${u}${o}${i}${a}${l}`}s(gpe,"formatUrl");dlt(gpe,"formatUrl")});var bpe=w((z1t,wpe)=>{"use strict";var dR=Object.defineProperty,glt=Object.getOwnPropertyDescriptor,ylt=Object.getOwnPropertyNames,vlt=Object.prototype.hasOwnProperty,fR=s((e,t)=>dR(e,"name",{value:t,configurable:!0}),"__name"),_lt=s((e,t)=>{for(var r in t)dR(e,r,{get:t[r],enumerable:!0})},"__export"),Slt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ylt(t))!vlt.call(e,i)&&i!==r&&dR(e,i,{get:()=>t[i],enumerable:!(n=glt(t,i))||n.enumerable});return e},"__copyProps"),Elt=s(e=>Slt(dR({},"__esModule",{value:!0}),e),"__toCommonJS"),Spe={};_lt(Spe,{crossRegionPresignedUrlMiddleware:()=>Zk,crossRegionPresignedUrlMiddlewareOptions:()=>Epe,getCrossRegionPresignedUrlPlugin:()=>Ilt});wpe.exports=Elt(Spe);var Clt=vpe(),wlt=Fd(),blt=Or(),Olt=v2(),Tlt=/arn:[\w+=/,.@-]+:[\w+=/,.@-]+:([\w+=/,.@-]*)?:[0-9]+:[\w+=/,.@-]+(:[\w+=/,.@-]+)?(:[\w+=/,.@-]+)?/,_pe={SourceDBSnapshotIdentifier:"CopyDBSnapshot",SourceDBInstanceIdentifier:"CreateDBInstanceReadReplica",ReplicationSourceIdentifier:"CreateDBCluster",SourceDBClusterSnapshotIdentifier:"CopyDBClusterSnapshot",SourceDBInstanceArn:"StartDBInstanceAutomatedBackupsReplication"},Alt="2014-10-31";function Zk(e){return(t,r)=>async n=>{let{input:i}=n,o=await e.region(),a=Object.keys(_pe).filter(l=>i.hasOwnProperty(l))[0];if(!a)return t(n);let u=_pe[a];if(!i.PreSignedUrl&&Cpe(i[a])&&o!==Qk(i[a])){let l=Qk(i[a]),f;typeof e.endpoint=="function"?f=await e.endpoint():f=(0,wlt.toEndpointV1)(r.endpointV2),f.hostname=`rds.${l}.amazonaws.com`;let h=new blt.HttpRequest({...f,protocol:"https",headers:{host:f.hostname},query:{Action:u,Version:Alt,KmsKeyId:i.KmsKeyId,DestinationRegion:o,[a]:i[a]}}),g=await new Olt.SignatureV4({credentials:e.credentials,region:l,service:"rds",sha256:e.sha256,uriEscapePath:e.signingEscapePath}).presign(h,{expiresIn:3600});n={...n,input:{...n.input,PreSignedUrl:(0,Clt.formatUrl)(g)}}}return t(n)}}s(Zk,"crossRegionPresignedUrlMiddleware");fR(Zk,"crossRegionPresignedUrlMiddleware");var Epe={step:"serialize",tags:["CROSS_REGION_PRESIGNED_URL"],name:"crossRegionPresignedUrlMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"},Ilt=fR(e=>({applyToStack:t=>{t.addRelativeTo(Zk(e),Epe)}}),"getCrossRegionPresignedUrlPlugin");function Cpe(e){return e?Tlt.test(e):!1}s(Cpe,"isARN");fR(Cpe,"isARN");function Qk(e){let t=e.split(":");if(t.length<4)throw new Error(`Cannot infer endpoint from '${e}'`);return t[3]}s(Qk,"getEndpointFromARN");fR(Qk,"getEndpointFromARN")});var Rpe=w((V1t,Dpe)=>{var hR=Object.defineProperty,Dlt=Object.getOwnPropertyDescriptor,Rlt=Object.getOwnPropertyNames,Nlt=Object.prototype.hasOwnProperty,Tu=s((e,t)=>hR(e,"name",{value:t,configurable:!0}),"__name"),xlt=s((e,t)=>{for(var r in t)hR(e,r,{get:t[r],enumerable:!0})},"__export"),Plt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Rlt(t))!Nlt.call(e,i)&&i!==r&&hR(e,i,{get:()=>t[i],enumerable:!(n=Dlt(t,i))||n.enumerable});return e},"__copyProps"),Blt=s(e=>Plt(hR({},"__esModule",{value:!0}),e),"__toCommonJS"),Tpe={};xlt(Tpe,{WaiterState:()=>Ipe,checkExceptions:()=>Flt,createWaiter:()=>$lt,waiterServiceDefaults:()=>Ape});Dpe.exports=Blt(Tpe);var Mlt=Tu(e=>new Promise(t=>setTimeout(t,e*1e3)),"sleep"),Ape={minDelay:2,maxDelay:120},Ipe=(e=>(e.ABORTED="ABORTED",e.FAILURE="FAILURE",e.SUCCESS="SUCCESS",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT",e))(Ipe||{}),Flt=Tu(e=>{if(e.state==="ABORTED"){let t=new Error(`${JSON.stringify({...e,reason:"Request was aborted"})}`);throw t.name="AbortError",t}else if(e.state==="TIMEOUT"){let t=new Error(`${JSON.stringify({...e,reason:"Waiter has timed out"})}`);throw t.name="TimeoutError",t}else if(e.state!=="SUCCESS")throw new Error(`${JSON.stringify(e)}`);return e},"checkExceptions"),qlt=Tu((e,t,r,n)=>{if(n>r)return t;let i=e*2**(n-1);return Llt(e,i)},"exponentialBackoffWithJitter"),Llt=Tu((e,t)=>e+Math.random()*(t-e),"randomInRange"),Ult=Tu(async({minDelay:e,maxDelay:t,maxWaitTime:r,abortController:n,client:i,abortSignal:o},a,u)=>{var l;let{state:f,reason:h}=await u(i,a);if(f!=="RETRY")return{state:f,reason:h};let p=1,g=Date.now()+r*1e3,_=Math.log(t/e)/Math.log(2)+1;for(;;){if((l=n==null?void 0:n.signal)!=null&&l.aborted||o!=null&&o.aborted)return{state:"ABORTED"};let C=qlt(e,t,_,p);if(Date.now()+C*1e3>g)return{state:"TIMEOUT"};await Mlt(C);let{state:D,reason:O}=await u(i,a);if(D!=="RETRY")return{state:D,reason:O};p+=1}},"runPolling"),jlt=Tu(e=>{if(e.maxWaitTime<1)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(e.minDelay<1)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(e.maxDelay<1)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(e.maxWaitTime<=e.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${e.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`);if(e.maxDelay<e.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${e.maxDelay}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`)},"validateWaiterOptions"),Ope=Tu(async e=>new Promise(t=>{let r=Tu(()=>t({state:"ABORTED"}),"onAbort");typeof e.addEventListener=="function"?e.addEventListener("abort",r):e.onabort=r}),"abortTimeout"),$lt=Tu(async(e,t,r)=>{let n={...Ape,...e};jlt(n);let i=[Ult(n,t,r)];return e.abortController&&i.push(Ope(e.abortController.signal)),e.abortSignal&&i.push(Ope(e.abortSignal)),Promise.race(i)},"createWaiter")});var h_e=w((K1t,f_e)=>{"use strict";var vR=Object.defineProperty,klt=Object.getOwnPropertyDescriptor,Glt=Object.getOwnPropertyNames,Wlt=Object.prototype.hasOwnProperty,v=s((e,t)=>vR(e,"name",{value:t,configurable:!0}),"__name"),zlt=s((e,t)=>{for(var r in t)vR(e,r,{get:t[r],enumerable:!0})},"__export"),Hlt=s((e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Glt(t))!Wlt.call(e,i)&&i!==r&&vR(e,i,{get:()=>t[i],enumerable:!(n=klt(t,i))||n.enumerable});return e},"__copyProps"),Vlt=s(e=>Hlt(vR({},"__esModule",{value:!0}),e),"__toCommonJS"),eme={};zlt(eme,{AddSourceIdentifierToSubscriptionCommand:()=>Sye,AddTagsToResourceCommand:()=>Cye,ApplyMethod:()=>ndt,ApplyPendingMaintenanceActionCommand:()=>bye,AuthorizationNotFoundFault:()=>oge,CertificateNotFoundFault:()=>Yge,CopyDBClusterParameterGroupCommand:()=>Tye,CopyDBClusterSnapshotCommand:()=>Iye,CreateDBClusterCommand:()=>Rye,CreateDBClusterParameterGroupCommand:()=>xye,CreateDBClusterSnapshotCommand:()=>Bye,CreateDBInstanceCommand:()=>Fye,CreateDBSubnetGroupCommand:()=>Lye,CreateEventSubscriptionCommand:()=>jye,CreateGlobalClusterCommand:()=>kye,DBClusterAlreadyExistsFault:()=>Fme,DBClusterNotFoundFault:()=>ume,DBClusterParameterGroupNotFoundFault:()=>Lme,DBClusterQuotaExceededFault:()=>jme,DBClusterSnapshotAlreadyExistsFault:()=>Tme,DBClusterSnapshotNotFoundFault:()=>Ime,DBInstanceAlreadyExistsFault:()=>uge,DBInstanceNotFoundFault:()=>lme,DBParameterGroupAlreadyExistsFault:()=>Sme,DBParameterGroupNotFoundFault:()=>Cme,DBParameterGroupQuotaExceededFault:()=>bme,DBSecurityGroupNotFoundFault:()=>lge,DBSnapshotAlreadyExistsFault:()=>kge,DBSnapshotNotFoundFault:()=>fme,DBSubnetGroupAlreadyExistsFault:()=>vge,DBSubnetGroupDoesNotCoverEnoughAZs:()=>kme,DBSubnetGroupNotFoundFault:()=>Wme,DBSubnetGroupQuotaExceededFault:()=>Sge,DBSubnetQuotaExceededFault:()=>Cge,DBUpgradeDependencyFailureFault:()=>eye,DeleteDBClusterCommand:()=>Wye,DeleteDBClusterParameterGroupCommand:()=>Hye,DeleteDBClusterSnapshotCommand:()=>Yye,DeleteDBInstanceCommand:()=>Xye,DeleteDBSubnetGroupCommand:()=>Qye,DeleteEventSubscriptionCommand:()=>eve,DeleteGlobalClusterCommand:()=>rve,DescribeCertificatesCommand:()=>VG,DescribeDBClusterParameterGroupsCommand:()=>YG,DescribeDBClusterParametersCommand:()=>KG,DescribeDBClusterSnapshotAttributesCommand:()=>uve,DescribeDBClusterSnapshotsCommand:()=>JG,DescribeDBClustersCommand:()=>XG,DescribeDBEngineVersionsCommand:()=>QG,DescribeDBInstancesCommand:()=>aC,DescribeDBSubnetGroupsCommand:()=>ZG,DescribeEngineDefaultClusterParametersCommand:()=>pve,DescribeEventCategoriesCommand:()=>gve,DescribeEventSubscriptionsCommand:()=>tW,DescribeEventsCommand:()=>eW,DescribeGlobalClustersCommand:()=>rW,DescribeOrderableDBInstanceOptionsCommand:()=>nW,DescribePendingMaintenanceActionsCommand:()=>iW,DocDB:()=>c_e,DocDBClient:()=>qi,DocDBServiceException:()=>Be,EventSubscriptionQuotaExceededFault:()=>bge,FailoverDBClusterCommand:()=>wve,FailoverGlobalClusterCommand:()=>Ove,GlobalClusterAlreadyExistsFault:()=>Fge,GlobalClusterNotFoundFault:()=>Hme,GlobalClusterQuotaExceededFault:()=>Lge,InstanceQuotaExceededFault:()=>fge,InsufficientDBClusterCapacityFault:()=>iye,InsufficientDBInstanceCapacityFault:()=>pge,InsufficientStorageClusterCapacityFault:()=>Yme,InvalidDBClusterSnapshotStateFault:()=>Rme,InvalidDBClusterStateFault:()=>pme,InvalidDBInstanceStateFault:()=>gme,InvalidDBParameterGroupStateFault:()=>jge,InvalidDBSecurityGroupStateFault:()=>Xge,InvalidDBSnapshotStateFault:()=>oye,InvalidDBSubnetGroupStateFault:()=>Xme,InvalidDBSubnetStateFault:()=>Wge,InvalidEventSubscriptionStateFault:()=>Hge,InvalidGlobalClusterStateFault:()=>Qme,InvalidRestoreFault:()=>uye,InvalidSubnet:()=>ege,InvalidVPCNetworkStateFault:()=>rge,KMSKeyNotAccessibleFault:()=>xme,ListTagsForResourceCommand:()=>Ave,ModifyDBClusterCommand:()=>Dve,ModifyDBClusterParameterGroupCommand:()=>Nve,ModifyDBClusterSnapshotAttributeCommand:()=>Pve,ModifyDBInstanceCommand:()=>Mve,ModifyDBSubnetGroupCommand:()=>qve,ModifyEventSubscriptionCommand:()=>Uve,ModifyGlobalClusterCommand:()=>$ve,RebootDBInstanceCommand:()=>Gve,RemoveFromGlobalClusterCommand:()=>zve,RemoveSourceIdentifierFromSubscriptionCommand:()=>Vve,RemoveTagsFromResourceCommand:()=>Kve,ResetDBClusterParameterGroupCommand:()=>Jve,ResourceNotFoundFault:()=>vme,RestoreDBClusterFromSnapshotCommand:()=>Zve,RestoreDBClusterToPointInTimeCommand:()=>t_e,SNSInvalidTopicFault:()=>Tge,SNSNoAuthorizationFault:()=>Ige,SNSTopicArnNotFoundFault:()=>Rge,SharedSnapshotQuotaExceededFault:()=>Qge,SnapshotQuotaExceededFault:()=>Bme,SourceNotFoundFault:()=>ime,SourceType:()=>idt,StartDBClusterCommand:()=>n_e,StopDBClusterCommand:()=>s_e,StorageQuotaExceededFault:()=>ige,StorageTypeNotSupportedFault:()=>gge,SubnetAlreadyInUse:()=>rye,SubscriptionAlreadyExistFault:()=>xge,SubscriptionCategoryNotFoundFault:()=>Bge,SubscriptionNotFoundFault:()=>ome,SwitchoverGlobalClusterCommand:()=>a_e,__Client:()=>S.Client,paginateDescribeCertificates:()=>g_t,paginateDescribeDBClusterParameterGroups:()=>y_t,paginateDescribeDBClusterParameters:()=>v_t,paginateDescribeDBClusterSnapshots:()=>__t,paginateDescribeDBClusters:()=>S_t,paginateDescribeDBEngineVersions:()=>E_t,paginateDescribeDBInstances:()=>C_t,paginateDescribeDBSubnetGroups:()=>w_t,paginateDescribeEventSubscriptions:()=>b_t,paginateDescribeEvents:()=>O_t,paginateDescribeGlobalClusters:()=>T_t,paginateDescribeOrderableDBInstanceOptions:()=>A_t,paginateDescribePendingMaintenanceActions:()=>I_t,waitForDBInstanceAvailable:()=>D_t,waitForDBInstanceDeleted:()=>N_t,waitUntilDBInstanceAvailable:()=>R_t,waitUntilDBInstanceDeleted:()=>x_t});f_e.exports=Vlt(eme);var Npe=H_(),Ylt=V_(),Klt=Y_(),xpe=mp(),Xlt=ua(),mi=(Ss(),mt(bo)),Jlt=_S(),je=Fd(),Ppe=yu(),Bpe=v$(),Qlt=v(e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"rds"}),"resolveClientEndpointParameters"),$e={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Zlt=ppe(),Mpe=kS(),GG=Or(),S=Tr(),edt=v(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(i){let o=t.findIndex(a=>a.schemeId===i.schemeId);o===-1?t.push(i):t.splice(o,1,i)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),tdt=v(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),pR=v(e=>e,"asPartial"),rdt=v((e,t)=>{let r={...pR((0,Mpe.getAwsRegionExtensionConfiguration)(e)),...pR((0,S.getDefaultExtensionConfiguration)(e)),...pR((0,GG.getHttpHandlerExtensionConfiguration)(e)),...pR(edt(e))};return t.forEach(n=>n.configure(r)),{...e,...(0,Mpe.resolveAwsRegionExtensionConfiguration)(r),...(0,S.resolveDefaultRuntimeConfig)(r),...(0,GG.resolveHttpHandlerRuntimeConfig)(r),...tdt(r)}},"resolveRuntimeExtensions"),nE,tme=(nE=class extends S.Client{constructor(...[t]){let r=(0,Zlt.getRuntimeConfig)(t||{}),n=Qlt(r),i=(0,xpe.resolveUserAgentConfig)(n),o=(0,Ppe.resolveRetryConfig)(i),a=(0,Xlt.resolveRegionConfig)(o),u=(0,Npe.resolveHostHeaderConfig)(a),l=(0,je.resolveEndpointConfig)(u),f=(0,Bpe.resolveHttpAuthSchemeConfig)(l),h=rdt(f,(t==null?void 0:t.extensions)||[]);super(h),this.config=h,this.middlewareStack.use((0,xpe.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Ppe.getRetryPlugin)(this.config)),this.middlewareStack.use((0,Jlt.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Npe.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,Ylt.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,Klt.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,mi.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:Bpe.defaultDocDBHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new mi.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,mi.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},s(nE,"_DocDBClient"),nE);v(tme,"DocDBClient");var qi=tme,ke=wd(),Xe=(bn(),mt(wn)),dg,rme=(dg=class extends S.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,dg.prototype)}},s(dg,"_DocDBServiceException"),dg);v(rme,"DocDBServiceException");var Be=rme,fg,nme=(fg=class extends Be{constructor(t){super({name:"SourceNotFoundFault",$fault:"client",...t}),this.name="SourceNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,fg.prototype)}},s(fg,"_SourceNotFoundFault"),fg);v(nme,"SourceNotFoundFault");var ime=nme,hg,sme=(hg=class extends Be{constructor(t){super({name:"SubscriptionNotFoundFault",$fault:"client",...t}),this.name="SubscriptionNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,hg.prototype)}},s(hg,"_SubscriptionNotFoundFault"),hg);v(sme,"SubscriptionNotFoundFault");var ome=sme,pg,ame=(pg=class extends Be{constructor(t){super({name:"DBClusterNotFoundFault",$fault:"client",...t}),this.name="DBClusterNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,pg.prototype)}},s(pg,"_DBClusterNotFoundFault"),pg);v(ame,"DBClusterNotFoundFault");var ume=ame,mg,cme=(mg=class extends Be{constructor(t){super({name:"DBInstanceNotFoundFault",$fault:"client",...t}),this.name="DBInstanceNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,mg.prototype)}},s(mg,"_DBInstanceNotFoundFault"),mg);v(cme,"DBInstanceNotFoundFault");var lme=cme,gg,dme=(gg=class extends Be{constructor(t){super({name:"DBSnapshotNotFoundFault",$fault:"client",...t}),this.name="DBSnapshotNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,gg.prototype)}},s(gg,"_DBSnapshotNotFoundFault"),gg);v(dme,"DBSnapshotNotFoundFault");var fme=dme,yg,hme=(yg=class extends Be{constructor(t){super({name:"InvalidDBClusterStateFault",$fault:"client",...t}),this.name="InvalidDBClusterStateFault",this.$fault="client",Object.setPrototypeOf(this,yg.prototype)}},s(yg,"_InvalidDBClusterStateFault"),yg);v(hme,"InvalidDBClusterStateFault");var pme=hme,vg,mme=(vg=class extends Be{constructor(t){super({name:"InvalidDBInstanceStateFault",$fault:"client",...t}),this.name="InvalidDBInstanceStateFault",this.$fault="client",Object.setPrototypeOf(this,vg.prototype)}},s(vg,"_InvalidDBInstanceStateFault"),vg);v(mme,"InvalidDBInstanceStateFault");var gme=mme,_g,yme=(_g=class extends Be{constructor(t){super({name:"ResourceNotFoundFault",$fault:"client",...t}),this.name="ResourceNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,_g.prototype)}},s(_g,"_ResourceNotFoundFault"),_g);v(yme,"ResourceNotFoundFault");var vme=yme,Sg,_me=(Sg=class extends Be{constructor(t){super({name:"DBParameterGroupAlreadyExistsFault",$fault:"client",...t}),this.name="DBParameterGroupAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,Sg.prototype)}},s(Sg,"_DBParameterGroupAlreadyExistsFault"),Sg);v(_me,"DBParameterGroupAlreadyExistsFault");var Sme=_me,Eg,Eme=(Eg=class extends Be{constructor(t){super({name:"DBParameterGroupNotFoundFault",$fault:"client",...t}),this.name="DBParameterGroupNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,Eg.prototype)}},s(Eg,"_DBParameterGroupNotFoundFault"),Eg);v(Eme,"DBParameterGroupNotFoundFault");var Cme=Eme,Cg,wme=(Cg=class extends Be{constructor(t){super({name:"DBParameterGroupQuotaExceededFault",$fault:"client",...t}),this.name="DBParameterGroupQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Cg.prototype)}},s(Cg,"_DBParameterGroupQuotaExceededFault"),Cg);v(wme,"DBParameterGroupQuotaExceededFault");var bme=wme,wg,Ome=(wg=class extends Be{constructor(t){super({name:"DBClusterSnapshotAlreadyExistsFault",$fault:"client",...t}),this.name="DBClusterSnapshotAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,wg.prototype)}},s(wg,"_DBClusterSnapshotAlreadyExistsFault"),wg);v(Ome,"DBClusterSnapshotAlreadyExistsFault");var Tme=Ome,bg,Ame=(bg=class extends Be{constructor(t){super({name:"DBClusterSnapshotNotFoundFault",$fault:"client",...t}),this.name="DBClusterSnapshotNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,bg.prototype)}},s(bg,"_DBClusterSnapshotNotFoundFault"),bg);v(Ame,"DBClusterSnapshotNotFoundFault");var Ime=Ame,Og,Dme=(Og=class extends Be{constructor(t){super({name:"InvalidDBClusterSnapshotStateFault",$fault:"client",...t}),this.name="InvalidDBClusterSnapshotStateFault",this.$fault="client",Object.setPrototypeOf(this,Og.prototype)}},s(Og,"_InvalidDBClusterSnapshotStateFault"),Og);v(Dme,"InvalidDBClusterSnapshotStateFault");var Rme=Dme,Tg,Nme=(Tg=class extends Be{constructor(t){super({name:"KMSKeyNotAccessibleFault",$fault:"client",...t}),this.name="KMSKeyNotAccessibleFault",this.$fault="client",Object.setPrototypeOf(this,Tg.prototype)}},s(Tg,"_KMSKeyNotAccessibleFault"),Tg);v(Nme,"KMSKeyNotAccessibleFault");var xme=Nme,Ag,Pme=(Ag=class extends Be{constructor(t){super({name:"SnapshotQuotaExceededFault",$fault:"client",...t}),this.name="SnapshotQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Ag.prototype)}},s(Ag,"_SnapshotQuotaExceededFault"),Ag);v(Pme,"SnapshotQuotaExceededFault");var Bme=Pme,Ig,Mme=(Ig=class extends Be{constructor(t){super({name:"DBClusterAlreadyExistsFault",$fault:"client",...t}),this.name="DBClusterAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,Ig.prototype)}},s(Ig,"_DBClusterAlreadyExistsFault"),Ig);v(Mme,"DBClusterAlreadyExistsFault");var Fme=Mme,Dg,qme=(Dg=class extends Be{constructor(t){super({name:"DBClusterParameterGroupNotFoundFault",$fault:"client",...t}),this.name="DBClusterParameterGroupNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,Dg.prototype)}},s(Dg,"_DBClusterParameterGroupNotFoundFault"),Dg);v(qme,"DBClusterParameterGroupNotFoundFault");var Lme=qme,Rg,Ume=(Rg=class extends Be{constructor(t){super({name:"DBClusterQuotaExceededFault",$fault:"client",...t}),this.name="DBClusterQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Rg.prototype)}},s(Rg,"_DBClusterQuotaExceededFault"),Rg);v(Ume,"DBClusterQuotaExceededFault");var jme=Ume,Ng,$me=(Ng=class extends Be{constructor(t){super({name:"DBSubnetGroupDoesNotCoverEnoughAZs",$fault:"client",...t}),this.name="DBSubnetGroupDoesNotCoverEnoughAZs",this.$fault="client",Object.setPrototypeOf(this,Ng.prototype)}},s(Ng,"_DBSubnetGroupDoesNotCoverEnoughAZs"),Ng);v($me,"DBSubnetGroupDoesNotCoverEnoughAZs");var kme=$me,xg,Gme=(xg=class extends Be{constructor(t){super({name:"DBSubnetGroupNotFoundFault",$fault:"client",...t}),this.name="DBSubnetGroupNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,xg.prototype)}},s(xg,"_DBSubnetGroupNotFoundFault"),xg);v(Gme,"DBSubnetGroupNotFoundFault");var Wme=Gme,Pg,zme=(Pg=class extends Be{constructor(t){super({name:"GlobalClusterNotFoundFault",$fault:"client",...t}),this.name="GlobalClusterNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,Pg.prototype)}},s(Pg,"_GlobalClusterNotFoundFault"),Pg);v(zme,"GlobalClusterNotFoundFault");var Hme=zme,Bg,Vme=(Bg=class extends Be{constructor(t){super({name:"InsufficientStorageClusterCapacityFault",$fault:"client",...t}),this.name="InsufficientStorageClusterCapacityFault",this.$fault="client",Object.setPrototypeOf(this,Bg.prototype)}},s(Bg,"_InsufficientStorageClusterCapacityFault"),Bg);v(Vme,"InsufficientStorageClusterCapacityFault");var Yme=Vme,Mg,Kme=(Mg=class extends Be{constructor(t){super({name:"InvalidDBSubnetGroupStateFault",$fault:"client",...t}),this.name="InvalidDBSubnetGroupStateFault",this.$fault="client",Object.setPrototypeOf(this,Mg.prototype)}},s(Mg,"_InvalidDBSubnetGroupStateFault"),Mg);v(Kme,"InvalidDBSubnetGroupStateFault");var Xme=Kme,Fg,Jme=(Fg=class extends Be{constructor(t){super({name:"InvalidGlobalClusterStateFault",$fault:"client",...t}),this.name="InvalidGlobalClusterStateFault",this.$fault="client",Object.setPrototypeOf(this,Fg.prototype)}},s(Fg,"_InvalidGlobalClusterStateFault"),Fg);v(Jme,"InvalidGlobalClusterStateFault");var Qme=Jme,qg,Zme=(qg=class extends Be{constructor(t){super({name:"InvalidSubnet",$fault:"client",...t}),this.name="InvalidSubnet",this.$fault="client",Object.setPrototypeOf(this,qg.prototype)}},s(qg,"_InvalidSubnet"),qg);v(Zme,"InvalidSubnet");var ege=Zme,Lg,tge=(Lg=class extends Be{constructor(t){super({name:"InvalidVPCNetworkStateFault",$fault:"client",...t}),this.name="InvalidVPCNetworkStateFault",this.$fault="client",Object.setPrototypeOf(this,Lg.prototype)}},s(Lg,"_InvalidVPCNetworkStateFault"),Lg);v(tge,"InvalidVPCNetworkStateFault");var rge=tge,Ug,nge=(Ug=class extends Be{constructor(t){super({name:"StorageQuotaExceededFault",$fault:"client",...t}),this.name="StorageQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Ug.prototype)}},s(Ug,"_StorageQuotaExceededFault"),Ug);v(nge,"StorageQuotaExceededFault");var ige=nge,jg,sge=(jg=class extends Be{constructor(t){super({name:"AuthorizationNotFoundFault",$fault:"client",...t}),this.name="AuthorizationNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,jg.prototype)}},s(jg,"_AuthorizationNotFoundFault"),jg);v(sge,"AuthorizationNotFoundFault");var oge=sge,$g,age=($g=class extends Be{constructor(t){super({name:"DBInstanceAlreadyExistsFault",$fault:"client",...t}),this.name="DBInstanceAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,$g.prototype)}},s($g,"_DBInstanceAlreadyExistsFault"),$g);v(age,"DBInstanceAlreadyExistsFault");var uge=age,kg,cge=(kg=class extends Be{constructor(t){super({name:"DBSecurityGroupNotFoundFault",$fault:"client",...t}),this.name="DBSecurityGroupNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,kg.prototype)}},s(kg,"_DBSecurityGroupNotFoundFault"),kg);v(cge,"DBSecurityGroupNotFoundFault");var lge=cge,Gg,dge=(Gg=class extends Be{constructor(t){super({name:"InstanceQuotaExceededFault",$fault:"client",...t}),this.name="InstanceQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Gg.prototype)}},s(Gg,"_InstanceQuotaExceededFault"),Gg);v(dge,"InstanceQuotaExceededFault");var fge=dge,Wg,hge=(Wg=class extends Be{constructor(t){super({name:"InsufficientDBInstanceCapacityFault",$fault:"client",...t}),this.name="InsufficientDBInstanceCapacityFault",this.$fault="client",Object.setPrototypeOf(this,Wg.prototype)}},s(Wg,"_InsufficientDBInstanceCapacityFault"),Wg);v(hge,"InsufficientDBInstanceCapacityFault");var pge=hge,zg,mge=(zg=class extends Be{constructor(t){super({name:"StorageTypeNotSupportedFault",$fault:"client",...t}),this.name="StorageTypeNotSupportedFault",this.$fault="client",Object.setPrototypeOf(this,zg.prototype)}},s(zg,"_StorageTypeNotSupportedFault"),zg);v(mge,"StorageTypeNotSupportedFault");var gge=mge,Hg,yge=(Hg=class extends Be{constructor(t){super({name:"DBSubnetGroupAlreadyExistsFault",$fault:"client",...t}),this.name="DBSubnetGroupAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,Hg.prototype)}},s(Hg,"_DBSubnetGroupAlreadyExistsFault"),Hg);v(yge,"DBSubnetGroupAlreadyExistsFault");var vge=yge,Vg,_ge=(Vg=class extends Be{constructor(t){super({name:"DBSubnetGroupQuotaExceededFault",$fault:"client",...t}),this.name="DBSubnetGroupQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Vg.prototype)}},s(Vg,"_DBSubnetGroupQuotaExceededFault"),Vg);v(_ge,"DBSubnetGroupQuotaExceededFault");var Sge=_ge,Yg,Ege=(Yg=class extends Be{constructor(t){super({name:"DBSubnetQuotaExceededFault",$fault:"client",...t}),this.name="DBSubnetQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Yg.prototype)}},s(Yg,"_DBSubnetQuotaExceededFault"),Yg);v(Ege,"DBSubnetQuotaExceededFault");var Cge=Ege,Kg,wge=(Kg=class extends Be{constructor(t){super({name:"EventSubscriptionQuotaExceededFault",$fault:"client",...t}),this.name="EventSubscriptionQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,Kg.prototype)}},s(Kg,"_EventSubscriptionQuotaExceededFault"),Kg);v(wge,"EventSubscriptionQuotaExceededFault");var bge=wge,Xg,Oge=(Xg=class extends Be{constructor(t){super({name:"SNSInvalidTopicFault",$fault:"client",...t}),this.name="SNSInvalidTopicFault",this.$fault="client",Object.setPrototypeOf(this,Xg.prototype)}},s(Xg,"_SNSInvalidTopicFault"),Xg);v(Oge,"SNSInvalidTopicFault");var Tge=Oge,Jg,Age=(Jg=class extends Be{constructor(t){super({name:"SNSNoAuthorizationFault",$fault:"client",...t}),this.name="SNSNoAuthorizationFault",this.$fault="client",Object.setPrototypeOf(this,Jg.prototype)}},s(Jg,"_SNSNoAuthorizationFault"),Jg);v(Age,"SNSNoAuthorizationFault");var Ige=Age,Qg,Dge=(Qg=class extends Be{constructor(t){super({name:"SNSTopicArnNotFoundFault",$fault:"client",...t}),this.name="SNSTopicArnNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,Qg.prototype)}},s(Qg,"_SNSTopicArnNotFoundFault"),Qg);v(Dge,"SNSTopicArnNotFoundFault");var Rge=Dge,Zg,Nge=(Zg=class extends Be{constructor(t){super({name:"SubscriptionAlreadyExistFault",$fault:"client",...t}),this.name="SubscriptionAlreadyExistFault",this.$fault="client",Object.setPrototypeOf(this,Zg.prototype)}},s(Zg,"_SubscriptionAlreadyExistFault"),Zg);v(Nge,"SubscriptionAlreadyExistFault");var xge=Nge,ey,Pge=(ey=class extends Be{constructor(t){super({name:"SubscriptionCategoryNotFoundFault",$fault:"client",...t}),this.name="SubscriptionCategoryNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,ey.prototype)}},s(ey,"_SubscriptionCategoryNotFoundFault"),ey);v(Pge,"SubscriptionCategoryNotFoundFault");var Bge=Pge,ty,Mge=(ty=class extends Be{constructor(t){super({name:"GlobalClusterAlreadyExistsFault",$fault:"client",...t}),this.name="GlobalClusterAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,ty.prototype)}},s(ty,"_GlobalClusterAlreadyExistsFault"),ty);v(Mge,"GlobalClusterAlreadyExistsFault");var Fge=Mge,ry,qge=(ry=class extends Be{constructor(t){super({name:"GlobalClusterQuotaExceededFault",$fault:"client",...t}),this.name="GlobalClusterQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,ry.prototype)}},s(ry,"_GlobalClusterQuotaExceededFault"),ry);v(qge,"GlobalClusterQuotaExceededFault");var Lge=qge,ny,Uge=(ny=class extends Be{constructor(t){super({name:"InvalidDBParameterGroupStateFault",$fault:"client",...t}),this.name="InvalidDBParameterGroupStateFault",this.$fault="client",Object.setPrototypeOf(this,ny.prototype)}},s(ny,"_InvalidDBParameterGroupStateFault"),ny);v(Uge,"InvalidDBParameterGroupStateFault");var jge=Uge,iy,$ge=(iy=class extends Be{constructor(t){super({name:"DBSnapshotAlreadyExistsFault",$fault:"client",...t}),this.name="DBSnapshotAlreadyExistsFault",this.$fault="client",Object.setPrototypeOf(this,iy.prototype)}},s(iy,"_DBSnapshotAlreadyExistsFault"),iy);v($ge,"DBSnapshotAlreadyExistsFault");var kge=$ge,sy,Gge=(sy=class extends Be{constructor(t){super({name:"InvalidDBSubnetStateFault",$fault:"client",...t}),this.name="InvalidDBSubnetStateFault",this.$fault="client",Object.setPrototypeOf(this,sy.prototype)}},s(sy,"_InvalidDBSubnetStateFault"),sy);v(Gge,"InvalidDBSubnetStateFault");var Wge=Gge,oy,zge=(oy=class extends Be{constructor(t){super({name:"InvalidEventSubscriptionStateFault",$fault:"client",...t}),this.name="InvalidEventSubscriptionStateFault",this.$fault="client",Object.setPrototypeOf(this,oy.prototype)}},s(oy,"_InvalidEventSubscriptionStateFault"),oy);v(zge,"InvalidEventSubscriptionStateFault");var Hge=zge,ay,Vge=(ay=class extends Be{constructor(t){super({name:"CertificateNotFoundFault",$fault:"client",...t}),this.name="CertificateNotFoundFault",this.$fault="client",Object.setPrototypeOf(this,ay.prototype)}},s(ay,"_CertificateNotFoundFault"),ay);v(Vge,"CertificateNotFoundFault");var Yge=Vge,ndt={immediate:"immediate",pending_reboot:"pending-reboot"},idt={db_cluster:"db-cluster",db_cluster_snapshot:"db-cluster-snapshot",db_instance:"db-instance",db_parameter_group:"db-parameter-group",db_security_group:"db-security-group",db_snapshot:"db-snapshot"},uy,Kge=(uy=class extends Be{constructor(t){super({name:"InvalidDBSecurityGroupStateFault",$fault:"client",...t}),this.name="InvalidDBSecurityGroupStateFault",this.$fault="client",Object.setPrototypeOf(this,uy.prototype)}},s(uy,"_InvalidDBSecurityGroupStateFault"),uy);v(Kge,"InvalidDBSecurityGroupStateFault");var Xge=Kge,cy,Jge=(cy=class extends Be{constructor(t){super({name:"SharedSnapshotQuotaExceededFault",$fault:"client",...t}),this.name="SharedSnapshotQuotaExceededFault",this.$fault="client",Object.setPrototypeOf(this,cy.prototype)}},s(cy,"_SharedSnapshotQuotaExceededFault"),cy);v(Jge,"SharedSnapshotQuotaExceededFault");var Qge=Jge,ly,Zge=(ly=class extends Be{constructor(t){super({name:"DBUpgradeDependencyFailureFault",$fault:"client",...t}),this.name="DBUpgradeDependencyFailureFault",this.$fault="client",Object.setPrototypeOf(this,ly.prototype)}},s(ly,"_DBUpgradeDependencyFailureFault"),ly);v(Zge,"DBUpgradeDependencyFailureFault");var eye=Zge,dy,tye=(dy=class extends Be{constructor(t){super({name:"SubnetAlreadyInUse",$fault:"client",...t}),this.name="SubnetAlreadyInUse",this.$fault="client",Object.setPrototypeOf(this,dy.prototype)}},s(dy,"_SubnetAlreadyInUse"),dy);v(tye,"SubnetAlreadyInUse");var rye=tye,fy,nye=(fy=class extends Be{constructor(t){super({name:"InsufficientDBClusterCapacityFault",$fault:"client",...t}),this.name="InsufficientDBClusterCapacityFault",this.$fault="client",Object.setPrototypeOf(this,fy.prototype)}},s(fy,"_InsufficientDBClusterCapacityFault"),fy);v(nye,"InsufficientDBClusterCapacityFault");var iye=nye,hy,sye=(hy=class extends Be{constructor(t){super({name:"InvalidDBSnapshotStateFault",$fault:"client",...t}),this.name="InvalidDBSnapshotStateFault",this.$fault="client",Object.setPrototypeOf(this,hy.prototype)}},s(hy,"_InvalidDBSnapshotStateFault"),hy);v(sye,"InvalidDBSnapshotStateFault");var oye=sye,py,aye=(py=class extends Be{constructor(t){super({name:"InvalidRestoreFault",$fault:"client",...t}),this.name="InvalidRestoreFault",this.$fault="client",Object.setPrototypeOf(this,py.prototype)}},s(py,"_InvalidRestoreFault"),py);v(aye,"InvalidRestoreFault");var uye=aye,sdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...lpt(e,t),[Me]:hvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_AddSourceIdentifierToSubscriptionCommand"),odt=v(async(e,t)=>{let r=ze,n;return n=Ye({...dpt(e,t),[Me]:pvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_AddTagsToResourceCommand"),adt=v(async(e,t)=>{let r=ze,n;return n=Ye({...fpt(e,t),[Me]:fvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ApplyPendingMaintenanceActionCommand"),udt=v(async(e,t)=>{let r=ze,n;return n=Ye({...ppt(e,t),[Me]:gvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CopyDBClusterParameterGroupCommand"),cdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...mpt(e,t),[Me]:vvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CopyDBClusterSnapshotCommand"),ldt=v(async(e,t)=>{let r=ze,n;return n=Ye({...gpt(e,t),[Me]:mvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateDBClusterCommand"),ddt=v(async(e,t)=>{let r=ze,n;return n=Ye({...ypt(e,t),[Me]:yvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateDBClusterParameterGroupCommand"),fdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...vpt(e,t),[Me]:_vt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateDBClusterSnapshotCommand"),hdt=v(async(e,t)=>{let r=ze,n;return n=Ye({..._pt(e,t),[Me]:Svt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateDBInstanceCommand"),pdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Spt(e,t),[Me]:Evt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateDBSubnetGroupCommand"),mdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Ept(e,t),[Me]:Cvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateEventSubscriptionCommand"),gdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Cpt(e,t),[Me]:wvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_CreateGlobalClusterCommand"),ydt=v(async(e,t)=>{let r=ze,n;return n=Ye({...wpt(e,t),[Me]:Ovt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteDBClusterCommand"),vdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...bpt(e,t),[Me]:Avt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteDBClusterParameterGroupCommand"),_dt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Opt(e,t),[Me]:Dvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteDBClusterSnapshotCommand"),Sdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Tpt(e,t),[Me]:Bvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteDBInstanceCommand"),Edt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Apt(e,t),[Me]:Fvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteDBSubnetGroupCommand"),Cdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Ipt(e,t),[Me]:$vt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteEventSubscriptionCommand"),wdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Dpt(e,t),[Me]:Gvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DeleteGlobalClusterCommand"),bdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Rpt(e,t),[Me]:bvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeCertificatesCommand"),Odt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Npt(e,t),[Me]:Ivt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBClusterParameterGroupsCommand"),Tdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...xpt(e,t),[Me]:Tvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBClusterParametersCommand"),Adt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Ppt(e,t),[Me]:xvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBClustersCommand"),Idt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Bpt(e,t),[Me]:Rvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBClusterSnapshotAttributesCommand"),Ddt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Mpt(e,t),[Me]:Nvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBClusterSnapshotsCommand"),Rdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Fpt(e,t),[Me]:Pvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBEngineVersionsCommand"),Ndt=v(async(e,t)=>{let r=ze,n;return n=Ye({...qpt(e,t),[Me]:Mvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBInstancesCommand"),xdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Lpt(e,t),[Me]:qvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeDBSubnetGroupsCommand"),Pdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Upt(e,t),[Me]:jvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeEngineDefaultClusterParametersCommand"),Bdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...jpt(e,t),[Me]:Uvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeEventCategoriesCommand"),Mdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...$pt(e,t),[Me]:Lvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeEventsCommand"),Fdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...kpt(e,t),[Me]:kvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeEventSubscriptionsCommand"),qdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Gpt(e,t),[Me]:Wvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeGlobalClustersCommand"),Ldt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Wpt(e,t),[Me]:zvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribeOrderableDBInstanceOptionsCommand"),Udt=v(async(e,t)=>{let r=ze,n;return n=Ye({...zpt(e,t),[Me]:Hvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_DescribePendingMaintenanceActionsCommand"),jdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Hpt(e,t),[Me]:Vvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_FailoverDBClusterCommand"),$dt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Vpt(e,t),[Me]:Yvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_FailoverGlobalClusterCommand"),kdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Jpt(e,t),[Me]:Kvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ListTagsForResourceCommand"),Gdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Qpt(e,t),[Me]:Xvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyDBClusterCommand"),Wdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...Zpt(e,t),[Me]:Jvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyDBClusterParameterGroupCommand"),zdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...emt(e,t),[Me]:Qvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyDBClusterSnapshotAttributeCommand"),Hdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...tmt(e,t),[Me]:Zvt,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyDBInstanceCommand"),Vdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...rmt(e,t),[Me]:e_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyDBSubnetGroupCommand"),Ydt=v(async(e,t)=>{let r=ze,n;return n=Ye({...nmt(e,t),[Me]:t_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyEventSubscriptionCommand"),Kdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...imt(e,t),[Me]:r_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ModifyGlobalClusterCommand"),Xdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...omt(e,t),[Me]:o_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RebootDBInstanceCommand"),Jdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...amt(e,t),[Me]:a_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RemoveFromGlobalClusterCommand"),Qdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...umt(e,t),[Me]:u_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RemoveSourceIdentifierFromSubscriptionCommand"),Zdt=v(async(e,t)=>{let r=ze,n;return n=Ye({...cmt(e,t),[Me]:c_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RemoveTagsFromResourceCommand"),eft=v(async(e,t)=>{let r=ze,n;return n=Ye({...lmt(e,t),[Me]:i_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_ResetDBClusterParameterGroupCommand"),tft=v(async(e,t)=>{let r=ze,n;return n=Ye({...dmt(e,t),[Me]:n_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RestoreDBClusterFromSnapshotCommand"),rft=v(async(e,t)=>{let r=ze,n;return n=Ye({...fmt(e,t),[Me]:s_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_RestoreDBClusterToPointInTimeCommand"),nft=v(async(e,t)=>{let r=ze,n;return n=Ye({...pmt(e,t),[Me]:l_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_StartDBClusterCommand"),ift=v(async(e,t)=>{let r=ze,n;return n=Ye({...mmt(e,t),[Me]:d_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_StopDBClusterCommand"),sft=v(async(e,t)=>{let r=ze,n;return n=Ye({...gmt(e,t),[Me]:f_t,[Ve]:He}),We(t,r,"/",void 0,n)},"se_SwitchoverGlobalClusterCommand"),oft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=vmt(r.AddSourceIdentifierToSubscriptionResult,t),{$metadata:ne(e),...n}},"de_AddSourceIdentifierToSubscriptionCommand"),aft=v(async(e,t)=>e.statusCode>=300?Ge(e,t):(await(0,S.collectBody)(e.body,t),{$metadata:ne(e)}),"de_AddTagsToResourceCommand"),uft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=_mt(r.ApplyPendingMaintenanceActionResult,t),{$metadata:ne(e),...n}},"de_ApplyPendingMaintenanceActionCommand"),cft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Dmt(r.CopyDBClusterParameterGroupResult,t),{$metadata:ne(e),...n}},"de_CopyDBClusterParameterGroupCommand"),lft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Rmt(r.CopyDBClusterSnapshotResult,t),{$metadata:ne(e),...n}},"de_CopyDBClusterSnapshotCommand"),dft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=xmt(r.CreateDBClusterResult,t),{$metadata:ne(e),...n}},"de_CreateDBClusterCommand"),fft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Nmt(r.CreateDBClusterParameterGroupResult,t),{$metadata:ne(e),...n}},"de_CreateDBClusterParameterGroupCommand"),hft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Pmt(r.CreateDBClusterSnapshotResult,t),{$metadata:ne(e),...n}},"de_CreateDBClusterSnapshotCommand"),pft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Bmt(r.CreateDBInstanceResult,t),{$metadata:ne(e),...n}},"de_CreateDBInstanceCommand"),mft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Mmt(r.CreateDBSubnetGroupResult,t),{$metadata:ne(e),...n}},"de_CreateDBSubnetGroupCommand"),gft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Fmt(r.CreateEventSubscriptionResult,t),{$metadata:ne(e),...n}},"de_CreateEventSubscriptionCommand"),yft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=qmt(r.CreateGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_CreateGlobalClusterCommand"),vft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Tgt(r.DeleteDBClusterResult,t),{$metadata:ne(e),...n}},"de_DeleteDBClusterCommand"),_ft=v(async(e,t)=>e.statusCode>=300?Ge(e,t):(await(0,S.collectBody)(e.body,t),{$metadata:ne(e)}),"de_DeleteDBClusterParameterGroupCommand"),Sft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Agt(r.DeleteDBClusterSnapshotResult,t),{$metadata:ne(e),...n}},"de_DeleteDBClusterSnapshotCommand"),Eft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Igt(r.DeleteDBInstanceResult,t),{$metadata:ne(e),...n}},"de_DeleteDBInstanceCommand"),Cft=v(async(e,t)=>e.statusCode>=300?Ge(e,t):(await(0,S.collectBody)(e.body,t),{$metadata:ne(e)}),"de_DeleteDBSubnetGroupCommand"),wft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Dgt(r.DeleteEventSubscriptionResult,t),{$metadata:ne(e),...n}},"de_DeleteEventSubscriptionCommand"),bft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Rgt(r.DeleteGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_DeleteGlobalClusterCommand"),Oft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Amt(r.DescribeCertificatesResult,t),{$metadata:ne(e),...n}},"de_DescribeCertificatesCommand"),Tft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Vmt(r.DescribeDBClusterParameterGroupsResult,t),{$metadata:ne(e),...n}},"de_DescribeDBClusterParameterGroupsCommand"),Aft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Wmt(r.DescribeDBClusterParametersResult,t),{$metadata:ne(e),...n}},"de_DescribeDBClusterParametersCommand"),Ift=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=kmt(r.DescribeDBClustersResult,t),{$metadata:ne(e),...n}},"de_DescribeDBClustersCommand"),Dft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Ngt(r.DescribeDBClusterSnapshotAttributesResult,t),{$metadata:ne(e),...n}},"de_DescribeDBClusterSnapshotAttributesCommand"),Rft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=tgt(r.DescribeDBClusterSnapshotsResult,t),{$metadata:ne(e),...n}},"de_DescribeDBClusterSnapshotsCommand"),Nft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=sgt(r.DescribeDBEngineVersionsResult,t),{$metadata:ne(e),...n}},"de_DescribeDBEngineVersionsCommand"),xft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=ugt(r.DescribeDBInstancesResult,t),{$metadata:ne(e),...n}},"de_DescribeDBInstancesCommand"),Pft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Sgt(r.DescribeDBSubnetGroupsResult,t),{$metadata:ne(e),...n}},"de_DescribeDBSubnetGroupsCommand"),Bft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=xgt(r.DescribeEngineDefaultClusterParametersResult,t),{$metadata:ne(e),...n}},"de_DescribeEngineDefaultClusterParametersCommand"),Mft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Lgt(r.DescribeEventCategoriesResult,t),{$metadata:ne(e),...n}},"de_DescribeEventCategoriesCommand"),Fft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=jgt(r.DescribeEventsResult,t),{$metadata:ne(e),...n}},"de_DescribeEventsCommand"),qft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Ggt(r.DescribeEventSubscriptionsResult,t),{$metadata:ne(e),...n}},"de_DescribeEventSubscriptionsCommand"),Lft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Qgt(r.DescribeGlobalClustersResult,t),{$metadata:ne(e),...n}},"de_DescribeGlobalClustersCommand"),Uft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Oyt(r.DescribeOrderableDBInstanceOptionsResult,t),{$metadata:ne(e),...n}},"de_DescribeOrderableDBInstanceOptionsCommand"),jft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Nyt(r.DescribePendingMaintenanceActionsResult,t),{$metadata:ne(e),...n}},"de_DescribePendingMaintenanceActionsCommand"),$ft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Wgt(r.FailoverDBClusterResult,t),{$metadata:ne(e),...n}},"de_FailoverDBClusterCommand"),kft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=zgt(r.FailoverGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_FailoverGlobalClusterCommand"),Gft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=avt(r.ListTagsForResourceResult,t),{$metadata:ne(e),...n}},"de_ListTagsForResourceCommand"),Wft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=yyt(r.ModifyDBClusterResult,t),{$metadata:ne(e),...n}},"de_ModifyDBClusterCommand"),zft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=pye(r.ModifyDBClusterParameterGroupResult,t),{$metadata:ne(e),...n}},"de_ModifyDBClusterParameterGroupCommand"),Hft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=vyt(r.ModifyDBClusterSnapshotAttributeResult,t),{$metadata:ne(e),...n}},"de_ModifyDBClusterSnapshotAttributeCommand"),Vft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=_yt(r.ModifyDBInstanceResult,t),{$metadata:ne(e),...n}},"de_ModifyDBInstanceCommand"),Yft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Syt(r.ModifyDBSubnetGroupResult,t),{$metadata:ne(e),...n}},"de_ModifyDBSubnetGroupCommand"),Kft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Eyt(r.ModifyEventSubscriptionResult,t),{$metadata:ne(e),...n}},"de_ModifyEventSubscriptionCommand"),Xft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Cyt(r.ModifyGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_ModifyGlobalClusterCommand"),Jft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Myt(r.RebootDBInstanceResult,t),{$metadata:ne(e),...n}},"de_RebootDBInstanceCommand"),Qft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Fyt(r.RemoveFromGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_RemoveFromGlobalClusterCommand"),Zft=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=qyt(r.RemoveSourceIdentifierFromSubscriptionResult,t),{$metadata:ne(e),...n}},"de_RemoveSourceIdentifierFromSubscriptionCommand"),eht=v(async(e,t)=>e.statusCode>=300?Ge(e,t):(await(0,S.collectBody)(e.body,t),{$metadata:ne(e)}),"de_RemoveTagsFromResourceCommand"),tht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=pye(r.ResetDBClusterParameterGroupResult,t),{$metadata:ne(e),...n}},"de_ResetDBClusterParameterGroupCommand"),rht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Uyt(r.RestoreDBClusterFromSnapshotResult,t),{$metadata:ne(e),...n}},"de_RestoreDBClusterFromSnapshotCommand"),nht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=jyt(r.RestoreDBClusterToPointInTimeResult,t),{$metadata:ne(e),...n}},"de_RestoreDBClusterToPointInTimeCommand"),iht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Yyt(r.StartDBClusterResult,t),{$metadata:ne(e),...n}},"de_StartDBClusterCommand"),sht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=Kyt(r.StopDBClusterResult,t),{$metadata:ne(e),...n}},"de_StopDBClusterCommand"),oht=v(async(e,t)=>{if(e.statusCode>=300)return Ge(e,t);let r=await(0,Xe.parseXmlBody)(e.body,t),n={};return n=ivt(r.SwitchoverGlobalClusterResult,t),{$metadata:ne(e),...n}},"de_SwitchoverGlobalClusterCommand"),Ge=v(async(e,t)=>{let r={...e,body:await(0,Xe.parseXmlErrorBody)(e.body,t)},n=h_t(e,r.body);switch(n){case"SourceNotFound":case"com.amazonaws.docdb#SourceNotFoundFault":throw await npt(r,t);case"SubscriptionNotFound":case"com.amazonaws.docdb#SubscriptionNotFoundFault":throw await cpt(r,t);case"DBClusterNotFoundFault":case"com.amazonaws.docdb#DBClusterNotFoundFault":throw await lht(r,t);case"DBInstanceNotFound":case"com.amazonaws.docdb#DBInstanceNotFoundFault":throw await ght(r,t);case"DBSnapshotNotFound":case"com.amazonaws.docdb#DBSnapshotNotFoundFault":throw await Cht(r,t);case"InvalidDBClusterStateFault":case"com.amazonaws.docdb#InvalidDBClusterStateFault":throw await Lht(r,t);case"InvalidDBInstanceState":case"com.amazonaws.docdb#InvalidDBInstanceStateFault":throw await Uht(r,t);case"ResourceNotFoundFault":case"com.amazonaws.docdb#ResourceNotFoundFault":throw await Jht(r,t);case"DBParameterGroupAlreadyExists":case"com.amazonaws.docdb#DBParameterGroupAlreadyExistsFault":throw await yht(r,t);case"DBParameterGroupNotFound":case"com.amazonaws.docdb#DBParameterGroupNotFoundFault":throw await vht(r,t);case"DBParameterGroupQuotaExceeded":case"com.amazonaws.docdb#DBParameterGroupQuotaExceededFault":throw await _ht(r,t);case"DBClusterSnapshotAlreadyExistsFault":case"com.amazonaws.docdb#DBClusterSnapshotAlreadyExistsFault":throw await hht(r,t);case"DBClusterSnapshotNotFoundFault":case"com.amazonaws.docdb#DBClusterSnapshotNotFoundFault":throw await pht(r,t);case"InvalidDBClusterSnapshotStateFault":case"com.amazonaws.docdb#InvalidDBClusterSnapshotStateFault":throw await qht(r,t);case"KMSKeyNotAccessibleFault":case"com.amazonaws.docdb#KMSKeyNotAccessibleFault":throw await Xht(r,t);case"SnapshotQuotaExceeded":case"com.amazonaws.docdb#SnapshotQuotaExceededFault":throw await Zht(r,t);case"DBClusterAlreadyExistsFault":case"com.amazonaws.docdb#DBClusterAlreadyExistsFault":throw await cht(r,t);case"DBClusterParameterGroupNotFound":case"com.amazonaws.docdb#DBClusterParameterGroupNotFoundFault":throw await dht(r,t);case"DBClusterQuotaExceededFault":case"com.amazonaws.docdb#DBClusterQuotaExceededFault":throw await fht(r,t);case"DBSubnetGroupDoesNotCoverEnoughAZs":case"com.amazonaws.docdb#DBSubnetGroupDoesNotCoverEnoughAZs":throw await bht(r,t);case"DBSubnetGroupNotFoundFault":case"com.amazonaws.docdb#DBSubnetGroupNotFoundFault":throw await Oht(r,t);case"GlobalClusterNotFoundFault":case"com.amazonaws.docdb#GlobalClusterNotFoundFault":throw await Nht(r,t);case"InsufficientStorageClusterCapacity":case"com.amazonaws.docdb#InsufficientStorageClusterCapacityFault":throw await Fht(r,t);case"InvalidDBSubnetGroupStateFault":case"com.amazonaws.docdb#InvalidDBSubnetGroupStateFault":throw await Ght(r,t);case"InvalidGlobalClusterStateFault":case"com.amazonaws.docdb#InvalidGlobalClusterStateFault":throw await Hht(r,t);case"InvalidSubnet":case"com.amazonaws.docdb#InvalidSubnet":throw await Yht(r,t);case"InvalidVPCNetworkStateFault":case"com.amazonaws.docdb#InvalidVPCNetworkStateFault":throw await Kht(r,t);case"StorageQuotaExceeded":case"com.amazonaws.docdb#StorageQuotaExceededFault":throw await ipt(r,t);case"AuthorizationNotFound":case"com.amazonaws.docdb#AuthorizationNotFoundFault":throw await aht(r,t);case"DBInstanceAlreadyExists":case"com.amazonaws.docdb#DBInstanceAlreadyExistsFault":throw await mht(r,t);case"DBSecurityGroupNotFound":case"com.amazonaws.docdb#DBSecurityGroupNotFoundFault":throw await Sht(r,t);case"InstanceQuotaExceeded":case"com.amazonaws.docdb#InstanceQuotaExceededFault":throw await Pht(r,t);case"InsufficientDBInstanceCapacity":case"com.amazonaws.docdb#InsufficientDBInstanceCapacityFault":throw await Mht(r,t);case"StorageTypeNotSupported":case"com.amazonaws.docdb#StorageTypeNotSupportedFault":throw await spt(r,t);case"DBSubnetGroupAlreadyExists":case"com.amazonaws.docdb#DBSubnetGroupAlreadyExistsFault":throw await wht(r,t);case"DBSubnetGroupQuotaExceeded":case"com.amazonaws.docdb#DBSubnetGroupQuotaExceededFault":throw await Tht(r,t);case"DBSubnetQuotaExceededFault":case"com.amazonaws.docdb#DBSubnetQuotaExceededFault":throw await Aht(r,t);case"EventSubscriptionQuotaExceeded":case"com.amazonaws.docdb#EventSubscriptionQuotaExceededFault":throw await Dht(r,t);case"SNSInvalidTopic":case"com.amazonaws.docdb#SNSInvalidTopicFault":throw await ept(r,t);case"SNSNoAuthorization":case"com.amazonaws.docdb#SNSNoAuthorizationFault":throw await tpt(r,t);case"SNSTopicArnNotFound":case"com.amazonaws.docdb#SNSTopicArnNotFoundFault":throw await rpt(r,t);case"SubscriptionAlreadyExist":case"com.amazonaws.docdb#SubscriptionAlreadyExistFault":throw await apt(r,t);case"SubscriptionCategoryNotFound":case"com.amazonaws.docdb#SubscriptionCategoryNotFoundFault":throw await upt(r,t);case"GlobalClusterAlreadyExistsFault":case"com.amazonaws.docdb#GlobalClusterAlreadyExistsFault":throw await Rht(r,t);case"GlobalClusterQuotaExceededFault":case"com.amazonaws.docdb#GlobalClusterQuotaExceededFault":throw await xht(r,t);case"InvalidDBParameterGroupState":case"com.amazonaws.docdb#InvalidDBParameterGroupStateFault":throw await jht(r,t);case"DBSnapshotAlreadyExists":case"com.amazonaws.docdb#DBSnapshotAlreadyExistsFault":throw await Eht(r,t);case"InvalidDBSubnetStateFault":case"com.amazonaws.docdb#InvalidDBSubnetStateFault":throw await Wht(r,t);case"InvalidEventSubscriptionState":case"com.amazonaws.docdb#InvalidEventSubscriptionStateFault":throw await zht(r,t);case"CertificateNotFound":case"com.amazonaws.docdb#CertificateNotFoundFault":throw await uht(r,t);case"InvalidDBSecurityGroupState":case"com.amazonaws.docdb#InvalidDBSecurityGroupStateFault":throw await $ht(r,t);case"SharedSnapshotQuotaExceeded":case"com.amazonaws.docdb#SharedSnapshotQuotaExceededFault":throw await Qht(r,t);case"DBUpgradeDependencyFailure":case"com.amazonaws.docdb#DBUpgradeDependencyFailureFault":throw await Iht(r,t);case"SubnetAlreadyInUse":case"com.amazonaws.docdb#SubnetAlreadyInUse":throw await opt(r,t);case"InsufficientDBClusterCapacityFault":case"com.amazonaws.docdb#InsufficientDBClusterCapacityFault":throw await Bht(r,t);case"InvalidDBSnapshotState":case"com.amazonaws.docdb#InvalidDBSnapshotStateFault":throw await kht(r,t);case"InvalidRestoreFault":case"com.amazonaws.docdb#InvalidRestoreFault":throw await Vht(r,t);default:let i=r.body;return dvt({output:e,parsedBody:i.Error,errorCode:n})}},"de_CommandError"),aht=v(async(e,t)=>{let r=e.body,n=Emt(r.Error,t),i=new oge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_AuthorizationNotFoundFaultRes"),uht=v(async(e,t)=>{let r=e.body,n=Imt(r.Error,t),i=new Yge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_CertificateNotFoundFaultRes"),cht=v(async(e,t)=>{let r=e.body,n=Lmt(r.Error,t),i=new Fme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterAlreadyExistsFaultRes"),lht=v(async(e,t)=>{let r=e.body,n=Gmt(r.Error,t),i=new ume({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterNotFoundFaultRes"),dht=v(async(e,t)=>{let r=e.body,n=Hmt(r.Error,t),i=new Lme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterParameterGroupNotFoundFaultRes"),fht=v(async(e,t)=>{let r=e.body,n=Ymt(r.Error,t),i=new jme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterQuotaExceededFaultRes"),hht=v(async(e,t)=>{let r=e.body,n=Jmt(r.Error,t),i=new Tme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterSnapshotAlreadyExistsFaultRes"),pht=v(async(e,t)=>{let r=e.body,n=rgt(r.Error,t),i=new Ime({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBClusterSnapshotNotFoundFaultRes"),mht=v(async(e,t)=>{let r=e.body,n=ogt(r.Error,t),i=new uge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBInstanceAlreadyExistsFaultRes"),ght=v(async(e,t)=>{let r=e.body,n=cgt(r.Error,t),i=new lme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBInstanceNotFoundFaultRes"),yht=v(async(e,t)=>{let r=e.body,n=fgt(r.Error,t),i=new Sme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBParameterGroupAlreadyExistsFaultRes"),vht=v(async(e,t)=>{let r=e.body,n=hgt(r.Error,t),i=new Cme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBParameterGroupNotFoundFaultRes"),_ht=v(async(e,t)=>{let r=e.body,n=pgt(r.Error,t),i=new bme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBParameterGroupQuotaExceededFaultRes"),Sht=v(async(e,t)=>{let r=e.body,n=mgt(r.Error,t),i=new lge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSecurityGroupNotFoundFaultRes"),Eht=v(async(e,t)=>{let r=e.body,n=ggt(r.Error,t),i=new kge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSnapshotAlreadyExistsFaultRes"),Cht=v(async(e,t)=>{let r=e.body,n=ygt(r.Error,t),i=new fme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSnapshotNotFoundFaultRes"),wht=v(async(e,t)=>{let r=e.body,n=vgt(r.Error,t),i=new vge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSubnetGroupAlreadyExistsFaultRes"),bht=v(async(e,t)=>{let r=e.body,n=_gt(r.Error,t),i=new kme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSubnetGroupDoesNotCoverEnoughAZsRes"),Oht=v(async(e,t)=>{let r=e.body,n=Egt(r.Error,t),i=new Wme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSubnetGroupNotFoundFaultRes"),Tht=v(async(e,t)=>{let r=e.body,n=Cgt(r.Error,t),i=new Sge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSubnetGroupQuotaExceededFaultRes"),Aht=v(async(e,t)=>{let r=e.body,n=bgt(r.Error,t),i=new Cge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBSubnetQuotaExceededFaultRes"),Iht=v(async(e,t)=>{let r=e.body,n=Ogt(r.Error,t),i=new eye({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_DBUpgradeDependencyFailureFaultRes"),Dht=v(async(e,t)=>{let r=e.body,n=$gt(r.Error,t),i=new bge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_EventSubscriptionQuotaExceededFaultRes"),Rht=v(async(e,t)=>{let r=e.body,n=Hgt(r.Error,t),i=new Fge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_GlobalClusterAlreadyExistsFaultRes"),Nht=v(async(e,t)=>{let r=e.body,n=Xgt(r.Error,t),i=new Hme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_GlobalClusterNotFoundFaultRes"),xht=v(async(e,t)=>{let r=e.body,n=Jgt(r.Error,t),i=new Lge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_GlobalClusterQuotaExceededFaultRes"),Pht=v(async(e,t)=>{let r=e.body,n=Zgt(r.Error,t),i=new fge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InstanceQuotaExceededFaultRes"),Bht=v(async(e,t)=>{let r=e.body,n=eyt(r.Error,t),i=new iye({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InsufficientDBClusterCapacityFaultRes"),Mht=v(async(e,t)=>{let r=e.body,n=tyt(r.Error,t),i=new pge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InsufficientDBInstanceCapacityFaultRes"),Fht=v(async(e,t)=>{let r=e.body,n=ryt(r.Error,t),i=new Yme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InsufficientStorageClusterCapacityFaultRes"),qht=v(async(e,t)=>{let r=e.body,n=nyt(r.Error,t),i=new Rme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBClusterSnapshotStateFaultRes"),Lht=v(async(e,t)=>{let r=e.body,n=iyt(r.Error,t),i=new pme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBClusterStateFaultRes"),Uht=v(async(e,t)=>{let r=e.body,n=syt(r.Error,t),i=new gme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBInstanceStateFaultRes"),jht=v(async(e,t)=>{let r=e.body,n=oyt(r.Error,t),i=new jge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBParameterGroupStateFaultRes"),$ht=v(async(e,t)=>{let r=e.body,n=ayt(r.Error,t),i=new Xge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBSecurityGroupStateFaultRes"),kht=v(async(e,t)=>{let r=e.body,n=uyt(r.Error,t),i=new oye({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBSnapshotStateFaultRes"),Ght=v(async(e,t)=>{let r=e.body,n=cyt(r.Error,t),i=new Xme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBSubnetGroupStateFaultRes"),Wht=v(async(e,t)=>{let r=e.body,n=lyt(r.Error,t),i=new Wge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidDBSubnetStateFaultRes"),zht=v(async(e,t)=>{let r=e.body,n=dyt(r.Error,t),i=new Hge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidEventSubscriptionStateFaultRes"),Hht=v(async(e,t)=>{let r=e.body,n=fyt(r.Error,t),i=new Qme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidGlobalClusterStateFaultRes"),Vht=v(async(e,t)=>{let r=e.body,n=hyt(r.Error,t),i=new uye({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidRestoreFaultRes"),Yht=v(async(e,t)=>{let r=e.body,n=pyt(r.Error,t),i=new ege({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidSubnetRes"),Kht=v(async(e,t)=>{let r=e.body,n=myt(r.Error,t),i=new rge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_InvalidVPCNetworkStateFaultRes"),Xht=v(async(e,t)=>{let r=e.body,n=gyt(r.Error,t),i=new xme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_KMSKeyNotAccessibleFaultRes"),Jht=v(async(e,t)=>{let r=e.body,n=Lyt(r.Error,t),i=new vme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_ResourceNotFoundFaultRes"),Qht=v(async(e,t)=>{let r=e.body,n=$yt(r.Error,t),i=new Qge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SharedSnapshotQuotaExceededFaultRes"),Zht=v(async(e,t)=>{let r=e.body,n=kyt(r.Error,t),i=new Bme({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SnapshotQuotaExceededFaultRes"),ept=v(async(e,t)=>{let r=e.body,n=Gyt(r.Error,t),i=new Tge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SNSInvalidTopicFaultRes"),tpt=v(async(e,t)=>{let r=e.body,n=Wyt(r.Error,t),i=new Ige({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SNSNoAuthorizationFaultRes"),rpt=v(async(e,t)=>{let r=e.body,n=zyt(r.Error,t),i=new Rge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SNSTopicArnNotFoundFaultRes"),npt=v(async(e,t)=>{let r=e.body,n=Vyt(r.Error,t),i=new ime({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SourceNotFoundFaultRes"),ipt=v(async(e,t)=>{let r=e.body,n=Xyt(r.Error,t),i=new ige({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_StorageQuotaExceededFaultRes"),spt=v(async(e,t)=>{let r=e.body,n=Jyt(r.Error,t),i=new gge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_StorageTypeNotSupportedFaultRes"),opt=v(async(e,t)=>{let r=e.body,n=Zyt(r.Error,t),i=new rye({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SubnetAlreadyInUseRes"),apt=v(async(e,t)=>{let r=e.body,n=tvt(r.Error,t),i=new xge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SubscriptionAlreadyExistFaultRes"),upt=v(async(e,t)=>{let r=e.body,n=rvt(r.Error,t),i=new Bge({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SubscriptionCategoryNotFoundFaultRes"),cpt=v(async(e,t)=>{let r=e.body,n=nvt(r.Error,t),i=new ome({$metadata:ne(e),...n});return(0,S.decorateServiceException)(i,r)},"de_SubscriptionNotFoundFaultRes"),lpt=v((e,t)=>{let r={};return e[xn]!=null&&(r[xn]=e[xn]),e[ao]!=null&&(r[ao]=e[ao]),r},"se_AddSourceIdentifierToSubscriptionMessage"),dpt=v((e,t)=>{var r;let n={};if(e[qu]!=null&&(n[qu]=e[qu]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return n},"se_AddTagsToResourceMessage"),fpt=v((e,t)=>{let r={};return e[Fu]!=null&&(r[Fu]=e[Fu]),e[e3]!=null&&(r[e3]=e[e3]),e[rG]!=null&&(r[rG]=e[rG]),r},"se_ApplyPendingMaintenanceActionMessage"),Fpe=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`AttributeValue.${n}`]=i,n++);return r},"se_AttributeValueList"),cye=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`AvailabilityZone.${n}`]=i,n++);return r},"se_AvailabilityZones"),hpt=v((e,t)=>{var r,n;let i={};if(e[P3]!=null){let o=tE(e[P3],t);((r=e[P3])==null?void 0:r.length)===0&&(i.EnableLogTypes=[]),Object.entries(o).forEach(([a,u])=>{let l=`EnableLogTypes.${a}`;i[l]=u})}if(e[A3]!=null){let o=tE(e[A3],t);((n=e[A3])==null?void 0:n.length)===0&&(i.DisableLogTypes=[]),Object.entries(o).forEach(([a,u])=>{let l=`DisableLogTypes.${a}`;i[l]=u})}return i},"se_CloudwatchLogsExportConfiguration"),ppt=v((e,t)=>{var r;let n={};if(e[vG]!=null&&(n[vG]=e[vG]),e[xG]!=null&&(n[xG]=e[xG]),e[NG]!=null&&(n[NG]=e[NG]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return n},"se_CopyDBClusterParameterGroupMessage"),mpt=v((e,t)=>{var r;let n={};if(e[SG]!=null&&(n[SG]=e[SG]),e[PG]!=null&&(n[PG]=e[PG]),e[tn]!=null&&(n[tn]=e[tn]),e[eg]!=null&&(n[eg]=e[eg]),e[m3]!=null&&(n[m3]=e[m3]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return n},"se_CopyDBClusterSnapshotMessage"),gpt=v((e,t)=>{var r,n,i,o;let a={};if(e[Zr]!=null){let u=cye(e[Zr],t);((r=e[Zr])==null?void 0:r.length)===0&&(a.AvailabilityZones=[]),Object.entries(u).forEach(([l,f])=>{let h=`AvailabilityZones.${l}`;a[h]=f})}if(e[Fi]!=null&&(a[Fi]=e[Fi]),e[ot]!=null&&(a[ot]=e[ot]),e[Wt]!=null&&(a[Wt]=e[Wt]),e[uo]!=null){let u=_R(e[uo],t);((n=e[uo])==null?void 0:n.length)===0&&(a.VpcSecurityGroupIds=[]),Object.entries(u).forEach(([l,f])=>{let h=`VpcSecurityGroupIds.${l}`;a[h]=f})}if(e[dr]!=null&&(a[dr]=e[dr]),e[Tt]!=null&&(a[Tt]=e[Tt]),e[ft]!=null&&(a[ft]=e[ft]),e[Nr]!=null&&(a[Nr]=e[Nr]),e[Pu]!=null&&(a[Pu]=e[Pu]),e[Bu]!=null&&(a[Bu]=e[Bu]),e[so]!=null&&(a[so]=e[so]),e[Rn]!=null&&(a[Rn]=e[Rn]),e[zt]!=null){let u=Bo(e[zt],t);((i=e[zt])==null?void 0:i.length)===0&&(a.Tags=[]),Object.entries(u).forEach(([l,f])=>{let h=`Tags.${l}`;a[h]=f})}if(e[Nn]!=null&&(a[Nn]=e[Nn]),e[tn]!=null&&(a[tn]=e[tn]),e[eg]!=null&&(a[eg]=e[eg]),e[Ru]!=null){let u=tE(e[Ru],t);((o=e[Ru])==null?void 0:o.length)===0&&(a.EnableCloudwatchLogsExports=[]),Object.entries(u).forEach(([l,f])=>{let h=`EnableCloudwatchLogsExports.${l}`;a[h]=f})}return e[Rr]!=null&&(a[Rr]=e[Rr]),e[fr]!=null&&(a[fr]=e[fr]),e[xr]!=null&&(a[xr]=e[xr]),a},"se_CreateDBClusterMessage"),ypt=v((e,t)=>{var r;let n={};if(e[Wt]!=null&&(n[Wt]=e[Wt]),e[In]!=null&&(n[In]=e[In]),e[Tn]!=null&&(n[Tn]=e[Tn]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return n},"se_CreateDBClusterParameterGroupMessage"),vpt=v((e,t)=>{var r;let n={};if(e[en]!=null&&(n[en]=e[en]),e[ot]!=null&&(n[ot]=e[ot]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return n},"se_CreateDBClusterSnapshotMessage"),_pt=v((e,t)=>{var r;let n={};if(e[Dr]!=null&&(n[Dr]=e[Dr]),e[An]!=null&&(n[An]=e[An]),e[Tt]!=null&&(n[Tt]=e[Tt]),e[no]!=null&&(n[no]=e[no]),e[Rn]!=null&&(n[Rn]=e[Rn]),e[Au]!=null&&(n[Au]=e[Au]),e[zt]!=null){let i=Bo(e[zt],t);((r=e[zt])==null?void 0:r.length)===0&&(n.Tags=[]),Object.entries(i).forEach(([o,a])=>{let u=`Tags.${o}`;n[u]=a})}return e[ot]!=null&&(n[ot]=e[ot]),e[Iu]!=null&&(n[Iu]=e[Iu]),e[oo]!=null&&(n[oo]=e[oo]),e[km]!=null&&(n[km]=e[km]),e[Mu]!=null&&(n[Mu]=e[Mu]),e[io]!=null&&(n[io]=e[io]),n},"se_CreateDBInstanceMessage"),Spt=v((e,t)=>{var r,n;let i={};if(e[dr]!=null&&(i[dr]=e[dr]),e[Du]!=null&&(i[Du]=e[Du]),e[ng]!=null){let o=dye(e[ng],t);((r=e[ng])==null?void 0:r.length)===0&&(i.SubnetIds=[]),Object.entries(o).forEach(([a,u])=>{let l=`SubnetIds.${a}`;i[l]=u})}if(e[zt]!=null){let o=Bo(e[zt],t);((n=e[zt])==null?void 0:n.length)===0&&(i.Tags=[]),Object.entries(o).forEach(([a,u])=>{let l=`Tags.${a}`;i[l]=u})}return i},"se_CreateDBSubnetGroupMessage"),Ept=v((e,t)=>{var r,n,i;let o={};if(e[xn]!=null&&(o[xn]=e[xn]),e[Uu]!=null&&(o[Uu]=e[Uu]),e[rn]!=null&&(o[rn]=e[rn]),e[gn]!=null){let a=WG(e[gn],t);((r=e[gn])==null?void 0:r.length)===0&&(o.EventCategories=[]),Object.entries(a).forEach(([u,l])=>{let f=`EventCategories.${u}`;o[f]=l})}if(e[bG]!=null){let a=hmt(e[bG],t);((n=e[bG])==null?void 0:n.length)===0&&(o.SourceIds=[]),Object.entries(a).forEach(([u,l])=>{let f=`SourceIds.${u}`;o[f]=l})}if(e[Nu]!=null&&(o[Nu]=e[Nu]),e[zt]!=null){let a=Bo(e[zt],t);((i=e[zt])==null?void 0:i.length)===0&&(o.Tags=[]),Object.entries(a).forEach(([u,l])=>{let f=`Tags.${u}`;o[f]=l})}return o},"se_CreateEventSubscriptionMessage"),Cpt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),e[rg]!=null&&(r[rg]=e[rg]),e[Tt]!=null&&(r[Tt]=e[Tt]),e[ft]!=null&&(r[ft]=e[ft]),e[Rr]!=null&&(r[Rr]=e[Rr]),e[jm]!=null&&(r[jm]=e[jm]),e[Nn]!=null&&(r[Nn]=e[Nn]),r},"se_CreateGlobalClusterMessage"),wpt=v((e,t)=>{let r={};return e[ot]!=null&&(r[ot]=e[ot]),e[EG]!=null&&(r[EG]=e[EG]),e[L3]!=null&&(r[L3]=e[L3]),r},"se_DeleteDBClusterMessage"),bpt=v((e,t)=>{let r={};return e[Wt]!=null&&(r[Wt]=e[Wt]),r},"se_DeleteDBClusterParameterGroupMessage"),Opt=v((e,t)=>{let r={};return e[en]!=null&&(r[en]=e[en]),r},"se_DeleteDBClusterSnapshotMessage"),Tpt=v((e,t)=>{let r={};return e[Dr]!=null&&(r[Dr]=e[Dr]),r},"se_DeleteDBInstanceMessage"),Apt=v((e,t)=>{let r={};return e[dr]!=null&&(r[dr]=e[dr]),r},"se_DeleteDBSubnetGroupMessage"),Ipt=v((e,t)=>{let r={};return e[xn]!=null&&(r[xn]=e[xn]),r},"se_DeleteEventSubscriptionMessage"),Dpt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),r},"se_DeleteGlobalClusterMessage"),Rpt=v((e,t)=>{var r;let n={};if(e[qm]!=null&&(n[qm]=e[qm]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeCertificatesMessage"),Npt=v((e,t)=>{var r;let n={};if(e[Wt]!=null&&(n[Wt]=e[Wt]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeDBClusterParameterGroupsMessage"),xpt=v((e,t)=>{var r;let n={};if(e[Wt]!=null&&(n[Wt]=e[Wt]),e[Lu]!=null&&(n[Lu]=e[Lu]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeDBClusterParametersMessage"),Ppt=v((e,t)=>{var r;let n={};if(e[ot]!=null&&(n[ot]=e[ot]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeDBClustersMessage"),Bpt=v((e,t)=>{let r={};return e[en]!=null&&(r[en]=e[en]),r},"se_DescribeDBClusterSnapshotAttributesMessage"),Mpt=v((e,t)=>{var r;let n={};if(e[ot]!=null&&(n[ot]=e[ot]),e[en]!=null&&(n[en]=e[en]),e[ig]!=null&&(n[ig]=e[ig]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),e[V3]!=null&&(n[V3]=e[V3]),e[H3]!=null&&(n[H3]=e[H3]),n},"se_DescribeDBClusterSnapshotsMessage"),Fpt=v((e,t)=>{var r;let n={};if(e[Tt]!=null&&(n[Tt]=e[Tt]),e[ft]!=null&&(n[ft]=e[ft]),e[In]!=null&&(n[In]=e[In]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),e[I3]!=null&&(n[I3]=e[I3]),e[K3]!=null&&(n[K3]=e[K3]),e[X3]!=null&&(n[X3]=e[X3]),n},"se_DescribeDBEngineVersionsMessage"),qpt=v((e,t)=>{var r;let n={};if(e[Dr]!=null&&(n[Dr]=e[Dr]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeDBInstancesMessage"),Lpt=v((e,t)=>{var r;let n={};if(e[dr]!=null&&(n[dr]=e[dr]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeDBSubnetGroupsMessage"),Upt=v((e,t)=>{var r;let n={};if(e[In]!=null&&(n[In]=e[In]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeEngineDefaultClusterParametersMessage"),jpt=v((e,t)=>{var r;let n={};if(e[rn]!=null&&(n[rn]=e[rn]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return n},"se_DescribeEventCategoriesMessage"),$pt=v((e,t)=>{var r,n;let i={};if(e[ao]!=null&&(i[ao]=e[ao]),e[rn]!=null&&(i[rn]=e[rn]),e[IG]!=null&&(i[IG]=(0,S.serializeDateTime)(e[IG])),e[F3]!=null&&(i[F3]=(0,S.serializeDateTime)(e[F3])),e[N3]!=null&&(i[N3]=e[N3]),e[gn]!=null){let o=WG(e[gn],t);((r=e[gn])==null?void 0:r.length)===0&&(i.EventCategories=[]),Object.entries(o).forEach(([a,u])=>{let l=`EventCategories.${a}`;i[l]=u})}if(e[tt]!=null){let o=gi(e[tt],t);((n=e[tt])==null?void 0:n.length)===0&&(i.Filters=[]),Object.entries(o).forEach(([a,u])=>{let l=`Filters.${a}`;i[l]=u})}return e[ht]!=null&&(i[ht]=e[ht]),e[fe]!=null&&(i[fe]=e[fe]),i},"se_DescribeEventsMessage"),kpt=v((e,t)=>{var r;let n={};if(e[xn]!=null&&(n[xn]=e[xn]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeEventSubscriptionsMessage"),Gpt=v((e,t)=>{var r;let n={};if(e[fr]!=null&&(n[fr]=e[fr]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeGlobalClustersMessage"),Wpt=v((e,t)=>{var r;let n={};if(e[Tt]!=null&&(n[Tt]=e[Tt]),e[ft]!=null&&(n[ft]=e[ft]),e[An]!=null&&(n[An]=e[An]),e[xu]!=null&&(n[xu]=e[xu]),e[cg]!=null&&(n[cg]=e[cg]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[ht]!=null&&(n[ht]=e[ht]),e[fe]!=null&&(n[fe]=e[fe]),n},"se_DescribeOrderableDBInstanceOptionsMessage"),zpt=v((e,t)=>{var r;let n={};if(e[Fu]!=null&&(n[Fu]=e[Fu]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return e[fe]!=null&&(n[fe]=e[fe]),e[ht]!=null&&(n[ht]=e[ht]),n},"se_DescribePendingMaintenanceActionsMessage"),WG=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`EventCategory.${n}`]=i,n++);return r},"se_EventCategoriesList"),Hpt=v((e,t)=>{let r={};return e[ot]!=null&&(r[ot]=e[ot]),e[BG]!=null&&(r[BG]=e[BG]),r},"se_FailoverDBClusterMessage"),Vpt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),e[sg]!=null&&(r[sg]=e[sg]),e[r3]!=null&&(r[r3]=e[r3]),e[RG]!=null&&(r[RG]=e[RG]),r},"se_FailoverGlobalClusterMessage"),Ypt=v((e,t)=>{var r;let n={};if(e[Jm]!=null&&(n[Jm]=e[Jm]),e[kG]!=null){let i=Kpt(e[kG],t);((r=e[kG])==null?void 0:r.length)===0&&(n.Values=[]),Object.entries(i).forEach(([o,a])=>{let u=`Values.${o}`;n[u]=a})}return n},"se_Filter"),gi=v((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=Ypt(i,t);Object.entries(o).forEach(([a,u])=>{r[`Filter.${n}.${a}`]=u}),n++}return r},"se_FilterList"),Kpt=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`Value.${n}`]=i,n++);return r},"se_FilterValueList"),Xpt=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`member.${n}`]=i,n++);return r},"se_KeyList"),Jpt=v((e,t)=>{var r;let n={};if(e[qu]!=null&&(n[qu]=e[qu]),e[tt]!=null){let i=gi(e[tt],t);((r=e[tt])==null?void 0:r.length)===0&&(n.Filters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Filters.${o}`;n[u]=a})}return n},"se_ListTagsForResourceMessage"),tE=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`member.${n}`]=i,n++);return r},"se_LogTypeList"),Qpt=v((e,t)=>{var r;let n={};if(e[ot]!=null&&(n[ot]=e[ot]),e[J3]!=null&&(n[J3]=e[J3]),e[Nm]!=null&&(n[Nm]=e[Nm]),e[Fi]!=null&&(n[Fi]=e[Fi]),e[Wt]!=null&&(n[Wt]=e[Wt]),e[uo]!=null){let i=_R(e[uo],t);((r=e[uo])==null?void 0:r.length)===0&&(n.VpcSecurityGroupIds=[]),Object.entries(i).forEach(([o,a])=>{let u=`VpcSecurityGroupIds.${o}`;n[u]=a})}if(e[Nr]!=null&&(n[Nr]=e[Nr]),e[Bu]!=null&&(n[Bu]=e[Bu]),e[so]!=null&&(n[so]=e[so]),e[Rn]!=null&&(n[Rn]=e[Rn]),e[Lpe]!=null){let i=hpt(e[Lpe],t);Object.entries(i).forEach(([o,a])=>{let u=`CloudwatchLogsExportConfiguration.${o}`;n[u]=a})}return e[ft]!=null&&(n[ft]=e[ft]),e[n3]!=null&&(n[n3]=e[n3]),e[Rr]!=null&&(n[Rr]=e[Rr]),e[xr]!=null&&(n[xr]=e[xr]),n},"se_ModifyDBClusterMessage"),Zpt=v((e,t)=>{var r;let n={};if(e[Wt]!=null&&(n[Wt]=e[Wt]),e[pi]!=null){let i=lye(e[pi],t);((r=e[pi])==null?void 0:r.length)===0&&(n.Parameters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Parameters.${o}`;n[u]=a})}return n},"se_ModifyDBClusterParameterGroupMessage"),emt=v((e,t)=>{var r,n;let i={};if(e[en]!=null&&(i[en]=e[en]),e[Pm]!=null&&(i[Pm]=e[Pm]),e[jG]!=null){let o=Fpe(e[jG],t);((r=e[jG])==null?void 0:r.length)===0&&(i.ValuesToAdd=[]),Object.entries(o).forEach(([a,u])=>{let l=`ValuesToAdd.${a}`;i[l]=u})}if(e[$G]!=null){let o=Fpe(e[$G],t);((n=e[$G])==null?void 0:n.length)===0&&(i.ValuesToRemove=[]),Object.entries(o).forEach(([a,u])=>{let l=`ValuesToRemove.${a}`;i[l]=u})}return i},"se_ModifyDBClusterSnapshotAttributeMessage"),tmt=v((e,t)=>{let r={};return e[Dr]!=null&&(r[Dr]=e[Dr]),e[An]!=null&&(r[An]=e[An]),e[Nm]!=null&&(r[Nm]=e[Nm]),e[Rn]!=null&&(r[Rn]=e[Rn]),e[Au]!=null&&(r[Au]=e[Au]),e[Q3]!=null&&(r[Q3]=e[Q3]),e[io]!=null&&(r[io]=e[io]),e[Iu]!=null&&(r[Iu]=e[Iu]),e[oo]!=null&&(r[oo]=e[oo]),e[km]!=null&&(r[km]=e[km]),e[Mu]!=null&&(r[Mu]=e[Mu]),e[h3]!=null&&(r[h3]=e[h3]),r},"se_ModifyDBInstanceMessage"),rmt=v((e,t)=>{var r;let n={};if(e[dr]!=null&&(n[dr]=e[dr]),e[Du]!=null&&(n[Du]=e[Du]),e[ng]!=null){let i=dye(e[ng],t);((r=e[ng])==null?void 0:r.length)===0&&(n.SubnetIds=[]),Object.entries(i).forEach(([o,a])=>{let u=`SubnetIds.${o}`;n[u]=a})}return n},"se_ModifyDBSubnetGroupMessage"),nmt=v((e,t)=>{var r;let n={};if(e[xn]!=null&&(n[xn]=e[xn]),e[Uu]!=null&&(n[Uu]=e[Uu]),e[rn]!=null&&(n[rn]=e[rn]),e[gn]!=null){let i=WG(e[gn],t);((r=e[gn])==null?void 0:r.length)===0&&(n.EventCategories=[]),Object.entries(i).forEach(([o,a])=>{let u=`EventCategories.${o}`;n[u]=a})}return e[Nu]!=null&&(n[Nu]=e[Nu]),n},"se_ModifyEventSubscriptionMessage"),imt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),e[Z3]!=null&&(r[Z3]=e[Z3]),e[Rr]!=null&&(r[Rr]=e[Rr]),r},"se_ModifyGlobalClusterMessage"),smt=v((e,t)=>{let r={};return e[Qm]!=null&&(r[Qm]=e[Qm]),e[tg]!=null&&(r[tg]=e[tg]),e[Tn]!=null&&(r[Tn]=e[Tn]),e[Lu]!=null&&(r[Lu]=e[Lu]),e[Bm]!=null&&(r[Bm]=e[Bm]),e[$m]!=null&&(r[$m]=e[$m]),e[Mm]!=null&&(r[Mm]=e[Mm]),e[zm]!=null&&(r[zm]=e[zm]),e[Km]!=null&&(r[Km]=e[Km]),e[xm]!=null&&(r[xm]=e[xm]),r},"se_Parameter"),lye=v((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=smt(i,t);Object.entries(o).forEach(([a,u])=>{r[`Parameter.${n}.${a}`]=u}),n++}return r},"se_ParametersList"),omt=v((e,t)=>{let r={};return e[Dr]!=null&&(r[Dr]=e[Dr]),e[U3]!=null&&(r[U3]=e[U3]),r},"se_RebootDBInstanceMessage"),amt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),e[O3]!=null&&(r[O3]=e[O3]),r},"se_RemoveFromGlobalClusterMessage"),umt=v((e,t)=>{let r={};return e[xn]!=null&&(r[xn]=e[xn]),e[ao]!=null&&(r[ao]=e[ao]),r},"se_RemoveSourceIdentifierFromSubscriptionMessage"),cmt=v((e,t)=>{var r;let n={};if(e[qu]!=null&&(n[qu]=e[qu]),e[MG]!=null){let i=Xpt(e[MG],t);((r=e[MG])==null?void 0:r.length)===0&&(n.TagKeys=[]),Object.entries(i).forEach(([o,a])=>{let u=`TagKeys.${o}`;n[u]=a})}return n},"se_RemoveTagsFromResourceMessage"),lmt=v((e,t)=>{var r;let n={};if(e[Wt]!=null&&(n[Wt]=e[Wt]),e[uG]!=null&&(n[uG]=e[uG]),e[pi]!=null){let i=lye(e[pi],t);((r=e[pi])==null?void 0:r.length)===0&&(n.Parameters=[]),Object.entries(i).forEach(([o,a])=>{let u=`Parameters.${o}`;n[u]=a})}return n},"se_ResetDBClusterParameterGroupMessage"),dmt=v((e,t)=>{var r,n,i,o;let a={};if(e[Zr]!=null){let u=cye(e[Zr],t);((r=e[Zr])==null?void 0:r.length)===0&&(a.AvailabilityZones=[]),Object.entries(u).forEach(([l,f])=>{let h=`AvailabilityZones.${l}`;a[h]=f})}if(e[ot]!=null&&(a[ot]=e[ot]),e[wG]!=null&&(a[wG]=e[wG]),e[Tt]!=null&&(a[Tt]=e[Tt]),e[ft]!=null&&(a[ft]=e[ft]),e[Nr]!=null&&(a[Nr]=e[Nr]),e[dr]!=null&&(a[dr]=e[dr]),e[uo]!=null){let u=_R(e[uo],t);((n=e[uo])==null?void 0:n.length)===0&&(a.VpcSecurityGroupIds=[]),Object.entries(u).forEach(([l,f])=>{let h=`VpcSecurityGroupIds.${l}`;a[h]=f})}if(e[zt]!=null){let u=Bo(e[zt],t);((i=e[zt])==null?void 0:i.length)===0&&(a.Tags=[]),Object.entries(u).forEach(([l,f])=>{let h=`Tags.${l}`;a[h]=f})}if(e[tn]!=null&&(a[tn]=e[tn]),e[Ru]!=null){let u=tE(e[Ru],t);((o=e[Ru])==null?void 0:o.length)===0&&(a.EnableCloudwatchLogsExports=[]),Object.entries(u).forEach(([l,f])=>{let h=`EnableCloudwatchLogsExports.${l}`;a[h]=f})}return e[Rr]!=null&&(a[Rr]=e[Rr]),e[Wt]!=null&&(a[Wt]=e[Wt]),e[xr]!=null&&(a[xr]=e[xr]),a},"se_RestoreDBClusterFromSnapshotMessage"),fmt=v((e,t)=>{var r,n,i;let o={};if(e[ot]!=null&&(o[ot]=e[ot]),e[dG]!=null&&(o[dG]=e[dG]),e[rg]!=null&&(o[rg]=e[rg]),e[fG]!=null&&(o[fG]=(0,S.serializeDateTime)(e[fG])),e[qG]!=null&&(o[qG]=e[qG]),e[Nr]!=null&&(o[Nr]=e[Nr]),e[dr]!=null&&(o[dr]=e[dr]),e[uo]!=null){let a=_R(e[uo],t);((r=e[uo])==null?void 0:r.length)===0&&(o.VpcSecurityGroupIds=[]),Object.entries(a).forEach(([u,l])=>{let f=`VpcSecurityGroupIds.${u}`;o[f]=l})}if(e[zt]!=null){let a=Bo(e[zt],t);((n=e[zt])==null?void 0:n.length)===0&&(o.Tags=[]),Object.entries(a).forEach(([u,l])=>{let f=`Tags.${u}`;o[f]=l})}if(e[tn]!=null&&(o[tn]=e[tn]),e[Ru]!=null){let a=tE(e[Ru],t);((i=e[Ru])==null?void 0:i.length)===0&&(o.EnableCloudwatchLogsExports=[]),Object.entries(a).forEach(([u,l])=>{let f=`EnableCloudwatchLogsExports.${u}`;o[f]=l})}return e[Rr]!=null&&(o[Rr]=e[Rr]),e[xr]!=null&&(o[xr]=e[xr]),o},"se_RestoreDBClusterToPointInTimeMessage"),hmt=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`SourceId.${n}`]=i,n++);return r},"se_SourceIdsList"),pmt=v((e,t)=>{let r={};return e[ot]!=null&&(r[ot]=e[ot]),r},"se_StartDBClusterMessage"),mmt=v((e,t)=>{let r={};return e[ot]!=null&&(r[ot]=e[ot]),r},"se_StopDBClusterMessage"),dye=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`SubnetIdentifier.${n}`]=i,n++);return r},"se_SubnetIdentifierList"),gmt=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=e[fr]),e[sg]!=null&&(r[sg]=e[sg]),r},"se_SwitchoverGlobalClusterMessage"),ymt=v((e,t)=>{let r={};return e[Hm]!=null&&(r[Hm]=e[Hm]),e[ug]!=null&&(r[ug]=e[ug]),r},"se_Tag"),Bo=v((e,t)=>{let r={},n=1;for(let i of e){if(i===null)continue;let o=ymt(i,t);Object.entries(o).forEach(([a,u])=>{r[`Tag.${n}.${a}`]=u}),n++}return r},"se_TagList"),_R=v((e,t)=>{let r={},n=1;for(let i of e)i!==null&&(r[`VpcSecurityGroupId.${n}`]=i,n++);return r},"se_VpcSecurityGroupIdList"),vmt=v((e,t)=>{let r={};return e[Yn]!=null&&(r[Yn]=my(e[Yn],t)),r},"de_AddSourceIdentifierToSubscriptionResult"),_mt=v((e,t)=>{let r={};return e[eE]!=null&&(r[eE]=yye(e[eE],t)),r},"de_ApplyPendingMaintenanceActionResult"),Smt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_AttributeValueList"),Emt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_AuthorizationNotFoundFault"),fye=v((e,t)=>{let r={};return e[Jm]!=null&&(r[Jm]=(0,S.expectString)(e[Jm])),r},"de_AvailabilityZone"),Cmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>fye(r,t)),"de_AvailabilityZoneList"),hye=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_AvailabilityZones"),wmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_CACertificateIdentifiersList"),bmt=v((e,t)=>{let r={};return e[qm]!=null&&(r[qm]=(0,S.expectString)(e[qm])),e[g3]!=null&&(r[g3]=(0,S.expectString)(e[g3])),e[FG]!=null&&(r[FG]=(0,S.expectString)(e[FG])),e[LG]!=null&&(r[LG]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[LG]))),e[ag]!=null&&(r[ag]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[ag]))),e[a3]!=null&&(r[a3]=(0,S.expectString)(e[a3])),r},"de_Certificate"),Omt=v((e,t)=>{let r={};return e[c3]!=null&&(r[c3]=(0,S.expectString)(e[c3])),e[ag]!=null&&(r[ag]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[ag]))),r},"de_CertificateDetails"),Tmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>bmt(r,t)),"de_CertificateList"),Amt=v((e,t)=>{let r={};return e.Certificates===""?r[O0]=[]:e[O0]!=null&&e[O0][Upe]!=null&&(r[O0]=Tmt((0,S.getArrayIfSingleItem)(e[O0][Upe]),t)),e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),r},"de_CertificateMessage"),Imt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_CertificateNotFoundFault"),Dmt=v((e,t)=>{let r={};return e[xo]!=null&&(r[xo]=zG(e[xo],t)),r},"de_CopyDBClusterParameterGroupResult"),Rmt=v((e,t)=>{let r={};return e[Po]!=null&&(r[Po]=SR(e[Po],t)),r},"de_CopyDBClusterSnapshotResult"),Nmt=v((e,t)=>{let r={};return e[xo]!=null&&(r[xo]=zG(e[xo],t)),r},"de_CreateDBClusterParameterGroupResult"),xmt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_CreateDBClusterResult"),Pmt=v((e,t)=>{let r={};return e[Po]!=null&&(r[Po]=SR(e[Po],t)),r},"de_CreateDBClusterSnapshotResult"),Bmt=v((e,t)=>{let r={};return e[rs]!=null&&(r[rs]=oC(e[rs],t)),r},"de_CreateDBInstanceResult"),Mmt=v((e,t)=>{let r={};return e[ns]!=null&&(r[ns]=ER(e[ns],t)),r},"de_CreateDBSubnetGroupResult"),Fmt=v((e,t)=>{let r={};return e[Yn]!=null&&(r[Yn]=my(e[Yn],t)),r},"de_CreateEventSubscriptionResult"),qmt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_CreateGlobalClusterResult"),ju=v((e,t)=>{let r={};return e.AvailabilityZones===""?r[Zr]=[]:e[Zr]!=null&&e[Zr][no]!=null&&(r[Zr]=hye((0,S.getArrayIfSingleItem)(e[Zr][no]),t)),e[Fi]!=null&&(r[Fi]=(0,S.strictParseInt32)(e[Fi])),e[ot]!=null&&(r[ot]=(0,S.expectString)(e[ot])),e[xo]!=null&&(r[xo]=(0,S.expectString)(e[xo])),e[ns]!=null&&(r[ns]=(0,S.expectString)(e[ns])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),e[Zm]!=null&&(r[Zm]=(0,S.expectString)(e[Zm])),e[B3]!=null&&(r[B3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[B3]))),e[Gm]!=null&&(r[Gm]=(0,S.expectString)(e[Gm])),e[cG]!=null&&(r[cG]=(0,S.expectString)(e[cG])),e[Ym]!=null&&(r[Ym]=(0,S.parseBoolean)(e[Ym])),e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[Vm]!=null&&(r[Vm]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[Vm]))),e[Nr]!=null&&(r[Nr]=(0,S.strictParseInt32)(e[Nr])),e[Pu]!=null&&(r[Pu]=(0,S.expectString)(e[Pu])),e[so]!=null&&(r[so]=(0,S.expectString)(e[so])),e[Rn]!=null&&(r[Rn]=(0,S.expectString)(e[Rn])),e[lG]!=null&&(r[lG]=(0,S.expectString)(e[lG])),e.ReadReplicaIdentifiers===""?r[V0]=[]:e[V0]!=null&&e[V0][Kpe]!=null&&(r[V0]=Byt((0,S.getArrayIfSingleItem)(e[V0][Kpe]),t)),e.DBClusterMembers===""?r[T0]=[]:e[T0]!=null&&e[T0][jpe]!=null&&(r[T0]=$mt((0,S.getArrayIfSingleItem)(e[T0][jpe]),t)),e.VpcSecurityGroups===""?r[pa]=[]:e[pa]!=null&&e[pa][yR]!=null&&(r[pa]=vye((0,S.getArrayIfSingleItem)(e[pa][yR]),t)),e[Wm]!=null&&(r[Wm]=(0,S.expectString)(e[Wm])),e[Nn]!=null&&(r[Nn]=(0,S.parseBoolean)(e[Nn])),e[tn]!=null&&(r[tn]=(0,S.expectString)(e[tn])),e[T3]!=null&&(r[T3]=(0,S.expectString)(e[T3])),e[Lm]!=null&&(r[Lm]=(0,S.expectString)(e[Lm])),e.AssociatedRoles===""?r[w0]=[]:e[w0]!=null&&e[w0][$pe]!=null&&(r[w0]=Xmt((0,S.getArrayIfSingleItem)(e[w0][$pe]),t)),e[f3]!=null&&(r[f3]=(0,S.expectString)(e[f3])),e[Fm]!=null&&(r[Fm]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[Fm]))),e.EnabledCloudwatchLogsExports===""?r[ha]=[]:e[ha]!=null&&e[ha][ts]!=null&&(r[ha]=rE((0,S.getArrayIfSingleItem)(e[ha][ts]),t)),e[Rr]!=null&&(r[Rr]=(0,S.parseBoolean)(e[Rr])),e[xr]!=null&&(r[xr]=(0,S.expectString)(e[xr])),r},"de_DBCluster"),Lmt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterAlreadyExistsFault"),Umt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>ju(r,t)),"de_DBClusterList"),jmt=v((e,t)=>{let r={};return e[Dr]!=null&&(r[Dr]=(0,S.expectString)(e[Dr])),e[W3]!=null&&(r[W3]=(0,S.parseBoolean)(e[W3])),e[v3]!=null&&(r[v3]=(0,S.expectString)(e[v3])),e[oo]!=null&&(r[oo]=(0,S.strictParseInt32)(e[oo])),r},"de_DBClusterMember"),$mt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>jmt(r,t)),"de_DBClusterMemberList"),kmt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBClusters===""?r[R0]=[]:e[R0]!=null&&e[R0][vr]!=null&&(r[R0]=Umt((0,S.getArrayIfSingleItem)(e[R0][vr]),t)),r},"de_DBClusterMessage"),Gmt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterNotFoundFault"),zG=v((e,t)=>{let r={};return e[Wt]!=null&&(r[Wt]=(0,S.expectString)(e[Wt])),e[In]!=null&&(r[In]=(0,S.expectString)(e[In])),e[Tn]!=null&&(r[Tn]=(0,S.expectString)(e[Tn])),e[y3]!=null&&(r[y3]=(0,S.expectString)(e[y3])),r},"de_DBClusterParameterGroup"),Wmt=v((e,t)=>{let r={};return e.Parameters===""?r[pi]=[]:e[pi]!=null&&e[pi][gR]!=null&&(r[pi]=gye((0,S.getArrayIfSingleItem)(e[pi][gR]),t)),e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),r},"de_DBClusterParameterGroupDetails"),zmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>zG(r,t)),"de_DBClusterParameterGroupList"),pye=v((e,t)=>{let r={};return e[Wt]!=null&&(r[Wt]=(0,S.expectString)(e[Wt])),r},"de_DBClusterParameterGroupNameMessage"),Hmt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterParameterGroupNotFoundFault"),Vmt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBClusterParameterGroups===""?r[A0]=[]:e[A0]!=null&&e[A0][xo]!=null&&(r[A0]=zmt((0,S.getArrayIfSingleItem)(e[A0][xo]),t)),r},"de_DBClusterParameterGroupsMessage"),Ymt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterQuotaExceededFault"),Kmt=v((e,t)=>{let r={};return e[aG]!=null&&(r[aG]=(0,S.expectString)(e[aG])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),r},"de_DBClusterRole"),Xmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Kmt(r,t)),"de_DBClusterRoles"),SR=v((e,t)=>{let r={};return e.AvailabilityZones===""?r[Zr]=[]:e[Zr]!=null&&e[Zr][no]!=null&&(r[Zr]=hye((0,S.getArrayIfSingleItem)(e[Zr][no]),t)),e[en]!=null&&(r[en]=(0,S.expectString)(e[en])),e[ot]!=null&&(r[ot]=(0,S.expectString)(e[ot])),e[gG]!=null&&(r[gG]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[gG]))),e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),e[Nr]!=null&&(r[Nr]=(0,S.strictParseInt32)(e[Nr])),e[og]!=null&&(r[og]=(0,S.expectString)(e[og])),e[Fm]!=null&&(r[Fm]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[Fm]))),e[Pu]!=null&&(r[Pu]=(0,S.expectString)(e[Pu])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[ig]!=null&&(r[ig]=(0,S.expectString)(e[ig])),e[Zm]!=null&&(r[Zm]=(0,S.strictParseInt32)(e[Zm])),e[Nn]!=null&&(r[Nn]=(0,S.parseBoolean)(e[Nn])),e[tn]!=null&&(r[tn]=(0,S.expectString)(e[tn])),e[_3]!=null&&(r[_3]=(0,S.expectString)(e[_3])),e[_G]!=null&&(r[_G]=(0,S.expectString)(e[_G])),e[xr]!=null&&(r[xr]=(0,S.expectString)(e[xr])),r},"de_DBClusterSnapshot"),Jmt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterSnapshotAlreadyExistsFault"),Qmt=v((e,t)=>{let r={};return e[Pm]!=null&&(r[Pm]=(0,S.expectString)(e[Pm])),e.AttributeValues===""?r[b0]=[]:e[b0]!=null&&e[b0][qpe]!=null&&(r[b0]=Smt((0,S.getArrayIfSingleItem)(e[b0][qpe]),t)),r},"de_DBClusterSnapshotAttribute"),Zmt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Qmt(r,t)),"de_DBClusterSnapshotAttributeList"),mye=v((e,t)=>{let r={};return e[en]!=null&&(r[en]=(0,S.expectString)(e[en])),e.DBClusterSnapshotAttributes===""?r[I0]=[]:e[I0]!=null&&e[I0][kpe]!=null&&(r[I0]=Zmt((0,S.getArrayIfSingleItem)(e[I0][kpe]),t)),r},"de_DBClusterSnapshotAttributesResult"),egt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>SR(r,t)),"de_DBClusterSnapshotList"),tgt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBClusterSnapshots===""?r[D0]=[]:e[D0]!=null&&e[D0][Po]!=null&&(r[D0]=egt((0,S.getArrayIfSingleItem)(e[D0][Po]),t)),r},"de_DBClusterSnapshotMessage"),rgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBClusterSnapshotNotFoundFault"),ngt=v((e,t)=>{let r={};return e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[In]!=null&&(r[In]=(0,S.expectString)(e[In])),e[S3]!=null&&(r[S3]=(0,S.expectString)(e[S3])),e[E3]!=null&&(r[E3]=(0,S.expectString)(e[E3])),e.ValidUpgradeTarget===""?r[Z0]=[]:e[Z0]!=null&&e[Z0][Zpe]!=null&&(r[Z0]=cvt((0,S.getArrayIfSingleItem)(e[Z0][Zpe]),t)),e.ExportableLogTypes===""?r[F0]=[]:e[F0]!=null&&e[F0][ts]!=null&&(r[F0]=rE((0,S.getArrayIfSingleItem)(e[F0][ts]),t)),e[TG]!=null&&(r[TG]=(0,S.parseBoolean)(e[TG])),e.SupportedCACertificateIdentifiers===""?r[Y0]=[]:e[Y0]!=null&&e[Y0][ts]!=null&&(r[Y0]=wmt((0,S.getArrayIfSingleItem)(e[Y0][ts]),t)),e[mG]!=null&&(r[mG]=(0,S.parseBoolean)(e[mG])),r},"de_DBEngineVersion"),igt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>ngt(r,t)),"de_DBEngineVersionList"),sgt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBEngineVersions===""?r[N0]=[]:e[N0]!=null&&e[N0][Gpe]!=null&&(r[N0]=igt((0,S.getArrayIfSingleItem)(e[N0][Gpe]),t)),r},"de_DBEngineVersionMessage"),oC=v((e,t)=>{let r={};return e[Dr]!=null&&(r[Dr]=(0,S.expectString)(e[Dr])),e[An]!=null&&(r[An]=(0,S.expectString)(e[An])),e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[w3]!=null&&(r[w3]=(0,S.expectString)(e[w3])),e[Gm]!=null&&(r[Gm]=Pgt(e[Gm],t)),e[G3]!=null&&(r[G3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[G3]))),e[so]!=null&&(r[so]=(0,S.expectString)(e[so])),e[Fi]!=null&&(r[Fi]=(0,S.strictParseInt32)(e[Fi])),e.VpcSecurityGroups===""?r[pa]=[]:e[pa]!=null&&e[pa][yR]!=null&&(r[pa]=vye((0,S.getArrayIfSingleItem)(e[pa][yR]),t)),e[no]!=null&&(r[no]=(0,S.expectString)(e[no])),e[ns]!=null&&(r[ns]=ER(e[ns],t)),e[Rn]!=null&&(r[Rn]=(0,S.expectString)(e[Rn])),e[oG]!=null&&(r[oG]=xyt(e[oG],t)),e[Vm]!=null&&(r[Vm]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[Vm]))),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[Au]!=null&&(r[Au]=(0,S.parseBoolean)(e[Au])),e[nG]!=null&&(r[nG]=(0,S.parseBoolean)(e[nG])),e.StatusInfos===""?r[X0]=[]:e[X0]!=null&&e[X0][Wpe]!=null&&(r[X0]=dgt((0,S.getArrayIfSingleItem)(e[X0][Wpe]),t)),e[ot]!=null&&(r[ot]=(0,S.expectString)(e[ot])),e[Nn]!=null&&(r[Nn]=(0,S.parseBoolean)(e[Nn])),e[tn]!=null&&(r[tn]=(0,S.expectString)(e[tn])),e[D3]!=null&&(r[D3]=(0,S.expectString)(e[D3])),e[io]!=null&&(r[io]=(0,S.expectString)(e[io])),e[Iu]!=null&&(r[Iu]=(0,S.parseBoolean)(e[Iu])),e[oo]!=null&&(r[oo]=(0,S.strictParseInt32)(e[oo])),e[C3]!=null&&(r[C3]=(0,S.expectString)(e[C3])),e.EnabledCloudwatchLogsExports===""?r[ha]=[]:e[ha]!=null&&e[ha][ts]!=null&&(r[ha]=rE((0,S.getArrayIfSingleItem)(e[ha][ts]),t)),e[d3]!=null&&(r[d3]=Omt(e[d3],t)),e[sG]!=null&&(r[sG]=(0,S.parseBoolean)(e[sG])),e[Mu]!=null&&(r[Mu]=(0,S.expectString)(e[Mu])),r},"de_DBInstance"),ogt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBInstanceAlreadyExistsFault"),agt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>oC(r,t)),"de_DBInstanceList"),ugt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBInstances===""?r[x0]=[]:e[x0]!=null&&e[x0][rs]!=null&&(r[x0]=agt((0,S.getArrayIfSingleItem)(e[x0][rs]),t)),r},"de_DBInstanceMessage"),cgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBInstanceNotFoundFault"),lgt=v((e,t)=>{let r={};return e[DG]!=null&&(r[DG]=(0,S.expectString)(e[DG])),e[eG]!=null&&(r[eG]=(0,S.parseBoolean)(e[eG])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),e[Xm]!=null&&(r[Xm]=(0,S.expectString)(e[Xm])),r},"de_DBInstanceStatusInfo"),dgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>lgt(r,t)),"de_DBInstanceStatusInfoList"),fgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBParameterGroupAlreadyExistsFault"),hgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBParameterGroupNotFoundFault"),pgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBParameterGroupQuotaExceededFault"),mgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSecurityGroupNotFoundFault"),ggt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSnapshotAlreadyExistsFault"),ygt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSnapshotNotFoundFault"),ER=v((e,t)=>{let r={};return e[dr]!=null&&(r[dr]=(0,S.expectString)(e[dr])),e[Du]!=null&&(r[Du]=(0,S.expectString)(e[Du])),e[og]!=null&&(r[og]=(0,S.expectString)(e[og])),e[CG]!=null&&(r[CG]=(0,S.expectString)(e[CG])),e.Subnets===""?r[J0]=[]:e[J0]!=null&&e[J0][Jpe]!=null&&(r[J0]=evt((0,S.getArrayIfSingleItem)(e[J0][Jpe]),t)),e[b3]!=null&&(r[b3]=(0,S.expectString)(e[b3])),r},"de_DBSubnetGroup"),vgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSubnetGroupAlreadyExistsFault"),_gt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSubnetGroupDoesNotCoverEnoughAZs"),Sgt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.DBSubnetGroups===""?r[P0]=[]:e[P0]!=null&&e[P0][ns]!=null&&(r[P0]=wgt((0,S.getArrayIfSingleItem)(e[P0][ns]),t)),r},"de_DBSubnetGroupMessage"),Egt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSubnetGroupNotFoundFault"),Cgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSubnetGroupQuotaExceededFault"),wgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>ER(r,t)),"de_DBSubnetGroups"),bgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBSubnetQuotaExceededFault"),Ogt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_DBUpgradeDependencyFailureFault"),Tgt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_DeleteDBClusterResult"),Agt=v((e,t)=>{let r={};return e[Po]!=null&&(r[Po]=SR(e[Po],t)),r},"de_DeleteDBClusterSnapshotResult"),Igt=v((e,t)=>{let r={};return e[rs]!=null&&(r[rs]=oC(e[rs],t)),r},"de_DeleteDBInstanceResult"),Dgt=v((e,t)=>{let r={};return e[Yn]!=null&&(r[Yn]=my(e[Yn],t)),r},"de_DeleteEventSubscriptionResult"),Rgt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_DeleteGlobalClusterResult"),Ngt=v((e,t)=>{let r={};return e[Um]!=null&&(r[Um]=mye(e[Um],t)),r},"de_DescribeDBClusterSnapshotAttributesResult"),xgt=v((e,t)=>{let r={};return e[x3]!=null&&(r[x3]=Bgt(e[x3],t)),r},"de_DescribeEngineDefaultClusterParametersResult"),Pgt=v((e,t)=>{let r={};return e[o3]!=null&&(r[o3]=(0,S.expectString)(e[o3])),e[Nr]!=null&&(r[Nr]=(0,S.strictParseInt32)(e[Nr])),e[Wm]!=null&&(r[Wm]=(0,S.expectString)(e[Wm])),r},"de_Endpoint"),Bgt=v((e,t)=>{let r={};return e[In]!=null&&(r[In]=(0,S.expectString)(e[In])),e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.Parameters===""?r[pi]=[]:e[pi]!=null&&e[pi][gR]!=null&&(r[pi]=gye((0,S.getArrayIfSingleItem)(e[pi][gR]),t)),r},"de_EngineDefaults"),Mgt=v((e,t)=>{let r={};return e[ao]!=null&&(r[ao]=(0,S.expectString)(e[ao])),e[rn]!=null&&(r[rn]=(0,S.expectString)(e[rn])),e[Xm]!=null&&(r[Xm]=(0,S.expectString)(e[Xm])),e.EventCategories===""?r[gn]=[]:e[gn]!=null&&e[gn][lg]!=null&&(r[gn]=HG((0,S.getArrayIfSingleItem)(e[gn][lg]),t)),e[R3]!=null&&(r[R3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[R3]))),e[hG]!=null&&(r[hG]=(0,S.expectString)(e[hG])),r},"de_Event"),HG=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_EventCategoriesList"),Fgt=v((e,t)=>{let r={};return e[rn]!=null&&(r[rn]=(0,S.expectString)(e[rn])),e.EventCategories===""?r[gn]=[]:e[gn]!=null&&e[gn][lg]!=null&&(r[gn]=HG((0,S.getArrayIfSingleItem)(e[gn][lg]),t)),r},"de_EventCategoriesMap"),qgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Fgt(r,t)),"de_EventCategoriesMapList"),Lgt=v((e,t)=>{let r={};return e.EventCategoriesMapList===""?r[M0]=[]:e[M0]!=null&&e[M0][zpe]!=null&&(r[M0]=qgt((0,S.getArrayIfSingleItem)(e[M0][zpe]),t)),r},"de_EventCategoriesMessage"),Ugt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Mgt(r,t)),"de_EventList"),jgt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.Events===""?r[L0]=[]:e[L0]!=null&&e[L0][Hpe]!=null&&(r[L0]=Ugt((0,S.getArrayIfSingleItem)(e[L0][Hpe]),t)),r},"de_EventsMessage"),my=v((e,t)=>{let r={};return e[l3]!=null&&(r[l3]=(0,S.expectString)(e[l3])),e[p3]!=null&&(r[p3]=(0,S.expectString)(e[p3])),e[Uu]!=null&&(r[Uu]=(0,S.expectString)(e[Uu])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),e[yG]!=null&&(r[yG]=(0,S.expectString)(e[yG])),e[rn]!=null&&(r[rn]=(0,S.expectString)(e[rn])),e.SourceIdsList===""?r[K0]=[]:e[K0]!=null&&e[K0][Xpe]!=null&&(r[K0]=Hyt((0,S.getArrayIfSingleItem)(e[K0][Xpe]),t)),e.EventCategoriesList===""?r[B0]=[]:e[B0]!=null&&e[B0][lg]!=null&&(r[B0]=HG((0,S.getArrayIfSingleItem)(e[B0][lg]),t)),e[Nu]!=null&&(r[Nu]=(0,S.parseBoolean)(e[Nu])),e[M3]!=null&&(r[M3]=(0,S.expectString)(e[M3])),r},"de_EventSubscription"),$gt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_EventSubscriptionQuotaExceededFault"),kgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>my(r,t)),"de_EventSubscriptionsList"),Ggt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.EventSubscriptionsList===""?r[q0]=[]:e[q0]!=null&&e[q0][Yn]!=null&&(r[q0]=kgt((0,S.getArrayIfSingleItem)(e[q0][Yn]),t)),r},"de_EventSubscriptionsMessage"),Wgt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_FailoverDBClusterResult"),zgt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_FailoverGlobalClusterResult"),$d=v((e,t)=>{let r={};return e[fr]!=null&&(r[fr]=(0,S.expectString)(e[fr])),e[$3]!=null&&(r[$3]=(0,S.expectString)(e[$3])),e[j3]!=null&&(r[j3]=(0,S.expectString)(e[j3])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[jm]!=null&&(r[jm]=(0,S.expectString)(e[jm])),e[Nn]!=null&&(r[Nn]=(0,S.parseBoolean)(e[Nn])),e[Rr]!=null&&(r[Rr]=(0,S.parseBoolean)(e[Rr])),e.GlobalClusterMembers===""?r[U0]=[]:e[U0]!=null&&e[U0][mR]!=null&&(r[U0]=Kgt((0,S.getArrayIfSingleItem)(e[U0][mR]),t)),r},"de_GlobalCluster"),Hgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_GlobalClusterAlreadyExistsFault"),Vgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>$d(r,t)),"de_GlobalClusterList"),Ygt=v((e,t)=>{let r={};return e[Lm]!=null&&(r[Lm]=(0,S.expectString)(e[Lm])),e.Readers===""?r[H0]=[]:e[H0]!=null&&e[H0][ts]!=null&&(r[H0]=Pyt((0,S.getArrayIfSingleItem)(e[H0][ts]),t)),e[Y3]!=null&&(r[Y3]=(0,S.parseBoolean)(e[Y3])),r},"de_GlobalClusterMember"),Kgt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Ygt(r,t)),"de_GlobalClusterMemberList"),Xgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_GlobalClusterNotFoundFault"),Jgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_GlobalClusterQuotaExceededFault"),Qgt=v((e,t)=>{let r={};return e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),e.GlobalClusters===""?r[j0]=[]:e[j0]!=null&&e[j0][mR]!=null&&(r[j0]=Vgt((0,S.getArrayIfSingleItem)(e[j0][mR]),t)),r},"de_GlobalClustersMessage"),Zgt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InstanceQuotaExceededFault"),eyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InsufficientDBClusterCapacityFault"),tyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InsufficientDBInstanceCapacityFault"),ryt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InsufficientStorageClusterCapacityFault"),nyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBClusterSnapshotStateFault"),iyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBClusterStateFault"),syt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBInstanceStateFault"),oyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBParameterGroupStateFault"),ayt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBSecurityGroupStateFault"),uyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBSnapshotStateFault"),cyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBSubnetGroupStateFault"),lyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidDBSubnetStateFault"),dyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidEventSubscriptionStateFault"),fyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidGlobalClusterStateFault"),hyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidRestoreFault"),pyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidSubnet"),myt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_InvalidVPCNetworkStateFault"),gyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_KMSKeyNotAccessibleFault"),rE=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_LogTypeList"),yyt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_ModifyDBClusterResult"),vyt=v((e,t)=>{let r={};return e[Um]!=null&&(r[Um]=mye(e[Um],t)),r},"de_ModifyDBClusterSnapshotAttributeResult"),_yt=v((e,t)=>{let r={};return e[rs]!=null&&(r[rs]=oC(e[rs],t)),r},"de_ModifyDBInstanceResult"),Syt=v((e,t)=>{let r={};return e[ns]!=null&&(r[ns]=ER(e[ns],t)),r},"de_ModifyDBSubnetGroupResult"),Eyt=v((e,t)=>{let r={};return e[Yn]!=null&&(r[Yn]=my(e[Yn],t)),r},"de_ModifyEventSubscriptionResult"),Cyt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_ModifyGlobalClusterResult"),wyt=v((e,t)=>{let r={};return e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[An]!=null&&(r[An]=(0,S.expectString)(e[An])),e[xu]!=null&&(r[xu]=(0,S.expectString)(e[xu])),e.AvailabilityZones===""?r[Zr]=[]:e[Zr]!=null&&e[Zr][no]!=null&&(r[Zr]=Cmt((0,S.getArrayIfSingleItem)(e[Zr][no]),t)),e[cg]!=null&&(r[cg]=(0,S.parseBoolean)(e[cg])),e[xr]!=null&&(r[xr]=(0,S.expectString)(e[xr])),r},"de_OrderableDBInstanceOption"),byt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>wyt(r,t)),"de_OrderableDBInstanceOptionsList"),Oyt=v((e,t)=>{let r={};return e.OrderableDBInstanceOptions===""?r[G0]=[]:e[G0]!=null&&e[G0][Vpe]!=null&&(r[G0]=byt((0,S.getArrayIfSingleItem)(e[G0][Vpe]),t)),e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),r},"de_OrderableDBInstanceOptionsMessage"),Tyt=v((e,t)=>{let r={};return e[Qm]!=null&&(r[Qm]=(0,S.expectString)(e[Qm])),e[tg]!=null&&(r[tg]=(0,S.expectString)(e[tg])),e[Tn]!=null&&(r[Tn]=(0,S.expectString)(e[Tn])),e[Lu]!=null&&(r[Lu]=(0,S.expectString)(e[Lu])),e[Bm]!=null&&(r[Bm]=(0,S.expectString)(e[Bm])),e[$m]!=null&&(r[$m]=(0,S.expectString)(e[$m])),e[Mm]!=null&&(r[Mm]=(0,S.expectString)(e[Mm])),e[zm]!=null&&(r[zm]=(0,S.parseBoolean)(e[zm])),e[Km]!=null&&(r[Km]=(0,S.expectString)(e[Km])),e[xm]!=null&&(r[xm]=(0,S.expectString)(e[xm])),r},"de_Parameter"),gye=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Tyt(r,t)),"de_ParametersList"),Ayt=v((e,t)=>{let r={};return e.LogTypesToEnable===""?r[k0]=[]:e[k0]!=null&&e[k0][ts]!=null&&(r[k0]=rE((0,S.getArrayIfSingleItem)(e[k0][ts]),t)),e.LogTypesToDisable===""?r[$0]=[]:e[$0]!=null&&e[$0][ts]!=null&&(r[$0]=rE((0,S.getArrayIfSingleItem)(e[$0][ts]),t)),r},"de_PendingCloudwatchLogsExports"),Iyt=v((e,t)=>{let r={};return e[Me]!=null&&(r[Me]=(0,S.expectString)(e[Me])),e[t3]!=null&&(r[t3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[t3]))),e[q3]!=null&&(r[q3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[q3]))),e[tG]!=null&&(r[tG]=(0,S.expectString)(e[tG])),e[u3]!=null&&(r[u3]=(0,S.expectNonNull)((0,S.parseRfc3339DateTimeWithOffset)(e[u3]))),e[Tn]!=null&&(r[Tn]=(0,S.expectString)(e[Tn])),r},"de_PendingMaintenanceAction"),Dyt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Iyt(r,t)),"de_PendingMaintenanceActionDetails"),Ryt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>yye(r,t)),"de_PendingMaintenanceActions"),Nyt=v((e,t)=>{let r={};return e.PendingMaintenanceActions===""?r[W0]=[]:e[W0]!=null&&e[W0][eE]!=null&&(r[W0]=Ryt((0,S.getArrayIfSingleItem)(e[W0][eE]),t)),e[fe]!=null&&(r[fe]=(0,S.expectString)(e[fe])),r},"de_PendingMaintenanceActionsMessage"),xyt=v((e,t)=>{let r={};return e[An]!=null&&(r[An]=(0,S.expectString)(e[An])),e[i3]!=null&&(r[i3]=(0,S.strictParseInt32)(e[i3])),e[Bu]!=null&&(r[Bu]=(0,S.expectString)(e[Bu])),e[Nr]!=null&&(r[Nr]=(0,S.strictParseInt32)(e[Nr])),e[Fi]!=null&&(r[Fi]=(0,S.strictParseInt32)(e[Fi])),e[Ym]!=null&&(r[Ym]=(0,S.parseBoolean)(e[Ym])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[xu]!=null&&(r[xu]=(0,S.expectString)(e[xu])),e[k3]!=null&&(r[k3]=(0,S.strictParseInt32)(e[k3])),e[Dr]!=null&&(r[Dr]=(0,S.expectString)(e[Dr])),e[xr]!=null&&(r[xr]=(0,S.expectString)(e[xr])),e[io]!=null&&(r[io]=(0,S.expectString)(e[io])),e[dr]!=null&&(r[dr]=(0,S.expectString)(e[dr])),e[iG]!=null&&(r[iG]=Ayt(e[iG],t)),r},"de_PendingModifiedValues"),Pyt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_ReadersArnList"),Byt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_ReadReplicaIdentifierList"),Myt=v((e,t)=>{let r={};return e[rs]!=null&&(r[rs]=oC(e[rs],t)),r},"de_RebootDBInstanceResult"),Fyt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_RemoveFromGlobalClusterResult"),qyt=v((e,t)=>{let r={};return e[Yn]!=null&&(r[Yn]=my(e[Yn],t)),r},"de_RemoveSourceIdentifierFromSubscriptionResult"),Lyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_ResourceNotFoundFault"),yye=v((e,t)=>{let r={};return e[Fu]!=null&&(r[Fu]=(0,S.expectString)(e[Fu])),e.PendingMaintenanceActionDetails===""?r[z0]=[]:e[z0]!=null&&e[z0][Ype]!=null&&(r[z0]=Dyt((0,S.getArrayIfSingleItem)(e[z0][Ype]),t)),r},"de_ResourcePendingMaintenanceActions"),Uyt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_RestoreDBClusterFromSnapshotResult"),jyt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_RestoreDBClusterToPointInTimeResult"),$yt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SharedSnapshotQuotaExceededFault"),kyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SnapshotQuotaExceededFault"),Gyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SNSInvalidTopicFault"),Wyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SNSNoAuthorizationFault"),zyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SNSTopicArnNotFoundFault"),Hyt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>(0,S.expectString)(r)),"de_SourceIdsList"),Vyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SourceNotFoundFault"),Yyt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_StartDBClusterResult"),Kyt=v((e,t)=>{let r={};return e[vr]!=null&&(r[vr]=ju(e[vr],t)),r},"de_StopDBClusterResult"),Xyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_StorageQuotaExceededFault"),Jyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_StorageTypeNotSupportedFault"),Qyt=v((e,t)=>{let r={};return e[OG]!=null&&(r[OG]=(0,S.expectString)(e[OG])),e[pG]!=null&&(r[pG]=fye(e[pG],t)),e[AG]!=null&&(r[AG]=(0,S.expectString)(e[AG])),r},"de_Subnet"),Zyt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SubnetAlreadyInUse"),evt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>Qyt(r,t)),"de_SubnetList"),tvt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SubscriptionAlreadyExistFault"),rvt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SubscriptionCategoryNotFoundFault"),nvt=v((e,t)=>{let r={};return e[j]!=null&&(r[j]=(0,S.expectString)(e[j])),r},"de_SubscriptionNotFoundFault"),ivt=v((e,t)=>{let r={};return e[Dn]!=null&&(r[Dn]=$d(e[Dn],t)),r},"de_SwitchoverGlobalClusterResult"),svt=v((e,t)=>{let r={};return e[Hm]!=null&&(r[Hm]=(0,S.expectString)(e[Hm])),e[ug]!=null&&(r[ug]=(0,S.expectString)(e[ug])),r},"de_Tag"),ovt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>svt(r,t)),"de_TagList"),avt=v((e,t)=>{let r={};return e.TagList===""?r[Q0]=[]:e[Q0]!=null&&e[Q0][Qpe]!=null&&(r[Q0]=ovt((0,S.getArrayIfSingleItem)(e[Q0][Qpe]),t)),r},"de_TagListMessage"),uvt=v((e,t)=>{let r={};return e[Tt]!=null&&(r[Tt]=(0,S.expectString)(e[Tt])),e[ft]!=null&&(r[ft]=(0,S.expectString)(e[ft])),e[Tn]!=null&&(r[Tn]=(0,S.expectString)(e[Tn])),e[s3]!=null&&(r[s3]=(0,S.parseBoolean)(e[s3])),e[z3]!=null&&(r[z3]=(0,S.parseBoolean)(e[z3])),r},"de_UpgradeTarget"),cvt=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>uvt(r,t)),"de_ValidUpgradeTargetList"),lvt=v((e,t)=>{let r={};return e[UG]!=null&&(r[UG]=(0,S.expectString)(e[UG])),e[nn]!=null&&(r[nn]=(0,S.expectString)(e[nn])),r},"de_VpcSecurityGroupMembership"),vye=v((e,t)=>(e||[]).filter(r=>r!=null).map(r=>lvt(r,t)),"de_VpcSecurityGroupMembershipList"),ne=v(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),dvt=(0,S.withBaseException)(Be),We=v(async(e,t,r,n,i)=>{let{hostname:o,protocol:a="https",port:u,path:l}=await e.endpoint(),f={protocol:a,hostname:o,port:u,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+r:l+r,headers:t};return n!==void 0&&(f.hostname=n),i!==void 0&&(f.body=i),new GG.HttpRequest(f)},"buildHttpRpcRequest"),ze={"content-type":"application/x-www-form-urlencoded"},He="2014-10-31",Me="Action",e3="ApplyAction",t3="AutoAppliedAfterDate",r3="AllowDataLoss",Nm="ApplyImmediately",xm="ApplyMethod",Au="AutoMinorVersionUpgrade",n3="AllowMajorVersionUpgrade",Pm="AttributeName",fvt="ApplyPendingMaintenanceAction",w0="AssociatedRoles",i3="AllocatedStorage",hvt="AddSourceIdentifierToSubscription",Bm="ApplyType",pvt="AddTagsToResource",s3="AutoUpgrade",Mm="AllowedValues",b0="AttributeValues",qpe="AttributeValue",Zr="AvailabilityZones",no="AvailabilityZone",o3="Address",Fi="BackupRetentionPeriod",O0="Certificates",a3="CertificateArn",io="CACertificateIdentifier",u3="CurrentApplyDate",c3="CAIdentifier",l3="CustomerAwsId",Fm="ClusterCreateTime",d3="CertificateDetails",mvt="CreateDBCluster",gvt="CopyDBClusterParameterGroup",yvt="CreateDBClusterParameterGroup",vvt="CopyDBClusterSnapshot",_vt="CreateDBClusterSnapshot",Svt="CreateDBInstance",Evt="CreateDBSubnetGroup",Cvt="CreateEventSubscription",wvt="CreateGlobalCluster",f3="CloneGroupId",qm="CertificateIdentifier",Lpe="CloudwatchLogsExportConfiguration",h3="CertificateRotationRestart",p3="CustSubscriptionId",m3="CopyTags",Iu="CopyTagsToSnapshot",g3="CertificateType",Upe="Certificate",Tn="Description",vr="DBCluster",Lm="DBClusterArn",ot="DBClusterIdentifier",T0="DBClusterMembers",jpe="DBClusterMember",xo="DBClusterParameterGroup",y3="DBClusterParameterGroupArn",Wt="DBClusterParameterGroupName",v3="DBClusterParameterGroupStatus",A0="DBClusterParameterGroups",$pe="DBClusterRole",Po="DBClusterSnapshot",_3="DBClusterSnapshotArn",Um="DBClusterSnapshotAttributesResult",I0="DBClusterSnapshotAttributes",kpe="DBClusterSnapshotAttribute",en="DBClusterSnapshotIdentifier",D0="DBClusterSnapshots",R0="DBClusters",S3="DBEngineDescription",N0="DBEngineVersions",E3="DBEngineVersionDescription",Gpe="DBEngineVersion",rs="DBInstance",C3="DBInstanceArn",An="DBInstanceClass",Dr="DBInstanceIdentifier",w3="DBInstanceStatus",Wpe="DBInstanceStatusInfo",x0="DBInstances",In="DBParameterGroupFamily",ns="DBSubnetGroup",b3="DBSubnetGroupArn",Du="DBSubnetGroupDescription",dr="DBSubnetGroupName",P0="DBSubnetGroups",bvt="DescribeCertificates",O3="DbClusterIdentifier",T3="DbClusterResourceId",Ovt="DeleteDBCluster",Tvt="DescribeDBClusterParameters",Avt="DeleteDBClusterParameterGroup",Ivt="DescribeDBClusterParameterGroups",Dvt="DeleteDBClusterSnapshot",Rvt="DescribeDBClusterSnapshotAttributes",Nvt="DescribeDBClusterSnapshots",xvt="DescribeDBClusters",Pvt="DescribeDBEngineVersions",Bvt="DeleteDBInstance",Mvt="DescribeDBInstances",Fvt="DeleteDBSubnetGroup",qvt="DescribeDBSubnetGroups",Lvt="DescribeEvents",Uvt="DescribeEventCategories",jvt="DescribeEngineDefaultClusterParameters",$vt="DeleteEventSubscription",kvt="DescribeEventSubscriptions",Gvt="DeleteGlobalCluster",Wvt="DescribeGlobalClusters",A3="DisableLogTypes",jm="DatabaseName",I3="DefaultOnly",zvt="DescribeOrderableDBInstanceOptions",Rr="DeletionProtection",Hvt="DescribePendingMaintenanceActions",D3="DbiResourceId",$m="DataType",R3="Date",N3="Duration",Tt="Engine",gn="EventCategories",B0="EventCategoriesList",Ru="EnableCloudwatchLogsExports",ha="EnabledCloudwatchLogsExports",zpe="EventCategoriesMap",M0="EventCategoriesMapList",lg="EventCategory",x3="EngineDefaults",P3="EnableLogTypes",F0="ExportableLogTypes",km="EnablePerformanceInsights",B3="EarliestRestorableTime",Yn="EventSubscription",M3="EventSubscriptionArn",q0="EventSubscriptionsList",F3="EndTime",ft="EngineVersion",Nu="Enabled",Gm="Endpoint",L0="Events",Hpe="Event",tt="Filters",q3="ForcedApplyDate",Vvt="FailoverDBCluster",L3="FinalDBSnapshotIdentifier",U3="ForceFailover",Yvt="FailoverGlobalCluster",Dn="GlobalCluster",j3="GlobalClusterArn",fr="GlobalClusterIdentifier",U0="GlobalClusterMembers",mR="GlobalClusterMember",$3="GlobalClusterResourceId",j0="GlobalClusters",Wm="HostedZoneId",k3="Iops",G3="InstanceCreateTime",W3="IsClusterWriter",zm="IsModifiable",z3="IsMajorVersionUpgrade",H3="IncludePublic",V3="IncludeShared",Y3="IsWriter",Hm="Key",tn="KmsKeyId",xu="LicenseModel",Vm="LatestRestorableTime",K3="ListSupportedCharacterSets",X3="ListSupportedTimezones",Kvt="ListTagsForResource",$0="LogTypesToDisable",k0="LogTypesToEnable",fe="Marker",Ym="MultiAZ",Xvt="ModifyDBCluster",Jvt="ModifyDBClusterParameterGroup",Qvt="ModifyDBClusterSnapshotAttribute",Zvt="ModifyDBInstance",e_t="ModifyDBSubnetGroup",t_t="ModifyEventSubscription",Km="MinimumEngineVersion",r_t="ModifyGlobalCluster",ht="MaxRecords",Pu="MasterUsername",Bu="MasterUserPassword",Xm="Message",Jm="Name",J3="NewDBClusterIdentifier",Q3="NewDBInstanceIdentifier",Z3="NewGlobalClusterIdentifier",eG="Normal",G0="OrderableDBInstanceOptions",Vpe="OrderableDBInstanceOption",tG="OptInStatus",rG="OptInType",Nr="Port",nG="PubliclyAccessible",so="PreferredBackupWindow",iG="PendingCloudwatchLogsExports",sG="PerformanceInsightsEnabled",Mu="PerformanceInsightsKMSKeyId",W0="PendingMaintenanceActions",z0="PendingMaintenanceActionDetails",Ype="PendingMaintenanceAction",oG="PendingModifiedValues",Rn="PreferredMaintenanceWindow",Qm="ParameterName",Zm="PercentProgress",eg="PreSignedUrl",oo="PromotionTier",tg="ParameterValue",pi="Parameters",gR="Parameter",H0="Readers",aG="RoleArn",uG="ResetAllParameters",n_t="RestoreDBClusterFromSnapshot",i_t="ResetDBClusterParameterGroup",s_t="RestoreDBClusterToPointInTime",o_t="RebootDBInstance",cG="ReaderEndpoint",a_t="RemoveFromGlobalCluster",Fu="ResourceIdentifier",qu="ResourceName",eE="ResourcePendingMaintenanceActions",V0="ReadReplicaIdentifiers",Kpe="ReadReplicaIdentifier",lG="ReplicationSourceIdentifier",u_t="RemoveSourceIdentifierFromSubscription",dG="RestoreType",c_t="RemoveTagsFromResource",fG="RestoreToTime",Lu="Source",hG="SourceArn",pG="SubnetAvailabilityZone",Y0="SupportedCACertificateIdentifiers",mG="SupportsCertificateRotationWithoutRestart",gG="SnapshotCreateTime",yG="SubscriptionCreationTime",l_t="StartDBCluster",rg="SourceDBClusterIdentifier",vG="SourceDBClusterParameterGroupIdentifier",_G="SourceDBClusterSnapshotArn",SG="SourceDBClusterSnapshotIdentifier",d_t="StopDBCluster",Nn="StorageEncrypted",EG="SkipFinalSnapshot",f_t="SwitchoverGlobalCluster",CG="SubnetGroupStatus",ao="SourceIdentifier",K0="SourceIdsList",wG="SnapshotIdentifier",bG="SourceIds",Xpe="SourceId",X0="StatusInfos",ng="SubnetIds",OG="SubnetIdentifier",TG="SupportsLogExportsToCloudwatchLogs",xn="SubscriptionName",AG="SubnetStatus",xr="StorageType",Uu="SnsTopicArn",ig="SnapshotType",rn="SourceType",IG="StartTime",DG="StatusType",nn="Status",J0="Subnets",Jpe="Subnet",RG="Switchover",zt="Tags",NG="TargetDBClusterParameterGroupDescription",xG="TargetDBClusterParameterGroupIdentifier",PG="TargetDBClusterSnapshotIdentifier",BG="TargetDBInstanceIdentifier",sg="TargetDbClusterIdentifier",MG="TagKeys",Q0="TagList",Qpe="Tag",FG="Thumbprint",qG="UseLatestRestorableTime",Zpe="UpgradeTarget",Ve="Version",LG="ValidFrom",og="VpcId",pa="VpcSecurityGroups",uo="VpcSecurityGroupIds",UG="VpcSecurityGroupId",yR="VpcSecurityGroupMembership",ag="ValidTill",jG="ValuesToAdd",$G="ValuesToRemove",Z0="ValidUpgradeTarget",kG="Values",ug="Value",cg="Vpc",j="message",ts="member",Ye=v(e=>Object.entries(e).map(([t,r])=>(0,S.extendedEncodeURIComponent)(t)+"="+(0,S.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),h_t=v((e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"},"loadQueryErrorCode"),iE,_ye=(iE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","AddSourceIdentifierToSubscription",{}).n("DocDBClient","AddSourceIdentifierToSubscriptionCommand").f(void 0,void 0).ser(sdt).de(oft).build(){},s(iE,"_AddSourceIdentifierToSubscriptionCommand"),iE);v(_ye,"AddSourceIdentifierToSubscriptionCommand");var Sye=_ye,sE,Eye=(sE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","AddTagsToResource",{}).n("DocDBClient","AddTagsToResourceCommand").f(void 0,void 0).ser(odt).de(aft).build(){},s(sE,"_AddTagsToResourceCommand"),sE);v(Eye,"AddTagsToResourceCommand");var Cye=Eye,oE,wye=(oE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ApplyPendingMaintenanceAction",{}).n("DocDBClient","ApplyPendingMaintenanceActionCommand").f(void 0,void 0).ser(adt).de(uft).build(){},s(oE,"_ApplyPendingMaintenanceActionCommand"),oE);v(wye,"ApplyPendingMaintenanceActionCommand");var bye=wye,aE,Oye=(aE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CopyDBClusterParameterGroup",{}).n("DocDBClient","CopyDBClusterParameterGroupCommand").f(void 0,void 0).ser(udt).de(cft).build(){},s(aE,"_CopyDBClusterParameterGroupCommand"),aE);v(Oye,"CopyDBClusterParameterGroupCommand");var Tye=Oye,p_t=bpe(),uE,Aye=(uE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions()),(0,p_t.getCrossRegionPresignedUrlPlugin)(n)]}).s("AmazonRDSv19","CopyDBClusterSnapshot",{}).n("DocDBClient","CopyDBClusterSnapshotCommand").f(void 0,void 0).ser(cdt).de(lft).build(){},s(uE,"_CopyDBClusterSnapshotCommand"),uE);v(Aye,"CopyDBClusterSnapshotCommand");var Iye=Aye,cE,Dye=(cE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateDBCluster",{}).n("DocDBClient","CreateDBClusterCommand").f(void 0,void 0).ser(ldt).de(dft).build(){},s(cE,"_CreateDBClusterCommand"),cE);v(Dye,"CreateDBClusterCommand");var Rye=Dye,lE,Nye=(lE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateDBClusterParameterGroup",{}).n("DocDBClient","CreateDBClusterParameterGroupCommand").f(void 0,void 0).ser(ddt).de(fft).build(){},s(lE,"_CreateDBClusterParameterGroupCommand"),lE);v(Nye,"CreateDBClusterParameterGroupCommand");var xye=Nye,dE,Pye=(dE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateDBClusterSnapshot",{}).n("DocDBClient","CreateDBClusterSnapshotCommand").f(void 0,void 0).ser(fdt).de(hft).build(){},s(dE,"_CreateDBClusterSnapshotCommand"),dE);v(Pye,"CreateDBClusterSnapshotCommand");var Bye=Pye,fE,Mye=(fE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateDBInstance",{}).n("DocDBClient","CreateDBInstanceCommand").f(void 0,void 0).ser(hdt).de(pft).build(){},s(fE,"_CreateDBInstanceCommand"),fE);v(Mye,"CreateDBInstanceCommand");var Fye=Mye,hE,qye=(hE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateDBSubnetGroup",{}).n("DocDBClient","CreateDBSubnetGroupCommand").f(void 0,void 0).ser(pdt).de(mft).build(){},s(hE,"_CreateDBSubnetGroupCommand"),hE);v(qye,"CreateDBSubnetGroupCommand");var Lye=qye,pE,Uye=(pE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateEventSubscription",{}).n("DocDBClient","CreateEventSubscriptionCommand").f(void 0,void 0).ser(mdt).de(gft).build(){},s(pE,"_CreateEventSubscriptionCommand"),pE);v(Uye,"CreateEventSubscriptionCommand");var jye=Uye,mE,$ye=(mE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","CreateGlobalCluster",{}).n("DocDBClient","CreateGlobalClusterCommand").f(void 0,void 0).ser(gdt).de(yft).build(){},s(mE,"_CreateGlobalClusterCommand"),mE);v($ye,"CreateGlobalClusterCommand");var kye=$ye,gE,Gye=(gE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteDBCluster",{}).n("DocDBClient","DeleteDBClusterCommand").f(void 0,void 0).ser(ydt).de(vft).build(){},s(gE,"_DeleteDBClusterCommand"),gE);v(Gye,"DeleteDBClusterCommand");var Wye=Gye,yE,zye=(yE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteDBClusterParameterGroup",{}).n("DocDBClient","DeleteDBClusterParameterGroupCommand").f(void 0,void 0).ser(vdt).de(_ft).build(){},s(yE,"_DeleteDBClusterParameterGroupCommand"),yE);v(zye,"DeleteDBClusterParameterGroupCommand");var Hye=zye,vE,Vye=(vE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteDBClusterSnapshot",{}).n("DocDBClient","DeleteDBClusterSnapshotCommand").f(void 0,void 0).ser(_dt).de(Sft).build(){},s(vE,"_DeleteDBClusterSnapshotCommand"),vE);v(Vye,"DeleteDBClusterSnapshotCommand");var Yye=Vye,_E,Kye=(_E=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteDBInstance",{}).n("DocDBClient","DeleteDBInstanceCommand").f(void 0,void 0).ser(Sdt).de(Eft).build(){},s(_E,"_DeleteDBInstanceCommand"),_E);v(Kye,"DeleteDBInstanceCommand");var Xye=Kye,SE,Jye=(SE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteDBSubnetGroup",{}).n("DocDBClient","DeleteDBSubnetGroupCommand").f(void 0,void 0).ser(Edt).de(Cft).build(){},s(SE,"_DeleteDBSubnetGroupCommand"),SE);v(Jye,"DeleteDBSubnetGroupCommand");var Qye=Jye,EE,Zye=(EE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteEventSubscription",{}).n("DocDBClient","DeleteEventSubscriptionCommand").f(void 0,void 0).ser(Cdt).de(wft).build(){},s(EE,"_DeleteEventSubscriptionCommand"),EE);v(Zye,"DeleteEventSubscriptionCommand");var eve=Zye,CE,tve=(CE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DeleteGlobalCluster",{}).n("DocDBClient","DeleteGlobalClusterCommand").f(void 0,void 0).ser(wdt).de(bft).build(){},s(CE,"_DeleteGlobalClusterCommand"),CE);v(tve,"DeleteGlobalClusterCommand");var rve=tve,wE,nve=(wE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeCertificates",{}).n("DocDBClient","DescribeCertificatesCommand").f(void 0,void 0).ser(bdt).de(Oft).build(){},s(wE,"_DescribeCertificatesCommand"),wE);v(nve,"DescribeCertificatesCommand");var VG=nve,bE,ive=(bE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBClusterParameterGroups",{}).n("DocDBClient","DescribeDBClusterParameterGroupsCommand").f(void 0,void 0).ser(Odt).de(Tft).build(){},s(bE,"_DescribeDBClusterParameterGroupsCommand"),bE);v(ive,"DescribeDBClusterParameterGroupsCommand");var YG=ive,OE,sve=(OE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBClusterParameters",{}).n("DocDBClient","DescribeDBClusterParametersCommand").f(void 0,void 0).ser(Tdt).de(Aft).build(){},s(OE,"_DescribeDBClusterParametersCommand"),OE);v(sve,"DescribeDBClusterParametersCommand");var KG=sve,TE,ove=(TE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBClusters",{}).n("DocDBClient","DescribeDBClustersCommand").f(void 0,void 0).ser(Adt).de(Ift).build(){},s(TE,"_DescribeDBClustersCommand"),TE);v(ove,"DescribeDBClustersCommand");var XG=ove,AE,ave=(AE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBClusterSnapshotAttributes",{}).n("DocDBClient","DescribeDBClusterSnapshotAttributesCommand").f(void 0,void 0).ser(Idt).de(Dft).build(){},s(AE,"_DescribeDBClusterSnapshotAttributesCommand"),AE);v(ave,"DescribeDBClusterSnapshotAttributesCommand");var uve=ave,IE,cve=(IE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBClusterSnapshots",{}).n("DocDBClient","DescribeDBClusterSnapshotsCommand").f(void 0,void 0).ser(Ddt).de(Rft).build(){},s(IE,"_DescribeDBClusterSnapshotsCommand"),IE);v(cve,"DescribeDBClusterSnapshotsCommand");var JG=cve,DE,lve=(DE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBEngineVersions",{}).n("DocDBClient","DescribeDBEngineVersionsCommand").f(void 0,void 0).ser(Rdt).de(Nft).build(){},s(DE,"_DescribeDBEngineVersionsCommand"),DE);v(lve,"DescribeDBEngineVersionsCommand");var QG=lve,RE,dve=(RE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBInstances",{}).n("DocDBClient","DescribeDBInstancesCommand").f(void 0,void 0).ser(Ndt).de(xft).build(){},s(RE,"_DescribeDBInstancesCommand"),RE);v(dve,"DescribeDBInstancesCommand");var aC=dve,NE,fve=(NE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeDBSubnetGroups",{}).n("DocDBClient","DescribeDBSubnetGroupsCommand").f(void 0,void 0).ser(xdt).de(Pft).build(){},s(NE,"_DescribeDBSubnetGroupsCommand"),NE);v(fve,"DescribeDBSubnetGroupsCommand");var ZG=fve,xE,hve=(xE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeEngineDefaultClusterParameters",{}).n("DocDBClient","DescribeEngineDefaultClusterParametersCommand").f(void 0,void 0).ser(Pdt).de(Bft).build(){},s(xE,"_DescribeEngineDefaultClusterParametersCommand"),xE);v(hve,"DescribeEngineDefaultClusterParametersCommand");var pve=hve,PE,mve=(PE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeEventCategories",{}).n("DocDBClient","DescribeEventCategoriesCommand").f(void 0,void 0).ser(Bdt).de(Mft).build(){},s(PE,"_DescribeEventCategoriesCommand"),PE);v(mve,"DescribeEventCategoriesCommand");var gve=mve,BE,yve=(BE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeEvents",{}).n("DocDBClient","DescribeEventsCommand").f(void 0,void 0).ser(Mdt).de(Fft).build(){},s(BE,"_DescribeEventsCommand"),BE);v(yve,"DescribeEventsCommand");var eW=yve,ME,vve=(ME=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeEventSubscriptions",{}).n("DocDBClient","DescribeEventSubscriptionsCommand").f(void 0,void 0).ser(Fdt).de(qft).build(){},s(ME,"_DescribeEventSubscriptionsCommand"),ME);v(vve,"DescribeEventSubscriptionsCommand");var tW=vve,FE,_ve=(FE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeGlobalClusters",{}).n("DocDBClient","DescribeGlobalClustersCommand").f(void 0,void 0).ser(qdt).de(Lft).build(){},s(FE,"_DescribeGlobalClustersCommand"),FE);v(_ve,"DescribeGlobalClustersCommand");var rW=_ve,qE,Sve=(qE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribeOrderableDBInstanceOptions",{}).n("DocDBClient","DescribeOrderableDBInstanceOptionsCommand").f(void 0,void 0).ser(Ldt).de(Uft).build(){},s(qE,"_DescribeOrderableDBInstanceOptionsCommand"),qE);v(Sve,"DescribeOrderableDBInstanceOptionsCommand");var nW=Sve,LE,Eve=(LE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","DescribePendingMaintenanceActions",{}).n("DocDBClient","DescribePendingMaintenanceActionsCommand").f(void 0,void 0).ser(Udt).de(jft).build(){},s(LE,"_DescribePendingMaintenanceActionsCommand"),LE);v(Eve,"DescribePendingMaintenanceActionsCommand");var iW=Eve,UE,Cve=(UE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","FailoverDBCluster",{}).n("DocDBClient","FailoverDBClusterCommand").f(void 0,void 0).ser(jdt).de($ft).build(){},s(UE,"_FailoverDBClusterCommand"),UE);v(Cve,"FailoverDBClusterCommand");var wve=Cve,jE,bve=(jE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","FailoverGlobalCluster",{}).n("DocDBClient","FailoverGlobalClusterCommand").f(void 0,void 0).ser($dt).de(kft).build(){},s(jE,"_FailoverGlobalClusterCommand"),jE);v(bve,"FailoverGlobalClusterCommand");var Ove=bve,$E,Tve=($E=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ListTagsForResource",{}).n("DocDBClient","ListTagsForResourceCommand").f(void 0,void 0).ser(kdt).de(Gft).build(){},s($E,"_ListTagsForResourceCommand"),$E);v(Tve,"ListTagsForResourceCommand");var Ave=Tve,kE,Ive=(kE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyDBCluster",{}).n("DocDBClient","ModifyDBClusterCommand").f(void 0,void 0).ser(Gdt).de(Wft).build(){},s(kE,"_ModifyDBClusterCommand"),kE);v(Ive,"ModifyDBClusterCommand");var Dve=Ive,GE,Rve=(GE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyDBClusterParameterGroup",{}).n("DocDBClient","ModifyDBClusterParameterGroupCommand").f(void 0,void 0).ser(Wdt).de(zft).build(){},s(GE,"_ModifyDBClusterParameterGroupCommand"),GE);v(Rve,"ModifyDBClusterParameterGroupCommand");var Nve=Rve,WE,xve=(WE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyDBClusterSnapshotAttribute",{}).n("DocDBClient","ModifyDBClusterSnapshotAttributeCommand").f(void 0,void 0).ser(zdt).de(Hft).build(){},s(WE,"_ModifyDBClusterSnapshotAttributeCommand"),WE);v(xve,"ModifyDBClusterSnapshotAttributeCommand");var Pve=xve,zE,Bve=(zE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyDBInstance",{}).n("DocDBClient","ModifyDBInstanceCommand").f(void 0,void 0).ser(Hdt).de(Vft).build(){},s(zE,"_ModifyDBInstanceCommand"),zE);v(Bve,"ModifyDBInstanceCommand");var Mve=Bve,HE,Fve=(HE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyDBSubnetGroup",{}).n("DocDBClient","ModifyDBSubnetGroupCommand").f(void 0,void 0).ser(Vdt).de(Yft).build(){},s(HE,"_ModifyDBSubnetGroupCommand"),HE);v(Fve,"ModifyDBSubnetGroupCommand");var qve=Fve,VE,Lve=(VE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyEventSubscription",{}).n("DocDBClient","ModifyEventSubscriptionCommand").f(void 0,void 0).ser(Ydt).de(Kft).build(){},s(VE,"_ModifyEventSubscriptionCommand"),VE);v(Lve,"ModifyEventSubscriptionCommand");var Uve=Lve,YE,jve=(YE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ModifyGlobalCluster",{}).n("DocDBClient","ModifyGlobalClusterCommand").f(void 0,void 0).ser(Kdt).de(Xft).build(){},s(YE,"_ModifyGlobalClusterCommand"),YE);v(jve,"ModifyGlobalClusterCommand");var $ve=jve,KE,kve=(KE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RebootDBInstance",{}).n("DocDBClient","RebootDBInstanceCommand").f(void 0,void 0).ser(Xdt).de(Jft).build(){},s(KE,"_RebootDBInstanceCommand"),KE);v(kve,"RebootDBInstanceCommand");var Gve=kve,XE,Wve=(XE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RemoveFromGlobalCluster",{}).n("DocDBClient","RemoveFromGlobalClusterCommand").f(void 0,void 0).ser(Jdt).de(Qft).build(){},s(XE,"_RemoveFromGlobalClusterCommand"),XE);v(Wve,"RemoveFromGlobalClusterCommand");var zve=Wve,JE,Hve=(JE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RemoveSourceIdentifierFromSubscription",{}).n("DocDBClient","RemoveSourceIdentifierFromSubscriptionCommand").f(void 0,void 0).ser(Qdt).de(Zft).build(){},s(JE,"_RemoveSourceIdentifierFromSubscriptionCommand"),JE);v(Hve,"RemoveSourceIdentifierFromSubscriptionCommand");var Vve=Hve,QE,Yve=(QE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RemoveTagsFromResource",{}).n("DocDBClient","RemoveTagsFromResourceCommand").f(void 0,void 0).ser(Zdt).de(eht).build(){},s(QE,"_RemoveTagsFromResourceCommand"),QE);v(Yve,"RemoveTagsFromResourceCommand");var Kve=Yve,ZE,Xve=(ZE=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","ResetDBClusterParameterGroup",{}).n("DocDBClient","ResetDBClusterParameterGroupCommand").f(void 0,void 0).ser(eft).de(tht).build(){},s(ZE,"_ResetDBClusterParameterGroupCommand"),ZE);v(Xve,"ResetDBClusterParameterGroupCommand");var Jve=Xve,eC,Qve=(eC=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RestoreDBClusterFromSnapshot",{}).n("DocDBClient","RestoreDBClusterFromSnapshotCommand").f(void 0,void 0).ser(tft).de(rht).build(){},s(eC,"_RestoreDBClusterFromSnapshotCommand"),eC);v(Qve,"RestoreDBClusterFromSnapshotCommand");var Zve=Qve,tC,e_e=(tC=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","RestoreDBClusterToPointInTime",{}).n("DocDBClient","RestoreDBClusterToPointInTimeCommand").f(void 0,void 0).ser(rft).de(nht).build(){},s(tC,"_RestoreDBClusterToPointInTimeCommand"),tC);v(e_e,"RestoreDBClusterToPointInTimeCommand");var t_e=e_e,rC,r_e=(rC=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","StartDBCluster",{}).n("DocDBClient","StartDBClusterCommand").f(void 0,void 0).ser(nft).de(iht).build(){},s(rC,"_StartDBClusterCommand"),rC);v(r_e,"StartDBClusterCommand");var n_e=r_e,nC,i_e=(nC=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","StopDBCluster",{}).n("DocDBClient","StopDBClusterCommand").f(void 0,void 0).ser(ift).de(sht).build(){},s(nC,"_StopDBClusterCommand"),nC);v(i_e,"StopDBClusterCommand");var s_e=i_e,iC,o_e=(iC=class extends S.Command.classBuilder().ep($e).m(function(t,r,n,i){return[(0,ke.getSerdePlugin)(n,this.serialize,this.deserialize),(0,je.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AmazonRDSv19","SwitchoverGlobalCluster",{}).n("DocDBClient","SwitchoverGlobalClusterCommand").f(void 0,void 0).ser(sft).de(oht).build(){},s(iC,"_SwitchoverGlobalClusterCommand"),iC);v(o_e,"SwitchoverGlobalClusterCommand");var a_e=o_e,m_t={AddSourceIdentifierToSubscriptionCommand:Sye,AddTagsToResourceCommand:Cye,ApplyPendingMaintenanceActionCommand:bye,CopyDBClusterParameterGroupCommand:Tye,CopyDBClusterSnapshotCommand:Iye,CreateDBClusterCommand:Rye,CreateDBClusterParameterGroupCommand:xye,CreateDBClusterSnapshotCommand:Bye,CreateDBInstanceCommand:Fye,CreateDBSubnetGroupCommand:Lye,CreateEventSubscriptionCommand:jye,CreateGlobalClusterCommand:kye,DeleteDBClusterCommand:Wye,DeleteDBClusterParameterGroupCommand:Hye,DeleteDBClusterSnapshotCommand:Yye,DeleteDBInstanceCommand:Xye,DeleteDBSubnetGroupCommand:Qye,DeleteEventSubscriptionCommand:eve,DeleteGlobalClusterCommand:rve,DescribeCertificatesCommand:VG,DescribeDBClusterParameterGroupsCommand:YG,DescribeDBClusterParametersCommand:KG,DescribeDBClustersCommand:XG,DescribeDBClusterSnapshotAttributesCommand:uve,DescribeDBClusterSnapshotsCommand:JG,DescribeDBEngineVersionsCommand:QG,DescribeDBInstancesCommand:aC,DescribeDBSubnetGroupsCommand:ZG,DescribeEngineDefaultClusterParametersCommand:pve,DescribeEventCategoriesCommand:gve,DescribeEventsCommand:eW,DescribeEventSubscriptionsCommand:tW,DescribeGlobalClustersCommand:rW,DescribeOrderableDBInstanceOptionsCommand:nW,DescribePendingMaintenanceActionsCommand:iW,FailoverDBClusterCommand:wve,FailoverGlobalClusterCommand:Ove,ListTagsForResourceCommand:Ave,ModifyDBClusterCommand:Dve,ModifyDBClusterParameterGroupCommand:Nve,ModifyDBClusterSnapshotAttributeCommand:Pve,ModifyDBInstanceCommand:Mve,ModifyDBSubnetGroupCommand:qve,ModifyEventSubscriptionCommand:Uve,ModifyGlobalClusterCommand:$ve,RebootDBInstanceCommand:Gve,RemoveFromGlobalClusterCommand:zve,RemoveSourceIdentifierFromSubscriptionCommand:Vve,RemoveTagsFromResourceCommand:Kve,ResetDBClusterParameterGroupCommand:Jve,RestoreDBClusterFromSnapshotCommand:Zve,RestoreDBClusterToPointInTimeCommand:t_e,StartDBClusterCommand:n_e,StopDBClusterCommand:s_e,SwitchoverGlobalClusterCommand:a_e},sC,u_e=(sC=class extends qi{},s(sC,"_DocDB"),sC);v(u_e,"DocDB");var c_e=u_e;(0,S.createAggregatedClient)(m_t,c_e);var g_t=(0,mi.createPaginator)(qi,VG,"Marker","Marker","MaxRecords"),y_t=(0,mi.createPaginator)(qi,YG,"Marker","Marker","MaxRecords"),v_t=(0,mi.createPaginator)(qi,KG,"Marker","Marker","MaxRecords"),__t=(0,mi.createPaginator)(qi,JG,"Marker","Marker","MaxRecords"),S_t=(0,mi.createPaginator)(qi,XG,"Marker","Marker","MaxRecords"),E_t=(0,mi.createPaginator)(qi,QG,"Marker","Marker","MaxRecords"),C_t=(0,mi.createPaginator)(qi,aC,"Marker","Marker","MaxRecords"),w_t=(0,mi.createPaginator)(qi,ZG,"Marker","Marker","MaxRecords"),b_t=(0,mi.createPaginator)(qi,tW,"Marker","Marker","MaxRecords"),O_t=(0,mi.createPaginator)(qi,eW,"Marker","Marker","MaxRecords"),T_t=(0,mi.createPaginator)(qi,rW,"Marker","Marker","MaxRecords"),A_t=(0,mi.createPaginator)(qi,nW,"Marker","Marker","MaxRecords"),I_t=(0,mi.createPaginator)(qi,iW,"Marker","Marker","MaxRecords"),dn=Rpe(),l_e=v(async(e,t)=>{let r;try{let n=await e.send(new aC(t));r=n;try{let i=v(()=>[].concat(...n.DBInstances).map(l=>l.DBInstanceStatus),"returnComparator"),o=i().length>0;for(let a of i())o=o&&a=="available";if(o)return{state:dn.WaiterState.SUCCESS,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="deleted")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="deleting")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="failed")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="incompatible-restore")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="incompatible-parameters")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}}catch(n){r=n}return{state:dn.WaiterState.RETRY,reason:r}},"checkState"),D_t=v(async(e,t)=>{let r={minDelay:30,maxDelay:120};return(0,dn.createWaiter)({...r,...e},t,l_e)},"waitForDBInstanceAvailable"),R_t=v(async(e,t)=>{let r={minDelay:30,maxDelay:120},n=await(0,dn.createWaiter)({...r,...e},t,l_e);return(0,dn.checkExceptions)(n)},"waitUntilDBInstanceAvailable"),d_e=v(async(e,t)=>{let r;try{let n=await e.send(new aC(t));r=n;try{let i=v(()=>[].concat(...n.DBInstances).map(l=>l.DBInstanceStatus),"returnComparator"),o=i().length>0;for(let a of i())o=o&&a=="deleted";if(o)return{state:dn.WaiterState.SUCCESS,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="creating")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="modifying")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="rebooting")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}try{let i=v(()=>[].concat(...n.DBInstances).map(u=>u.DBInstanceStatus),"returnComparator");for(let o of i())if(o=="resetting-master-credentials")return{state:dn.WaiterState.FAILURE,reason:r}}catch{}}catch(n){if(r=n,n.name&&n.name=="DBInstanceNotFoundFault")return{state:dn.WaiterState.SUCCESS,reason:r}}return{state:dn.WaiterState.RETRY,reason:r}},"checkState"),N_t=v(async(e,t)=>{let r={minDelay:30,maxDelay:120};return(0,dn.createWaiter)({...r,...e},t,d_e)},"waitForDBInstanceDeleted"),x_t=v(async(e,t)=>{let r={minDelay:30,maxDelay:120},n=await(0,dn.createWaiter)({...r,...e},t,d_e);return(0,dn.checkExceptions)(n)},"waitUntilDBInstanceDeleted")});var cW=w(uW=>{"use strict";Object.defineProperty(uW,"__esModule",{value:!0});Object.defineProperty(uW,"hckFetch",{enumerable:!0,get:function(){return G_t}});function sW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}s(sW,"_array_like_to_array");function P_t(e){if(Array.isArray(e))return sW(e)}s(P_t,"_array_without_holes");function p_e(e,t,r,n,i,o,a){try{var u=e[o](a),l=u.value}catch(f){r(f);return}u.done?t(l):Promise.resolve(l).then(n,i)}s(p_e,"asyncGeneratorStep");function m_e(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(l){p_e(o,n,i,a,u,"next",l)}s(a,"_next");function u(l){p_e(o,n,i,a,u,"throw",l)}s(u,"_throw"),a(void 0)})}}s(m_e,"_async_to_generator");function g_e(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(g_e=s(function(n){return n?r:t},"_getRequireWildcardCache"))(e)}s(g_e,"_getRequireWildcardCache");function B_t(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=g_e(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}s(B_t,"_interop_require_wildcard");function M_t(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}s(M_t,"_iterable_to_array");function F_t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}s(F_t,"_non_iterable_spread");function y_e(e){return P_t(e)||M_t(e)||q_t(e)||F_t()}s(y_e,"_to_consumable_array");function q_t(e,t){if(e){if(typeof e=="string")return sW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sW(e,t)}}s(q_t,"_unsupported_iterable_to_array");function v_e(e,t){var r,n,i,o,a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=f[0]&2?n.return:f[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,f[1])).done)return i;switch(n=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return a.label++,{value:f[1],done:!1};case 5:a.label++,n=f[1],f=[0];continue;case 7:f=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){a=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){a.label=f[1];break}if(f[0]===6&&a.label<i[1]){a.label=i[1],i=f;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(f);break}i[2]&&a.ops.pop(),a.trys.pop();continue}f=t.call(e,a)}catch(h){f=[6,h],n=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}s(v_e,"_ts_generator");function L_t(){var e;return((e=globalThis.process)===null||e===void 0?void 0:e.type)==="browser"}s(L_t,"isElectronMain");function U_t(){var e;return((e=globalThis.process)===null||e===void 0?void 0:e.type)==="utility"}s(U_t,"isElectronUtilityProcess");function j_t(){return L_t()||U_t()}s(j_t,"useElectronNet");function $_t(e){return oW.apply(this,arguments)}s($_t,"fetchUsingElectronNet");function oW(){return oW=m_e(function(e){var t,r;return v_e(this,function(n){switch(n.label){case 0:return[4,Promise.resolve().then(function(){return B_t(require("electron"))})];case 1:return r=n.sent().net,[2,(t=r).fetch.apply(t,y_e(e))]}})}),oW.apply(this,arguments)}s(oW,"_fetchUsingElectronNet");function k_t(e){return aW.apply(this,arguments)}s(k_t,"fetchUsingGlobalContext");function aW(){return aW=m_e(function(e){var t;return v_e(this,function(r){if(typeof globalThis.fetch!="function")throw new Error("fetch() is not available in the global context!");return[2,(t=globalThis).fetch.apply(t,y_e(e))]})}),aW.apply(this,arguments)}s(aW,"_fetchUsingGlobalContext");function G_t(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return j_t()?$_t(t):k_t(t)}s(G_t,"hckFetch")});var b_e=w(dW=>{"use strict";Object.defineProperty(dW,"__esModule",{value:!0});Object.defineProperty(dW,"hckFetchAwsSdkHttpHandler",{enumerable:!0,get:function(){return rSt}});var __e=wj(),S_e=Or(),W_t=X_(),z_t=cW();function H_t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}s(H_t,"_assert_this_initialized");function E_e(e,t,r,n,i,o,a){try{var u=e[o](a),l=u.value}catch(f){r(f);return}u.done?t(l):Promise.resolve(l).then(n,i)}s(E_e,"asyncGeneratorStep");function V_t(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(l){E_e(o,n,i,a,u,"next",l)}s(a,"_next");function u(l){E_e(o,n,i,a,u,"throw",l)}s(u,"_throw"),a(void 0)})}}s(V_t,"_async_to_generator");function Y_t(e,t,r){return t=CR(t),Z_t(e,w_e()?Reflect.construct(t,r||[],CR(e).constructor):t.apply(e,r))}s(Y_t,"_call_super");function K_t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}s(K_t,"_class_call_check");function C_e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}s(C_e,"_defineProperties");function X_t(e,t,r){return t&&C_e(e.prototype,t),r&&C_e(e,r),e}s(X_t,"_create_class");function J_t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}s(J_t,"_define_property");function CR(e){return CR=Object.setPrototypeOf?Object.getPrototypeOf:s(function(r){return r.__proto__||Object.getPrototypeOf(r)},"getPrototypeOf"),CR(e)}s(CR,"_get_prototype_of");function Q_t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lW(e,t)}s(Q_t,"_inherits");function Z_t(e,t){return t&&(eSt(t)==="object"||typeof t=="function")?t:H_t(e)}s(Z_t,"_possible_constructor_return");function lW(e,t){return lW=Object.setPrototypeOf||s(function(n,i){return n.__proto__=i,n},"setPrototypeOf"),lW(e,t)}s(lW,"_set_prototype_of");function eSt(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}s(eSt,"_type_of");function w_e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w_e=s(function(){return!!e},"_is_native_reflect_construct"))()}s(w_e,"_is_native_reflect_construct");function tSt(e,t){var r,n,i,o,a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(f){return function(h){return l([f,h])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=f[0]&2?n.return:f[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,f[1])).done)return i;switch(n=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return a.label++,{value:f[1],done:!1};case 5:a.label++,n=f[1],f=[0];continue;case 7:f=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){a=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){a.label=f[1];break}if(f[0]===6&&a.label<i[1]){a.label=i[1],i=f;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(f);break}i[2]&&a.ops.pop(),a.trys.pop();continue}f=t.call(e,a)}catch(h){f=[6,h],n=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}s(tSt,"_ts_generator");function rSt(e){return new nSt(e)}s(rSt,"hckFetchAwsSdkHttpHandler");var nSt=function(e){"use strict";Q_t(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K_t(this,t);var n;return n=Y_t(this,t,[r]),J_t(n,"options",void 0),n.options=r,n}return s(t,"HckFetchAwsSdkHttpHandler"),X_t(t,[{key:"handle",value:s(function(n){var i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).abortSignal,o=this;return V_t(function(){var a,u,l,f,h,p,g,_,C,D,O,N,F,x,P,X,G,ue,be,Q,Se,Ce;return tSt(this,function(le){return u=o.options.requestTimeout,l=o.options.keepAlive===!0,f=o.options.credentials,i!=null&&i.aborted?(h=new Error("Request aborted"),h.name="AbortError",[2,Promise.reject(h)]):(p=n.path,g=(0,W_t.buildQueryString)(n.query||{}),g&&(p+="?".concat(g)),n.fragment&&(p+="#".concat(n.fragment)),_="",(n.username!=null||n.password!=null)&&(D=(C=n.username)!==null&&C!==void 0?C:"",N=(O=n.password)!==null&&O!==void 0?O:"",_="".concat(D,":").concat(N,"@")),F=n.port,x=n.method,P="".concat(n.protocol,"//").concat(_).concat(n.hostname).concat(F?":".concat(F):"").concat(p),X=x==="GET"||x==="HEAD"?void 0:n.body,G=new Headers(n.headers),ue=["content-length","host"],ue.forEach(function(ce){return G.delete(ce)}),be={body:X,headers:G,method:x,credentials:f},!((a=o.options)===null||a===void 0)&&a.cache&&(be.cache=o.options.cache),X&&(be.duplex="half"),typeof AbortController<"u"&&(be.signal=i),__e.keepAliveSupport.supported&&(be.keepalive=l),typeof o.options.requestInit=="function"&&Object.assign(be,o.options.requestInit(n)),Q=s(function(){},"removeSignalEventListener"),Se=new Request(P,be),Ce=[(0,z_t.hckFetch)(Se).then(function(ce){var ve=ce.headers,Pe={},Ee=!0,Oe=!1,dt=void 0;try{for(var Fe=ve.entries()[Symbol.iterator](),rt;!(Ee=(rt=Fe.next()).done);Ee=!0){var Kn=rt.value;Pe[Kn[0]]=Kn[1]}}catch(Lr){Oe=!0,dt=Lr}finally{try{!Ee&&Fe.return!=null&&Fe.return()}finally{if(Oe)throw dt}}var Cr=ce.body!=null;return Cr?{response:new S_e.HttpResponse({headers:Pe,reason:ce.statusText,statusCode:ce.status,body:ce.body})}:ce.blob().then(function(Lr){return{response:new S_e.HttpResponse({headers:Pe,reason:ce.statusText,statusCode:ce.status,body:Lr})}})}),iSt(u)],i&&Ce.push(new Promise(function(ce,ve){var Pe=s(function(){var Oe=new Error("Request aborted");Oe.name="AbortError",ve(Oe)},"onAbort");if(typeof i.addEventListener=="function"){var Ee=i;Ee.addEventListener("abort",Pe,{once:!0}),Q=s(function(){return Ee.removeEventListener("abort",Pe)},"removeSignalEventListener")}else i.onabort=Pe})),[2,Promise.race(Ce).finally(Q)])})})()},"handle")}]),t}(__e.FetchHttpHandler);function iSt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise(function(t,r){e&&setTimeout(function(){var n=new Error("Request did not complete within ".concat(e," ms"));n.name="TimeoutError",r(n)},e)})}s(iSt,"requestTimeout")});var T_e=w(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});O_e(cW(),wR);O_e(b_e(),wR);function O_e(e,t){return Object.keys(e).forEach(function(r){r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),e}s(O_e,"_export_star")});var I_e=w((nMt,A_e)=>{"use strict";var{head:sSt}=LZ(),{DocDBClient:oSt,DescribeDBClustersCommand:aSt,ListTagsForResourceCommand:uSt}=h_e(),{hckFetchAwsSdkHttpHandler:cSt}=T_e(),bR=null,lSt=s(({connectionInfo:e={}}={})=>{if(bR)return bR;let{region:t,accessKeyId:r,secretAccessKey:n,sessionToken:i,queryRequestTimeout:o,dbClusterIdentifier:a}=e,u=new oSt({region:t,credentials:{accessKeyId:r,secretAccessKey:n,sessionToken:i},requestHandler:cSt({requestTimeout:o})});return bR={async getCluster(){let l=await u.send(new aSt({DBClusterIdentifier:a}));return sSt(l.DBClusters)},getRegion(){return e.region},tags(l){return u.send(new uSt({ResourceName:l}))}},bR},"getDocDbClientInstance");A_e.exports={getDocDbClientInstance:lSt}});var OR=dH(),fW=Nw(),TR=BZ(),{createLogger:hW,getSystemInfo:D_e}=qZ(),{getDocDbClientInstance:R_e}=I_e();module.exports={disconnect:async function(e,t,r,n){let i=n.require("@hackolade/ssh-service");TR.close(i),r()},async testConnection(e,t,r,n){let i=n.require("@hackolade/ssh-service"),o=hW({title:"Test connection",hiddenKeys:e.hiddenKeys,logger:t});try{t.clear(),o.info(D_e(e.appVersion)),o.info(e),await TR.connect(e,i),o.info("Connected successfully"),r()}catch(a){return o.error(a),r({message:a.message,stack:a.stack})}},async getDbCollectionsNames(e,t,r,n){let i=n.require("@hackolade/ssh-service"),o=hW({title:"Retrieving databases and collections information",hiddenKeys:e.hiddenKeys,logger:t});try{R_e({connectionInfo:{...e,...SSt(e.host,o)}}),t.clear(),o.info(D_e(e.appVersion)),o.info(e);let a=e.includeSystemCollection,u=await TR.connect(e,i),l=await u.getDatabases(),f=await OR.mapSeries(l,async h=>{let g=(await u.getCollections(h.name)).map(_=>_.name);return o.info({message:"Found collections",collections:g}),g=await OR.filter(g,async _=>u.hasPermission(h.name,_)),o.info({message:"Collections that user has access to",collections:g}),a||(g=hSt(g)),o.info({message:"Collections to process",collections:g}),{dbName:h.name,dbCollections:g,isEmpty:g.length===0}});o.info("Names retrieved successfully"),r(null,f)}catch(a){o.error(a),r({message:a.message,stack:a.stack})}},async getDbCollectionsData(e,t,r){var i;let n=hW({title:"Retrieving data for inferring schema",hiddenKeys:e.hiddenKeys,logger:t});try{let{recordSamplingSettings:o,fieldInference:a,includeEmptyCollection:u,collectionData:l}=e,f=N_e(e.queryCriteria),h=N_e(e.sortCriteria),p=Number(e.queryRequestTimeout)||12e4,g=R_e();n.info({title:"Parameters",sampling:fSt(o,a),data:e});let _=await TR.connect(),D={version:(await _.getBuildInfo()).version};n.progress("Start reverse-engineering");try{n.info("Getting cluster information"),n.progress("Getting cluster information ...");let N=await g.getCluster();if(!N)throw new Error("Cluster doesn't exist in the chosen region.");let F=await g.tags(N.DBClusterArn),x=vSt(N);D={...D,"source-region":g.getRegion(),...x,tags:(i=F.TagList)==null?void 0:i.map(P=>({tagName:P.Key,tagValue:P.Value}))}}catch(N){n.progress("[color:red]Error of getting cluster information"),n.info("Cannot get information about the cluster from AWS. Please, check AWS credentials in the connection settings."),n.error(N)}let O=await OR.reduce(l.dataBaseNames,[],async(N,F)=>OR.reduce(l.collections[F],N,async(x,P)=>{n.info({message:"Calculate count of documents",dbName:F,collectionName:P}),n.progress("Calculate count of documents",F,P);let X=await _.getCount(F,P);if(!u&&X===0)return x;let G=pSt(X,o);n.info({message:"Getting documents for sampling",dbName:F,collectionName:P,countOfDocuments:X,documentsToSample:G}),n.progress("Getting documents for sampling",F,P);let ue=await _.getRandomDocuments(F,P,{maxTimeMS:p,limit:G,query:f,sort:h}),be={};a.active==="field"&&(n.info({message:"Getting a document for inferring",dbName:F,collectionName:P}),n.progress("Getting a document for inferring",F,P),be=await _.findOne(F,P,f)),n.info({message:"Getting indexes",dbName:F,collectionName:P}),n.progress("Getting indexes",F,P);let Q=await _.getIndexes(F,P),Se={dbName:F,collectionName:P,documents:ue,relationshipDocuments:dSt(ue),primaryKey:"_id",standardDoc:be,validation:{jsonSchema:pW(ue[0])},entityLevel:{Indxs:mSt(Q)}};return n.info({message:"Collection processed",dbName:F,collectionName:P}),n.progress("Collection processed",F,P),x.concat(Se)}));r(null,O,D,[])}catch(o){n.error(o),r({message:o.message,stack:o.stack})}}};var N_e=s(e=>{try{return JSON.parse(e)}catch{return{}}},"safeParse"),dSt=s(e=>{let t=s(i=>i&&typeof i=="object","isObject"),r=s(i=>i?Array.isArray(i)?i.length===0:t(i)?Object.keys(i).length===0:!1:!0,"isEmpty"),n=s(i=>Object.keys(i).reduce((o,a)=>{var u,l;if(((u=i==null?void 0:i[a])==null?void 0:u._bsontype)==="ObjectID")return{...o,[a]:i[a]};if(((l=i==null?void 0:i[a])==null?void 0:l._bsontype)==="DBRef")return{...o};if(t(i[a])||Array.isArray(i[a])){let f=n(i[a]);return r(f)?{...o}:{...o,[a]:f}}return{...o}},{}),"iterateProps");return e.map(i=>n(i)).filter(i=>!r(i))},"filterPotentialForeignKeys");function fSt(e,t){let r={},n=e[e.active].value,i=e.active==="relative"?"%":" records max";return r.recordSampling=`${e.active} ${n}${i}`,r.fieldInference=t.active==="field"?"keep field order":"alphabetical order",r}s(fSt,"getSamplingInfo");function hSt(e){return e.filter(t=>(t==null?void 0:t.length)<8||(t==null?void 0:t.substring(0,7))!=="system.")}s(hSt,"filterSystemCollections");var pSt=s((e,t)=>{if(t.active==="absolute")return Number(t.absolute.value);let r=Math.ceil(e*t.relative.value/100);return Math.min(r,t.maxValue)},"getSampleDocSize");function pW(e){if(!(e instanceof fW.ObjectID||e instanceof fW.DBRef))if(Array.isArray(e)){let t=pW(e[0]);if(t)return{items:t}}else{if(e instanceof fW.Long)return{type:"numeric",mode:"int64"};if(typeof e=="number"&&e%1!==0)return{type:"numeric",mode:"double"};if(typeof e=="number"&&Math.abs(e)<2**32)return{type:"numeric",mode:"int32"};if(e&&typeof e=="object"){let t=Object.keys(e).reduce((r,n)=>{let i=pW(e[n]);return i?{...r,[n]:i}:r},{});return Object.keys(t).length===0?void 0:{properties:t}}}}s(pW,"getJsonSchema");function mSt(e){return e.filter(t=>t.name!=="_id_").map(t=>({name:t.name,key:Object.keys(t.key).map(r=>({name:r,type:gSt(t.key[r])})),sparse:t.sparse,unique:t.unique,expireAfterSeconds:t.expireAfterSeconds,"2dsphere":t["2dsphereIndexVersion"]?ySt(t["2dsphereIndexVersion"]):{}}))}s(mSt,"getIndexes");var gSt=s(e=>{switch(e){case 1:return"ascending";case-1:return"descending";case"2dsphere":return"2DSphere"}return"ascending"},"getIndexType"),ySt=s(e=>{let t="default";return e===1&&(t="Version 1"),e===2&&(t="Version 2"),{"2dsphereIndexVersion":t}},"getGeoIndexVersion"),vSt=s(e=>{var t;return{dbInstances:(t=e.DBClusterMembers)==null?void 0:t.map(r=>({dbInstanceIdentifier:r.DBInstanceIdentifier,dbInstanceRole:r.IsClusterWriter?"Primary":"Replica"})),DBClusterIdentifier:e.DBClusterIdentifier,DBClusterArn:e.DBClusterArn,Endpoint:e.Endpoint,ReaderEndpoint:e.ReaderEndpoint,MultiAZ:e.MultiAZ,Port:e.Port??27017,DBClusterParameterGroup:e.DBClusterParameterGroup,DbClusterResourceId:e.DbClusterResourceId,StorageEncrypted:e.StorageEncrypted,BackupRetentionPeriod:String(e.BackupRetentionPeriod??""),auditLog:!1,maintenance:!!e.PreferredMaintenanceWindow,...e.PreferredMaintenanceWindow?_St(e.PreferredMaintenanceWindow):{}}},"getClusterData"),_St=s(e=>{let t=s(o=>{let a=o.slice(0,3);return{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}[a]||"Sunday"},"getDay"),r=s(o=>{let a=o.slice(4),[u,l]=a.split(":"),f=new Date(0);return f.setHours(+u),f.setMinutes(+l),f},"getTime"),[n,i]=e.split("-");return{startDay:t(n),startHour:String(r(n).getHours()).padStart(2,"0"),startMinute:String(r(n).getMinutes()).padStart(2,"0"),duration:String((r(i)-r(n))/(1e3*60*60))}},"parseMaintenance"),SSt=s((e,t)=>{try{let[r,,n]=e.split(".");return{dbClusterIdentifier:r,region:n}}catch(r){t.error(r)}},"parseHost");
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
